<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="刘小恺" />



<meta name="description" content="Splash的功能介绍和运行Splash的简介Splash是一个JavaScript渲染服务，是一个带有HTTP API的轻量级浏览器，同时它对接了Python中的Twisted和QT库。利用它，我们同样可以实现动态渲染页面的抓取。Splash文档Splash官方文档https://splash.readthedocs.io/en/stable/scripting-ref.htmlSplash-a">
<meta property="og:type" content="article">
<meta property="og:title" content="刘小恺(Kyle) 的个人博客">
<meta property="og:url" content="http://blog.kyleliu.cn/2018/10/18/4.python爬虫/爬虫基础/Splash动态爬取/index.html">
<meta property="og:site_name" content="刘小恺(Kyle) 的个人博客">
<meta property="og:description" content="Splash的功能介绍和运行Splash的简介Splash是一个JavaScript渲染服务，是一个带有HTTP API的轻量级浏览器，同时它对接了Python中的Twisted和QT库。利用它，我们同样可以实现动态渲染页面的抓取。Splash文档Splash官方文档https://splash.readthedocs.io/en/stable/scripting-ref.htmlSplash-a">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-10-18T11:53:54.117Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="刘小恺(Kyle) 的个人博客">
<meta name="twitter:description" content="Splash的功能介绍和运行Splash的简介Splash是一个JavaScript渲染服务，是一个带有HTTP API的轻量级浏览器，同时它对接了Python中的Twisted和QT库。利用它，我们同样可以实现动态渲染页面的抓取。Splash文档Splash官方文档https://splash.readthedocs.io/en/stable/scripting-ref.htmlSplash-a">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="刘小恺(Kyle) 的个人博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>刘小恺(Kyle) 的个人博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: 
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">刘小恺</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Python 、  Machine learning 、 Docker、 爬虫</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/octave/">octave</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机器学习/">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/梯度下降/">梯度下降</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">刘小恺</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">刘小恺</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Python 、  Machine learning 、 Docker、 爬虫</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-4.python爬虫/爬虫基础/Splash动态爬取" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/10/18/4.python爬虫/爬虫基础/Splash动态爬取/" class="article-date">
      <time datetime="2018-10-18T12:22:23.232Z" itemprop="datePublished">2018-10-18</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Splash的功能介绍和运行<br>Splash的简介<br>Splash是一个JavaScript渲染服务，是一个带有HTTP API的轻量级浏览器，同时它对接了Python中的Twisted和QT库。利用它，我们同样可以实现动态渲染页面的抓取。<br>Splash文档<br>Splash官方文档<br><a href="https://splash.readthedocs.io/en/stable/scripting-ref.html" target="_blank" rel="noopener">https://splash.readthedocs.io/en/stable/scripting-ref.html</a><br>Splash-api官方文档<br><a href="https://splash.readthedocs.io/en/stable/api.html" target="_blank" rel="noopener">https://splash.readthedocs.io/en/stable/api.html</a><br>Splash的功能<br>异步方式处理多个网页渲染过程；<br>获取渲染后的页面的源代码或截图；<br>通过关闭图片渲染或者使用Adblock规则来加快页面渲染速度；<br>可执行特定的JavaScript脚本；<br>可通过Lua脚本来控制页面渲染过程；<br>获取渲染的详细过程并通过HAR（HTTP Archive）格式呈现。<br>Splash服务的运行<br>docker run -d -p 8050:8050 scrapinghub/splash<br>打开<a href="http://localhost:8050/即可看到其Web页面" target="_blank" rel="noopener">http://localhost:8050/即可看到其Web页面</a><br>Splash-Lua脚本介绍<br>Splash的运行机制<br>Splash加载和操作渲染过程，可以理解是由一段Lua代码来操控<br>Splash留出来了一个main() 函数的接口，我们可以通过编写该段函数，操作其传入的splash对象，Splash会调用其指令并执行对应的操作<br>可以在浏览器界面编写并点击render me来启动，也可以通过调用splash-api的方式来调用<br>Splash Lua脚本示例<br>function main(splash, args)<br>assert(splash:go(args.url))         请求url<br>assert(splash:wait(0.5))       等待0.5s<br>return {       返回结果<br>html = splash:html(),            获取页面源码<br>png = splash:png(),        获取页面截图<br>har = splash:har(),        获取请求的详细har信息<br>}<br>end<br>Splash异步处理<br>Splash异步的介绍<br>在脚本内调用的wait()方法类似于Python中的sleep()，其参数为等待的秒数。当Splash执行到此方法时，它会转而去处理其他任务，然后在指定的时间过后再回来继续处理。<br>另外，这里做了加载时的异常检测。go()方法会返回加载页面的结果状态，如果页面出现4xx或5xx状态码，ok变量就为空<br>Splash异步脚本示例<br>function main(splash, args)<br>local example_urls = {“<a href="http://www.baidu.com&quot;" target="_blank" rel="noopener">www.baidu.com&quot;</a>, “<a href="http://www.taobao.com&quot;" target="_blank" rel="noopener">www.taobao.com&quot;</a>, “<a href="http://www.zhihu.com&quot;}" target="_blank" rel="noopener">www.zhihu.com&quot;}</a><br>local urls = args.urls or example_urls<br>local results = {}<br>for index, url in ipairs(urls) do<br>local ok, reason = splash:go(“http://“ .. url)<br>if ok then<br>splash:wait(2)<br>results[url] = splash:png()<br>end<br>end<br>return results<br>end<br>Splash负载均衡的配置<br>搭建多个splash服务节点<br>docker run -d -p 8050:8050 scrapinghub/splash<br>配置负载均衡服务(使用nginx)<br>nginx配置节点<br>​            http {<br>​                upstream splash {<br>​                    least_conn;<br>​                    server 41.159.27.223:8050 weight=4;<br>​                    server 41.159.27.221:8050 weight=2;<br>​                    server 41.159.27.9:8050 weight=2;<br>​                    server 41.159.117.119:8050 weight=1;<br>​                }<br>​                server {<br>​                    listen 8050;<br>​                    location / {<br>​                        proxy_pass <a href="http://splash" target="_blank" rel="noopener">http://splash</a>;<br>​                    }<br>​                }<br>​            }<br>nginx配置认证<br>现在Splash是可以公开访问的，如果不想让其公开访问，还可以配置认证，这仍然借助于Nginx。可以在server的location字段中添加auth_basic和auth_basic_user_file字段，具体配置如下：<br>这里使用的用户名和密码配置放置在/etc/nginx/conf.d目录下，我们需要使用htpasswd命令创建。例如，创建一个用户名为admin的文件，相关命令如下<br>htpasswd -c .htpasswd admin<br>接下来就会提示我们输入密码，输入两次之后，就会生成密码文件，其内容如下：<br>配置完成后，重启一下Nginx服务： sudo nginx -s reload<br>​                server {<br>​                    listen 8050;<br>​                    location / {<br>​                        proxy_pass <a href="http://splash" target="_blank" rel="noopener">http://splash</a>;<br>​                        auth_basic “Restricted”;<br>​                        auth_basic_user_file /etc/nginx/conf.d/.htpasswd;<br>​                    }<br>​                }<br>Splash对象的常用属性<br>加载参数<br>获取方法一<br>​            function main(splash, args)<br>​                local url = args.url<br>​            end<br>获取方法二<br>​            function main(splash)<br>​                local url = splash.args.url<br>​            end<br>开启关闭javascript<br>splash.js_enabled = false/true<br>设置加载的超时时间<br>splash.resource_timeout = 2<br>单位是秒。如果设置为0或nil（类似Python中的None），代表不检测超时。<br>禁止加载图片<br>splash.images_enabled = true/false<br>禁止开启插件(flash等)<br>splash.plugins_enabled = true/false<br>滚动条<br>splash.scroll_position = {x=100, y=400}<br>滚动条向右滚动100像素，向下滚动400像素<br>Splash对象常用方法<br>请求某链接<br>使用方法<br>splash:go{url, baseurl=nil, headers=nil, http_method=”GET”, body=nil, formdata=nil}<br>url：请求的URL。<br>baseurl：可选参数，默认为空，表示资源加载相对路径。<br>headers：可选参数，默认为空，表示请求头。<br>http_method：可选参数，默认为GET，同时支持POST。<br>body：可选参数，默认为空，发POST请求时的表单数据，使用的Content-type为application/json。<br>formdata：可选参数，默认为空，POST的时候的表单数据，使用的Content-type为application/x-www-form-urlencoded。<br>return: 结果ok和原因reason的组合，如果ok为空，代表网页加载出现了错误，此时reason变量中包含了错误的原因<br>使用示例<br>​            function main(splash, args)<br>​                local ok, reason = splash:go{“<a href="http://httpbin.org/post&quot;" target="_blank" rel="noopener">http://httpbin.org/post&quot;</a>, http_method=”POST”, body=”name=Germey”}<br>​                if ok then<br>​                    return splash:html()<br>​                end<br>​            end<br>设置定时任务<br>使用示例(0.2s后获取网页截图)<br>​                    function main(splash, args)<br>​                             local snapshots = {}<br>​                             local timer = splash:call_later(function()<br>​                                 snapshots[“a”] = splash:png()<br>​                                 splash:wait(1.0)<br>​                                 snapshots[“b”] = splash:png()<br>​                                 end, 0.2)<br>​                             splash:go(“<a href="https://www.taobao.com&quot;" target="_blank" rel="noopener">https://www.taobao.com&quot;</a>)<br>​                             splash:wait(3.0)<br>​                             return snapshots<br>​                    end<br>模拟发送get请求<br>使用方法<br>response = splash:http_get{url, headers=nil, follow_redirects=true}<br>url：请求URL。<br>headers：可选参数，默认为空，请求头。<br>follow_redirects：可选参数，表示是否启动自动重定向，默认为true<br>使用示例<br>​            function main(splash, args)<br>​                local treat = require(“treat”)<br>​                local response = splash:http_get(“<a href="http://httpbin.org/get&quot;" target="_blank" rel="noopener">http://httpbin.org/get&quot;</a>)<br>​                    return {<br>​                        html=treat.as_string(response.body),<br>​                        url=response.url,<br>​                        status=response.status<br>​                    }<br>​            end<br>模拟发送post请求<br>使用方法<br>response = splash:http_post{url, headers=nil, follow_redirects=true, body=nil}<br>url：请求URL。<br>headers：可选参数，默认为空，请求头。<br>follow_redirects：可选参数，表示是否启动自动重定向，默认为true。<br>body：可选参数，即表单数据，默认为空。<br>使用示例<br>​            function main(splash, args)<br>​                local treat = require(“treat”)<br>​                local json = require(“json”)<br>​                local response = splash:http_post{“<a href="http://httpbin.org/post&quot;" target="_blank" rel="noopener">http://httpbin.org/post&quot;</a>,<br>​                    body=json.encode({name=”Germey”}),<br>​                    headers={[“content-type”]=”application/json”}<br>​                }<br>​                return {<br>​                    html=treat.as_string(response.body),<br>​                    url=response.url,<br>​                    status=response.status<br>​                }<br>​            end<br>获取页面加载过程描述等信息<br>使用方法<br>splash:har()        获取加载过程详细信息<br>splash:url()        获取正在访问的url<br>页面cookie相关操作<br>使用方法<br>splash:get_cookies()       获取当前页面的cookie<br>cookies = splash:add_cookie{name, value, path=nil, domain=nil, expires=nil, httpOnly=nil, secure=nil}    给页面添加cookie<br>splash:clear_cookies()    清空当前页面所有cookie<br>设置页面大小<br>使用方法<br>splash:get_viewport_size()    获取页面宽高<br>splash:set_viewport_size(width, height)    设置页面宽高<br>splash:set_viewport_full()    设置页面铺满<br>设置User-Agent<br>使用示例<br>​                    function main(splash)<br>​                            splash:set_user_agent(‘Splash’)<br>​                            splash:go(“<a href="http://httpbin.org/get&quot;" target="_blank" rel="noopener">http://httpbin.org/get&quot;</a>)<br>​                            return splash:html()<br>​                    end<br>设置请求头<br>使用示例<br>​                    function main(splash)<br>​                        splash:set_custom_headers({<br>​                                [“User-Agent”] = “Splash”,<br>​                                [“Site”] = “Splash”,<br>​                        })<br>​                        splash:go(“<a href="http://httpbin.org/get&quot;" target="_blank" rel="noopener">http://httpbin.org/get&quot;</a>)<br>​                        return splash:html()<br>​                    end<br>节点操作<br>使用方法<br>element = splash:select(“#kw”)    通过css选择器选择元素, 返回选中的第一个元素<br>element = splash:select_all(“#kw”)    通过css选择器选择元素, 返回选中所有元素<br>element.send_text(‘test’)     向节点输入文本<br>element.mouse_click()    点击节点<br>等待wait<br>使用方法<br>ok, reason = splash:wait{time, cancel_on_redirect=false, cancel_on_error=true}<br>time：等待的秒数。<br>cancel_on_redirect：可选参数，默认为false，表示如果发生了重定向就停止等待，并返回重定向结果。<br>cancel_on_error：可选参数，默认为false，表示如果发生了加载错误，就停止等待。<br>return: 结果ok和原因reason的组合。<br>使用示例<br>​            function main(splash)<br>​                splash:go(“<a href="https://www.taobao.com&quot;" target="_blank" rel="noopener">https://www.taobao.com&quot;</a>)<br>​                splash:wait(2)<br>​                return {html=splash:html()}<br>​            end<br>调用JavaScript定义的方法<br>使用示例<br>​                    function main(splash, args)<br>​                            local get_div_count = splash:jsfunc([[<br>​                                    function () {<br>​                                    var body = document.body;<br>​                                    var divs = body.getElementsByTagName(‘div’);<br>​                                    return divs.length;<br>​                                    }<br>​                                    ]])<br>​                            splash:go(“<a href="https://www.baidu.com&quot;" target="_blank" rel="noopener">https://www.baidu.com&quot;</a>)<br>​                            return (“There are %s DIVs”):format(get_div_count())<br>​                    end<br>执行JavaScript代码(表达式类)<br>使用示例<br>local title = splash:evaljs(“document.title”)  执行JavaScript代码并返回最后一条JavaScript语句的返回结果<br>执行JavaScript代码(声明类)<br>使用示例<br>​                    function main(splash, args)<br>​                         splash:go(“<a href="https://www.baidu.com&quot;" target="_blank" rel="noopener">https://www.baidu.com&quot;</a>)<br>​                          splash:runjs(“foo = function() { return ‘bar’ }”)<br>​                          local result = splash:evaljs(“foo()”)<br>​                          return result<br>​                    end<br>加载js代码<br>使用方法<br>此方法只负责加载JavaScript代码或库，不执行任何操作。如果要执行操作，可以调用evaljs()或runjs()<br>ok, reason = splash:autoload{source_or_url, source=nil, url=nil}<br>source_or_url：JavaScript代码或者JavaScript库链接。<br>source：JavaScript代码。<br>url：JavaScript库链接<br>使用示例<br>​                    function main(splash, args)<br>​                          splash:autoload([[<br>​                                  function get_document_title(){<br>​                                         return document.title;<br>​                            }<br>​                          ]])<br>​                          splash:go(“<a href="https://www.baidu.com&quot;" target="_blank" rel="noopener">https://www.baidu.com&quot;</a>)<br>​                          return splash:evaljs(“get_document_title()”)<br>​                    end<br>页面内容的操作方法<br>使用方法<br>splash:set_content(“<html><body><h1>hello</h1></body></html>“)     添加页面内容<br>splash:html()    获取当前页面源码<br>获取png/jpeg格式的页面截图<br>使用方法<br>splash:png()<br>splash:jpeg()<br>设置代理<br>使用示例<br>​                    function main(splash, args)<br>​                           request = splash:on_request(function(request)<br>​                                    request:set_proxy{host, port, username=nil, password=nil, type=’HTTP/SOCKS5’)<br>​                                    end)<br>​                    end<br>Splash-API的使用<br>Splash API的介绍<br>Splash Lua脚本的用法，但这些脚本是在Splash页面中测试运行的<br>Splash API就是我们可以通过python程序使用Splash服务的方法<br>Splash给我们提供了一些HTTP API接口，我们只需要请求这些接口并传递相应的参数即可<br>常用Splash API<br>render.png<br>接口介绍<br>通过width和height来控制宽高，它返回的是PNG格式的图片二进制数据。示例如下<br>常用参数<br>width、height、render_all<br>使用示例<br>​                        import requests<br>​                        url = ‘<a href="http://localhost:8050/render.png?url=https://www.jd.com&amp;wait=5&amp;width=1000&amp;height=700&#39;" target="_blank" rel="noopener">http://localhost:8050/render.png?url=https://www.jd.com&amp;wait=5&amp;width=1000&amp;height=700&#39;</a><br>​                        response = requests.get(url)<br>​                        with open(‘taobao.png’, ‘wb’) as f:<br>​                               f.write(response.content)<br>render.html<br>接口介绍<br>此接口用于获取JavaScript渲染的页面的HTML代码，接口地址就是Splash的运行地址加此接口名称<br>常用参数<br>url 、baseurl、timeout、resource_timeout、wait、proxy、js、js_source、filter、allowed_domin<br>allowed_content_types、viewport、images、headers、body、heep_method、save_args、load_args<br>使用示例<br>​            import requests<br>​            url = ‘<a href="http://localhost:8050/render.html?url=https://www.baidu.com&#39;" target="_blank" rel="noopener">http://localhost:8050/render.html?url=https://www.baidu.com&#39;</a><br>​            response = requests.get(url)<br>​            print(response.text)<br>render.har<br>接口介绍<br>此接口用于获取页面加载的HAR数据<br>使用示例<br>curl <a href="http://localhost:8050/render.har?url=https://www.jd.com&amp;wait=5" target="_blank" rel="noopener">http://localhost:8050/render.har?url=https://www.jd.com&amp;wait=5</a><br>render.json<br>接口介绍<br>此接口包含了前面接口的所有功能，返回结果是JSON格式<br>以JSON形式返回了相应的请求数据<br>可以通过传入不同参数控制其返回结果。比如，传入html=1，返回结果即会增加源代码数据；传入png=1，返回结果即会增加页面PNG截图数据；传入har=1，则会获得页面HAR数据<br>使用示例<br>curl <a href="http://localhost:8050/render.json?url=https://httpbin.org" target="_blank" rel="noopener">http://localhost:8050/render.json?url=https://httpbin.org</a><br>execute<br>接口介绍<br>用此接口便可实现与Lua脚本的对接<br>可以用该接口，通过原生的Lua脚本来调用splash<br>可以通过lua_source参数传递Lua脚本给splash服务器进行请求和渲染服务<br>常用参数<br>timeout、allowed_domains、proxy、filters、save_args、load_args<br>使用示例<br>​                        import requests<br>​                        from urllib.parse import quote<br>​                        lua = ‘’’<br>​                            function main(splash)<br>​                                return ‘hello’<br>​                            end<br>​                         ‘’’<br>​                        url = ‘<a href="http://localhost:8050/execute?lua_source=&#39;" target="_blank" rel="noopener">http://localhost:8050/execute?lua_source=&#39;</a> + quote(lua)<br>​                        response = requests.get(url)<br>​                        print(response.text)</p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2018/10/18/4.python爬虫/爬虫基础/Splash动态爬取/"></a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">刘小恺</a></p>
        <p><span>发布时间:</span>2018-10-18, 20:22:23</p>
        <p><span>最后更新:</span>2018-10-18, 19:53:54</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2018/10/18/4.python爬虫/爬虫基础/Splash动态爬取/" title="">http://blog.kyleliu.cn/2018/10/18/4.python爬虫/爬虫基础/Splash动态爬取/</a>
            <span class="copy-path" data-clipboard-text="原文: http://blog.kyleliu.cn/2018/10/18/4.python爬虫/爬虫基础/Splash动态爬取/　　作者: 刘小恺" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2018/10/18/4.python爬虫/爬虫基础/多线程爬虫/">
                    
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2018/10/18/4.python爬虫/爬虫基础/Selenium动态爬取/">
                    
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">1.</span> <span class="toc-text">hello</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"　| 刘小恺(Kyle) 的个人博客　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2018/10/18/4.python爬虫/爬虫基础/多线程爬虫/" title="上一篇: ">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2018/10/18/4.python爬虫/爬虫基础/Selenium动态爬取/" title="下一篇: ">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/10/26/10.机器学习/基础内容/octave 基础操作/">Octave基础操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/20/10.机器学习/基础内容/线型回归/">线型回归 & 梯度下降</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/19/10.机器学习/基础内容/机器学习介绍/">机器学习介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/数据格式化输出/">4.python爬虫/scrapy框架/数据格式化输出</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/Scrapy框架介绍/">4.python爬虫/scrapy框架/Scrapy框架介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/scrapy对接splash/">4.python爬虫/scrapy框架/scrapy对接splash</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/scrapy_redis框架/">4.python爬虫/scrapy框架/scrapy_redis框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/scrapyd部署总结/">4.python爬虫/scrapy框架/scrapyd部署总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/Scrapy-settinglog信息/">4.python爬虫/scrapy框架/Scrapy-settinglog信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/Scrapy-pipeline/">4.python爬虫/scrapy框架/Scrapy-pipeline</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/Scrapy-middleware/">4.python爬虫/scrapy框架/Scrapy-middleware</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/Scrapy-items&spider/">4.python爬虫/scrapy框架/Scrapy-items&spider</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/scrapy框架/Gerapy的介绍/">4.python爬虫/scrapy框架/Gerapy的介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫基础/网络爬虫介绍/">4.python爬虫/爬虫基础/网络爬虫介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫基础/爬虫相关工具列表/">4.python爬虫/爬虫基础/爬虫相关工具列表</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫基础/正则表达式/">4.python爬虫/爬虫基础/正则表达式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫基础/数据提取 json  Xpath/">4.python爬虫/爬虫基础/数据提取 json  Xpath</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫基础/多线程爬虫/">4.python爬虫/爬虫基础/多线程爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫基础/Splash动态爬取/">4.python爬虫/爬虫基础/Splash动态爬取</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫基础/Selenium动态爬取/">4.python爬虫/爬虫基础/Selenium动态爬取</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫基础/Request模块使用/">4.python爬虫/爬虫基础/Request模块使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫基础/Puppeteer动态爬取/">4.python爬虫/爬虫基础/Puppeteer动态爬取</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫扩展功能/数据快速写入Csv文件/">4.python爬虫/爬虫扩展功能/数据快速写入Csv文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫扩展功能/数据去重方法-HashBloom/">4.python爬虫/爬虫扩展功能/数据去重方法-HashBloom</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫扩展功能/mitmproxy&mitmdump手机爬虫/">4.python爬虫/爬虫扩展功能/mitmproxy&mitmdump手机爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫扩展功能/Fiddler抓包工具安装、配置/">4.python爬虫/爬虫扩展功能/Fiddler抓包工具安装、配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫扩展功能/Fiddler在ios上配置/">4.python爬虫/爬虫扩展功能/Fiddler在ios上配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫扩展功能/Fiddler在Android上配置/">4.python爬虫/爬虫扩展功能/Fiddler在Android上配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫扩展功能/Crontab定时执行爬虫/">4.python爬虫/爬虫扩展功能/Crontab定时执行爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫扩展功能/Charles抓包工具安装、配置/">4.python爬虫/爬虫扩展功能/Charles抓包工具安装、配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫扩展功能/Appium手机爬虫/">4.python爬虫/爬虫扩展功能/Appium手机爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫特殊反反爬/破解诡异字体/">4.python爬虫/爬虫特殊反反爬/破解诡异字体</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫特殊反反爬/参数伪造/">4.python爬虫/爬虫特殊反反爬/参数伪造</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫特殊反反爬/CssContent字体破解/">4.python爬虫/爬虫特殊反反爬/CssContent字体破解</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫特殊反反爬/CloudFlare邮箱加密(cfemail)/">4.python爬虫/爬虫特殊反反爬/CloudFlare邮箱加密(cfemail)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/celery分布式爬虫/分布式任务队列Celery/">4.python爬虫/celery分布式爬虫/分布式任务队列Celery</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/celery分布式爬虫/Celery构建一个分布式爬虫：理论篇/">4.python爬虫/celery分布式爬虫/Celery构建一个分布式爬虫：理论篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/celery分布式爬虫/Celery构建一个分布式爬虫：基础篇/">4.python爬虫/celery分布式爬虫/Celery构建一个分布式爬虫：基础篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/celery分布式爬虫/celery分布式：监控界面/">4.python爬虫/celery分布式爬虫/celery分布式：监控界面</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/celery分布式爬虫/Celery&flower 后台运行部署/">4.python爬虫/celery分布式爬虫/Celery&flower 后台运行部署</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫常见反反爬/滑动验证码识别/">4.python爬虫/爬虫常见反反爬/滑动验证码识别</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫常见反反爬/图片验证码-Tesseract破解/">4.python爬虫/爬虫常见反反爬/图片验证码-Tesseract破解</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫常见反反爬/代理池的搭建/">4.python爬虫/爬虫常见反反爬/代理池的搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫常见反反爬/Js压缩、混淆、加密及破解/">4.python爬虫/爬虫常见反反爬/Js压缩、混淆、加密及破解</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/4.python爬虫/爬虫常见反反爬/ADSL代理服务器搭建&代理池/">4.python爬虫/爬虫常见反反爬/ADSL代理服务器搭建&代理池</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/17/20.开发工具/博客/github+hexo博客搭建/">githubpage + hexo + yilia 搭建个人博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/17/11.Docker容器技术/Docker/搭建Registry私有库/">搭建Registry 私有库</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2018 刘小恺
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>