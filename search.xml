<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>数据降维 &amp; PCA</title>
      <link href="/2018/12/06/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PCA%E9%99%8D%E7%BB%B4/"/>
      <url>/2018/12/06/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PCA%E9%99%8D%E7%BB%B4/</url>
      
        <content type="html"><![CDATA[<h3 id="1-数据降维"><a href="#1-数据降维" class="headerlink" title="1. 数据降维"></a>1. 数据降维</h3><h4 id="数据降维目的"><a href="#数据降维目的" class="headerlink" title="数据降维目的"></a>数据降维目的</h4><p>数据降维是对数据进行压缩的一个强有力的工具，也是一个非监督学习算法。有几个不同的原因可能会让我们在进行建模的过程中对数据进行降维处理，一、数据压缩，不仅能让我们的数据占用比较少的计算机资源(硬盘、内存), 还可以通过减少特征的方式，来让我们的机器学习算法运行的更加快速;  二、数据可视化， 当数据的特征特别多的时候，我们没有可视化的方案，将一个多维的数据进行可视化展示，但是我们可以通过PCA来将数据进行压缩成维度比较少的形式，再进行展示；</p><h4 id="什么是数据降维"><a href="#什么是数据降维" class="headerlink" title="什么是数据降维"></a>什么是数据降维</h4><p><img src="/img/1544076335965.png" alt="1544076335965"></p><p>这里按照一个将二维的数据降维成一维来进行举例：</p><p>假设我们的数据有两个特征: x1： 长度， 单位是cm ； x2：是用英寸表示的同一个物体的长度。</p><p>所以，这两个特征给了我们高度冗余表示，两个特征基本上用一个就可以表示了一个实例的长度特征，所以我们可以通过降维来减少这两个特征造成的冗余；</p><p>将数据从二维降至一维： 假使我们要采用两种不同的仪器来测量一些东西的尺寸，其中一个仪器测量结果的单位是英寸，另一个仪器测量的结果是厘米，我们希望将测量的结果作为我们机器学习的特征。现在的问题的是，两种仪器对同一个东西测量的结果不完全相等（由于误差、精度等），而将两者都作为特征有些重复，因而，我们希望将这个二维的数据降至一维。</p><blockquote><p>将我们的数据集的特征减少冗余，在保持误差基本不变的情况，减少特征的数量，这就是数据的降维；</p></blockquote><h3 id="2-数据压缩"><a href="#2-数据压缩" class="headerlink" title="2.数据压缩"></a>2.数据压缩</h3><p>下面介绍将冗余数据进行压缩的方法</p><p><strong>将二维数据降维至一维</strong>:</p><p><img src="/img/1544077545143.png" alt="1544077545143"></p><p>假设我们有这样一批特征，x1为学生学习的积极程度， x2为学生知识的掌握程度，这两个特征可能都可以代表学生的学习成果。所以，相比这两种特征，我们可能更倾向于获得特征–学生的知识掌握程度z, 来代替x1， x2两个特征。所以，我们真正关心的，可能是上面那条红色的线的方向，以及特征映射到其上的点，代表学生的知识量;</p><p><img src="/img/1544077883986.png" alt="1544077883986"></p><p>上面这幅图表示，将二维数据降维成一位数据的过程</p><p><strong>将三维数据降维至二维:</strong></p><p>过程是与上面类似的，我们将三维向量投射到一个二维的平面上，强迫使得所有的数据都在同一个平面上，降至二维的特征向量。</p><p><img src="/img/1544078620734.png" alt="1544078620734"></p><p>这样的处理过程可以被用于把任何维度的数据降到任何想要的维度，例如将1000维的特征降至100维。</p><h3 id="3-数据可视化"><a href="#3-数据可视化" class="headerlink" title="3.数据可视化"></a>3.数据可视化</h3><p>在许多及其学习问题中，如果我们能将数据可视化，我们便能寻找到一个更好的解决方案，降维可以帮助我们。</p><p><img src="/img/1544078716089.png" alt="1544078716089"></p><p>假使我们有有关于许多不同国家的数据，每一个特征向量都有50个特征（如GDP，人均GDP，平均寿命等）。如果要将这个50维的数据可视化是不可能的。使用降维的方法将其降至2维，我们便可以将其可视化了。</p><p><img src="/img/1544078737110.png" alt="1544078737110"></p><p>这样做的问题在于，降维的算法只负责减少维数，新产生的特征的意义就必须由我们自己去发现了。</p><h3 id="4-主成分分析问题"><a href="#4-主成分分析问题" class="headerlink" title="4.主成分分析问题"></a>4.主成分分析问题</h3><p><strong>主成分分析(PCA)</strong>是最常见的降维算法。<br>在PCA中，我们要做的是找到一个方向向量（Vector direction），当我们把所有的数据都投射到该向量上时，我们希望投射平均均方误差能尽可能地小。方向向量是一个经过原点的向量，而投射误差是从特征向量向该方向向量作垂线的长度。</p><p><img src="/img/1544079226723.png" alt="1544079226723"></p><p><strong>主成分分析问题的描述：</strong><br>问题是要将维数据降至 k 维，目标是找到向量$u^{(i)}, u^{(2)}, …., u^{(k)}$, 使得所有的实例到向量的总的投射误差最小。</p><p><strong>主成分分析与线性回顾的比较：</strong><br>主成分分析与线性回归是两种不同的算法。主成分分析最小化的是投射误差（Projected Error），而线性回归尝试的是最小化预测误差。线性回归的目的是预测结果，而主成分分析不作任何预测。</p><p><img src="/img/1544079761340.png" alt="1544079761340"></p><p>上图中，左边的是线性回归的误差（垂直于横轴投影），右边则是主要成分分析的误差（垂直于红线投影）。</p><p>PCA将n个特征降维到k个，可以用来进行数据压缩，如果100维的向量最后可以用10维来表示，那么压缩率为90%。但PCA 要保证降维后，还要保证数据的特性损失最小。</p><p>PCA技术的一大好处是对数据进行降维的处理。我们可以对新求出的“主元”向量的重要性进行排序，根据需要取前面最重要的部分，将后面的维数省去，可以达到降维从而简化模型或是对数据进行压缩的效果。同时最大程度的保持了原有数据的信息。</p><p><strong>PCA的优点</strong></p><p>PCA技术的一个很大的优点是，它是完全无参数限制的。在PCA的计算过程中完全不需要人为的设定参数或是根据任何经验模型对计算进行干预，最后的结果只与数据相关，与用户是独立的。</p><p><strong>PCA的缺点</strong></p><p>如果用户对观测对象有一定的先验知识，掌握了数据的一些特征，本可以根据经验做一些数据的整合或降维，但使用PCA却无法通过参数化等方法对处理过程进行干预，可能会得不到预期的效果，效率也不高。</p><h3 id="5-主成分分析算法"><a href="#5-主成分分析算法" class="headerlink" title="5.主成分分析算法"></a>5.主成分分析算法</h3><p>PCA 减少n维到k维：<br>第一步是均值归一化。我们需要计算出所有特征的均值，然后令 $x_j = x_j - u_j$。如果特征是在不同的数量级上，我们还需要将其除以标准差 $\sigma^2$ 。<br>第二步是计算协方差矩阵（covariance matrix） $\Sigma : \sum = \frac { 1 } { m } \sum _ { i - 1 } ^ { n } \left( x ^ { ( i ) } \right) \left( x ^ { ( i ) } \right) ^ { T }$<br>第三步是计算协方差矩阵$\Sigma$的特征向量（eigenvectors）:<br>在 Octave 里我们可以利用奇异值分解（singular value decomposition）来求解，<code>[U, S, V]= svd(sigma)</code> 。</p><p><img src="/img/1544081181351.png" alt="1544081181351"></p><p>对于一个n<em>n 维度的矩阵，上式中的U是一个具有与数据之间最小投射误差的方向向量构成的矩阵。如果我们希望将数据从n维降至k维，我们只需要从U中选取前k个向量，获得一个维度的n </em> k矩阵，我们用$U_{reduce}$表示，然后通过如下计算获得要求的新特征向量:$z ^ { ( i ) } : z ^ { ( i ) } = U _ {reduce} ^ { T } * x ^ { ( i ) }$</p><p>其中x是 n <em> 1 维的， 因此结果为 K </em> 1 维度的；</p><h3 id="6-选择主成分的数量"><a href="#6-选择主成分的数量" class="headerlink" title="6.选择主成分的数量"></a>6.选择主成分的数量</h3><p>主要成分分析是减少投射的平均均方误差：<br>训练集(经过均值归一化处理后)的方差为: $\frac { 1 } { m } \sum _ { i = 1 } ^ { m } \left| x ^ { ( i ) } \right| ^ { 2 }$</p><p>我们希望在平均均方误差与训练集方差的比例尽可能小的情况下选择尽可能小的值。</p><p>如果我们希望这个比例小于1%，就意味着原本数据的偏差有99%都保留下来了，如果我们选择保留95%的偏差，便能非常显著地降低模型中特征的维度了, 一般这个值最好不要小于90%， 因为那样数据可能就偏离原数据太多了。</p><p><strong>进行主成分选择的步骤(第一种方法):</strong></p><ol><li>我们可以先令k = 1，然后进行主要成分分析，获得$U_{reduce}$和z，然后计算比例是否小于1%;</li><li>如果不是的话再令k = K + 1，如此类推，直到找到可以使得比例小于1%的最小 值;</li></ol><p><strong>进行主成分选择的步骤(第二种方法):</strong></p><ol><li><p>我们可以先令k = 1，然后进行主要成分分析，获得$U_{reduce}$， S , 然后计算平均均方误差与训练集的比例</p><p>备注： S是一个n * n的矩阵，只有对角线上有值，而其它单元都是0，我们可以使用这个矩阵来计算平均均方误差与训练集方差的比例</p><p><img src="/img/1544082789155.png" alt="1544082789155"></p><p>计算平均均方误差与训练集的比例公式: </p><p><img src="/img/1544082956382.png" alt="1544082956382"></p></li><li><p>如果比例大于1%,再令k = K + 1，如此类推，直到找到可以使得比例小于1%的最小 值;</p></li></ol><h3 id="7-重建被压缩的数据"><a href="#7-重建被压缩的数据" class="headerlink" title="7. 重建被压缩的数据"></a>7. 重建被压缩的数据</h3><p>PCA作为压缩算法。在那里你可能需要把1000维的数据压缩100维特征，或具有三维数据压缩到一二维表示。所以，如果这是一个压缩算法，应该能回到这个压缩表示，回到你原有的高维数据的一种近似。</p><p>所以， 给定$z^{(i)}$, 可能是100维， 怎么回到原来的$x^{(i)}$, 可能是1000维的数据；</p><p><img src="/img/1544083598999.png" alt="1544083598999"></p><p>PCA算法，我们可能有一个这样的样本。如图中样本 $x^{(1)}, x^{(2)}$, 。我们做的是，我们把这些样本投射到图中这个一维平面。然后现在我们需要只使用一个实数，比如 $z^{(1)}$，指定这些点的位置后他们被投射到这一个三维曲面。给定一个点$z^{(1)}$，我们怎么能回去这个原始的二维空间呢？ 为2维，z为1维，$z = U^T_{reduce}x$ ，相反的方程为：$x_{appoz } = U_{reduce} * z$, $x_{appox} \approx x$ 。如图：</p><p><img src="/img/1544083802962.png" alt="1544083802962"></p><p>通过以上的步骤得到的数据与原始数据相当相似。所以，这就是你从低维表示z回到未压缩的表示。我们得到的数据和原始数据x非常近似 ，我们也把这个过程称为重建原始数据。但是没有方法可以将数据从低维，没有偏差的还原到高纬。</p><h3 id="8-PCA使用的总结"><a href="#8-PCA使用的总结" class="headerlink" title="8.PCA使用的总结"></a>8.PCA使用的总结</h3><p><strong>使用PCA的数据进行建模的步骤:</strong></p><ol><li>运用主要成分分析将数据压缩到K个特征</li><li>然后对训练集进行训练</li><li>在预测或者交叉验证时，采用之前学习而来的$U_{reduce}$， 将输入的特征x转换成特征向量z， 然后在进行预测；</li></ol><p><strong>不要在一下情况使用PCA</strong></p><ol><li>将其用于减少过拟合（减少了特征的数量）。这样做非常不好，不如尝试正则化处理。原因在于主要成分分析只是近似地丢弃掉一些特征，它并不考虑任何与结果变量有关的信息，因此可能会丢失非常重要的特征。然而当我们进行正则化处理时，会考虑到结果变量，不会丢掉重要的数据。</li><li>不考虑为什么使用PCA，默认地将主要成分分析作为学习过程中的一部分，这虽然很多时候有效果，最好还是从所有<br>原始特征开始，只在有必要的时候（算法运行太慢或者占用太多内存）才考虑采用主要成分分析。</li></ol><blockquote><p>总结: PCA如果不是想加快训练速度， 减少资源消耗，没必要使用， 其只可能降低数据信息量， 更要注意，千万不要用PCA来防止过拟合；如果使用， 通过平均均方误差与训练集的比例来确定特征数量K；</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 非监督学习 </tag>
            
            <tag> PCA </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>聚类问题</title>
      <link href="/2018/12/06/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E8%81%9A%E7%B1%BB%E9%97%AE%E9%A2%98/"/>
      <url>/2018/12/06/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E8%81%9A%E7%B1%BB%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="1-非监督学习和聚类算法介绍"><a href="#1-非监督学习和聚类算法介绍" class="headerlink" title="1.非监督学习和聚类算法介绍"></a>1.非监督学习和聚类算法介绍</h3><p>在监督学习中，所有的训练数据、测试数据、都有一系列标签，我们需要据此拟合一个假设函数。与此不同的是，在非监督学习中，数据没有附带任何标签，数据只有一些列的特征，而我们的训练目标就是通过不同特征的训练集，将不同的训练集分为K个类别。</p><p><img src="/img/1544063565930.png" alt="1544063565930"></p><p>如上图，通过数据特征可以绘制出一些列的点，但是没有标签。也就是说，在非监督学习中，需要将一系列无标签的训练数据，输入到一个算法中，然后我们告诉这个算法，通过我们给定的数据，为我们找到这个数据的内在结构。图上的数据看起来可以分成两个分开的点集（称为簇），一个能够找到上面的点集的可以分为两个分类的算法，就被称为聚类算法， 接下来就通过学习聚类算法来了解非监督学习。</p><p><strong>聚类算法的一些应用:</strong> </p><ol><li>市场分割：比如在数据库中存储了许多客户的信息，希望将他们分成不同的客户群，这样你可以对不同类型的客户分别销售产品或者分别提供更适合的服务。</li><li>社交网络分析：关注个人的社交信息，例如Facebook，Google+，或者是其他的一些信息，比如说：经常跟哪些人联系，而这些人又经常给哪些人发邮件，由此找到关系密切的人群</li><li>星系分类: 通过聚类算法将不同的行星划分到各个星系</li></ol><h3 id="2-K-means算法"><a href="#2-K-means算法" class="headerlink" title="2.K-means算法"></a>2.K-means算法</h3><p>K-means是最普及的聚类算法，算法接受一个未标记的数据集，然后将数据聚类成不同的组。<br>K-means也是一个迭代算法，假设我们想要将数据聚类成n个组，其步骤为:</p><ol><li>首先选择K个随机的点，称为聚类中心（cluster centroids）；</li><li>对于数据集中的每一个数据，按照距离K个中心点的距离</li><li>将其与距离最近的中心点关联起来，与同一个中心点关联的所有点聚成一类。</li><li>计算每一个组的平均值，将该组所关联的中心点移动到平均值的位置。</li><li>重复步骤2-4直至中心点不再变化。</li></ol><p>一个聚类过程示例：</p><p><img src="/img/1544065154480.png" alt="1544065154480"></p><p>假如进行了10次迭代</p><p>用$u^{(1)}, u^{(2)}, …., u^{(k)}$来表示聚类中心，用$c^{(1)}, c^{(2)}, ….., c^{(m)}$ 来存储与第 i 个实例数据最近的聚类中心的索引，K-均值算法的<br>伪代码如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Repeat &#123;</span><br><span class="line"></span><br><span class="line">for i = 1 to m</span><br><span class="line"></span><br><span class="line">c(i) := index (form 1 to K) of cluster centroid closest to x(i)</span><br><span class="line"></span><br><span class="line">for k = 1 to K</span><br><span class="line"></span><br><span class="line">μk := average (mean) of points assigned to cluster k</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>算法步骤:</p><ol><li>对于每一个样例，计算其应该属于的类。</li><li>移动聚类中心，对于每一个类，重新计算该类的中心。</li></ol><p>K-均值算法也可以很便利地用于将数据分为许多不同组，即使在没有非常明显区分的组群的情况下也可以。下图所示的数据集包含身高和体重两项特征构成的，利用K-均值算法将数据分为三类，用于帮助确定将要生产的T-恤衫的三种尺寸。</p><p><img src="/img/1544065604424.png" alt="1544065604424"></p><h3 id="3-K-means优化目标"><a href="#3-K-means优化目标" class="headerlink" title="3. K-means优化目标"></a>3. K-means优化目标</h3><p>K-均值最小化问题，是要<strong>最小化所有的数据点与其所关联的聚类中心点之间的距离之和</strong></p><p>K-均值的代价函数（又称畸变函数 Distortion function）的公式为：</p><p>$J \left( c ^ { ( 1 ) } , \ldots , c ^ { ( m ) } , \mu _ { 1 } , \ldots , \mu _ { K } \right) = \frac { 1 } { m } \sum _ { i = 1 } ^ { m } \left| X ^ { ( i ) } - \mu _ { c ^ { ( i ) } } \right| ^ { 2 }$</p><p>其中，$u_{c^{(i)}}$代表距离$x^{(i)}$最近的聚类中心， 我们的的优化目标便是找出使得代价函数最小的$c^{(1)}, c^{(2)}, …,c^{(m)}$ 和 $u_1, u_2, …,u_k$, 其优化目标的公式为：</p><p>${\min \over { c ^ { ( 1 ) } , \ldots , c ^ { ( m ) } \atop \mu _ { 1 } , \ldots , \mu _ { K } }} J \left( c ^ { ( 1 ) } , \ldots , c ^ { ( m ) } , \mu _ { 1 } , \ldots , \mu _ { K } \right)$</p><p>通过对代价函数的构建，可以将K-means每次迭代的两次循环的目的做一个归纳: </p><ol><li>第一个循环是重新将样本划分到距离最近的聚类中心点，是用于减小$c^{(i)}$引起的代价；</li><li>第二个循环 是重新调整中心点，使其位于该分类的中心，  是用于减小$u_{c^{(i)}}$引起的代价</li></ol><h3 id="4-随机初始化聚类中心"><a href="#4-随机初始化聚类中心" class="headerlink" title="4. 随机初始化聚类中心"></a>4. 随机初始化聚类中心</h3><p>运行K-means算法，首先要随机初始化所有的聚类中心点，通常采用的方式是：</p><ol><li>确定聚类中心个数 K，注意聚类中心点的个数 K 要小于所有训练集实例的数量, 即: K &lt; m；</li><li>随机选择 K个训练实例，然后令个聚类中心分别与这 K 个训练实例相等;</li></ol><p>K-means算法有一个常见的问题，即它有可能会停留在一个局部最小值处，而这取决于初始化的情况， 如下图:</p><p>由于聚类中心初始化的距离过近，导致最终只能获得局部的最优解，这样往往不是我们想要的分类结果。</p><p><img src="/img/1544067341530.png" alt="1544067341530"></p><p>如果想解决这个问题，通常需要多次运行K-means算法，每一次都重新进行随机初始化，最后再比较多次运行K-means的结果，选择代价函数最小的结果。这种方法在 K 较小的时候（2–10）还是可行的，但是如果 K 较大，这么做也可能不会有明显地改善, 但是通常K比较大的时候，局部最优解已经可以很接近最优解。</p><h3 id="5-选取聚类数量"><a href="#5-选取聚类数量" class="headerlink" title="5.选取聚类数量"></a>5.选取聚类数量</h3><h4 id="聚类选择的通常做法"><a href="#聚类选择的通常做法" class="headerlink" title="聚类选择的通常做法"></a>聚类选择的通常做法</h4><p>通常没有具体的聚类数量选择的方法，最普遍的方法就是根据不同的问题和不同的需求，人工进行选择。</p><p>通常我们需要知道，进行聚类数量选择的时候需要思考我们运用K-means算法聚类的动机是什么，然后选择能最好服务于该目的标聚类数。</p><h4 id="肘部法则"><a href="#肘部法则" class="headerlink" title="肘部法则"></a>肘部法则</h4><p>当人们在讨论，选择聚类数目的方法时，有一个可能会谈及的方法叫作“肘部法则”。关于“肘部法则”，我们所需要做的是改变 K 值，也就是聚类类别数目的总数。我们用 K 个聚类来运行K-means聚类方法。这就意味着，所有的数据都会分到 K 个聚类里，然后计算成本函数 J 或者计算畸变函数。K 代表聚类数字。</p><p><img src="/img/1544074857578.png" alt="1544074857578"></p><p>经过聚类运算，可能会得到一条类似于左边这样的曲线。像一个人的肘部。这就是“肘部法则”所做的，让我们来看这样一个图，看<br>起来就好像有一个很清楚的肘在那儿。好像人的手臂，如果你伸出你的胳膊，那么这就是你的肩关节、肘关节、手。这就是“肘部法则”。</p><p>你会发现这种模式，它的畸变值会迅速下降，从1到2，从2到3之后，你会在3的时候达到一个肘点。在此之后，畸变值就下降的非常慢，看起来就像使用3个聚类来进行聚类是正确的，这是因为那个点是曲线的肘点，畸变值下降得很快， K = 3之后就下降得很慢，那么我们就选 K= 3。当你应用“肘部法则”的时候，如果你得到了一个像上面这样的图，那么这将是一种用来选择聚类个数的合理方法。</p><blockquote><p>总结: 选择聚类数量最好是根据我们的需求，和场景来确定我们是需要多少种聚类，如果我们不能根据使用场景和需求确定下来聚类的数量，那么我们可以通过肘部法则，来选择一个比较合理的聚类数量。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 非监督学习 </tag>
            
            <tag> 聚类 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>支持向量机</title>
      <link href="/2018/11/30/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/"/>
      <url>/2018/11/30/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<h3 id="1-支持向量机优化目标"><a href="#1-支持向量机优化目标" class="headerlink" title="1.支持向量机优化目标"></a>1.支持向量机优化目标</h3><p>与逻辑回归和神经网络相比，支持向量机，或者简称SVM，在训练复杂的非线性方程时提供了一种更为清晰，更加强大的方式。</p><p>在逻辑回归中我们已经熟悉了这里的假设函数形式，和下边的S型激活函数。下面依然用z表示$\theta^Tx$</p><p><img src="/img/1543588947466.png" alt="1543588947466"><br>现在考虑下我们想要逻辑回归做什么：如果有一个 y = 1 的样本，不管是在训练集中或是在测试集中，又或者在交叉验证集中，总之是 y = 1，现在我们希望 $h_\theta(x)​$ 趋近1。因为我们想要正确地将此样本分类，这就意味着当 $h_\theta(x)​$ 趋近于1时，$\theta^Tx​$ 应当远大于0。这是因为由于 z 表示 $\theta^Tx​$，当 z 远大于0时，即到了该图的右边，你不难发现此时逻辑回归的输出将趋近于1。相反地，如果我们有另一个样本，即 y = 0。我们希望假设函数的输出值将趋近于0，这对应于 $\theta^Tx​$，或者就是 z 会远小于0，因为对应的假设函数的输出值趋近0。</p><p><img src="/img/1543590127401.png" alt="1543590127401"></p><p>如果你进一步观察逻辑回归的代价函数公式，你会发现每个样本 (x, y) 都会为总代价函数，增加上面的一项，因此，对于总代价函数通常会有对所有的训练样本的代价函数求和。</p><p>接下来，考虑逻辑回归的两种情况：</p><p>一种是y = 1 的情况， 一种是 y = 0的情况</p><p>在第一种情况中，假设 y = 1， 此时在目标函数中只需要第一项起作用， 因为y = 1时， (1-y)项等于零，因此，在y = 1的样本中， 即(x, y) 中， 我们得到$-log({1\over1+e^{-z}})$ 这一项。。如果画出关于 z 的函数，你会看到下面的这条曲线，我们同样可以看到，当 Z 增大时，也就是相当于 $\theta^Tx$ 增大时，z 对应的值会变的非常小。对整个代价函数而言，影响也非常小。这也就解释了，为什么逻辑回归在观察到正样本时，试图将$\theta^Tx$设置得非常大。因为，在代价函数中的这一项会变的非常小。</p><p>现在开始建立支持向量机，我们从这里开始：</p><p>我们会从这个代价函数开始，也就是 $-log({1\over1+e^{-z}})$  一点一点修改，让我取这里的 z = 1 点，我先画出将要用的代价函数。</p><p><img src="/img/1543592561417.png" alt="1543592561417"></p><p>新的代价函数(当y=1)和逻辑回归的代价函数类似，就是这条紫红色的曲线。那么，到了这里已经非常接近逻辑回归中使用的代价函数了。只是这里是由两条线段组成，即位于右边的水平部分和位于左边的直线部分，先别过多的考虑左边直线部分的斜率，这并不是很重要。但是，这里我们将使用的新的代价函数，是在y=1的前提下的。你也许能想到，这应该能做同逻辑回归中类似的事情，但事实上，在向量机的优化问题中，这会变得更坚定，并且为支持向量机，带来计算上的优势。</p><p>另外一种情况是当 y = 1时，此时如果你仔细观察逻辑回归的代价函数只留下了第二项，因为第一项被消除了。如果当 y = 0时，那么这一项也就是0了。所以上述表达式只留下了第二项。因此，这个样本的代价或是代价函数的贡献。将会由这一项表示。并且，如果你将这一项作为z的函数，那么，这里就会得到横轴 z 。同样地，我们要替代逻辑回归的代价函数这一条蓝色的线，用相似的方法， 画出当y = 0的时候向量机的代价函数。</p><p><img src="/img/1543634145117.png" alt="1543634145117"></p><p>如果我们用一个新的代价函数来代替，即这条从0点开始的水平直线，然后是一条斜线，像上图。那么，现在让我给这两个方程命名，第一个函数，我称之为cost1(z)，同时，第二个函数函数我称它为cost0(z)。这里的下标是指在代价函数中，对应的y=1和y=0 的情况，拥有了这些定义后，下面开始构建支持向量机。</p><p><img src="/img/1543634926786.png" alt="1543634926786"></p><p>这是我们在逻辑回归中使用代价函数 J(θ)。也许这个方程看起来不是非常熟悉。这是因为之前有个负号在方程外面，但是，这里我所做的是，将负号移到了表达式的里面，这样做使得方程看起来有些不同。对于支持向量机而言，实质上我们要其表达式的两个部分替换为 cost1(z)，也就是前面构建的代价函数$cost_1(\theta^Tx)$, 和cost0(z)，也就是$cost_0(\theta^Tx)$。因此，对于支持向量机，我们得到了这里的最小化问题，即是将上面的两部分代价函数替换为下边蓝色的支持向量机代价函数的公式$cost_1(\theta^Tx)$ 和 $cost_0(\theta^Tx)$。然后再加上正则化参数。</p><p>但是在一般的时候，对支持向量机公式的参数，会有一些不同，下面尝试对向量机的代价函数进行改造：</p><ol><li>首先，我们要除去1/m这一项，当然，这仅仅是由于人们使用支持向量机时，对比于逻辑回归而言，不同的习惯所致，因为这里仅仅除去1/m这一项，也会得出同样的 θ 最优值，因为 仅是个常量，因此，这个最小化问题中，无论前面是否有 1/m 这一项，最终我所得到的最优值都是一样的。</li><li>第二点概念上的变化，对于逻辑回归，在目标函数中，我们有两项：第一个是训练样本的代价，第二个是我们的正则化项，我们不得不去用有 λ 这一项来平衡，这就相当于我们想要最小化加上正则化参数。我们所做的是通过设置不同正则参数 λ 达到优化目的。这样，我们就能够权衡对应的项，是使得训练样本拟合的更好。即最小化。但对于支持向量机，按照惯例，我们将使用一个不同的参数替换这里使用的 λ 来权衡这两项。就是使用一个不同的参数称为C， 因此，在逻辑回归中，如果给定 λ，一个非常大的值，意味着给予正则化更大的权重。而这里，就对应于将 C 设定为非常小的值，那么，同样的的将会给正则化项更大的权重。因此，这只是一种不同的方式来控制这种权衡或者一种不同的方法，即用参数来决定是更关心第一项的优化，还是更关心第二项的优化。当然你也可以把这里的参数 C 考虑成 1/λ。</li></ol><p><img src="/img/1543642222779.png" alt="1543642222779"></p><p>最后有别于逻辑回归输出的概率。我们的代价函数，当最小化代价函数，获得参数θ时，支持向量机所做的是它来直接预测的值等于1，还是等于0。因此，当这个假设函数当$\theta^Tx$小于0时，会预测为0。当$\theta^Tx$大于或者等于0时，将预测为1。</p><h3 id="2-大间距的理解"><a href="#2-大间距的理解" class="headerlink" title="2.大间距的理解"></a>2.大间距的理解</h3><h4 id="大间距分类器优化约定"><a href="#大间距分类器优化约定" class="headerlink" title="大间距分类器优化约定"></a>大间距分类器优化约定</h4><p>向量机经常被看做是大间距分类器，接下来了解一下向量机的大边界的含义，并进一步了解SVM模型的假设。</p><p><img src="/img/1543643391239.png" alt="1543643391239"></p><p>这是我的支持向量机模型的代价函数，左边是cost1(z) 关于z的代价函数，此函数用于正样本，右边是cost0(x)关于z的代价函数，横轴表示z，现在让我们考虑一下，最小化这些代价函数的必要条件是什么。如果你有一个正样本y=1 ，则只有在z &gt;= 1时，代价函数cost1(z)才等于0。</p><p>或者是说，如果有一个正样本，我们希望$\theta^Tx$&gt;=1, 反之， 如果y = 0, 他只有在z &lt;= -1 的时候， 函数值才为0.这是支持向量机的一个有趣的性质。事实上，如果有一个正样本y = 1, 则其实我们仅仅要求$\theta^Tx$大于等于0，就能将该样本恰当的分出，这是因为如果$\theta^Tx&gt;&gt;0$的话，我们的模型代价函数值为0， 所以我们需要的是比0大很多的值，比如大于等于1。这就相当于在支持向量机中嵌入了一个额外的安全因子，或者说是安全的间距因子。</p><p><img src="/img/1543645799159.png" alt="1543645799159"></p><p>接下来看看C参数对支持向量机的影响。假设将C设置为一个非常大的数，比如将C设置成10000或者其他非常大的数</p><p>如果 C 非常大，则最小化代价函数的时候，我们将会很希望找到一个使第一项为0的最优解。因此，让我们尝试在代价项的第一项为0的情形下理解该优化问题。比如我们可以把设置成了非常大的常数，这将给我们一些关于支持向量机模型的直观感受。</p><p>假如输入一个训练样本标签为 y = 1，你想令第一项为0，你需要做的是找到一个 θ，使得$\theta^Tx &gt;= 1$，类似地，对于一个训练样本，标签为 y = 0，为了使 cost0(z) 函数的值为0，我们需要 $\theta^Tx &lt;= -1$。因此，现在考虑优化问题。选择参数，使得第一项等于0，就会导致下面的优化问题，因为我们将选择参数使第一项为0，因此这个函数的第一项为0，因此是C乘以0加上二分之一乘以第二项。这里第一项是C乘以0，因此可以将其删去，因为我知道它是0。<br>这将遵从以下的约束(注意，这事是当向量机被看做是大间距分类器时的约定)：如果 $y^{(i)}$ 是等于1 的， $\theta^Tx^{(i)} &gt;=1$ ，如果 $y^{(i)}$ 是等于0的，$\theta^Tx^{(i)} &lt;= -1$  ，这样当求解这个优化问题的时候，当你最小化这个关于变量θ的函数的时候，你会得到一个非常有趣的决策边界。</p><h4 id="大间距分类器决策边界和大边界理解"><a href="#大间距分类器决策边界和大边界理解" class="headerlink" title="大间距分类器决策边界和大边界理解"></a>大间距分类器决策边界和大边界理解</h4><p><img src="/img/1543647120683.png" alt="1543647120683"></p><p>如果有一个数据集，其中有正样本，也有负样本，可以看到这个数据集是线性可分的，存在一条直线把正负样本分开。当然有多条不同的直线，可以把正样本和负样本完全分开。</p><p>比如，上面的绿色和粉色的决策边界，可以完全将训练样本区分开。但是多多少少这个看起来并不是非常自然</p><p>正常的支持向量机将会选择这个黑色的决策边界，相较于之前我用粉色或者绿色画的决策界。这条黑色的看起来好得多，黑线看起来是更稳健的决策界。在分离正样本和负样本上它显得的更好。数学上来讲，这是什么意思呢？这条黑线与样本之间有更大的距离，这个距离叫做间距(margin)。</p><p><img src="/img/1543647482968.png" alt="1543647482968"></p><p>当画出这两条额外的蓝线，我们看到黑色的决策界和训练样本之间有更大的最短距离。然而粉线和蓝线离训练样本就非常近，在分离样本的时候就会比黑线表现差。因此，这个距离叫做支持向量机的间距，而这是支持向量机具有鲁棒性的原因，因为它努力用一个最大间距来分离样本。因此支持向量机有时被称为大间距分类器。现在我们可以理解为，上面一小节提到的优化约定，即：如果 $y^{(i)}$ 是等于1 的， $\theta^Tx^{(i)} &gt;=1$ ，如果 $y^{(i)}$ 是等于0的，$\theta^Tx^{(i)} &lt;= -1$  ，就是为了获取具有最大间距的决策边界，来获取最好的优化结果。</p><p>那么在让代价函数最小化的过程中，我们希望找出在y=0和y=1两种情况下都使得代价函数中左边的这一项尽量为零的参数。如果我们找到了这样的参数，则我们的最小化问题便转变成：</p><p><img src="/img/1543647763659.png" alt="1543647763659"></p><p>事实上，支持向量机现在要比这个大间距分类器所体现得更成熟，尤其是当你使用大间距分类器的时候，你的学习<br>算法会受异常点(outlier) 的影响。比如我们加入一个额外的正样本。</p><p><img src="/img/1543647941357.png" alt="1543647941357"></p><p>在这里，如果你加了这个样本，为了将样本用最大间距分开，也许我最终会得到一条类似粉色的决策界。仅仅基于一个异常值，仅仅基于一个样本，就将我的决策界从这条黑线变到这条粉线，这实在是不明智的。而如果正则化参数C，设置的非常大，这事实上正是支持向量机将会做的。它将决策界，从黑线变到了粉线，但是如果C 设置的小一点，如果你将C设置的不要太大，则你最终会得到这条黑线，当然数据如果不是线性可分的，如果你在这里有一些正样本或者你在这里有一些负样本，则支持向量机也会将它们恰当分开。因此，大间距分类器的描述，仅仅是从直观上给出了正则化参数C非常大的情形，同时，C的作用类似于1/λ。这只是C非常大的情形，或者等价地 λ 非常小的情形。你最终会得到类似粉线这样的决策界，但是实际上应用支持向量机的时候，当C不是非常非常大的时候，它可以忽略掉一些异常点的影响，得到更好的决策界。甚至当你的数据不是线性可分的时候，支持向量机也可以给出好的结果。</p><h3 id="3-通过向量内积理解目标函数"><a href="#3-通过向量内积理解目标函数" class="headerlink" title="3.通过向量内积理解目标函数"></a>3.通过向量内积理解目标函数</h3><p>我们先前给出的支持向量机模型中的目标函数。</p><p><img src="/img/1543650759436.png" alt="1543650759436"></p><p><img src="/img/1543650779361.png" alt="1543650779361"></p><p><img src="/img/1543650804087.png" alt="1543650804087"></p><p><img src="/img/1543650856038.png" alt="1543650856038"></p><h3 id="4-核函数"><a href="#4-核函数" class="headerlink" title="4.核函数"></a>4.核函数</h3><h4 id="核函数功能"><a href="#核函数功能" class="headerlink" title="核函数功能"></a>核函数功能</h4><p>回顾我们之前讨论过可以使用高级数的多项式模型来解决无法用直线进行分隔的分类问题：</p><p><img src="/img/1543651153925.png" alt="1543651153925"></p><p>为了获取上图所示的判定边界，我们的模型可能是$\theta_0 + \theta_{1x1} + \theta_{2x2} + \theta_{3x1x2} +  + \theta_{4x1^2} + …..$ 的形式</p><p>我们可以用一些列新的特征f来代替模型中的每一项。例如令：</p><p>f1 = x1, f2 = x2, f3 = x1x2, f4 = x1^2   ….， 得到$h_\theta(x) = f1 + f2 + f3 + … + fn$, 然而， 除了对原有的特征进行组合之外，我们可以利用核函数计算出新的特征。</p><p>给定一个训练实例x， 我们利用x的各个特征与我们预先选定的地标(landmarks) $l^{(1)}, l^{(2)}, l^{(3)}$的近似成都来选取新的特征f1，f2, f3</p><p><img src="/img/1543652400137.png" alt="1543652400137"></p><blockquote><p>这些地标 $l^{(i)}$ 的作用是什么？</p><p>如果一个训练实例与地标之间的距离近似于0，则新特征 f 近似于 $e^{-0} = 1$，如果训练实例x与地标之间距离较远，则 f 近似于$e^{一个大数} = 0$</p></blockquote><p>假设我们的训练实例含有两个特征[x1, x2] , 给定地标$l^{(1)}$与不同的σ值，见下图：</p><p><img src="/img/1543653311899.png" alt="1543653311899"></p><p>图中水平面的坐标为 x1，x2 ， f代表垂直坐标轴。可以看出，只有当x与$l^{(1)}$重合时才具有最大值。随着x的改变 f 值改变的速率受到σ2的控制。</p><p>在下图中，当实例处于洋红色的点位置处，因为其离$l^{(1)}$更近，但是离$l^{(2)}$和$l^{(3)}$较远，因此 f1 接近1，而 f2, f3接近0。因此hθ（x） &gt; 0，因此预测y = 1。同理可以求出，对于离 $l^{(2)}$ 较近的绿色点，也预测 y  = 1，但是对于蓝绿色的点，因为其离三个地标都较远，预测 y = 0。</p><p><img src="/img/1543653685983.png" alt="1543653685983"></p><p>这样，图中红色的封闭曲线所表示的范围，便是我们依据一个单一的训练实例和我们选取的地标所得出的判定边界，在预测时，我们采用的特征不是训练实例本身的特征，而是通过核函数计算出的新特征f1, f2, f3。</p><h4 id="核函数使用"><a href="#核函数使用" class="headerlink" title="核函数使用"></a>核函数使用</h4><p><strong>如何选择地标</strong></p><p>我们通常是根据训练集的数量选择地标的数量，即如果训练集中有m个实例，则我们选取m个地标，并且令:$l^{(1)} = x^{(1)}, l^{(2)} = x^{(2)}, …., l^{(m)} = x^{(m)}$。这样做的好处在于：现在我们得到的新特征是建立在原有特征与训练集中所有其他特征之间距离的基础之上的，即：</p><p><img src="/img/1543654175180.png" alt="1543654175180">z</p><blockquote><p>注意: 如果我们使用高斯核函数，那么在使用之前进行特征缩放是非常必要的</p></blockquote><p>另外，支持向量机也可以不使用核函数，不使用核函数又称为线性核函数(linear kernel)，当我们不采用非常复杂的函数，或者我们的训练集特征非常多而实例非常少的时候，可以采用这种不带核函数的支持向量机。</p><h3 id="5-两个参数C-σ对支持向量机的影响"><a href="#5-两个参数C-σ对支持向量机的影响" class="headerlink" title="5.两个参数C, σ对支持向量机的影响"></a>5.两个参数C, σ对支持向量机的影响</h3><p><strong>C对支持向量机的影响</strong></p><p>C = 1/λ</p><p>C较大的时候， 相当于λ较小的时候， 可能会导致过拟合， 高方差；</p><p>C较小的时候，相当于λ较大的时候， 可能会导致欠拟合， 高偏差；</p><p>σ<strong>对支持向量机的影响</strong></p><p>σ较大时，可能会导致低方差，高偏差；</p><p>σ较小时时，可能会导致低偏差，高房差；</p><h3 id="6-使用支持向量机"><a href="#6-使用支持向量机" class="headerlink" title="6.使用支持向量机"></a>6.使用支持向量机</h3><p><strong>不同的核函数</strong></p><p>在高斯核函数之外我们还有其他一些选择，如：<br>多项式核函数（Polynomial Kernel）<br>字符串核函数（String kernel）<br>卡方核函数（ chi-square kernel）<br>直方图交集核函数（histogram intersection kernel）</p><p><strong>多分类问题</strong></p><p>假设我们利用之前介绍的一对多方法来解决一个多类分类问题。如果一共有k个类，则我们需要k个模型，以及k个参数向量θ。我们同样也可以训练k个支持向量机来解决多类分类问题。但是大多数支持向量机软件包都有内置的多类分类功能，我们只要直接使用即可。</p><p>选择参数</p><p>1、选择参数C。需要考虑高方差和高偏差的问题<br>2、选择内核参数σ ， 和核函数。 除非使用线型和的SVM。</p><h3 id="7-逻辑回归和SVM之间的选择"><a href="#7-逻辑回归和SVM之间的选择" class="headerlink" title="7.逻辑回归和SVM之间的选择"></a>7.逻辑回归和SVM之间的选择</h3><p>n为特征数， m为训练样本数。</p><p>(1) 如果相较于m而言， n要大许多，即训练集数据量不够支持我们训练一个复杂的非线性模型，我们选用逻辑回归<br>模型或者不带核函数的支持向量机。</p><p>(2)如果n较小，而且m大小中等，例如在 1-1000 之间，而m在10-10000之间，使用高斯核函数的支持向量机。</p><p>(3)如果n较小，而m较大，例如在1-1000之间，而m大于50000，则使用支持向量机会非常慢，解决方案是创造、增加更多的特征，然后使用逻辑回归或不带核函数的支持向量机。</p><p>(4)神经网络在以上三种情况下都可能会有较好的表现，但是训练神经网络可能非常慢，选择支持向量机的原因主要在于它的代价函数是凸函数，不存在局部最小值。</p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 基础内容 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> 支持向量机 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>模型评估、优化、设计过程</title>
      <link href="/2018/11/24/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0/"/>
      <url>/2018/11/24/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="1-机器学习模型的评估和选择"><a href="#1-机器学习模型的评估和选择" class="headerlink" title="1.机器学习模型的评估和选择"></a>1.机器学习模型的评估和选择</h2><h3 id="有啥方法能优化我们的模型"><a href="#有啥方法能优化我们的模型" class="headerlink" title="有啥方法能优化我们的模型"></a>有啥方法能优化我们的模型</h3><p>整理了一下优化模型时，经常做的一些操作，优化模型无外乎以下几种方法:</p><ol><li>获得更多的训练实例——通常是有效的，但代价较大，下面的方法也可能有效，可考虑先采用下面的几种方法。</li><li>尝试减少特征的数量</li><li>尝试获得更多的特征</li><li>尝试增加多项式特征</li><li>尝试减少正则化程度</li><li>尝试增加正则化程度</li></ol><p>但是，也如我们所见，并不是任何模型都适用于这些优化方法，我们还需要对症下药，接下来可以看一下怎么确定，我们的模型需要什么<strong>优化服务</strong></p><a id="more"></a><h3 id="模型过拟合的判断"><a href="#模型过拟合的判断" class="headerlink" title="模型过拟合的判断"></a>模型过拟合的判断</h3><p><img src="/img/1543045466595.png" alt="1543045466595"></p><p>当我们确定学习算法的参数的时候，我们考虑的是选择参量来使训练误差最小化，有人认为得到一个非常小的训练误差一定是一件好事，但我们已经知道，仅仅是因为这个假设具有很小的训练误差，并不能说明它就一定是一个好的假设函数。此时很可能模型已经产生了过拟合。</p><p>为了检验算法是否过拟合，我们将数据分成训练集和测试集，通常用70%的数据作为训练集，用剩下30%的数据作为测试集。很重要的一点是训练集和测试集均要含有各种类型的数据，通常我们要对数据进行“洗牌”，然后再分成训练集和测试集。</p><p><img src="/img/1543045796477.png" alt="1543045796477"></p><p>测试集评估在通过训练集让我们的模型学习得出其参数后，对测试集运用该模型，我们有两种方式计算误差：</p><ol><li><p>对于线性回归模型，我们利用测试集数据计算代价函数 <strong>J</strong></p></li><li><p>对于逻辑回归模型，我们除了可以利用测试数据集来计算代价函数外还可以计算误分类比率</p><p><img src="/img/1543046614286.png" alt="1543046614286"></p></li></ol><h3 id="模型的选择和交叉验证集"><a href="#模型的选择和交叉验证集" class="headerlink" title="模型的选择和交叉验证集"></a>模型的选择和交叉验证集</h3><p>当我们的使用多项式模型的时候，经常会不确定多项式的项数该如何确定，下面是一种比较简单的处理思路:</p><p>假设我们要在10个不同次数的二项式模型之间进行选择：</p><p>​        <img src="/img/1543046781735.png" alt="1543046781735"></p><p>显然越高次数的多项式模型越能够适应我们的训练数据集，但是适应训练数据集并不代表着能适应我们的测试集或者推广至一般情况，我们应该选择一个更能适应一般情况的模型。我们需要使用交叉验证集来帮助选择模型。</p><p>选择模型的方法：使用60%的数据作为训练集，使用 20%的数据作为交叉验证集，使用20%的数据作为测试集</p><p><img src="/img/1543046920483.png" alt="1543046920483"></p><ol><li><p>使用训练集训练出10个模型</p></li><li><p>用10个模型分别对交叉验证集计算得出交叉验证误差（代价函数的值）</p></li><li><p>选取代价函数值最小的模型</p></li><li><p>用步骤3中选出的模型对测试集计算得出推广误差（代价函数的值）Train/validation/test error</p><p><strong>Training error:</strong><br>$J{train}(\theta) = \frac{1}{2m}\sum\limits{i=1}{m}(h_{\theta}(x{(i)})-y{(i)})2$<br><strong>Cross Validation error:</strong><br>$J{cv}(\theta) = \frac{1}{2m{cv}}\sum\limits{i=1}^{m}(h{\theta}(x{(i)}<em>{cv})-y{(i)}</em>{cv})^2$<br><strong>Test error:</strong><br>$J{test}(\theta)=\frac{1}{2m{test}}\sum\limits{i=1}^{m{test}}(h{\theta}(x^{(i)}{cv})-y{(i)}_{cv})2​$</p></li></ol><h3 id="模型的偏差和方差"><a href="#模型的偏差和方差" class="headerlink" title="模型的偏差和方差"></a>模型的偏差和方差</h3><h4 id="诊断偏差和方差"><a href="#诊断偏差和方差" class="headerlink" title="诊断偏差和方差"></a>诊断偏差和方差</h4><p>当你运行一个学习算法时，如果这个算法的表现不理想，那么多半是出现两种情况：要么是偏差比较大，要么是方差比较大。换句话说，出现的情况要么是欠拟合，要么是过拟合问题。那么这两种情况，哪个和偏差有关，哪个和方差有关，或者是不是和两个都有关？</p><p>其实是一个很有效的指示器，指引着可以改进算法的最有效的方法和途径。在这段视频中，我想更深入地探讨一下有关偏差和方差的问题，希望你能对它们有一个更深入的理解，并且也能弄清楚怎样评价一个学习算法，能够判断一个算法是偏差还是方差有问题，因为这个问题对于弄清如何改进学习算法的效果非常重要，高偏差和高方差的问题基本上来说是欠拟合和过拟合的问题。</p><p><img src="/img/1543048169732.png" alt="1543048169732"></p><p>我们通常会通过将训练集和交叉验证集的代价函数误差与多项式的次数绘制在同一张图表上来帮助分析：</p><p><img src="/img/1543048300914.png" alt="1543048300914"></p><p>通过训练误差和交叉验证集误差判断偏差和方差问题，总结如下:</p><blockquote><p>训练集误差和交叉验证集误差近似时：偏差/欠拟合<br>交叉验证集误差远大于训练集误差时：方差/过拟合</p></blockquote><h4 id="正则化力度与偏差-方差"><a href="#正则化力度与偏差-方差" class="headerlink" title="正则化力度与偏差/方差"></a>正则化力度与偏差/方差</h4><p>在我们在训练模型的过程中，一般会使用一些正则化方法来防止过拟合。但是我们可能会正则化的程度太高或太小了，即我们在选择λ的值时也需要思考与刚才选择多项式模型次数类似的问题。</p><p><img src="/img/1543048899675.png" alt="1543048899675"></p><p>我们选择一系列的想要测试的 λ 值，通常是 0-10之间的呈现2倍关系的值（如 0， 0.01， 0.01， 0.04， 0.08， 0.015， 0.032， 0.064， 1.28,  2.56,  5.12,  10共12个）。 我们同样把数据分为训练集、交叉验证集和测试集。</p><p><img src="/img/1543049032194.png" alt="1543049032194"></p><p>选择正则化系数的方法为：</p><ol><li>使用训练集训练出12个不同程度正则化的模型</li><li>用12个模型分别对交叉验证集计算的出交叉验证误差</li><li>选择得出交叉验证误差最小的模型</li><li>运用步骤3中选出模型对测试集计算得出推广误差，我们也可以同时将训练集和交叉验证集模型的代价函数误差与λ的值绘制在一张图表上：</li></ol><p><img src="/img/1543049356556.png" alt="1543049356556"></p><blockquote><p>当 λ 较小时，训练集误差较小（过拟合）而交叉验证集误差较大<br>随着 λ 的增加，训练集误差不断增加（欠拟合），而交叉验证集误差则是先减小后增加</p></blockquote><h4 id="通过学习曲线评估偏差和方差"><a href="#通过学习曲线评估偏差和方差" class="headerlink" title="通过学习曲线评估偏差和方差"></a>通过学习曲线评估偏差和方差</h4><p>学习曲线就是一种很好的工具，我经常使用学习曲线来判断某一个学习算法是否处于偏差、方差问题。学习曲线是学习算法的一个很好的合理检验（sanity check）。学习曲线是将训练集误差和交叉验证集误差作为训练集实例数量（m）的函数绘制的图表。</p><p>例如： 如果我们有100行数据，我们从1行数据开始，逐渐学习更多行的数据。思想是：当训练较少行数据的时候，训练的模型将能够非常完美地适应较少的训练数据，但是训练出来的模型却不能很好地适应交叉验证集数据或测试集数据。</p><p><img src="/img/1543049717914.png" alt="1543049717914"></p><p><img src="/img/1543049729709.png" alt="1543049729709"></p><p>如何利用学习曲线识别高偏差/欠拟合：作为例子，我们尝试用一条直线来适应下面的数据，可以看出，无论训练集有多么大误差都不会有太大改观</p><p><img src="/img/1543050534124.png" alt="1543050534124"></p><p>也就是说在高偏差/欠拟合的情况下，增加数据到训练集不一定能有帮助。</p><p>如何利用学习曲线识别高方差/过拟合：假设我们使用一个非常高次的多项式模型，并且正则化非常小，可以看出，当交叉验证集误差远大于训练集误差时，往训练集增加更多数据可以提高模型的效果。</p><p><img src="/img/1543050657218.png" alt="1543050657218"></p><p>也就是说在高方差/过拟合的情况下，增加更多数据到训练集可能可以提高算法效果。</p><p>学习曲线的总结:</p><blockquote><p>当Jtrain和Jcv都偏高的时候，处于高偏差(欠拟合)的情况，此时增加训练数据不会有更好的结果</p><p>当Jtrain偏低而Jcv偏高的时候，处于高方差(过拟合)的情况，此时增加训练数据往往会获得更好的训练结果</p></blockquote><h4 id="神经网络的方差和偏差"><a href="#神经网络的方差和偏差" class="headerlink" title="神经网络的方差和偏差"></a>神经网络的方差和偏差</h4><p><img src="/img/1543052413063.png" alt="1543052413063"></p><p>使用<strong>较小的神经网络，类似于参数较少的情况，容易导致高偏差和欠拟合</strong>，但计算代价较小使用<strong>较大的神经网络，类似于参数较多的情况，容易导致高方差和过拟合</strong>，虽然计算代价比较大，但是可以通过正则化手段来调整而更加适应数据。</p><p>通常选择较大的神经网络并采用正则化处理会比采用较小的神经网络效果要好。</p><p>对于神经网络中的隐藏层的层数的选择，通常从一层开始逐渐增加层数，为了更好地作选择，可以把数据分为训练集、交叉验证集和测试集，针对不同隐藏层层数的神经网络训练神经网络， 然后选择交叉验证集代价最小的神经网络。</p><h4 id="解决高偏差和高方差的总结"><a href="#解决高偏差和高方差的总结" class="headerlink" title="解决高偏差和高方差的总结"></a>解决高偏差和高方差的总结</h4><p><strong>解决高方差问题:</strong></p><ol><li>获得更多的训练实例——解决高方差</li><li>尝试减少特征的数量——解决高方差</li><li>尝试增加正则化程度λ——解决高方差</li></ol><p><strong>解决高偏差的问题</strong></p><ol><li>尝试获得更多的特征——解决高偏差</li><li>尝试增加多项式特征——解决高偏差</li><li>尝试减少正则化程度λ——解决高偏差</li></ol><h3 id="类偏斜的误差度量"><a href="#类偏斜的误差度量" class="headerlink" title="类偏斜的误差度量"></a>类偏斜的误差度量</h3><h4 id="类偏斜和查准率查全率的介绍"><a href="#类偏斜和查准率查全率的介绍" class="headerlink" title="类偏斜和查准率查全率的介绍"></a>类偏斜和查准率查全率的介绍</h4><p>类偏斜情况表现为我们的训练集中有非常多的同一种类的实例，只有很少或没有其他类的实例， 这时候很难用一般的误差度量方法来度量其真实的误差。</p><p>例如我们希望用算法来预测癌症是否是恶性的，在我们的训练集中，只有0.5%的实例是恶性肿瘤。假设我们编写一个非学习而来的算法，在所有情况下都预测肿瘤是良性的，那么误差只有0.5%。然而我们通过训练而得到的神经网络算法却有1%的误差。这时，误差的大小是不能视为评判算法效果的依据的。 因为，下面将引入查准率和查全率的概念。</p><p>我们将算法预测的结果分成四种情况：</p><ol><li>正确肯定（True Positive,TP）：预测为真，实际为真</li><li>正确否定（True Negative,TN）：预测为假，实际为假</li><li>错误肯定（False Positive,FP）：预测为真，实际为假</li><li>错误否定（False Negative,FN）：预测为假，实际为真</li></ol><blockquote><p><strong>查准率（Precision）和查全率（Recall</strong>）的公式为 ：</p><p>查准率=TP/(TP+FP)。例，在所有我们预测有恶性肿瘤的病人中，实际上有恶性肿瘤的病人的百分比，越高越好。</p><p>查全率=TP/(TP+FN)。例，在所有实际上有恶性肿瘤的病人中，成功预测有恶性肿瘤的病人的百分比，越高越好。</p></blockquote><p>这样，对于我们刚才那个总是预测病人肿瘤为良性的算法，其查全率是0。</p><p>因此，可以看出用于度量偏斜类问题，查准率和查全率更能体现模型表现的好坏。</p><p><img src="/img/1543054968076.png" alt="1543054968076"></p><h4 id="查准率和查全率之间的选择"><a href="#查准率和查全率之间的选择" class="headerlink" title="查准率和查全率之间的选择"></a>查准率和查全率之间的选择</h4><p>在很多的应用中，我们希望能够保证查准率和召回率的相对平衡。</p><p>继续沿用刚才预测肿瘤性质的例子。假使，我们的算法输出的结果在0-1 之间，我们使用阀值0.5 来预测真和假。</p><p><img src="/img/1543055405994.png" alt="1543055405994"></p><p>查准率(Precision)=TP/(TP+FP) 例，在所有我们预测有恶性肿瘤的病人中，实际上有恶性肿瘤的病人的百分比，越高越好。</p><p>查全率(Recall)=TP/(TP+FN)例，在所有实际上有恶性肿瘤的病人中，成功预测有恶性肿瘤的病人的百分比，越高越好。</p><p>如果我们希望只在非常确信的情况下预测为真（肿瘤为恶性），即我们希望更高的查准率，我们可以使用比0.5更大的阀值，如0.7，0.9。这样做我们会减少错误预测病人为恶性肿瘤的情况，同时却会增加未能成功预测肿瘤为恶性的情况。</p><p>如果我们希望提高查全率，尽可能地让所有有可能是恶性肿瘤的病人都得到进一步地检查、诊断，我们可以使用比0.5更小的阀值，如0.3。</p><p>我们可以将不同阀值情况下，查全率与查准率的关系绘制成图表，曲线的形状根据数据的不同而不同：</p><p><img src="/img/1543055622819.png" alt="1543055622819"></p><p>我们希望有一个帮助我们选择这个阀值的方法。</p><p>一种方法是计算F1 值（F1 Score），其计算公式为：</p><p>$F_1Score：2{PR\over{P+R}}$</p><p>我们选择使得F1值最高的阀值, F1的想法就是尽量让查准率和查全率都不会太小。</p><h2 id="2-机器学习系统的设计"><a href="#2-机器学习系统的设计" class="headerlink" title="2.机器学习系统的设计"></a>2.机器学习系统的设计</h2><h3 id="机器学习系统设计思路"><a href="#机器学习系统设计思路" class="headerlink" title="机器学习系统设计思路"></a>机器学习系统设计思路</h3><p>以一个垃圾邮件分类器算法为例</p><p>为了解决这样一个问题，我们首先要做的决定是如何选择并表达特征向量。我们可以选择一个由100个最常出现在垃圾邮件中的词所构成的列表，根据这些词是否有在邮件中出现，来获得我们的特征向量（出现为1，不出现为0），尺寸为100×1。</p><p>为了构建这个分类器算法，我们可以做很多事，例如：</p><ol><li>收集更多的数据，让我们有更多的垃圾邮件和非垃圾邮件的样本</li><li>基于邮件的路由信息开发一系列复杂的特征</li><li>基于邮件的正文信息开发一系列复杂的特征，包括考虑截词的处理</li><li>为探测刻意的拼写错误（把watch 写成w4tch）开发复杂的算法</li></ol><h3 id="误差分析"><a href="#误差分析" class="headerlink" title="误差分析"></a>误差分析</h3><p><strong>设计机器学习系统的首要任务</strong></p><p>当设计一个模型的时候， 最好的方法是快速的将最简单版本的算法实现，一旦做完，你可以画出学习曲线，通过画出学习曲线，以及检验误差，来找出你的算法是否有高偏差和高方差的问题，或者别的问题。在这样分析之后，再来决定用更多的数据训练，或者加入更多的特征变量是否有用。</p><p>这么做的原因是：因为通常你并不能提前知道你是否需要复杂的特征变量，或者你是否需要更多的数据，还是别的什么。提前知道你应该做什么，是非常难的，因为你缺少证据，缺少学习曲线。因此，你很难知道你应该把时间花在什么地方来提高算法的表现。但是当你实践一个非常简单即便不完美的方法时，你可以通过画出学习曲线来做出进一步的选择。你可以用这种方式来避免一种电脑编程里的过早优化问题，这种理念是：我们必须用证据来领导我们的决策，怎样分配自己的时间来优化算法，而不是仅仅凭直觉，凭直觉得出的东西一般总是错误的。</p><p>除了画出学习曲线之外，一件非常有用的事是误差分析。比如在构造垃圾邮件分类器时，可以看一看我的交叉验证数据集，然后亲自看一看哪些邮件被算法错误地分类。因此，通过这些被算法错误分类的垃圾邮件与非垃圾邮件，你可以发现某些系统性的规律：什么类型的邮件总是被错误分类。经常地这样做之后，这个过程能启发你构造新的特征变量，或者告诉你：现在这个系统的短处，然后启发你如何去提高它。</p><p><strong>构建一个学习算法的推荐方法为：</strong></p><ol><li>从一个简单的能快速实现的算法开始，实现该算法并用交叉验证集数据测试这个算法</li><li>绘制学习曲线，决定是增加更多数据，或者添加更多特征，还是其他选择</li><li>进行误差分析：人工检查交叉验证集中我们算法中产生预测误差的实例，看看这些实例是否有某种系统化的趋势</li></ol><p><strong>举个误差分析的栗子:</strong></p><p>以我们的垃圾邮件过滤器为例，误差分析要做的既是检验交叉验证集中我们的算法产生错误预测的所有邮件，看：</p><ol><li><p>是否能将这些邮件按照类分组。例如医药品垃圾邮件，仿冒品垃圾邮件或者密码窃取邮件等。然后看分类器对哪一组邮件的预测误差最大，并着手优化。</p></li><li><p>发现是否缺少某些特征，记下这些特征出现的次数。<br>例如记录下错误拼写出现了多少次，异常的邮件路由情况出现了多少次等等，然后从出现次数最多的情况开始着手优化。</p></li></ol><p><strong>误差分析需要交叉验证来验证</strong></p><p>误差分析并不总能帮助我们判断应该采取怎样的行动。有时我们需要尝试不同的模型，然后进行比较，在模型比较时，用数值来判断哪一个模型更好更有效，通常我们是看交叉验证集的误差。</p><p>在我们的垃圾邮件分类器例子中，对于“我们是否应该将discount/discounts/discounted/discounting处理成同一个词？”如果这样做可以改善我们算法，我们会采用一些截词软件。误差分析不能帮助我们做出这类判断，我们只能尝试采用和不采用截词软件这两种不同方案，然后根据数值检验的结果来判断哪一种更好。</p><p><strong>不要用测试集来做交叉验证</strong></p><p>因此，当你在构造学习算法的时候，你总是会去尝试很多新的想法，实现出很多版本的学习算法，如果每一次你实践新想法的时候，你都要手动地检测这些例子，去看看是表现差还是表现好，那么这很难让你做出决定。到底是否使用词干提取，是否区分大小写。但是通过一个量化的数值评估，你可以看看这个数字，误差是变大还是变小了。你可以通过它更快地实践你的新想法，它基本上非常直观地告诉你：你的想法是提高了算法表现，还是让它变得更坏，这会大大提高你实践算法时的速度。所以我强烈推荐在交叉验证集上来实施误差分析，而不是在测试集上。但是，还是有一些人会在测试集上来做误差分析。即使这从数学上讲是不合适的。所以我还是推荐你在交叉验证向量上来做误差分析。</p><p><strong>总结:</strong></p><p>当你在研究一个新的机器学习问题时，推荐你实现一个较为简单快速、即便不是那么完美的算法。目前大家经常干的事情是：花费大量的时间在构造算法上，构造他们以为的简单的方法。因此，不要担心你的算法太简单，或者太不完美，而是尽可能快地实现你的算法。当你有了初始的实现之后，它会变成一个非常有力的工具，来帮助你决定下一步的做法。因为我们可以先看看算法造成的错误，通过误差分析，来看看他犯了什么错，然后来决定优化的方式。</p><p>另一件事是：假设你有了一个快速而不完美的算法实现，又有一个数值的评估数据，这会帮助你尝试新的想法，快速地发现你尝试的这些想法是否能够提高算法的表现，从而你会更快地做出决定，在算法中放弃什么，吸收什么误差分析可以帮助我们系统化地选择该做什么。</p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计过程 </tag>
            
            <tag> 模型评估 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>keras构建简单神经网络</title>
      <link href="/2018/11/11/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/keras%E6%9E%84%E5%BB%BA%E7%AE%80%E5%8D%95%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
      <url>/2018/11/11/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/keras%E6%9E%84%E5%BB%BA%E7%AE%80%E5%8D%95%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h3 id="Keras-构建神经网络"><a href="#Keras-构建神经网络" class="headerlink" title="Keras 构建神经网络"></a>Keras 构建神经网络</h3><p>该示例的一般流程是首先加载数据，然后定义网络，最后训练网络。</p><p>要使用 Keras，你需要知道以下几个核心概念。</p><h4 id="创建神经网络序列模型"><a href="#创建神经网络序列模型" class="headerlink" title="创建神经网络序列模型"></a>创建神经网络序列模型</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line">   <span class="comment"># Create the Sequential model</span></span><br><span class="line">   model = Sequential()</span><br></pre></td></tr></table></figure><p><a href="https://link.jianshu.com?t=https%3A%2F%2Fkeras.io%2Fmodels%2Fsequential%2F" target="_blank" rel="noopener">keras.models.Sequential</a> 类是神经网络模型的封装容器。它会提供常见的函数，例如 <code>fit()</code>、<code>evaluate()</code> 和 <code>compile()</code>。我们将介绍这些函数（在碰到这些函数的时候）。我们开始研究模型的层级吧。</p><a id="more"></a><h4 id="层级"><a href="#层级" class="headerlink" title="层级"></a>层级</h4><p>Keras 层级就像神经网络层级。有完全连接的层级、最大池化层级和激活层级。你可以使用模型的 add() 函数添加层级。例如，简单的模型可以如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers.core <span class="keyword">import</span> Dense, Activation, Flatten</span><br><span class="line">    <span class="comment">#创建序列模型</span></span><br><span class="line">    model = Sequential()</span><br><span class="line">    <span class="comment">#第一层级 - 添加有 32 个节点的输入层</span></span><br><span class="line">    model.add(Dense, input_dim=<span class="number">32</span>)</span><br><span class="line">    <span class="comment">#第二层级 - 添加有 128 个节点的完全连接层级</span></span><br><span class="line">    model.add(Dense(<span class="number">128</span>))</span><br><span class="line">    <span class="comment">#第三层级 - 添加 softmax 激活层级</span></span><br><span class="line">    model.add(Activation(<span class="string">'softmax'</span>))</span><br><span class="line">    <span class="comment">#第四层级 - 添加完全连接的层级</span></span><br><span class="line">    model.add(Dense(<span class="number">10</span>))</span><br><span class="line">    <span class="comment">#第五层级 - 添加 Sigmoid 激活层级</span></span><br><span class="line">    model.add(Activation(<span class="string">'sigmoid'</span>))</span><br></pre></td></tr></table></figure><p>Keras 将根据第一层级自动推断后续所有层级的形状。这意味着，你只需为第一层级设置输入维度。</p><p>上面的第一层级 model.add(Flatten(input_dim=32)) 将维度设为 32（表示数据来自 32 维空间）。第二层级获取第一层级的输出，并将输出维度设为 128 个节点。这种将输出传递给下一层级的链继续下去，直到最后一个层级（即模型的输出）。可以看出输出维度是 10。</p><h4 id="模型编译和训练"><a href="#模型编译和训练" class="headerlink" title="模型编译和训练"></a>模型编译和训练</h4><p>构建好模型后，我们就可以用以下命令对其进行编译。我们将损失函数指定为我们一直处理的 categorical_crossentropy。我们还可以指定优化程序，暂时将使用 adam。最后，我们可以指定评估模型用到的指标。我们将使用准确率。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.compile(loss=&quot;categorical_crossentropy&quot;, optimizer=&quot;adam&quot;, metrics = [&apos;accuracy&apos;])</span><br></pre></td></tr></table></figure><p>我们可以使用以下命令来查看模型架构：</p><p><code>model.summary()</code><br> 然后使用以下命令对其进行拟合，指定 epoch 次数和我们希望在屏幕上显示的信息详细程度。</p><p><code>model.fit(X, y, nb_epoch=1000, verbose=0)</code><br> 注意：在 Keras 1 中，nb_epoch 会设置 epoch 次数，但是在 Keras 2 中，变成了 epochs。</p><p>最后，我们可以使用以下命令来评估模型：<br> <code>model.evaluate()</code><br> 很简单，对吧？我们实践操作下。</p><h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><p>我们从最简单的示例开始。在此测验中，你将构建一个简单的多层前向反馈神经网络以解决 XOR 问题。</p><ol><li>将第一层级设为 <code>Flatten()</code> 层级，并将 <code>input_dim</code> 设为 2。</li><li>将第二层级设为 <code>Dense()</code> 层级，并将输出宽度设为 8。</li><li>在第二层级之后使用 softmax 激活函数。</li><li>将输出层级宽度设为 2，因为输出只有 2 个类别。</li><li>在输出层级之后使用 softmax 激活函数。</li><li>对模型运行 10 个 epoch。</li></ol><p>准确度应该为 50%。可以接受，当然肯定不是太理想！在 4 个点中，只有 2 个点分类正确？我们试着修改某些参数，以改变这一状况。例如，你可以增加 epoch 次数。如果准确率达到 75%，你将通过这道测验。能尝试达到 100% 吗？</p><p>首先，查看关于模型和层级的 Keras 文档。 Keras <a href="https://link.jianshu.com?t=https%3A%2F%2Fgithub.com%2Ffchollet%2Fkeras%2Fblob%2Fmaster%2Fexamples%2Fmnist_mlp.py" target="_blank" rel="noopener">多层感知器</a>网络示例和你要构建的类似。请将该示例当做指南，但是注意有很多不同之处。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> np_utils</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">tf.python.control_flow_ops = tf</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set random seed</span></span><br><span class="line">np.random.seed(<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Our data</span></span><br><span class="line">X = np.array([[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">1</span>]]).astype(<span class="string">'float32'</span>)</span><br><span class="line">y = np.array([[<span class="number">0</span>],[<span class="number">1</span>],[<span class="number">1</span>],[<span class="number">0</span>]]).astype(<span class="string">'float32'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Initial Setup for Keras</span></span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers.core <span class="keyword">import</span> Dense, Activation, Flatten</span><br><span class="line"></span><br><span class="line"><span class="comment"># One-hot encoding the output</span></span><br><span class="line">y = np_utils.to_categorical(y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Building the model</span></span><br><span class="line">xor = Sequential()</span><br><span class="line">xor.add(Dense(<span class="number">32</span>, input_dim=<span class="number">2</span>))</span><br><span class="line">xor.add(Activation(<span class="string">"sigmoid"</span>))</span><br><span class="line">xor.add(Dense(<span class="number">2</span>))</span><br><span class="line">xor.add(Activation(<span class="string">"sigmoid"</span>))</span><br><span class="line"></span><br><span class="line">xor.compile(loss=<span class="string">"categorical_crossentropy"</span>, optimizer=<span class="string">"adam"</span>, metrics = [<span class="string">'accuracy'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment this line to print the model architecture</span></span><br><span class="line"><span class="comment"># xor.summary()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Fitting the model</span></span><br><span class="line">history = xor.fit(X, y, nb_epoch=<span class="number">100</span>, verbose=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Scoring the model</span></span><br><span class="line">score = xor.evaluate(X, y)</span><br><span class="line">print(<span class="string">"\nAccuracy: "</span>, score[<span class="number">-1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Checking the predictions</span></span><br><span class="line">print(<span class="string">"\nPredictions:"</span>)</span><br><span class="line">print(xor.predict_proba(X))</span><br></pre></td></tr></table></figure><p>结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Using TensorFlow backend.</span><br><span class="line">4/4 [==============================] - 0s</span><br><span class="line">Accuracy:  0.75</span><br><span class="line">Predictions:</span><br><span class="line">4/4 [==============================] - 0s</span><br><span class="line">[[0.6914389  0.6965836 ]</span><br><span class="line"> [0.7073754  0.7086655 ]</span><br><span class="line"> [0.6919555  0.68419015]</span><br><span class="line"> [0.70766294 0.6967294 ]]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> keras </tag>
            
            <tag> 神经网络 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>神经网络</title>
      <link href="/2018/11/07/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
      <url>/2018/11/07/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h3 id="1-非线性假设"><a href="#1-非线性假设" class="headerlink" title="1.非线性假设"></a>1.非线性假设</h3><p>当我们使用线型回归或者逻辑回归的时候，有这样一个缺点，当特征太多的时候，计算的负荷会非常大。</p><p>下面是一个例子:</p><p><img src="/img/1541684546191.png" alt="1541684546191"></p><p>当我们使用 x1, x2的多次项式进行预测时，我们可以应用的很好。 使用非线性的多项式项，能够帮助我们建立更好的分类模型。假设我们有非常多的特征，例如大于100个变量，我们希望用这100个特征来构建一个非线性的多项式模型，结果将是数量非常惊人的特征组合，即便我们只采用两两特征的组合（x1x2 + x1x3 + x1x4 + …. + x99x100），，我们也会有接近5000个组合而成的特征。这对于一般的逻辑回归来说需要计算的特征太多了。</p><a id="more"></a><p>假设我们希望训练一个模型来识别视觉对象（例如识别一张图片上是否是一辆汽车），我们怎样才能这么做呢？一<br>种方法是我们利用很多汽车的图片和很多非汽车的图片，然后利用这些图片上一个个像素的值（饱和度或亮度）来<br>作为特征。<br>假如我们只选用灰度图片，每个像素则只有一个值（而非 RGB值），作为假设，我们可以选取图片上的两个不同位置上的两<br>个像素，然后训练一个逻辑回归算法利用这两个像素的值来判断图片上是否是汽车， 如下图所示：</p><p><img src="/img/1541684864817.png" alt="1541684864817"></p><p>假使我们采用的都是50x50像素的小图片，并且我们将所有的像素视为特征，则会有 2500个特征，如果我们要进一步将两两特征组合构成一个多项式模型，则会有约3百万个特征。普通的逻辑回归模型，不能有效地处理这么多的特征，这时候我们需要神经网络。</p><h3 id="2-神经元和大脑介绍2"><a href="#2-神经元和大脑介绍2" class="headerlink" title="2.神经元和大脑介绍2"></a>2.神经元和大脑介绍2</h3><blockquote><p>神经网络是一种很古老的算法，它最初产生的目的是制造能模拟大脑的机器。</p></blockquote><p>神经网络逐渐兴起于二十世纪八九十年代，应用得非常广泛。但由于各种原因，在90年代的后期应用减少了。但是最近，神经网络又东山再起了。其中一个原因是：神经网络是计算量有些偏大的算法。然而大概由于近些年计算机的运行速度变快，才足以真正运行起大规模的神经网络。正是由于这个原因和其他一些我们后面会讨论到的技术因素，如今的神经网络对于许多应用来说是最先进的技术。当你想模拟大脑时，是指想制造出与人类大脑作用效果相同的机器。大脑可以学会去以看而不是听的方式处理图像，学会处理我们的触觉。我们能学习数学，学着做微积分，而且大脑能处理各种不同的令人惊奇的事情。似乎如果你想要模仿它，你得写很多不同的软件来模拟所有这些五花八门的奇妙的事情。不过能不能假设大脑做所有这些，不同事情的方法，不需要用上千个不同的程序去实现。相反的，大脑处理的方法，只需要一个单一的学习算法就可以了？尽管这只是一个假设，不过让我和你分享，一些这方面的证据。</p><p><img src="/img/1541685328783.png" alt="1541685328783"></p><p>大脑的这一部分这一小片红色区域是你的听觉皮层，你现在正在理解我的话，这靠的是耳朵。耳朵接收到声音信号，并把声音信号传递给你的听觉皮层，正因如此，你才能明白我的话。神经系统科学家做了下面这个有趣的实验，把耳朵到听觉皮层的神经切断。在这种情况下，将其重新接到一个动物的大脑上，这样从眼睛到视神经的信号最终将传到听觉皮层。如果这样做了。那么结果表明听觉皮层将会学会“看”。这里的“看”代表了我们所知道的每层含义。所以，如果你对动物这样做，那么动物就可以完成视觉辨别任务，它们可以看图像，并根据图像做出适当的决定。它们正是通过脑组织中的这个部分完成的。</p><p>下面再举另一个例子，这块红色的脑组织是你的躯体感觉皮层，这是你用来处理触觉的，如果你做一个和刚才类似的重接实验，那么躯体感觉皮层也能学会“看”。这个实验和其它一些类似的实验，被称为神经重接实验，从这个意义上说，如果人体有同一块脑组织可以处理光、声或触觉信号，那么也许存在一种学习算法，可以同时处理视觉、听觉和触觉，而不是需要运行上千个不同的程序，或者上千个不同的算法来做这些大脑所完成的成千上万的美好事情。也许我们需要做的就是找出一些近似的或实际的大脑学习算法，然后实现它大脑通过自学掌握如何处理这些不同类型的数据。在很大的程度上，可以猜想如果我们把几乎任何一种传感器接入到大脑的几乎任何一个部位的话，大脑就会学会处理它。<br>举几个例子：</p><p><img src="/img/1541685350471.png" alt="1541685350471"></p><p>这张图是用舌头学会“看”的一个例子。它的原理是：这实际上是一个名为BrainPort的系统，它现在正在FDA (美国食品和药物管理局)的临床试验阶段，它能帮助失明人士看见事物。它的原理是，你在前额上带一个灰度摄像头，面朝前，它就能获取你面前事物的低分辨率的灰度图像。你连一根线到舌头上安装的电极阵列上，那么每个像素都被映射到你舌头的某个位置上，可能电压值高的点对应一个暗像素电压值低的点。对应于亮像素，即使依靠它现在的功能，使用这种系统就能让你我在几十分钟里就学会用我们的舌头“看”东西。</p><p>第二个例子：</p><p><img src="/img/1541685371888.png" alt="1541685371888"></p><p>关于人体回声定位或者说人体声纳。你有两种方法可以实现：你可以弹响指，或者咂舌头。不过现在有失明人士，确实在学校里接受这样的培训，并学会解读从环境反弹回来的声波模式—这就是声纳。如果你搜索YouTube之后，就会发现有些视频讲述了一个令人称奇的孩子，他因为癌症眼球惨遭移除，虽然失去了眼球，但是通过打响指，他可以四处走动而不撞到任何东西，他能滑滑板，他可以将篮球投入篮框中。注意这是一个没有<br>眼球的孩子。</p><h3 id="3-模型表示"><a href="#3-模型表示" class="headerlink" title="3.模型表示"></a>3.模型表示</h3><h4 id="神经网络模型表示"><a href="#神经网络模型表示" class="headerlink" title="神经网络模型表示"></a>神经网络模型表示</h4><p>为了构建神经网络模型，我们需要首先思考大脑中的神经网络是怎样的？</p><p>每一个神经元都可以被认为是一个处理单元/神经核（processing unit/Nucleus），它含有许多输入/树突，并且有一个输出/轴突。神经网络是大量神经元相互链接并通过电脉冲来交流的一个网络。</p><p>下面是一组神经元的示意图，神经元利用微弱的电流进行沟通。这些弱电流也称作动作电位，其实就是一些微弱的电流。所以如果神经元想要传递一个消息，它就会就通过它的轴突，发送一段微弱电流给其他神经元，这就是轴突。</p><p><img src="/img/1541685477041.png" alt="1541685477041"></p><p>轴突是一条连接到输入神经，或者连接另一个神经元树突的神经，接下来这个神经元接收这条消息，做一些计算，它有可能会反过来将在轴突上的自己的消息传给其他神经元。这就是所有人类思考的模型：我们的神经元把自己的收到的消息进行计算，并向其他神经元传递消息。这也是我们的感觉和肌肉运转的原理。如果你想活动一块肌肉，就会触发一个神经元给你的肌肉发送脉冲，并引起你的肌肉收缩。如果一些感官：比如说眼睛想要给大脑传递一个消息，那么它就像这样发送电脉冲给大脑的。</p><p><img src="/img/1541685576582.png" alt="1541685576582"></p><p>神经网络模型建立在很多神经元之上，每一个神经元又是一个个学习模型。这些神经元（也叫激活单元，activation unit）采纳一些特征作为输出，并且根据本身的模型提供一个输出。下图是一个以逻辑回归模型作为自身学习模型的神经元示例，在神经网络中，参数又可被成为权重（weight）。</p><p>逻辑回归学习模型的神经元：</p><p><img src="/img/1541686908794.png" alt="1541686908794"></p><p>单个神经元的效果和逻辑回归的效果没有区别，但是神经网络会组成有神经元组成的网络。</p><p>一个简单的神经网络</p><p><img src="/img/1541687140133.png" alt="1541687140133"></p><p>其中 x1, x2, x3是输入单元（input units），我们将原始数据输入给它们。 a1, a2, a3是中间单元，代表三个神经元，它们负责将数据进行处理，然后呈递到下一层。 最后是输出单元，它负责计算 hθ(x)。<br>神经网络模型是许多逻辑单元按照不同层级组织起来的网络，每一层的输出变量都是下一层的输入变量。下图为一个3层的神经网络，第一层成为输入层（Input Layer），最后一层称为输出层（Output Layer），中间一层成为隐藏层（Hidden Layers）。我们为每一层都增加一个偏差单位（bias unit）：</p><p><img src="/img/1541688086117.png" alt="1541688086117"></p><p>下面引入一些标记法来帮助描述模型： $a_i^{(j)}$代表第 j 层的第 i 个激活单元(神经元)。 $\theta^{(j)}$代表从第 j 层映射到第 j+1 层时的权重的矩阵，例如 $\theta^{(1)}$ 代表从第一层映射到第二层的权重的矩阵。其尺寸为：以第 j + 1 层的激活单元数量为行数，以第 j 层的激活单元数加一为列数的矩阵。例如：上图所示的神经网络中 $\theta^{(1)}$ 的尺寸为 3*4。</p><blockquote><p>注: 每层权重矩阵的列数为 ( 神经元数 + 1 ), 行数为 ( 上一层神经元数 + 1 )</p></blockquote><p><strong>对于上图所示的模型，激活单元和输出分别表达为：</strong></p><p><img src="/img/1541688405565.png" alt="1541688405565"></p><p>上面进行的讨论中只是将特征矩阵中的一行（一个训练实例）喂给了神经网络，我们需要将整个训练集都喂给我们的神经网络算法来学习模型</p><p>我们可以知道：每一个 a  的输出都是由上一层所有的 x 和每一个 x 所对应的 θ 决定的（我们把这样从左到右的算法称为前向传播算法( FORWARD PROPAGATION )）把 x , θ, a分别用矩阵表示：</p><p><img src="/img/1541689201260.png" alt="1541689201260"></p><h4 id="神经网络模型向量化"><a href="#神经网络模型向量化" class="headerlink" title="神经网络模型向量化"></a>神经网络模型向量化</h4><p>( FORWARD PROPAGATION ) 相对于使用循环来编码，利用向量化的方法会使得计算更为简便。以上面的神经网络为例，试着计算第二层的值：</p><p><img src="/img/1541689568821.png" alt="1541689568821"></p><p><img src="/img/1541689589734.png" alt="1541689589734"></p><p><strong>为了更好了了解Neuron Networks的工作原理，我们先把左半部分遮住：</strong></p><p><img src="/img/1541689986501.png" alt="1541689986501"></p><p>右半部分其实就是以a0, a1, a2, a3 , 按照Logistic Regression的方式输出 hθ(x)：</p><p><img src="/img/1541690041021.png" alt="1541690041021"></p><p>其实神经网络就像是logistic regression，只不过我们把logistic regression中的输入向量 [x1 - x3] 变成了中间层的 [ $a_1^{(2)}$ -  $a_3^{(2)}$]  ,我们可以把a0, a1, a2, a3看成更为高级的特征值，也就是x0, x1, x2, x3 的进化体，并且它们是由 x 与 θ 决定的，因为是梯度下降的，所以 a 是变化的，并且变得越来越厉害，所以这些更高级的特征值远比仅仅将 x 次方厉害，也能更好的预测新数据。 这就是神经网络相比于逻辑回归和线性回归的优势。</p><h3 id="4-特征的直观理解"><a href="#4-特征的直观理解" class="headerlink" title="4. 特征的直观理解"></a>4. 特征的直观理解</h3><p>从本质上讲，神经网络能够通过学习得出其自身的一系列特征。在普通的逻辑回归中，我们被限制为使用数据中的原始特征，我们虽然可以使用一些二项式项来组合这些特征，但是我们仍然受到这些原始特征的限制。在神经网络中，原始特征只是输入层，在我们上面三层的神经网络例子中，第三层也就是输出层做出的预测利用的是第二层的特征，而非输入层中的原始特征，我们可以认为第二层中的特征是神经网络通过学习后自己得出的一系列用于预测输出变量的新特征。</p><p>神经网络中，单层神经元（无中间层）的计算可用来表示逻辑运算，比如逻辑与(AND)、逻辑或(OR)。<br><strong>举例说明：</strong></p><p><strong>逻辑与(AND)：</strong>下图中左半部分是神经网络的设计与output层表达式，右边上部分是sigmod函数，下半部分是真值表。</p><p>其中 θ0 = -30, θ1 = 20, θ2 = 20 我们的输出函数hθ(x) 即为：hθ(x) = g(-30 + 20x1 + 20x2), g(x) 的图像是：</p><p><img src="/img/1541690399999.png" alt="1541690399999"><img src="/img/1541690413531.png" alt="1541690413531"></p><p><img src="/img/1541690578952.png" alt="1541690578952"></p><p>所以我们有：hθ(x) ≈ x1 AND x2</p><p><strong>逻辑或(OR)</strong>: 下图是神经网络的设计与output层表达式和真值表。</p><p><img src="/img/1541690859375.png" alt="1541690859375"></p><p><strong>逻辑非(NOT)：</strong></p><p><img src="/img/1541690992427.png" alt="1541690992427"></p><p><strong>异或(XNOR):</strong></p><p><img src="/img/1541691150027.png" alt="1541691150027"></p><h3 id="5-多分类神经网络"><a href="#5-多分类神经网络" class="headerlink" title="5.多分类神经网络"></a>5.多分类神经网络</h3><p>当我们有不止两种分类时（也就是 y = 1, 2, 3, … ），比如以下这种情况，该怎么办？</p><p>如果我们要训练一个神经网络算法来识别路人、汽车、摩托车和卡车，在输出层我们应该有4个值。例如，第一个值为1或0用于预测是否是行人，第二个值用于判断是否为汽车。<br>假如输入向量 x 有三个维度，两个中间层，输出层4个神经元分别用来表示4类，也就是每一个数据在输出层都会出现 [a b c d] ^T, 且a, b, c,  d 中仅有一个为1，表示当前类。下面是该神经网络的可能结构示例：</p><p><img src="/img/1541691440767.png" alt="1541691440767"></p><h3 id="6-神经网络常用的激活函数"><a href="#6-神经网络常用的激活函数" class="headerlink" title="6. 神经网络常用的激活函数"></a>6. 神经网络常用的激活函数</h3><h4 id="什么是激活函数"><a href="#什么是激活函数" class="headerlink" title="什么是激活函数"></a>什么是激活函数</h4><p>在神经网络中，我们经常可以看到对于<strong>某一个隐藏层的节点</strong>，该节点的激活值计算一般分为<strong>两步</strong>：<br>  （1）输入该节点的值为 x1,x2时，在进入这个隐藏节点后，<strong>会先进行一个线性变换</strong>，计算出值 $z^{[1]}=w_1x_1+w_2x_2+b^{[1]}=W^{[1]}x+b^{[1]}$，上标 1表示第 1 层隐藏层。<br>  （2）<strong>再进行一个非线性变换</strong>，也就是经过<strong>非线性激活函数</strong>，计算出该节点的<strong>输出值(激活值)</strong> $a^{(1)}=g(z^{(1)})$ ，其中 g(z)为非线性函数。</p><p><img src="/img/1541914303454.png" alt="1541914303454"></p><h3 id="常用的激活函数"><a href="#常用的激活函数" class="headerlink" title="常用的激活函数"></a>常用的激活函数</h3><p>在深度学习中，常用的激活函数主要有：<strong>sigmoid函数，tanh函数，ReLU函数</strong>。</p><p><strong>1.sigmoid函数</strong></p><p>在逻辑回归中我们介绍过sigmoid函数，该函数是将取值为 (−∞,+∞)(−∞,+∞) 的数映射到 (0,1)(0,1) 之间。sigmoid函数的公式以及图形如下：</p><p><img src="/img/1541916961661.png" alt="1541916961661"></p><p>sigmoid激活函数<strong>缺点</strong>：</p><p>（1）当 z 值<strong>非常大</strong>或者<strong>非常小</strong>时，通过上图我们可以看到，sigmoid函数的<strong>导数</strong> g′(z) 将接近 0 。这会导致权重 W 的<strong>梯度</strong>将接近 0 ，使得<strong>梯度更新十分缓慢</strong>，即<strong>梯度消失</strong>。</p><p>（2）<strong>函数的输出不是以0为均值</strong>，将不便于下层的计算。<strong>sigmoid函数可用在网络最后一层，作为输出层进行二分类</strong>，尽量不要使用在隐藏层。</p><p>   (3) 指数计算消耗资源</p><p><strong>2.tanh函数</strong></p><p> tanh函数相较于sigmoid函数要常见一些，该函数是将取值为 (−∞,+∞)(−∞,+∞) 的数映射到 (−1,1)(−1,1)之间，其公式与图形为：</p><p><img src="/img/1541917618607.png" alt="1541917618607"></p><p>tanh函数的<strong>优点</strong></p><p>(1) tanh解决了sigmoid的输出非“零为中心”的问题。</p><p>tanh函数的<strong>缺点</strong></p><p>（1）同sigmoid函数的第一个缺点一样，当 z <strong>很大或很小</strong>时，g′(z) 接近于 0 ，会导致梯度很小，权重更新非常缓慢，即<strong>梯度消失问题</strong>。</p><p>   (2)  依旧是指数计算</p><p><strong>3.ReLU函数</strong></p><p>ReLU函数又称为<strong>修正线性单元（Rectified Linear Unit）</strong>，是一种分段线性函数，其弥补了sigmoid函数以及tanh函数的<strong>梯度消失问题</strong>。ReLU函数的公式以及图形如下：</p><p><img src="/img/1541917904036.png" alt="1541917904036"></p><p>ReLU函数的<strong>优点</strong>：<br>（1）在输入为正数的时候（对于大多数输入 zz 空间来说），不存在梯度消失问题。<br>（2） 计算速度要快很多。ReLU函数只有线性关系，不管是前向传播还是反向传播，都比sigmod和tanh要快很多。（sigmod和tanh要计算指数，计算速度会比较慢）<br>ReLU函数的<strong>缺点</strong>：</p><p>（1）当输入为负时，梯度为0，会产生梯度消失问题。</p><p><strong>4.Leaky ReLU 函数</strong></p><p> 这是一种对ReLU函数改进的函数，又称为PReLU函数，但其并不常用。其公式与图形如下：</p><p><img src="/img/1541918305822.png" alt="1541918305822"></p><p>Leaky ReLU函数解决了ReLU函数在输入为负的情况下产生的<strong>梯度消失问题</strong>。</p><p>优点:</p><p>1.神经元不会出现死亡的情况。</p><p>2.对于所有的输入，不管是大于等于0还是小于0，神经元不会饱和。</p><p>3.由于Leaky ReLU线性、非饱和的形式，在SGD中能够快速收敛。</p><p>4.计算速度要快很多。Leaky ReLU函数只有线性关系，不需要指数计算，不管在前向传播还是反向传播，计算速度都比sigmoid和tanh快。</p><h3 id="7-神经网络代价函数"><a href="#7-神经网络代价函数" class="headerlink" title="7.神经网络代价函数"></a>7.神经网络代价函数</h3><p>假设神经网络的训练样本有 m 个，每个包含一组输入x 和一组输出信号 y ，L 表示神经网络层数，Si 表示每层的<br>neuron个数( Sl表示输出层神经元个数)，SL 代表最后一层中处理单元的个数。</p><p>将神经网络的分类定义为两种情况：二类分类和多类分类，</p><p>二类分类: SL = 1, y = 0 or 1 表示哪一类；</p><p>K类分类:  SL = k, yi = 1 表示分到第i类； (k &gt; 2)</p><p><img src="/img/1542509643821.png" alt="1542509643821"></p><p><img src="/img/1542510435521.png" alt="1542510435521"></p><p>这个看起来复杂很多的代价函数背后的思想还是一样的，我们希望通过代价函数来观察算法预测的结果与真实情况的误差有多大，唯一不同的是，对于每一行特征，我们都会给出 K 个预测，基本上我们可以利用循环，对每一行特征都预测 K 个不同结果，然后在利用循环在 K 个预测中选择可能性最高的一个，将其与 y 中的实际数据进行比较。<br>正则化的那一项只是排除了每一层 θ0 后，每一层的 θ 矩阵的和。最里层的循环 j 循环所有的行（由 sl +1 层的激活单元数决定），循环 i 则循环所有的列，由该层（ sl 层）的激活单元数所决定。即：hθ(x) 与真实值之间的距离为每个样本-每个类输出的加和，对参数进行<strong>regularization</strong>的<strong>bias</strong>项处理所有参数的平方和。</p><h3 id="8-反向传播算法"><a href="#8-反向传播算法" class="headerlink" title="8.反向传播算法"></a>8.反向传播算法</h3><h4 id="反向传播算法介绍"><a href="#反向传播算法介绍" class="headerlink" title="反向传播算法介绍"></a>反向传播算法介绍</h4><p>在计算神经网络预测结果的时候采用了正向传播的算法，即从第一层开始向正向一层的神经元一层一层进行计算，知道最后一层的hθ(x).</p><p>为了计算代价函数的偏导数${\delta\over\delta\theta_{ij}^{(i)}} J(\theta)$ , 现在需要用到反向传播算法，以极具是首先计算最后一层的误差，然后再一层一层的反向求出各层的误差，直到倒数第二层。下面举例说明反向传播算法：</p><p>假设我们的训练集只有一个实例(x^(1), y^(1)), 我们的神经网络是一个四层的神经网络，其中: K = 4, SL = 4, L = 4</p><p><strong>其前向传播算法为:</strong> </p><p><img src="/img/1542511793330.png" alt="1542511793330"></p><p><strong>反向传播算法推导过程</strong></p><p><img src="/img/1542512354542.png" alt="1542512354542"></p><p>即首先用正向传播方法计算出每一层的激活单元，利用训练集的结果与神经网络预测的结果求出最后一层的误差，然后利用该误差运用反向传播法计算出直至第二层的所有误差。</p><p><img src="/img/1542519045241.png" alt="1542519045241"></p><h3 id="9-模型构建常用技巧"><a href="#9-模型构建常用技巧" class="headerlink" title="9. 模型构建常用技巧"></a>9. 模型构建常用技巧</h3><h4 id="1-梯度检验"><a href="#1-梯度检验" class="headerlink" title="1.梯度检验"></a>1.梯度检验</h4><p><img src="/img/1542520879656.png" alt="1542520879656"></p><h4 id="2-随机初始化"><a href="#2-随机初始化" class="headerlink" title="2. 随机初始化"></a>2. 随机初始化</h4><p>任何优化算法都需要一些初始的参数。到目前为止我们都是初始所有参数为0，这样的初始方法对于逻辑回归来说是可行的，但是对于神经网络来说是不可行的。如果我们令所有的初始参数都为0，这将意味着我们第二层的所有激活单元都会有相同的值。同理，如果我们初始所有的参数都为一个非0的数，结果也是一样的， 会导致梯度消失的情况。我们通常初始参数为正负ε之间的随机值，假设我们要随机初始一个尺寸为10×11的参数矩阵，代码如下：<br><code>Theta1 = rand(10, 11) * (2*eps) – ep</code></p><h3 id="10-梯度小时和梯度爆照"><a href="#10-梯度小时和梯度爆照" class="headerlink" title="10. 梯度小时和梯度爆照"></a>10. 梯度小时和梯度爆照</h3><p><strong>(1)简介梯度消失与梯度爆炸</strong></p><p>层数比较多的神经网络模型在训练的时候会出现梯度消失(gradient vanishing problem)和梯度爆炸(gradient exploding problem)问题。梯度消失问题和梯度爆炸问题一般会随着网络层数的增加变得越来越明显。</p><p>例如，对于图1所示的含有3个隐藏层的神经网络，梯度消失问题发生时，靠近输出层的hidden layer 3的权值更新相对正常，但是靠近输入层的hidden layer1的权值更新会变得很慢，导致靠近输入层的隐藏层权值几乎不变，扔接近于初始化的权值。这就导致hidden layer 1 相当于只是一个映射层，对所有的输入做了一个函数映射，这时此深度神经网络的学习就等价于只有后几层的隐藏层网络在学习。梯度爆炸的情况是：当初始的权值过大，靠近输入层的hidden layer 1的权值变化比靠近输出层的hidden layer 3的权值变化更快，就会引起梯度爆炸的问题。</p><p><img src="/img/1542521622023.png" alt="1542521622023"></p><p><strong>(2)梯度不稳定问题</strong></p><p>在深度神经网络中的梯度是不稳定的，在靠近输入层的隐藏层中或会消失，或会爆炸。这种不稳定性才是深度神经网络中基于梯度学习的根本问题。</p><p>梯度不稳定的原因：前面层上的梯度是来自后面层上梯度的乘积。当存在过多的层时，就会出现梯度不稳定场景，比如梯度消失和梯度爆炸。</p><p><strong>(3)产生梯度消失的根本原因</strong></p><p>我们以图2的反向传播为例，假设每一层只有一个神经元且对于每一层都可以用公式1表示，其中σ为sigmoid函数，C表示的是代价函数，前一层的输出和后一层的输入关系如公式1所示。我们可以推导出公式2。</p><p><img src="/img/1542521637136.png" alt="1542521637136"></p><p>图2：简单的深度神经网络</p><p><img src="/img/1542521714489.png" alt="1542521714489"></p><p>而sigmoid函数的导数σ’(x)如图3所示。</p><p><img src="/img/1542521735544.png" alt="1542521735544"></p><p>图3：sigmoid函数导数图像</p><p>可见，σ’(x)的最大值为 1/4，而我们一般会使用标准方法来初始化网络权重，即使用一个均值为0标准差为1的高斯分布。因此，初始化的网络权值通常都小于1，从而有 |σ’(z)w &lt;= 1/4|。对于2式的链式求导，层数越多，求导结果越小，最终导致梯度消失的情况出现。</p><p><img src="/img/1542521829814.png" alt="1542521829814"></p><p><strong>(4)产生梯度爆炸的根本原因</strong></p><p>当<img src="/img/1542521870103.png" alt="1542521870103">，也就是w比较大的情况。则前面的网络层比后面的网络层梯度变化更快，引起了梯度爆炸的问题。</p><p><strong>(5)如何解决梯度消失和梯度爆炸</strong></p><p>梯度消失和梯度爆炸问题都是因为网络太深，网络权值更新不稳定造成的，本质上是因为梯度反向传播中的连乘效应。<strong>对于更普遍的梯度消失问题，可以考虑以下三种方案解决：</strong></p><ol><li><strong>用ReLU、Leaky ReLU、PReLU、RReLU、Maxout等替代sigmoid函数。</strong></li><li><strong>用Batch Normalization。</strong></li><li><strong>LSTM的结构设计也可以改善RNN中的梯度消失问题。</strong></li></ol><h3 id="11-构建神经网络的综合步骤"><a href="#11-构建神经网络的综合步骤" class="headerlink" title="11.构建神经网络的综合步骤"></a>11.构建神经网络的综合步骤</h3><p>网络结构：第一件要做的事是选择网络结构，即决定选择多少层以及决定每层分别有多少个单元。<br>第一层的单元数即我们训练集的特征数量。<br>最后一层的单元数是我们训练集的结果的类的数量。<br>如果隐藏层数大于1，确保每个隐藏层的单元个数相同，通常情况下隐藏层单元的个数越多越好。<br>我们真正要决定的是隐藏层的层数和每个中间层的单元数。<br>训练神经网络：</p><ol><li>参数的随机初始化</li><li><p>利用正向传播方法计算所有的hθ(x)</p></li><li><p>编写计算代价函数 J 的代码</p></li><li>利用反向传播方法计算所有偏导数</li><li>利用数值检验方法检验这些偏导数</li><li>使用优化算法来最小化代价函数</li></ol><h3 id="一句话总结神经网络"><a href="#一句话总结神经网络" class="headerlink" title="一句话总结神经网络"></a>一句话总结神经网络</h3><p>我认为神经网络就是通过各层神经元将变量的重新计算， 导致特征的维度被大大放大， 总之经过神经网络瞎搞之后，特征已不是简单的特征，而原理从根本还是逻辑回归，当特征数量较多，而且模型不能满足线型要求， 可以考虑使用神经网络</p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> 神经网络 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sklearn 逻辑回归</title>
      <link href="/2018/11/03/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/sklearn%20%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/"/>
      <url>/2018/11/03/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/sklearn%20%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/</url>
      
        <content type="html"><![CDATA[<h3 id="逻辑回归作用"><a href="#逻辑回归作用" class="headerlink" title="逻辑回归作用"></a>逻辑回归作用</h3><p>可以做概率预测，也可用于分类，仅能用于线性问题。通过计算真实值与预测值的概率，然后变换成损失函数，求损失函数最小值来计算模型参数，从而得出模型。</p><h3 id="sklearn调用接口"><a href="#sklearn调用接口" class="headerlink" title="sklearn调用接口"></a>sklearn调用接口</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">sklearn</span>.<span class="title">linear_model</span>.<span class="title">LogisticRegression</span><span class="params">(penalty=’l2’, dual=False, tol=<span class="number">0.0001</span>, C=<span class="number">1.0</span>, fit_intercept=True, intercept_scaling=<span class="number">1</span>, class_weight=None, *random_state=None*, solver=’liblinear‘, max_iter=<span class="number">100</span>, multi_class=’ovr’, verbose=<span class="number">0</span>, warm_start=False, n_jobs=<span class="number">1</span>)</span></span></span><br></pre></td></tr></table></figure><a id="more"></a><p>参数**</p><p>　　=&gt; <strong>penalty</strong> : str, ‘l1’ or ‘l2’　　</p><p>　　　　LogisticRegression和LogisticRegressionCV默认就带了正则化项。penalty参数可选择的值为”l1”和”l2”，分别对应L1的正则化和L2的正则化，默认是L2的正则化。</p><p>　　　　在调参时如果我们主要的目的只是为了解决过拟合，一般penalty选择L2正则化就够了。但是如果选择L2正则化发现还是过拟合，即预测效果差的时候，就可以考虑L1正则化。</p><p>　　　　另外，如果模型的特征非常多，我们希望一些不重要的特征系数归零，从而让模型系数稀疏化的话，也可以使用L1正则化。</p><p>　　　　penalty参数的选择会影响我们损失函数优化算法的选择。即参数solver的选择，如果是L2正则化，那么4种可选的算法{‘newton-cg’, ‘lbfgs’, ‘liblinear’, ‘sag’}都可以选择。</p><p>　　　　但是如果penalty是L1正则化的话，就只能选择‘liblinear’了。这是因为L1正则化的损失函数不是连续可导的，而{‘newton-cg’, ‘lbfgs’,‘sag’}这三种优化算法时都需要损失函数的一阶或者二阶连续导数。而‘liblinear’并没有这个依赖。</p><p>　　=&gt; <strong>dual</strong> : bool</p><p>　　　　对偶或者原始方法。Dual只适用于正则化相为l2 liblinear的情况，通常样本数大于特征数的情况下，默认为False</p><p>　　=&gt; <strong>tol</strong> : float, optional</p><p>　　迭代终止判据的误差范围。</p><p>　　=&gt; <strong>C</strong> : float, default: 1.0</p><p>　　　　C为正则化系数λ的倒数，通常默认为1。设置越小则对应越强的正则化。</p><p>　　=&gt; <strong>fit_intercept</strong> : bool, default: True</p><p>　　　　是否存在截距，默认存在</p><p>　　=&gt; <strong>intercept_scaling</strong> : float, default 1.</p><p>　　　　仅在正则化项为”liblinear”，且fit_intercept设置为True时有用。</p><p>　　=&gt; <strong>class_weight</strong> : dict or ‘balanced’, default: None</p><p>　　　　class_weight参数用于标示分类模型中各种类型的权重，可以不输入，即不考虑权重，或者说所有类型的权重一样。如果选择输入的话，可以选择balanced让类库自己计算类型权重，</p><p>　　　　或者我们自己输入各个类型的权重，比如对于0,1的二元模型，我们可以定义class_weight={0:0.9, 1:0.1}，这样类型0的权重为90%，而类型1的权重为10%。</p><p>　　　　如果class_weight<strong>选择**</strong>balanced**，那么类库会根据训练样本量来计算权重。某种类型样本量越多，则权重越低；样本量越少，则权重越高。</p><p>　　　　当class_weight为balanced时，类权重计算方法如下：n_samples / (n_classes * np.bincount(y))</p><p>　　　　n_samples为样本数，n_classes为类别数量，np.bincount(y)会输出每个类的样本数，例如y=[1,0,0,1,1],则np.bincount(y)=[2,3]  0,1分别出现2次和三次</p><p>　　　　<strong>那么**</strong>class_weight<strong>**有什么作用呢？</strong></p><p>​        　　在分类模型中，我们经常会遇到两类问题：</p><p>​       　　 第一种是<strong>误分类的代价很高</strong>。比如对合法用户和非法用户进行分类，将非法用户分类为合法用户的代价很高，我们宁愿将合法用户分类为非法用户，这时可以人工再甄别，但是却不愿将非法用户分类为合法用户。这时，我们可以适当提高非法用户的权重。</p><p>​      　　 第二种是<strong>样本是高度失衡的</strong>，比如我们有合法用户和非法用户的二元样本数据10000条，里面合法用户有9995条，非法用户只有5条，如果我们不考虑权重，则我们可以将所有的测试集都预测为合法用户，这样预测准确率理论上有99.95%，但是却没有任何意义。</p><p>　　　　这时，我们可以选择balanced，让类库自动提高非法用户样本的权重。</p><p>　　=&gt; <strong>random_state</strong> : int, RandomState instance or None, optional, default: None</p><p>　　　　随机数种子，默认为无，仅在正则化优化算法为sag,liblinear时有用。</p><p>　　=&gt; <strong>solver</strong> : {‘newton-cg’, ‘lbfgs’, ‘liblinear’, ‘sag’, ‘saga’}</p><p>　　　　solver参数决定了我们对逻辑回归损失函数的优化方法，有4种算法可以选择，分别是：</p><p>　　　　　　a) liblinear：使用了开源的liblinear库实现，内部使用了坐标轴下降法来迭代优化损失函数。</p><p>　　　　　　b) lbfgs：拟牛顿法的一种，利用损失函数二阶导数矩阵即海森矩阵来迭代优化损失函数。</p><p>　　　　　　c) newton-cg：也是牛顿法家族的一种，利用损失函数二阶导数矩阵即海森矩阵来迭代优化损失函数。</p><p>　　　　　　d) sag：即随机平均梯度下降，是梯度下降法的变种，和普通梯度下降法的区别是每次迭代仅仅用一部分的样本来计算梯度，适合于样本数据多的时候，SAG是一种线性收敛算法，这个速度远比SGD快。</p><p>　　　　从上面的描述可以看出，newton-cg, lbfgs和sag这三种优化算法时都需要损失函数的一阶或者二阶连续导数，因此不能用于没有连续导数的L1正则化，只能用于L2正则化。而liblinear则既可以用L1正则化也可以用L2正则化。</p><p>　　　　同时，sag每次仅仅使用了部分样本进行梯度迭代，所以当样本量少的时候不要选择它，而如果样本量非常大，比如大于10万，sag是第一选择。但是sag不能用于L1正则化，所以当你有大量的样本，又需要L1正则化的话就要自己做取舍了</p><p>　　=&gt; <strong>max_iter</strong> : int, optional</p><p>　　　　仅在正则化优化算法为newton-cg, sag and lbfgs 才有用，算法收敛的最大迭代次数。</p><p>　　=&gt; <strong>multi_class</strong> : str, {‘ovr’, ‘multinomial’}, default: ‘ovr’　　　　</p><p> 　  　　OvR的思想很简单，无论你是多少元逻辑回归，我们都可以看做二元逻辑回归。具体做法是，对于第K类的分类决策，我们把所有第K类的样本作为正例，除了第K类样本以外的所有样本都作为负例，然后在上面做二元逻辑回归，得到第K类的分类模型。</p><p>　　　　其他类的分类模型获得以此类推。</p><p>​         　 而MvM则相对复杂，这里举MvM的特例one-vs-one(OvO)作讲解。如果模型有T类，我们每次在所有的T类样本里面选择两类样本出来，不妨记为T1类和T2类，把所有的输出为T1和T2的样本放在一起，把T1作为正例，T2作为负例，进行二元逻辑回归，</p><p>　　　   得到模型参数。我们一共需要T(T-1)/2次分类。</p><p>　　　   可以看出OvR相对简单，但分类效果相对略差（这里指大多数样本分布情况，某些样本分布下OvR可能更好）。而MvM分类相对精确，但是分类速度没有OvR快。如果选择了ovr，则4种损失函数的优化方法liblinear，newton-cg,lbfgs和sag都可以选择。</p><p>　　　   但是如果选择了multinomial,则只能选择newton-cg, lbfgs和sag了。</p><p>　　=&gt; <strong>verbose</strong> : int, default: 0</p><p>　　=&gt; <strong>warm_start</strong> : bool, default: False</p><p>　　=&gt; <strong>n_jobs</strong> : int, default: 1</p><p>　　　　如果multi_class =’ovr’“，并行数等于CPU内核数量。当“solver”设置为“liblinear”时，无论是否指定“multi_class”，该参数将被忽略。如果给定值-1，则使用所有内核。</p><p>　　</p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 逻辑回归 </tag>
            
            <tag> sklearn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>过拟合、正则化(Regularization)</title>
      <link href="/2018/11/02/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E6%AD%A3%E5%88%99%E5%8C%96/"/>
      <url>/2018/11/02/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E6%AD%A3%E5%88%99%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h3 id="1-过拟合问题"><a href="#1-过拟合问题" class="headerlink" title="1.过拟合问题"></a>1.过拟合问题</h3><h4 id="过拟合问题描述"><a href="#过拟合问题描述" class="headerlink" title="过拟合问题描述"></a>过拟合问题描述</h4><p>常用的机器学习优化算法，包括线性回归和逻辑回归，它们能够有效地解决许多问题，但是当将它们应用到某些特定的机器学习应用时，会遇到过拟合(over-fitting)的问题，可能会导致它们效果很差。使用正则化技术可以减少过拟合问题。<br>如果我们有非常多的特征，我们通过学习得到的假设可能能够非常好地适应训练集（代价函数可能几乎为0），但是可能会不能推广到新的数据。<br>下图是一个回归问题的例子：</p><p><img src="/img/1541172957837.png" alt="1541172957837"></p><a id="more"></a><p>第一个模型是一个线性模型，欠拟合，不能很好地适应我们的训练集；第三个模型是一个四次方的模型，过于强调拟合原始数据，而丢失了算法的本质：预测新数据。我们可以看出，若给出一个新的值使之预测，它将表现的很差，是过拟合，虽然能非常好地适应我们的训练集但在新输入变量进行预测时可能会效果不好；而中间的模型似乎最合适。<br>分类问题中也存在这样的问题：</p><p><img src="/img/1541173045662.png" alt="1541173045662"></p><p>就以多项式理解， 的次数越高，拟合的越好，但相应的预测的能力就可能变差。</p><blockquote><p>如果我们发现了过拟合问题，应该如何处理？</p></blockquote><ol><li>丢弃一些不能帮助我们正确预测的特征。可以是手工选择保留哪些特征，或者使用一些模型选择的算法来帮忙（例如PCA）</li><li>正则化。 保留所有的特征，但是减少参数的大小（magnitude）。</li></ol><h3 id="2-代价函数"><a href="#2-代价函数" class="headerlink" title="2.代价函数"></a>2.代价函数</h3><p>上面的回归问题中如果我们的模型是：$h_θ(x) = θ_0 + θ_1x_1 + θ_2x_2^2 + θ_3x_3^3 + θ_4x_4^4$ 我们可以从之前的事例中看出，正是那些高次项导致了过拟合的产生，所以如果我们能让这些高次项的系数接近于0的话，我们就能很好的拟合了。 所以我们要做的就是在一定程度上减小这些参数 θ 的值，这就是正则化的基本方法。</p><p>我们决定要减少θ3和 θ4的大小，我们要做的便是修改代价函数，在其中 θ3和 θ4 设置一点惩罚。这样做的话，我们在尝试最小化代价时也需要将这个惩罚纳入考虑中，并最终导致选择较小一些的 θ3和θ4。 修改后的代价函数如下：</p><p>$min_θ {1\over 2m}[h_θ(x^{(i)} - y^{(i)})^2 + 1000θ_3^2 + 10000θ_4^2]$</p><p>通过这样的代价函数选择出的 θ3和 θ4 对预测结果的影响就比之前要小许多， 因为为了θ3和θ4的系数很大，为了优化代价函数， 其值一定会特别的小。</p><p>假如我们有非常多的特征，我们并不知道其中哪些特征我们要惩罚，我们将对所有的特征进行惩罚，并且让代价函数最优化的软件来选择这些惩罚的程度。这样的结果是得到了一个较为简单的能防止过拟合问题的假设：</p><blockquote><p>$J_θ = {1\over 2m}[\sum_{i=1}^m(h_θ(x^{(i)}) - y^{(i)}) + λ\sum_{j=1}^nθ_j^2]$<br>其中又称为正则化参数（Regularization Parameter）。 注：根据惯例，我们不对 θ0 进行惩罚。</p></blockquote><p>经过正则化处理的模型与原模型的可能对比如下图所示：</p><p><img src="/img/1541174343216.png" alt="1541174343216"></p><p>如果选择的正则化参数λ过大，则会把所有的参数都最小化了，导致模型变成 $h_θ(x) = θ_0$，也就是上图中红色直线所示的情况，造成欠拟合。 </p><p>那为什么增加的一项 $λ\sum_{j=1}^nθ_j^2$  可以使的值减小呢？ </p><p>因为如果我们令 λ的值很大的话，为了使Cost Function 尽可能的小，所有的 θ 的值（不包括θ0） 都会在一定程度上减小。 但若λ的值太大了，那么不包括θ0）都会趋近于0，这样我们所得到的只能是一条平行于轴的直线。 所以对于正则化，我们要取一个合理的 λ 的值，这样才能更好的应用正则化。 回顾一下代价函数，为了使用正则化，让我们把这些概念应用到到线性回归和逻辑回归中去，那么我们就可以让他们避免过度拟合了。</p><h3 id="3-正则化线性回归"><a href="#3-正则化线性回归" class="headerlink" title="3.正则化线性回归"></a>3.正则化线性回归</h3><p>对于线性回归的求解，我们之前推导了两种学习算法：一种基于梯度下降，一种基于正规方程。<br>正则化线性回归的代价函数为：</p><p> $J_{(θ)} = {1\over 2m} \sum_{i=1}^m[(h_θ(x^{(i)})-y^{(i)})^2 + λ\sum_{j=1}^nθ_j^2]$</p><p>如果我们要使用梯度下降法令这个代价函数最小化，因为我们未对θ进行正则化，所以梯度下降算法将分两种情形：</p><p><img src="/img/1541174923066.png" alt="1541174923066"></p><h3 id="4-正规方程逻辑回归"><a href="#4-正规方程逻辑回归" class="headerlink" title="4.正规方程逻辑回归"></a>4.正规方程逻辑回归</h3><p>针对逻辑回归问题，我们在之前的课程已经学习过两种优化算法：我们首先学习了使用梯度下降法来优化代价函数J(θ)，接下来学习了更高级的优化算法，这些高级优化算法需要你自己设计代价函数J(θ)。</p><p><img src="/img/1541175045035.png" alt="1541175045035"></p><p><strong>用Python实现</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">costReg</span><span class="params">(theta, X, y, learningRate)</span>:</span></span><br><span class="line">theta = np.matrix(theta)</span><br><span class="line">X = np.matrix(X)</span><br><span class="line">y = np.matrix(y)</span><br><span class="line">first = np.multiply(‐y, np.log(sigmoid(X*theta.T)))</span><br><span class="line">second = np.multiply((<span class="number">1</span> ‐ y), np.log(<span class="number">1</span> ‐ sigmoid(X*theta.T)))</span><br><span class="line">reg = (learningRate / (<span class="number">2</span> * len(X))* np.sum(np.power(theta[:,<span class="number">1</span>:theta.shape[<span class="number">1</span>]],<span class="number">2</span>))</span><br><span class="line"><span class="keyword">return</span> np.sum(first ‐ second) / (len(X)) + reg</span><br></pre></td></tr></table></figure><p><strong>要最小化该代价函数，通过求导，得出梯度下降算法为：</strong></p><p><img src="/img/1541175163753.png" alt="1541175163753"></p><p>注：看上去同线性回归一样，但是知道 $h_θ(x) = g(θ^TX)$ ，所以与线性回归不同。 Octave 中，我们依旧可以用fminuc 函数来求解代价函数最小化的参数，值得注意的是θ0参数的更新规则与其他情况不同。 </p><blockquote><p>注意：</p><ol><li>虽然正则化的逻辑回归中的梯度下降和正则化的线性回归中的表达式看起来一样，但由于两者hθ(x)的不同所以还是有很大差别。</li><li>θ不参与其中的任何一个正则化。</li></ol></blockquote><h3 id="5-其他防止过拟合的方法"><a href="#5-其他防止过拟合的方法" class="headerlink" title="5.其他防止过拟合的方法"></a>5.其他防止过拟合的方法</h3><h4 id="Dropout"><a href="#Dropout" class="headerlink" title="Dropout"></a>Dropout</h4><p>Dropout是在深度学习中降低过拟合风险的常见方法，它是由大牛Hinton老爷子提出的。老爷子认为在神经网络产生过拟合主要是因为神经元之间的协同作用产生的。因此老爷子在神经网络进行训练的时候，让部分神经元失活，这样就阻断了部分神经元之间的协同作用，从而强制要求一个神经元和随机挑选出的神经元共同进行工作，减轻了部分神经元之间的联合适应性。<br>Dropout的具体流程如下：</p><p>1.对 l 层第 j 个神经元产生一个随机数 $r^{(l)}_j∼Bernouli(p)$</p><p>2.将 l 层第 j 个神经元的输入乘上产生的随机数作为这个神经元新的输入：$x^{(l)∗}_j=x^{(l)}_j∗r^{(l)}_j$</p><p>3.此时第 l 层第 j 个神经元的输出为：<br>$y{(l+1)}<em>j=f(∑^k</em>{j=1}(w^{(l+1)}_j  ∗  x^{(l)∗}_j  +  b^{(l+1)}))$<br>其中，k为第l层神经元的个数，f为该神经元的激活函数，b为偏置，w为权重向量。<br>注意：当我们采用了Dropout之后再训练结束之后，应当将网络的权重乘上概率p得到测试网络的权重，或者可以在训练时，将样本乘上 1/P。</p><h4 id="提前终止"><a href="#提前终止" class="headerlink" title="提前终止"></a>提前终止</h4><p>在对模型进行训练时，我们可以将我们的数据集分为三个部分，训练集、验证集、测试集。我们在训练的过程中，可以每隔一定量的step，使用验证集对训练的模型进行预测，一般来说，模型在训练集和验证集的损失变化如下图所示： </p><p><img src="/img/1541249965141.png" alt="1541249965141"></p><p>可以看出，模型在验证集上的误差在一开始是随着训练集的误差的下降而下降的。当超过一定训练步数后，模型在训练集上的误差虽然还在下降，但是在验证集上的误差却不在下降了。此时我们的模型就过拟合了。因此我们可以观察我们训练模型在验证集上的误差，一旦当验证集的误差不再下降时，我们就可以提前终止我们训练的模型。</p><h4 id="增加样本量"><a href="#增加样本量" class="headerlink" title="增加样本量"></a>增加样本量</h4><p>在实际的项目中，你会发现，上面讲述的那些技巧虽然都可以减轻过拟合的风险，但是却都比不上增加样本量来的更实在。</p><p>为什么增加样本可以减轻过拟合的风险呢？这个要从过拟合是啥来说。过拟合可以理解为我们的模型对样本量学习的太好了，把一些样本的特殊的特征当做是所有样本都具有的特征。举个简单的例子，当我们模型去训练如何判断一个东西是不是叶子时，我们样本中叶子如果都是锯齿状的话，如果模型产生过拟合了，会认为叶子都是锯齿状的，而不是锯齿状的就不是叶子了。如果此时我们把不是锯齿状的叶子数据增加进来，此时我们的模型就不会再过拟合了。因此其实上述的那些技巧虽然有用，但是在实际项目中，你会发现，其实大多数情况都比不上增加样本数据来的实在。</p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 基础内容 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> 正则化 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sklearn 线型回归</title>
      <link href="/2018/10/31/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/sklearn%20%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"/>
      <url>/2018/10/31/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/sklearn%20%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/</url>
      
        <content type="html"><![CDATA[<h2 id="简单线性回归"><a href="#简单线性回归" class="headerlink" title="简单线性回归"></a>简单线性回归</h2><p>线性回归是数据挖掘中的基础算法之一，从某种意义上来说，在学习函数的时候已经开始接触线性回归了，只不过那时候并没有涉及到误差项。线性回归的思想其实就是解一组方程，得到回归函数，不过在出现误差项之后，方程的解法就存在了改变，一般使用最小二乘法进行计算。</p><a id="more"></a><h3 id="使用sklearn-linear-model-LinearRegression进行线性回归"><a href="#使用sklearn-linear-model-LinearRegression进行线性回归" class="headerlink" title="使用sklearn.linear_model.LinearRegression进行线性回归"></a>使用sklearn.linear_model.LinearRegression进行线性回归</h3><p>sklearn对Data Mining的各类算法已经有了较好的封装，基本可以使用<code>fit</code>、<code>predict</code>、<code>score</code>来训练、评价模型，并使用模型进行预测，一个简单的例子如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> linear_model</span><br><span class="line">clf = linear_model.LinearRegression()</span><br><span class="line">X = [[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">2</span>]]</span><br><span class="line">y = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">clf.fit(X,y)</span><br><span class="line">print(clf.coef_)</span><br><span class="line">[ <span class="number">0.5</span> <span class="number">0.5</span>]</span><br><span class="line">print(clf.intercept_)</span><br><span class="line"><span class="number">1.11022302463e-16</span></span><br></pre></td></tr></table></figure><p><code>LinearRegression</code>已经实现了多元线性回归模型，当然，也可以用来计算一元线性模型，通过使用list[list]传递数据就行。下面是<code>LinearRegression</code>的具体说明。</p><h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><h5 id="实例化"><a href="#实例化" class="headerlink" title="实例化"></a>实例化</h5><p>sklearn一直秉承着简洁为美得思想设计着估计器，实例化的方式很简单，使用<code>clf = LinearRegression()</code>就可以完成，但是仍然推荐看一下几个可能会用到的参数：</p><ul><li><code>fit_intercept</code>：是否存在截距，默认存在</li><li><code>normalize</code>：标准化开关，默认关闭</li></ul><p>还有一些参数感觉不是太有用，就不再说明了，可以去官网文档中查看。</p><h5 id="回归"><a href="#回归" class="headerlink" title="回归"></a>回归</h5><p>其实在上面的例子中已经使用了<code>fit</code>进行回归计算了，使用的方法也是相当的简单。</p><ul><li><code>fit(X,y,sample_weight=None)</code>：<code>X</code>,<code>y</code>以矩阵的方式传入，而<code>sample_weight</code>则是每条测试数据的权重，同样以<code>array</code>格式传入。</li><li><code>predict(X)</code>：预测方法，将返回预测值<code>y_pred</code></li><li><code>score(X,y,sample_weight=None)</code>：评分函数，将返回一个小于1的得分，可能会小于0</li></ul><h5 id="方程"><a href="#方程" class="headerlink" title="方程"></a>方程</h5><p><code>LinearRegression</code>将方程分为两个部分存放，<code>coef_</code>存放回归系数，<code>intercept_</code>则存放截距，因此要查看方程，就是查看这两个变量的取值。</p><h4 id="多项式回归"><a href="#多项式回归" class="headerlink" title="多项式回归"></a>多项式回归</h4><p>其实，多项式就是多元回归的一个变种，只不过是原来需要传入的是X向量，而多项式则只要一个x值就行。通过将x扩展为指定阶数的向量，就可以使用<code>LinearRegression</code>进行回归了。sklearn已经提供了扩展的方法——<code>sklearn.preprocessing.PolynomialFeatures</code>。利用这个类可以轻松的将x扩展为X向量，下面是它的使用方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from sklearn.preprocessing import PolynomialFeatures</span><br><span class="line">&gt;&gt;&gt; X_train = [[1],[2],[3],[4]]</span><br><span class="line">&gt;&gt;&gt; quadratic_featurizer = PolynomialFeatures(degree=2)</span><br><span class="line">&gt;&gt;&gt; X_train_quadratic = quadratic_featurizer.fit_transform(X_train)</span><br><span class="line">&gt;&gt;&gt; print(X_train_quadratic)</span><br><span class="line">[[ 1  1  1]</span><br><span class="line"> [ 1  2  4]</span><br><span class="line"> [ 1  3  9]</span><br><span class="line"> [ 1  4 16]]</span><br></pre></td></tr></table></figure><p>经过以上处理，就可以使用<code>LinearRegression</code>进行回归计算了。</p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sklearn </tag>
            
            <tag> 线型回归 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>逻辑回归 &amp; 分类问题</title>
      <link href="/2018/10/31/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/"/>
      <url>/2018/10/31/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/</url>
      
        <content type="html"><![CDATA[<h3 id="1-分类问题"><a href="#1-分类问题" class="headerlink" title="1. 分类问题"></a>1. 分类问题</h3><p>在分类问题中，如果想要预测的变量y是离散的值，那么可以只用一种叫做逻辑回归(logistic regression)的算法,这是在目前最流行的一种学习算法之一。</p><p>在分类问题中，我们尝试预测的是结果是否属于某一个类（例如正确或错误）。分类问题的例子有：判断一封电子邮件是否是垃圾邮件；判断一次金融交易是否是欺诈；之前我们也谈到了肿瘤分类问题的例子，区别一个肿瘤是恶性的还是良性的。  </p><a id="more"></a><p><img src="/img/1540997286168.png" alt="1540997286168"></p><p>我们将因变量(dependent variable)可能属于的两个类分别称为负向类（negative class）和正向类（positive class），则因变量y∈0,1 ，其中 0 表示负向类，1 表示正向类。</p><p><img src="/img/1540997531192.png" alt="1540997531192"></p><h4 id="线型回归不适合分类问题"><a href="#线型回归不适合分类问题" class="headerlink" title="线型回归不适合分类问题"></a>线型回归不适合分类问题</h4><p>如果我们要用线性回归算法来解决一个分类问题，对于分类， y 取值为 0 或者1，但如果你使用的是线性回归，那么假设函数的输出值可能远大于 1，或者远小于0，即使所有训练样本的标签 y 都等于 0 或 1。尽管我们知道标签应该取值0 或者1，但是如果算法得到的值远大于1或者远小于0的话，就会感觉很奇怪。所以我们在接下来的要研究的算法就叫做逻辑回归算法，这个算法的性质是：它的输出值永远在0到 1 之间。</p><h4 id="逻辑回归算法"><a href="#逻辑回归算法" class="headerlink" title="逻辑回归算法"></a>逻辑回归算法</h4><p>逻辑回归算法是分类算法，我们将它作为分类算法使用。有时候可能因为这个算法的名字中出现了“回归”使你感到困惑，但逻辑回归算法实际上是一种分类算法，它适用于标签 y 取值离散的情况，如：1 0 0 1。</p><h3 id="2-逻辑回归表达式"><a href="#2-逻辑回归表达式" class="headerlink" title="2. 逻辑回归表达式"></a>2. 逻辑回归表达式</h3><p>在分类问题中，要用什么样的函数来表示我们的假设。在解决分类问题的时候，我们希望分类器的输出值在0和1之间，因此，我们希望想出一个满足某个性质的假设函数，这个性质是它的预测值要在0和1之间。</p><h4 id="为什么线型回归不适合分类问题"><a href="#为什么线型回归不适合分类问题" class="headerlink" title="为什么线型回归不适合分类问题?"></a>为什么线型回归不适合分类问题?</h4><p>回顾在一开始提到的乳腺癌分类问题，我们可以用线性回归的方法求出适合数据的一条直线：</p><p><img src="/img/1541078937881.png" alt="1541078937881"></p><p>根据线性回归模型我们只能预测连续的值，然而对于分类问题，我们需要输出0或1，我们可以预测：</p><p>当 $h_θ(x) &gt;= 0.5$ 时, 预测y= 1;   当$h_θ(x) &lt; 0.5$ 时，预测y = 0</p><p>对于上图所示的数据，这样的一个线性模型似乎能很好地完成分类任务。但是， 假使我们又观测到一个非常大尺寸的恶性肿瘤，将其作为实例加入到我们的训练集中来，这将使得我们获得一条新的直线。</p><p><img src="/img/1541079100064.png" alt="1541079100064"></p><p>这时，再使用0.5作为阀值来预测肿瘤是良性还是恶性便不合适了， 所以使用线型回归模型，很难确定断定一个问题分类的边界。可以看出，线性回归模型，因为其预测的值可以超越[0,1]的范围，并不适合解决分类这样的问题。</p><h4 id="逻辑回归模型"><a href="#逻辑回归模型" class="headerlink" title="逻辑回归模型"></a>逻辑回归模型</h4><p>我们引入一个新的模型，逻辑回归，该模型的输出变量范围始终在0和1之间。 逻辑回归模型的假设是：</p><p>$h_θ(x) = g(θ^TX)$      函数g的表达式为:  $g(z) = {1\over1+e^{-z}}$</p><blockquote><p> 其中: X 代表特征向量, g代表逻辑函数（logistic function)是一个常用的逻辑函数为S形函数（Sigmoid function）</p></blockquote><p>g(z) 的函数图像为:</p><p><img src="/img/1541080097808.png" alt="1541080097808"></p><blockquote><p>对逻辑回归模型理解</p><p>$h_θ(x)$ 的作用是，对于给定的输入变量，根据选择的参数计算出输出的变量=1 的可能性, 即$h_θ(x) =P(y=1|x; θ)$ </p><p>例如, 如果对于给定的x， 通过已经确定的参数计算出$h_θ(x) = 0.7$ ， 则表示有70%的几率y为正向类，响应地y为负向类的几率为1-0.7=0.3</p><p>g(z) （Sigmoid function）函数的作用就是将$θ^TX$的结果映射到0-1之间，</p></blockquote><h3 id="3-决策边界"><a href="#3-决策边界" class="headerlink" title="3. 决策边界"></a>3. 决策边界</h3><h4 id="对决策边界的理解"><a href="#对决策边界的理解" class="headerlink" title="对决策边界的理解"></a>对决策边界的理解</h4><blockquote><p>决策边界(decision boundary)，能够更好地帮助我们理解逻辑回归的假设函数中计算什么</p></blockquote><p><img src="/img/1541080767309.png" alt="1541080767309"></p><p>在逻辑回归中， 我们预测到: </p><p>当$h_θ(x) &gt;= 0.5$ 时， 预测 y= 1;     当 $h_θ(x) &gt;= 0.5$ 时，预测 y  = 0；</p><p>根据上面绘制的S形函数图像，我们知道当</p><p>z = 0 时, g(z) = 0.5</p><p>z &gt; 时, g(z) &gt; 0.5</p><p>z &lt; 0 时, g(z) &lt; 0.5</p><p>又 $z = θ^Tx$, 即: $θ^TX &gt;= 0$ 时, 预测 y = 1 , $θ^TX &lt; 0$ 时， 预测 y = 0</p><p>现在假设我们有一个模型: </p><p><img src="/img/1541081223807.png" alt="1541081223807"></p><p>并且参数θ是向量[-3 1 1]. 则当 -3 + x1 + x2 &gt;= 0, 即x1 + x2 &gt;= 3时， 模型将预测 y = 1. 我们可以绘制直线x1 + x2 = 3, 这条线便是我们模型的分界线，将预测为1的区域和预测为 0的区域分隔开。</p><p><img src="/img/1541081375902.png" alt="1541081375902"></p><h4 id="复杂形状的决策边界"><a href="#复杂形状的决策边界" class="headerlink" title="复杂形状的决策边界"></a>复杂形状的决策边界</h4><p>假使我们的数据呈现这样的分布情况，怎样的模型才能适合呢？</p><p><img src="/img/1541081567959.png" alt="1541081567959"></p><p>因为需要用曲线才能分隔 y = 0 的区域和 y = 1 的区域，我们需要二次方特征：</p><p>所以按照假设函数应该趋近， $h_θ(x) = g(θ_0 + θ_1x_1 + θ_2x_2 + θ_1x_1^2 + θ_2x_2^2 )$  θ最终结果趋近 [-1 0 0 1 1], 我们最终得到的判定边界恰好是圆点在原点且半径为1的圆形 , 综上我们可以用复杂的模型来适应飞象复杂形状的判定边界</p><h3 id="4-逻辑回归代价函数和梯度下降"><a href="#4-逻辑回归代价函数和梯度下降" class="headerlink" title="4. 逻辑回归代价函数和梯度下降"></a>4. 逻辑回归代价函数和梯度下降</h3><h4 id="逻辑回归代价函数及简化"><a href="#逻辑回归代价函数及简化" class="headerlink" title="逻辑回归代价函数及简化"></a>逻辑回归代价函数及简化</h4><p>对于线性回归模型，我们定义的代价函数是所有模型误差的平方和和。理论上来说，我们也可以对逻辑回归模型沿用这个定义，但是问题在于，当我们将 $h_θ(x) = g(θ^TX)$  带入到这样定义了的代价函数中时，我们得到的代价函数将是一个非凸函数（non-convexfunction）如下图，这意味着我们的代价函数有许多局部最小值，这将影响梯度下降算法寻找全局最小值。</p><p><img src="/img/1541082558471.png" alt="1541082558471"></p><p>线型回归代价函数为: $J_{(θ)} = {1\over m} \sum_{i=1}^m{1\over2}(h_θ(x^{(i)})-y^{(i)})^2​$</p><p>重新定义逻辑回归代价函数，使代价函数在逻辑回归算法中为凸函数, 过程如下: </p><p><img src="/img/1541083131135.png" alt="1541083131135"></p><blockquote><p>根据推倒可以证明, 我们推倒的的代价值函数会给我们一个凸优化问题。代价函数 J(θ) 会是一个凸函数，并且没有局部最优值。</p></blockquote><p><strong>python代码实现</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cost</span><span class="params">(theta, X, y)</span>:</span></span><br><span class="line">   theta = np.matrix(theta)</span><br><span class="line">   X = np.matrix(X)</span><br><span class="line">   y = np.matrix(y)</span><br><span class="line">   first = np.multiply(‐y, np.log(sigmoid(X* theta.T)))</span><br><span class="line">   second = np.multiply((<span class="number">1</span> ‐ y), np.log(<span class="number">1</span> ‐ sigmoid(X* theta.T)))</span><br><span class="line">   <span class="keyword">return</span> np.sum(first ‐ second) / (len(X))</span><br></pre></td></tr></table></figure><h4 id="梯度下降算法推倒及简化"><a href="#梯度下降算法推倒及简化" class="headerlink" title="梯度下降算法推倒及简化"></a>梯度下降算法推倒及简化</h4><p>在得到这样一个代价函数以后，我们便可以用梯度下降算法来求得能使代价函数最小的参数了。算法为：</p><p>Repeat {  $θ_j : =θ_j  −  α{∂\over∂θ_j }J(θ)$         (simultaneously update all ) }</p><p>求导后得到: </p><p>Repeat { $θ_j : =θ<em>j  −  α{1\over m}\sum</em>{i=1}^m(h_θ(x^{(i)}) - y^{(i)})x_j^{(i)}$    (simultaneously update all ) }</p><p><img src="/img/1541084166476.png" alt="1541084166476"></p><blockquote><p>注：虽然得到的梯度下降算法表面上看上去与线性回归的梯度下降算法一样，但是这里的 $h_θ(x) = g(θ^TX)$ 与线性回归中不同，所以实际上是不一样的。另外，在运行梯度下降算法之前，进行特征缩放依旧是非常必要的。</p></blockquote><h3 id="5-高级优化算法"><a href="#5-高级优化算法" class="headerlink" title="5. 高级优化算法"></a>5. 高级优化算法</h3><h4 id="一些高级算法的介绍"><a href="#一些高级算法的介绍" class="headerlink" title="一些高级算法的介绍"></a>一些高级算法的介绍</h4><p>现在我们换个角度来看，什么是梯度下降，我们有个代价函数 J(θ)，而我们想要使其最小化，那么我们需要做的是编写代码，当输入参数θ时，它们会计算出两样东西：J(θ) 以及 J 等于 0、1直到 n 时的偏导数项。</p><p><img src="/img/1541166796206.png" alt="1541166796206"></p><p>假设我们已经完成了可以实现这两件事的代码，那么梯度下降所做的就是反复执行这些更新。 另一种考虑梯度下降的思路是：我们需要写出代码来计算 J(θ) 和这些偏导数，然后把这些插入到梯度下降中，然后它就可以为我们最小化这个函数。 对于梯度下降来说，我认为从技术上讲，你实际并不需要编写代码来计算代价函数J(θ)。你只需要编写代码来计算导数项，但是，如果你希望代码还要能够监控这些 J(θ)的收敛性，那么我们就需要自己编写代码来计算代价函数J(θ)和偏导数项$α{∂\over∂θ_j }J(θ)$。所以，在写完能够计算这两者的代码之后，我们就可以使用梯度下降。 </p><p>然而梯度下降并不是我们可以使用的唯一算法，还有其他一些算法，更高级、更复杂。如果我们能用这些方法来计算代价函数J(θ)和偏导数项$α{∂\over∂θ_j }J(θ)$两个项的话，那么这些算法就是为我们优化代价函数的不同方法，<strong>共轭梯度法、 BFGS (变尺度法)、 L-BFGS (限制变尺度法)</strong> 就是其中一些更高级的优化算法，它们需要有一种方法来计算 J(θ)，以及需要一种方法计算导数项，然后使用比梯度下降更复杂的算法来最小化代价函数。</p><blockquote><p><strong>这三种算法的优点：</strong></p><p>一个是使用这其中任何一个算法，你通常不需要手动选择学习率 α ，所以对于这些算法的一种思路是，给出计算导数项和代价函数的方法，你可以认为算法有一个智能的内部循环，而且，事实上，他们确实有一个智能的内部循环，称为线性搜索(line search)算法，它可以自动尝试不同的学习速率 α ，并自动选择一个好的学习速率 α，因此它甚至可以为每次迭代选择不同的学习速率，那么你就不需要自己选择。</p></blockquote><p>Octave 有一个非常理想的库用于实现这些先进的优化算法，所以，如果你直接调用它自带的库，你就能得到不错的结果。我必须指出这些算法实现得好或不好是有区别的，因此，如果你正在你的机器学习程序中使用一种不同的语言，比如如果你正在使用C、C++、Java等等，你可能会想尝试一些不同的库，以确保你找到一个能很好实现这些算法的库。</p><h4 id="如何使用这些算法"><a href="#如何使用这些算法" class="headerlink" title="如何使用这些算法"></a>如何使用这些算法</h4><p>比方说，你有一个含两个参数的问题，这两个参数是θ1和θ2，因此，通过这个代价函数，你可以得到 θ1 和 θ2 的值，如果你将 J(θ) 最小化的话，那么它的最小值将是 θ1 = 5 ，θ2 = 5 。代价函数 J(θ) 的导数推出来就是这两个表达式：</p><p>$α{∂\over∂θ_1}J(θ) = 2(θ_1 - 5)$</p><p>$α{∂\over∂θ_2}J(θ) = 2(θ_2 - 5)$</p><p>如果我们不知道最小值，但你想要代价函数找到这个最小值，是用比如梯度下降这些算法，但最好是用比它更高级的算法，你要做的就是运行一个像这样的Octave 函数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function [jVal, gradient]=costFunction(theta)</span><br><span class="line">jVal=(theta(1)‐5)^2+(theta(2)‐5)^2;</span><br><span class="line">gradient=zeros(2,1);</span><br><span class="line">gradient(1)=2*(theta(1)‐5);</span><br><span class="line">gradient(2)=2*(theta(2)‐5);</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>这样就计算出这个代价函数，函数返回的第二个值是梯度值，梯度值应该是一个2×1的向量，梯度向量的两个元素对应这里的两个偏导数项，运行这个costFunction 函数后，你就可以调用高级的优化函数，这个函数叫fminunc，它表示Octave 里无约束最小化函数。调用它的方式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">options=optimset(<span class="string">'GradObj'</span>,<span class="string">'on'</span>,<span class="string">'MaxIter'</span>,<span class="number">100</span>);</span><br><span class="line">initialTheta=zeros(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">[optTheta, functionVal, exitFlag]=fminunc(@costFunction, initialTheta, options);</span><br></pre></td></tr></table></figure><p>你要设置几个options，这个 options 变量作为一个数据结构可以存储你想要的options，所以 GradObj 和On，这里设置梯度目标参数为打开(on)，这意味着你现在确实要给这个算法提供一个梯度，然后设置最大迭代次数，比方说100，我们给出一个 的猜测初始值，它是一个2×1的向量，那么这个命令就调用fminunc，这个@符号表示指向我们刚刚定义的costFunction 函数的指针。如果你调用它，它就会使用众多高级优化算法中的一个，当然你也可以把它当成梯度下降，只不过它能自动选择学习速率，你不需要自己来做。然后它会尝试使用这些高级的优化算法，就像加强版的梯度下降法，为你找到最佳的值。</p><p><strong>实际运行过程示例</strong></p><p><img src="/img/1541168153304.png" alt="1541168153304"></p><h3 id="6-多分类问题"><a href="#6-多分类问题" class="headerlink" title="6. 多分类问题"></a>6. 多分类问题</h3><h4 id="多分类的介绍"><a href="#多分类的介绍" class="headerlink" title="多分类的介绍"></a>多分类的介绍</h4><p><strong>一些多分类的例子:</strong></p><p>例一: 假如说你现在需要一个学习算法能自动地将邮件归类到不同的文件夹里，或者说可以自动地加上标签，那么，你也许需要一些不同的文件夹，或者不同的标签来完成这件事，来区分开来自工作的邮件、来自朋友的邮件、来自家人的邮件或者是有关兴趣爱好的邮件，那么，我们就有了这样一个分类问题：其类别有四个，分别用 y=1, y=2, y=3, y=4 来表示</p><p>例二: 如果一个病人因为鼻塞来到你的诊所，他可能并没有生病，用 y=1 这个类别来代表；或者患了感冒，用 y=2 来代表；或者得了流感用 y=3 来代表.</p><p>然而对于之前的一个，二元分类问题，我们的数据看起来可能是像这样：</p><p><img src="/img/1541168782303.png" alt="1541168782303"></p><p>对于一个多类分类问题，我们的数据集或许看起来像这样：</p><p><img src="/img/1541168809943.png" alt="1541168809943"></p><h4 id="一对于多分类思路"><a href="#一对于多分类思路" class="headerlink" title="一对于多分类思路"></a>一对于多分类思路</h4><p>我用3种不同的符号来代表3个类别，问题就是给出3个类型的数据集，我们如何得到一个学习算法来进行分类呢？我们现在已经知道如何进行二元分类，可以使用逻辑回归，对于直线或许你也知道，可以将数据集一分为二为正类和负类。用一对多的分类思想，我们可以将其用在多类分类问题上。下面将介绍如何进行一对多的分类工作，有时这个方法也被称为<strong>“一对余”</strong>方法。</p><p><img src="/img/1541169223823.png" alt="1541169223823"></p><p>现在我们有一个训练集，好比上图表示的有3个类别，我们用三角形表示 y = 1 ，方框表示 y = 2，叉叉表示 y = 3。下面要做的就是使用一个训练集，将其分成3个二元分类问题。我们先从用三角形代表的类别1开始，实际上我们可以创建一个，新的”伪”训练集，类型2和类型3定为负类，类型1设定为正类，我们创建一个新的训练集，如下图所示的那样，我们要拟合出一个合适的分类器。</p><p>这里的三角形是正样本，而圆形代表负样本。可以这样想，设置三角形的值为1，圆形的值为0，下面我们来训练一个标准的逻辑回归分类器，这样我们就得到一个正边界。</p><p><img src="/img/1541169503523.png" alt="1541169503523"></p><p>为了能实现这样的转变，我们将多个类中的一个类标记为正向类（y=1），然后将其他所有类都标记为负向类，这个模型记作$h_θ^{(1)}(x)$。接着，类似地第我们选择另一个类标记为正向类（y=2），再将其它类都标记为负向类，将这个模型记作$h_θ^{(2)}(x)$ ,依此类推。 最后我们得到一系列的模型简记为：$h_θ^{(i)}(x) = P(y=i|x; θ)$ 其中：i = (1, 2, 3, 4, 5, …, k) k为总分类数量<br>最后，在我们需要做预测时，我们将所有的分类机都运行一遍，然后对每一个输入变量，都选择最高可能性的输出变量。<br>总之，我们已经把要做的做完了，现在要做的就是训练这个逻辑回归分类器：$h_θ^{(i)}(x)$ ， 其中 i 对应每一个可能的y=i，最后，为了做出预测，我们给出输入一个新的 x 值，用这个做预测。我们要做的就是在我们三个分类器里面输入 x ，然后我们选择一个让 $h_θ^{(i)}(x)$ 最大的 i 作为最终的分类结果。<br>现在知道了基本的挑选分类器的方法，选择出哪一个分类器是可信度最高效果最好的，那么就可认为得到一个正确的分类，无论值是多少，我们都有最高的概率值，我们预测就是那个值。这就是多类别分类问题，以及一对多的方法，通过这个小方法，你现在也可以将逻辑回归分类器用在多类分类的问题上。</p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 基础内容 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> 逻辑回归 </tag>
            
            <tag> 分类问题 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Octave基础操作</title>
      <link href="/2018/10/26/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/octave%20%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/"/>
      <url>/2018/10/26/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/octave%20%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="基础功能命令"><a href="#基础功能命令" class="headerlink" title="基础功能命令"></a>基础功能命令</h2><h4 id="修改命令行的提示"><a href="#修改命令行的提示" class="headerlink" title="修改命令行的提示"></a>修改命令行的提示</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS1('&gt;&gt; ')   % &gt;&gt; 就是修改后的提示符号</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="变量赋值语句"><a href="#变量赋值语句" class="headerlink" title="变量赋值语句"></a>变量赋值语句</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A = 5 + 6 ; % 后面加上一个可以不在终端打印变量的值</span><br></pre></td></tr></table></figure><h4 id="显示工作空间的所有变量"><a href="#显示工作空间的所有变量" class="headerlink" title="显示工作空间的所有变量"></a>显示工作空间的所有变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">who  % 显示工作空间的所有变量</span><br><span class="line">whos   % 显示工作空间的所有变量和详细信息</span><br></pre></td></tr></table></figure><h4 id="删除变量"><a href="#删除变量" class="headerlink" title="删除变量"></a>删除变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clear A % 删除变量A</span><br><span class="line">clear  % 删除所有变量</span><br></pre></td></tr></table></figure><h4 id="打印变量"><a href="#打印变量" class="headerlink" title="打印变量"></a>打印变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A    % 直接再终端输入变量名称就可以将变量的值打印出来</span><br><span class="line">disp(A)    % 通过disp函数将变量打印出来</span><br></pre></td></tr></table></figure><h4 id="修改全局的输出内容的长短"><a href="#修改全局的输出内容的长短" class="headerlink" title="修改全局的输出内容的长短"></a>修改全局的输出内容的长短</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">format long   % 将输出数值的长度定义为long类型</span><br><span class="line">format short   % 将输出数值的长度定义为short类型</span><br></pre></td></tr></table></figure><h4 id="查看命令的帮助信息"><a href="#查看命令的帮助信息" class="headerlink" title="查看命令的帮助信息"></a>查看命令的帮助信息</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helo rand</span><br><span class="line">help eye</span><br><span class="line">help help</span><br></pre></td></tr></table></figure><h4 id="添加搜索路径"><a href="#添加搜索路径" class="headerlink" title="添加搜索路径"></a>添加搜索路径</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addpath path % 添加路径到函数和数据等的某人搜索路径</span><br></pre></td></tr></table></figure><h2 id="基础运算"><a href="#基础运算" class="headerlink" title="基础运算"></a>基础运算</h2><h4 id="数值运算"><a href="#数值运算" class="headerlink" title="数值运算"></a>数值运算</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3-2； 5*8；  1/2； % 基础运算</span><br></pre></td></tr></table></figure><h4 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 &amp;&amp; 0  % 逻辑与</span><br><span class="line">1 || 0  % 逻辑或</span><br><span class="line">~ 1  % 逻辑费</span><br><span class="line">XOR(1, 0)   % 异或运算</span><br></pre></td></tr></table></figure><h4 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 == 2   % 相等判断</span><br><span class="line">1 ~= 2   % 不等于判断</span><br></pre></td></tr></table></figure><h2 id="矩阵运算"><a href="#矩阵运算" class="headerlink" title="矩阵运算"></a>矩阵运算</h2><h4 id="创建矩阵"><a href="#创建矩阵" class="headerlink" title="创建矩阵"></a>创建矩阵</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">A = [ 1 2; 3 4; 5 6 ]  % 创建一个三行两列的矩阵</span><br><span class="line">v = [ 1 2 3 ]  % 创建一个行向量</span><br><span class="line">v = 1:6   % 创建一个从1到6的行向量</span><br><span class="line">v = 1:0.1:2    % 创建一个从1开始，以0.1为步长，直到2的行向量</span><br><span class="line">v = ones(2, 3)   % 创建一个2行3列的元素都是1的矩阵</span><br><span class="line">v = 2 * ones(2, 3)   % 创建一个2行3列的元素都是2的矩阵</span><br><span class="line">v = zeros(2, 3)   % 创建一个2行3列的元素都是0的矩阵</span><br><span class="line">v = rand(2, 3)   % 创建一个2行3列的元素都是0-1之间的随机数的矩阵</span><br><span class="line">v = randn(2, 3)   % 创建一个2行3列的元素都符合平局值为0,1为标准差的正态分布随机数的矩阵</span><br><span class="line">I = eye(6)    % 创建一个大小为6的单位矩阵</span><br><span class="line">v = type(3)   % 返回一个3*3的随机矩阵</span><br></pre></td></tr></table></figure><h4 id="矩阵运算-1"><a href="#矩阵运算-1" class="headerlink" title="矩阵运算"></a>矩阵运算</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">A = [ 1 2; 3 4; 5 6 ]  % 创建一个三行两列的矩阵</span><br><span class="line">B = [ 11, 12; 13 14; 15 16 ]</span><br><span class="line">2 * A  % A矩阵中的每个元素都乘以2</span><br><span class="line">A .* B % 将A矩阵和B矩阵中的每一个对应位置的元素相乘,同样适用于+ - / ^等</span><br><span class="line">A .*   % A矩阵的每个元素取二次方</span><br><span class="line">log(v)     % 矩阵的每个院对对数运算</span><br><span class="line">exp(v)     % 矩阵的每个元素进行以为底，以这些元素为幂的运算</span><br><span class="line">abs(v)     % 对v矩阵的每个元素取绝对值</span><br><span class="line">A + 1    % 将A矩阵的每个元素加上1</span><br><span class="line">A&apos;     % 取A矩阵的转置矩阵</span><br></pre></td></tr></table></figure><h4 id="获取矩阵尺寸"><a href="#获取矩阵尺寸" class="headerlink" title="获取矩阵尺寸"></a>获取矩阵尺寸</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A = [ 1 2; 3 4; 5 6 ]  % 创建一个三行两列的矩阵</span><br><span class="line">size(A)     % 返回A矩阵的尺寸,返回的内容同样是行向量</span><br><span class="line">size(A，1)    % 返回矩阵的行数</span><br><span class="line">size(A，2)   % 返回矩阵的列数</span><br><span class="line">lengh(A)     % 返回A矩阵的维度大小，即矩阵的长宽中比较大的维度，矩阵A的length即为3</span><br></pre></td></tr></table></figure><h4 id="矩阵的索引"><a href="#矩阵的索引" class="headerlink" title="矩阵的索引"></a>矩阵的索引</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">A = [ 1 2; 3 4; 5 6 ]  % 创建一个三行两列的矩阵</span><br><span class="line">A(3, 2)  % 取A矩阵的第三行第二列的元素</span><br><span class="line">A(2, :)    % 返回第二行的所有元素</span><br><span class="line">A(:, 2)     % 返回第二列的所有元素</span><br><span class="line">A([1 3], :)  % 取第1行和第3行的所有元素</span><br><span class="line">A(:, 2) = [10; 11; 12]   % 将矩阵的第二列重新赋值</span><br><span class="line">A = [A, [100, 101, 102]]   % 给矩阵附加了一列矩阵，给矩阵增加一列。带，和不带，相同</span><br><span class="line">[A B]    % 两个矩阵直接连在一起，矩阵A在左边，矩阵B在右边</span><br><span class="line">[A;B]    % 两个矩阵直接连在一起，矩阵A在上边, 矩阵B在下边</span><br><span class="line">A(:)     % 将矩阵的所有元素导向一个单独的列向量排列起来</span><br></pre></td></tr></table></figure><h4 id="矩阵的计算"><a href="#矩阵的计算" class="headerlink" title="矩阵的计算"></a>矩阵的计算</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">A = [ 1 2; 3 4; 5 6 ]  % 创建一个三行两列的矩阵</span><br><span class="line">val = max(a)    % 返回a矩阵中的最大值, 当a为多维矩阵的时候返回的是每一列的最大值</span><br><span class="line">val = max(A, a)    % 两个矩阵所有元素逐个比较返回较大的值</span><br><span class="line">max(A,[],1)    % 得到矩阵每一列元素的最大值</span><br><span class="line">max(A,[],2)   % 得到矩阵每一行元素的最大值</span><br><span class="line">[val, ind] = max(a)  % 返回a矩阵中的最大值和对应的索引</span><br><span class="line">sum（a)   % 把a矩阵的所有元素相加起来, 如果是多维矩阵默认为每一列的总和</span><br><span class="line">sum（a,1) % 求多维矩阵每一列的总和</span><br><span class="line">sum(a, 3)   % 求多维矩阵每一行的总和</span><br><span class="line">a&lt;3  % 对矩阵每一个元素进行&lt;3判断，判断为真返回1, 否则返回0</span><br><span class="line">find(a&lt;3)  % 返回哪些元素小于3(是索引值)</span><br><span class="line">prod（a)   % 将a矩阵的所有元素相乘</span><br><span class="line">floor(a)   % 将a矩阵的所有元素进行向下取舍</span><br><span class="line">ceil(a)   % 将a矩阵的所有元素进行向上取整</span><br><span class="line">pinv(v)   % 求v矩阵的逆矩阵</span><br></pre></td></tr></table></figure><h2 id="绘制图像"><a href="#绘制图像" class="headerlink" title="绘制图像"></a>绘制图像</h2><h4 id="绘制直方图"><a href="#绘制直方图" class="headerlink" title="绘制直方图"></a>绘制直方图</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w = -6 + sqrt(10) * (randn(1, 10000))</span><br><span class="line">hist(w)    % 绘制w矩阵的直方图</span><br><span class="line">hist(w, 50)    % 绘制w矩阵的直方图，并指定50个长方形</span><br></pre></td></tr></table></figure><h4 id="绘制曲线图"><a href="#绘制曲线图" class="headerlink" title="绘制曲线图"></a>绘制曲线图</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">t = [0:0.1:1];</span><br><span class="line">y1 = sin(2*pi*4t);</span><br><span class="line">plot(t,  y1);</span><br><span class="line">hold on % 新绘制的图不会覆盖之前的图片，会在之前的图片上生成新的曲线</span><br><span class="line">y2 = cos(2*pi*4*t)</span><br><span class="line">plot(t, y2, &apos;r&apos;)  % 绘制新的直线图，r表示线的颜色为红色</span><br><span class="line">xlable(&apos;time&apos;)    % 添加x轴名称</span><br><span class="line">ylable(&apos;value&apos;)    % 给y轴添加名称</span><br><span class="line">legend(&apos;sin, &apos;cos&apos;)   % 给线命名</span><br><span class="line">title(&apos;myplot&apos;)    % 给图片一个标题名称</span><br><span class="line">print  -dpng  &apos;myplot.png&apos;    % 输出图片</span><br><span class="line">plot clos   % 关掉图片</span><br><span class="line">axis([0.5 1 ‐1 1])   % 改变坐标返回，前两个参数控制横坐标，后两参数控制纵坐标</span><br><span class="line">Clf  % 清除一个图像</span><br></pre></td></tr></table></figure><h4 id="在一张画纸上绘制两张直线图"><a href="#在一张画纸上绘制两张直线图" class="headerlink" title="在一张画纸上绘制两张直线图"></a>在一张画纸上绘制两张直线图</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">t = [0:0.1:1];</span><br><span class="line">y1 = sin(2*pi*4t);</span><br><span class="line">y2 = cos(2*pi*4*t)；</span><br><span class="line">figure(1); plot(t, y1);    % 绘制第一张图片</span><br><span class="line">figure(2); plot(t, y2);    % 绘制第二张图片</span><br><span class="line">subplot(1,2,1) %将图像分为一个1*2的格子，也就是前两个参数，然后它使用第一个格子，也就是最后一个参数1的意思。</span><br><span class="line">plot(t,y1)   % 将图片绘制到第一个格子</span><br><span class="line">suplot(1,2,2)   % 使用第二个格子</span><br><span class="line">plot(t,y2)  % 将图片绘制到第二个格子</span><br></pre></td></tr></table></figure><h4 id="彩色格图绘制"><a href="#彩色格图绘制" class="headerlink" title="彩色格图绘制"></a>彩色格图绘制</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">imagesc(A )   % 绘制彩色格子图</span><br><span class="line">imagesc(A)，colorbar，colormap gray   % 生成了一个颜色图像，一个灰度分布图，并在右边也加入一个颜色条。</span><br></pre></td></tr></table></figure><h2 id="移动数据"><a href="#移动数据" class="headerlink" title="移动数据"></a>移动数据</h2><h4 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">load('featureD.dat')    % 加载featureD.dat中的所有数据，并将其复制给变量featureD</span><br></pre></td></tr></table></figure><h4 id="导出数据"><a href="#导出数据" class="headerlink" title="导出数据"></a>导出数据</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">save hello.mat v   % 将变量A导出为一个叫hello.mat文件 二进制形式</span><br><span class="line">save hello.mat v -ascii  % 将变量A导出为一个叫hello.mat文件 ascii形式</span><br></pre></td></tr></table></figure><h2 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h2><h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v = zeros(10,1)</span><br><span class="line">for i=1:10,</span><br><span class="line">v(i) = 2^1;</span><br><span class="line">end</span><br></pre></td></tr></table></figure><h4 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">v = zeros(10,1)</span><br><span class="line">i = 1</span><br><span class="line">while i &lt;= 5,</span><br><span class="line">v(i) = 100;</span><br><span class="line">i = i+1;</span><br><span class="line">end</span><br></pre></td></tr></table></figure><h4 id="if-else-elif-语句"><a href="#if-else-elif-语句" class="headerlink" title="if - else - elif 语句"></a>if - else - elif 语句</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">v = zeros(10,1)</span><br><span class="line">if v(1) == 1,</span><br><span class="line">disp('1');</span><br><span class="line">elseif v(1) == 2,</span><br><span class="line">disp('2');</span><br><span class="line">else</span><br><span class="line">disp('3');</span><br><span class="line">end</span><br></pre></td></tr></table></figure><h2 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h2><h4 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h4><p>1.先创建一个文件<br>​    squarethisnumber.m   # .m前定义的就是函数名<br>2.编写函数文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function y = squareThisNumber(x)</span><br><span class="line">y = x^2;</span><br></pre></td></tr></table></figure><blockquote><p>第一行写着 function y = squareThisNumber(x) ，这就告诉 Octave，我想返回一个 y值，我想返回一个值，并且返回的这个值将被存放于变量 里。另外，它告诉了Octave这个函数有一个参数，就是参数 ，还有定义的函数体，y  = x^2</p></blockquote><h4 id="使用自定义函数"><a href="#使用自定义函数" class="headerlink" title="使用自定义函数"></a>使用自定义函数</h4><p>1.切换到函数文件所在目录<br>2.直接通过函数名squareThisNumber() 调用函数</p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 基础内容 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> octave </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Kubeadm创建高可用k8s集群</title>
      <link href="/2018/10/25/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/k8s/kubeadm%E5%88%9B%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8kubernetes%E9%9B%86%E7%BE%A4-%20v1.12/"/>
      <url>/2018/10/25/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/k8s/kubeadm%E5%88%9B%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8kubernetes%E9%9B%86%E7%BE%A4-%20v1.12/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="min-width: 100%; position: relative;"><div style="-webkit-font-smoothing: antialiased;"><div style="-webkit-font-smoothing: antialiased; text-align: left;"><div style="-webkit-font-smoothing: antialiased;"><div style="-webkit-font-smoothing: antialiased;"><div style="-webkit-font-smoothing: antialiased;"><div style="-webkit-font-smoothing: antialiased;"><div style="font-size: 14px; -webkit-font-smoothing: antialiased; margin: 0px; padding: 0px;"><br></div><h1 style="-webkit-font-smoothing: antialiased; margin: 20px 0px 0px; padding: 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.2; font-size: 16pt;">kubeadm创建高可用kubernetes v1.12.0集群</span></h1><div style="-webkit-font-smoothing: antialiased; margin: 30px 0px 0px; padding: 0px 0px 20px; border-bottom: 1px solid rgb(238, 238, 238);"><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; font-size: 14pt;">节点规划</span></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px; max-width: 1024px; padding: 20px 0px;"><div style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><br></div><table style="font-size: inherit; max-width: 100%; -webkit-font-smoothing: antialiased; margin: 0px 0px 15px; padding: 0px; border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; word-break: keep-all;"><colgroup><col><col><col></colgroup><tbody style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><tr style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.5; font-size: 11pt;">主机名</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.5; font-size: 11pt;">IP</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.5; font-size: 11pt;">Role</span></td></tr><tr style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">k8s-master01</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">10.3.1.20</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">etcd、Master、Node、keepalived</span></td></tr><tr style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">k8s-master02</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">10.3.1.21</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">etcd、Master、Node、keepalived</span></td></tr><tr style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">k8s-master03</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">10.3.1.25</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">etcd、Master、Node、keepalived</span></td></tr><tr style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">VIP</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">10.3.1.29</span></td><td style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 5px; border: 1px solid rgb(221, 221, 221);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">None</span></td></tr></tbody></table><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.8; font-size: 11pt;">版本信息：</span></span></div><ul style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">OS:：Ubuntu 16.04</span></div></li><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">Docker：17.03.2-ce</span></div></li><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">k8s：v1.12</span></div></li></ul><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">来自官网的高可用架构图</span></div><div style="font-size: 16px;"><div><span style="font-size: 16px;"><img src="/e_img/kubeadm创建高可用kubernetes集群- v1.12_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="426"></span></div></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">高可用最重要的两个组件：</span></div><ol style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">etcd：分布式键值存储、k8s集群数据中心。</span></div></li><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">kube-apiserver：集群的唯一入口，各组件通信枢纽。apiserver本身无状态，因此分布式很容易。</span></div></li></ol><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">其它核心组件：</span></div><ul style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">controller-manager和scheduler也可以部署多个，但只有一个处于活跃状态，以保证数据一致性。因为它们会改变集群状态。</span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">集群各组件都是松耦合的，如何高可用就有很多种方式了。</span></div></li><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">kube-apiserver有多个，那么apiserver客户端应该连接哪个了，因此就在apiserver前面加个传统的类似于haproxy+keepalived方案漂个VIP出来，apiserver客户端，比如kubelet、kube-proxy连接此VIP。</span></div></li></ul><h2 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">安装前准备</span></h2><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">1、k8s各节点SSH免密登录。</span></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">2、时间同步。</span></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">3、各Node必须关闭swap：swapoff -a，否则kubelet启动失败。</span></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">4、各节点主机名和IP加入/etc/hosts解析</span></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.8; font-size: 11pt;">kubeadm创建高可用集群有两种方法：</span></span></div><ol style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">etcd集群由kubeadm配置并运行于pod，启动在Master节点之上。</span></div></li><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">etcd集群单独部署。</span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">etcd集群单独部署，似乎更容易些，这里就以这种方法来部署。</span></div></li></ol><h2 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">部署etcd集群</span></h2><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">etcd的正常运行是k8s集群运行的提前条件，因此部署k8s集群首先部署etcd集群。</span></div><h3 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">安装CA证书</span></h3><h4 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">安装CFSSL证书管理工具</span></h4><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">直接下载二进制安装包：</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">wget</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">https://pkg.cfssl.org/R1.2/cfssl_linux-amd64</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">chmod +x cfssl_linux-amd64</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">mv cfssl_linux-amd64 /opt/bin/cfssl</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">wget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">chmod +x cfssljson_linux-amd64</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">mv cfssljson_linux-amd64 /opt/bin/cfssljson</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">wget https://pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">chmod +x cfssl-certinfo_linux-amd64</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">mv cfssl-certinfo_linux-amd64 /opt/bin/cfssl-certinfo</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">echo</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;export PATH=/opt/bin:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">$PATH</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt; /etc/profile.d/k8s.sh</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">所有k8s的执行文件全部放入/opt/bin/目录下</span></div><h4 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">创建CA配置文件</span></h4><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># mkdir ssl</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cd ssl/</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cfssl print-defaults config &gt; config.json</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cfssl print-defaults csr &gt; csr.json</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;"># 根据config.json文件的格式创建如下的ca-config.json文件</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;"># 过期时间设置成了 87600h</font></span></span></code></div><div><font style="font-size: 10pt;"><br></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cat ca-config.json</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">{</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;signing&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: {</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;default&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: {</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;expiry&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;87600h&quot;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">},</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;profiles&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: {</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;kubernetes&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: {</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;usages&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: [</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;signing&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;key encipherment&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;server auth&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;client auth&quot;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">],</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;expiry&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;87600h&quot;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div></div><h4 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">创建CA证书签名请求</span></h4><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cat ca-csr.json</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">{</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;CN&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;kubernetes&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;key&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: {</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;algo&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;rsa&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;size&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2048</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">},</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;names&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: [</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">{</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;C&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;CN&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;ST&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;GD&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;L&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;SZ&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;O&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;k8s&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;OU&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;System&quot;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">]</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div></div><h4 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">生成CA证书和私匙</span></h4><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cfssl gencert -initca ca-csr.json | cfssljson -bare ca</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># ls ca*</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">ca-config.json ca.csr ca-csr.json ca-key.pem ca.pem</font></span></span></div></div><h4 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">拷贝ca证书到所有Node相应目录</span></h4><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># mkdir -p /etc/kubernetes/ssl</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cp ca* /etc/kubernetes/ssl</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/ssl# scp -r /etc/kubernetes 10.3.1.21:/etc/</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/ssl# scp -r /etc/kubernetes 10.3.1.25:/etc/</span></font></div></div><h3 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">下载etcd文件：</span></h3><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">有了CA证书后，就可以开始配置etcd了。</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 0, 115); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">master01:</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">$ wget</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 0, 115); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">https:</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/github.com/coreos</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/etcd/releases</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/download/v</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">3.</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2.22</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/etcd-v3.</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2.22</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-linux-amd64.tar.gz</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 0, 115); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">master01:</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">$ cp etcd etcdctl /opt/bin/</span></font></div></div><blockquote style="-webkit-font-smoothing: antialiased; max-width: 100%; margin: 1rem 0px; padding: 0.8rem 1.2rem; border-left: 0.2rem solid rgb(66, 133, 244); background: rgb(242, 245, 249);"><div style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">对于K8s v1.12，其etcd版本不能低于3.2.18</span></div></blockquote><h3 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">创建etcd证书</span></h3><h4 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">创建etcd证书签名请求文件</span></h4><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cat etcd-csr.json</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">{</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;CN&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;etcd&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;hosts&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: [</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;127.0.0.1&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;10.3.1.20&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;10.3.1.21&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;10.3.1.25&quot;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">],</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;key&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: {</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;algo&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;rsa&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;size&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2048</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">},</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;names&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">: [</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">{</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;C&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;CN&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;ST&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;GD&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;L&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;SZ&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;O&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;k8s&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;OU&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;System&quot;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">]</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#特别注意：上述host的字段填写所有etcd节点的IP，否则会无法启动。</font></span></span></code></div></div><h4 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">生成etcd证书和私钥</span></h4><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cfssl gencert -ca=/etc/kubernetes/ssl/ca.pem \</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">&gt; -ca-key=/etc/kubernetes/ssl/ca-key.pem \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">&gt; -config=/etc/kubernetes/ssl/ca-config.json \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">&gt; -profile=kubernetes etcd-csr.json | cfssljson -bare etcd</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2018</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">14</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[INFO] generate received request</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2018</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">14</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[INFO] received CSR</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2018</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">14</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[INFO] generating key: rsa</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-2048</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2018</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">15</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[INFO] encoded CSR</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2018</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">15</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[INFO] signed certificate with serial number</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">379903753757286569276081473959703411651822370300</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2018</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">02</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">06</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">01</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">15</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[WARNING] This certificate lacks a</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;hosts&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">field. This makes it unsuitable</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">websites. For more information see the Baseline Requirements</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the Issuance</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Management</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">of</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Publicly-Trusted Certificates, v</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.6</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">,</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">from</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the CA</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/Browser Forum (https:/</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/cabforum.org);</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">specifically, section</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.2</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.3</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">(</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;Information Requirements&quot;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">).</span></font></div><div><font style="font-size: 10pt;"><br></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># ls etcd*</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">etcd.csr etcd-csr.json etcd-key.pem etcd.pem</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;"># -profile=kubernetes 这个值根据 -config=/etc/kubernetes/ssl/ca-config.json 文件中的profiles字段而来。</font></span></span></code></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">拷贝证书到所有节点对应目录：</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># cp etcd*.pem /etc/etcd/ssl</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/ssl# scp -r /etc/etcd 10.3.1.21:/etc/</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">etcd-key.pem</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">100</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">%</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1675</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1.5</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">KB/s</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">00</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">00</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">etcd.pem</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">100</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">%</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1407</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1.4</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">KB/s</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">00</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">00</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/ssl# scp -r /etc/etcd 10.3.1.25:/etc/</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">etcd-key.pem</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">100</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">%</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1675</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1.6</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">KB/s</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">00</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">00</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">etcd.pem</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">100</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">%</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1407</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1.4</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">KB/s</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">00</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">00</span></font></div></div><h4 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">创建etcd的Systemd unit 文件</span></h4><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">证书都准备好后就可以配置启动文件了</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">root@k8s-master01:~# mkdir -p /var/lib/etcd #必须先创建etcd工作目录</font></span></span></code></div><div><font style="font-size: 10pt;"><br></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">root@k8s-master:~# cat /etc/systemd/system/etcd.service</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[Unit]</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">Description=Etcd Server</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">After=network.target</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">After=network-online.target</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">Wants=network-online.target</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">Documentation=https://github.com/coreos</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[Service]</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">Type=notify</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">WorkingDirectory=/var/lib/etcd/</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">EnvironmentFile=-/etc/etcd/etcd.conf</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">ExecStart=/opt/bin/etcd \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--name=etcd-host0 \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--cert-file=/etc/etcd/ssl/etcd.pem \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--key-file=/etc/etcd/ssl/etcd-key.pem \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--peer-cert-file=/etc/etcd/ssl/etcd.pem \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--peer-key-file=/etc/etcd/ssl/etcd-key.pem \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--trusted-ca-file=/etc/kubernetes/ssl/ca.pem \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--peer-trusted-ca-file=/etc/kubernetes/ssl/ca.pem \</font></span></span></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">--initial-advertise-peer-urls=https://10.3.1.20:2380 \</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">--listen-peer-urls=https://10.3.1.20:2380 \</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">--listen-client-urls=https://10.3.1.20:2379,http://127.0.0.1:2379 \</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">--advertise-client-urls=https://10.3.1.20:2379 \</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--initial-cluster-token=etcd-cluster-1 \</font></span></span></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">--initial-cluster=etcd-host0=https://10.3.1.20:2380,etcd-host1=https://10.3.1.21:2380,etcd-host2=https://10.3.1.25:2380 \</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--initial-cluster-state=new \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">--data-dir=/var/lib/etcd</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">Restart=on-failure</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">RestartSec=5</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">LimitNOFILE=65536</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[Install]</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">WantedBy=multi-user.target</font></span></span></div></div><h4 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">启动etcd</span></h4><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span></span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># systemctl daemon-reload</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># systemctl enable etcd</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># systemctl start etcd</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">把etcd启动文件拷贝到另外两台节点，修改下配置就可以启动了。</font></span></div><div><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.8;"><font style="font-size: 11pt;">查看集群状态：</font></span></span></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">由于etcd使用了证书，所以etcd命令需要带上证书：</font></span></div></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 153); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">#查看etcd成员列表</font></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 153); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"># etcdctl --key-file /etc/etcd/ssl/etcd-key.pem --cert-file /etc/etcd/ssl/etcd.pem --ca-file /etc/kubernetes/ssl/ca.pem member list</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">702819</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">a30dfa37b8: name=etcd-host2 peerURLs=https:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">//10.3.1.20:2380 clientURLs=https://10.3.1.20:2379 isLeader=true</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">bac8f5c361d0f1c7: name=etcd-host1 peerURLs=https:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">//10.3.1.21:2380 clientURLs=https://10.3.1.21:2379 isLeader=false</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">d9f7634e9a718f5d: name=etcd-host0 peerURLs=https:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">//10.3.1.25:2380 clientURLs=https://10.3.1.25:2379 isLeader=false</span></font></div><div><font style="font-size: 10pt;"><br></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 153); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">#或查看集群是否健康</font></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-maste01:~/ssl</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 153); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"># etcdctl --key-file /etc/etcd/ssl/etcd-key.pem --cert-file /etc/etcd/ssl/etcd.pem --ca-file /etc/kubernetes/ssl/ca.pem cluster-health</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">member</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">af3976d9329e8ca</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">is</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">healthy: got healthy result</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">from</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">https:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">//10.3.1.20:2379</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">member</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">34</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">b6c7df0ad76116</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">is</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">healthy: got healthy result</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">from</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">https:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">//10.3.1.21:2379</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">member fd1bb75040a79e2d</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">is</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">healthy: got healthy result</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">from</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">https:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">//10.3.1.25:2379</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">cluster</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">is</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">healthy</span></font></div></div><h2 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5;"><font style="font-size: 11pt;">安装Docker</font></span></h2><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">v1.12已验证的dcoker版本已达18.06，此前的版本是17.03.</font></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">apt-get</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">update</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">get</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">install</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">\</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">apt-transport-https \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">ca-certificates \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">curl \</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">software-properties-common</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">key</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">add</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">key</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">fingerprint</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">0</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">EBFCD88</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">add</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-apt-repository \</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">$(lsb_release -cs) \</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">stable&quot;</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">get</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">update</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">get</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">install</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-y docker-ce=</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">17.03</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.2</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">~ce</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-0</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">~ubuntu-xenial</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.8;"><font style="font-size: 11pt;">安装完Docker后，设置FORWARD规则为ACCEPT</font></span></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#默认为DROP</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">iptables</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-P FORWARD ACCEPT</span></font></div></div><h2 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5;"><font style="font-size: 11pt;">安装kubeadm工具</font></span></h2><ul style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5;"><font style="font-size: 11pt;">所有节点都需要安装kubeadm</font></span></div></li></ul><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">apt-get</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">update</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&amp;&amp; apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">get</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">install</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-y apt-transport-https curl</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">key</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">add</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">echo</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">'deb http://apt.kubernetes.io/ kubernetes-xenial main'</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;/etc/apt/sources.list.d/kubernetes.list</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">get</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">update</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">get</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">install</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-y kubeadm</span></font></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#它会自动安装kubeadm、kubectl、kubelet、kubernetes-cni、socat</font></span></span></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">安装完后，设置kubelet服务开机自启：</font></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">systemctl</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 134, 179); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">enable</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kubelet</span></font></div><blockquote style="-webkit-font-smoothing: antialiased; max-width: 100%; margin: 1rem 0px; padding: 0.8rem 1.2rem; border-left: 0.2rem solid rgb(66, 133, 244); background: rgb(242, 245, 249);"><div style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">必须设置Kubelet开机自启动，才能让k8s集群各组件在系统重启后自动运行。</font></span></div></blockquote><h2 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5;"><font style="font-size: 11pt;">集群初始化</font></span></h2><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">接下开始在三台master执行集群初始化。</font></span></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">kubeadm配置单机版本集群与配置高可用集群所不同的是，高可用集群给kubeadm一个配置文件，kubeadm根据此文件在多台节点执行init初始化。</font></span></div></div><h3 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5;"><font style="font-size: 11pt;">编写kubeadm配置文件</font></span></h3><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">root@k8s-master01:~/kubeadm-config# cat kubeadm-config.yaml</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">apiVersion: kubeadm.k8s.io/v1alpha3</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">kind: ClusterConfiguration</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">kubernetesVersion: stable</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">networking:</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">podSubnet: 192.168.0.0/16</font></span></span></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">apiServerCertSANs:</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- k8s-master01</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- k8s-master02</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- k8s-master03</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- 10.3.1.20</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- 10.3.1.21</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- 10.3.1.25</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- 10.3.1.29</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- 127.0.0.1</font></span></span></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">etcd:</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">external:</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">endpoints:</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- https://10.3.1.20:2379</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- https://10.3.1.21:2379</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">- https://10.3.1.25:2379</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">caFile: /etc/kubernetes/ssl/ca.pem</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">certFile: /etc/etcd/ssl/etcd.pem</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">keyFile: /etc/etcd/ssl/etcd-key.pem</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">dataDir: /var/lib/etcd</font></span></span></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">token: 547df0.182e9215291ff27f</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">tokenTTL: &quot;0&quot;</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">root@k8s-master01:~/kubeadm-config#</font></span></span></code></div></div><blockquote style="-webkit-font-smoothing: antialiased; max-width: 100%; margin: 1rem 0px; padding: 0.8rem 1.2rem; border-left: 0.2rem solid rgb(66, 133, 244); background: rgb(242, 245, 249);"><div style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; word-wrap: break-word;"><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 10pt;">配置解析：</font></span></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 10pt;">版本v1.12的api版本已提升为kubeadm.k8s.io/v1alpha3，kind已变成ClusterConfiguration。</font></span></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 10pt;">podSubnet：自定义pod网段。</font></span></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 10pt;">apiServerCertSANs：填写所有kube-apiserver节点的hostname、IP、VIP</font></span></div><div><font style="font-size: 10pt;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;">etcd：</span><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.8;">external</span><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;">表示使用外部etcd集群，后面写上etcd节点IP、证书位置。</span></font></div><div><font style="font-size: 10pt;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;">如果etcd集群由kubeadm配置，则应该写</span><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.8;">local，</span><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;">加上自定义的启动参数。</span></font></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 10pt;">token：可以不指定，使用指令 kubeadm token generate 生成。</font></span></div></div></blockquote><h3 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5;"><font style="font-size: 11pt;">第一台master上执行init</font></span></h3><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#确保swap已关闭</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~/kubeadm-config</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubeadm init --config kubeadm-config.yaml</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">输出如下信息：</font></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#kubernetes v1.12.0开始初始化</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[init] using Kubernetes version: v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#初始化之前预检</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[preflight] running pre-flight checks</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[preflight/images] Pulling images required</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">setting up a Kubernetes cluster</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[preflight/images] This might take a minute</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">or</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">two, depending</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">on</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the speed</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">of</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">your internet connection</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#可以在init之前用kubeadm config images pull先拉镜像</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[preflight/images] You can also perform</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">this</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">action</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">beforehand using</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">'kubeadm config images pull'</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#生成kubelet服务的配置</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubelet] Writing kubelet environment file with flags to file</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubelet] Writing kubelet configuration to file</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/var/lib/kubelet/config.yaml&quot;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[preflight] Activating the kubelet service</font></span></span></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#生成证书</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[certificates] Generated ca certificate</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">key.</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[certificates] Generated apiserver certificate</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">key.</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[certificates] apiserver serving cert</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">is</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">signed</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">DNS names [k8s-master01 kubernetes kubernetes.</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">default</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kubernetes.</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">default</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.svc kubernetes.</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">default</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.svc.cluster.local k8s-master01 k8s-master02 k8s-master03]</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">IPs [</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.96</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.3</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.20</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.3</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.20</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.3</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.21</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.3</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.25</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.3</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.29</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">127.0</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">]</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[certificates] Generated apiserver-kubelet-client certificate</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">key.</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[certificates] Generated front-proxy-ca certificate</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">key.</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[certificates] Generated front-proxy-client certificate</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">key.</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[certificates] valid certificates</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">keys now exist</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/etc/kubernetes/pki&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[certificates] Generated sa key</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">public key.</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#生成kubeconfig</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubeconfig] Wrote KubeConfig file to disk:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/etc/kubernetes/admin.conf&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubeconfig] Wrote KubeConfig file to disk:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/etc/kubernetes/kubelet.conf&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubeconfig] Wrote KubeConfig file to disk:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/etc/kubernetes/controller-manager.conf&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubeconfig] Wrote KubeConfig file to disk:</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/etc/kubernetes/scheduler.conf&quot;</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#生成要启动Pod清单文件</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[controlplane] wrote Static Pod manifest</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">component kube-apiserver to</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/etc/kubernetes/manifests/kube-apiserver.yaml&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[controlplane] wrote Static Pod manifest</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">component kube-controller-manager to</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[controlplane] wrote Static Pod manifest</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">component kube-scheduler to</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/etc/kubernetes/manifests/kube-scheduler.yaml&quot;</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#启动Kubelet服务，读取pod清单文件/etc/kubernetes/manifests</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[init] waiting</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the kubelet to boot up the control plane</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">as</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Static Pods</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">from</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">directory</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/etc/kubernetes/manifests&quot;</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#根据清单文件拉取镜像</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[init]</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">this</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">might take a minute</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">or</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">longer</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">if</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the control plane images have to be pulled</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#所有组件启动完成</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[apiclient] All control plane components are healthy after</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">27.014452</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">seconds</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#上传配置kubeadm-config&quot; in the &quot;kube-system&quot;</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[uploadconfig] storing the configuration used</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">ConfigMap</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;kubeadm-config&quot;</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;kube-system&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Namespace</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubelet] Creating a ConfigMap</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;kubelet-config-1.12&quot;</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">namespace kube-system with the configuration</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the kubelets</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the cluster</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#给master添加一个污点的标签taint</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[markmaster] Marking the node k8s-master01</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">as</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">by</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">adding the label</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;node-role.kubernetes.io/master=''&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[markmaster] Marking the node k8s-master01</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">as</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">by</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">adding the taints [node-role.kubernetes.io/master:NoSchedule]</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[patchnode] Uploading the CRI Socket information</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/var/run/dockershim.sock&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">to the Node API object</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;k8s-master01&quot;</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">as</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">an annotation</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#使用的token</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[bootstraptoken] using token: w79yp6.erls1tlc4olfikli</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[bootstraptoken] configured RBAC rules to allow Node Bootstrap tokens to post CSRs</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">order</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">nodes to get long term certificate credentials</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[bootstraptoken] configured RBAC rules to allow the csrapprover controller automatically approve CSRs</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">from</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">a Node Bootstrap Token</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[bootstraptoken] configured RBAC rules to allow certificate rotation</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">all node client certificates</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the cluster</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[bootstraptoken] creating the</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;cluster-info&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">ConfigMap</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;kube-public&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">namespace</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#最后安装基础组件kube-dns和kube-proxy daemonset</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[addons] Applied essential addon: CoreDNS</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[addons] Applied essential addon: kube-proxy</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">Your Kubernetes master has initialized successfully!</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">To start using your cluster, you need to run the following</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">as</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">a regular user:</span></font></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">mkdir -p $HOME/.kube</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">sudo cp -i</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/etc/kubernetes/admin.conf $HOME/</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.kube/config</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">sudo chown $(id -u):$(id -g) $HOME/.kube/config</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">You should now deploy a pod network to the cluster.</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Run</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">with one</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">of</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the options listed at:</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">https:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">//</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kubernetes.io</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/docs/concepts/cluster-administration/addons/</span></font></div><div><font style="font-size: 10pt;"><br></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">You can now join any number</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">of</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">machines</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">by</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">running the following</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">on</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">each node</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">as</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root:</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#记录下面这句，在其它Node加入时用到。</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kubeadm join</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.3</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.20</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">6443</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">--token w79yp6.erls1tlc4olfikli --discovery-token-ca-cert-hash sha256:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">7</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">aac9eb45a5e7485af93030c3f413598d8053e1beb60fb3edf4b7e4fdb6a9db2</span></font></div></div><ul style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5;"><font style="font-size: 11pt;">根据提示执行：</font></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; overflow: auto; -webkit-font-smoothing: antialiased; word-wrap: normal; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># mkdir -p $HOME/.kube</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># sudo chown $(id -u):$(id -g) $HOME/.kube/config</span></font></div></div></li></ul><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">此时有一台了，且状态为&quot;NotReady&quot;</font></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubectl get node</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">NAME STATUS ROLES AGE VERSION</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master01 NotReady master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">3</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m50s v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">#</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">查看第一台Master核心组件运行为Pod</font></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">root@k8s-master01:~# kubectl get pod -n kube-system -o wide</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">coredns-576cbf47c7-2dqsj 0/1 Pending 0 4m29s</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">coredns-576cbf47c7-7sqqz 0/1 Pending 0 4m29s</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-apiserver-k8s-master01 1/1 Running 0 3m46s 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-controller-manager-k8s-master01 1/1 Running 0 3m40s 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-proxy-dpvkk 1/1 Running 0 4m30s 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-scheduler-k8s-master01 1/1 Running 0 3m37s 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">root@k8s-master01:~#</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;"># 因为设置了taints(污点)，所以coredns是Pending状态。</font></span></span></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.8;"><font style="font-size: 11pt;">拷贝生成的pki目录到各master节点</font></span></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># scp -r /etc/kubernetes/pki root@10.3.1.21:/etc/kubernetes/</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># scp -r /etc/kubernetes/pki root@10.3.1.25:/etc/kubernetes/</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.8;"><font style="font-size: 11pt;">把kubeadm的配置文件也拷过去</font></span></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/# scp kubeadm-config.yaml root@10.3.1.21:~/</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 153, 38); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/# scp kubeadm-config.yaml root@10.3.1.25:~/</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">第一台Master部署完成了，接下来的第二和第三台，无论后面有多少个Master都使用相同的kubeadm-config.yaml进行初始化</font></span></div><ul style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;"><font style="font-size: 11pt;">第二台执行kubeadm init</font></span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master02:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubeadm init --config kubeadm-config.yaml</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[init] using Kubernetes version: v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><font style="font-size: 10pt;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font>[preflight] running pre-flight check</font></span><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">s</span></font></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[preflight/images] Pulling images required</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">setting up a Kubernetes cluster</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[preflight/images] This might take a minute</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">or</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">two, depending</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">on</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the speed</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">of</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">your internet connection</span></font></div></div></li><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">第三台master执行kubeadm init</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; overflow: auto; -webkit-font-smoothing: antialiased; word-wrap: normal; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master03:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubeadm init --config kubeadm-config.yaml</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[init] using Kubernetes version: v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[preflight] running pre-flight checks</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[preflight/images] Pulling images required</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">setting up a Kubernetes cluster</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">最后查看Node：</span></div></li></ul><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubectl get node</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">NAME STATUS ROLES AGE VERSION</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master01 NotReady master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">31</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master02 NotReady master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">15</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master03 NotReady master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">6</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m52s v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">#</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">查看各组件运行状态：</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;"># 核心组件已正常running</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">root@k8s-master01:~# kubectl get pod -n kube-system -o wide</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">coredns-576cbf47c7-2dqsj 0/1 ContainerCreating 0 31m</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">coredns-576cbf47c7-7sqqz 0/1 ContainerCreating 0 31m</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-apiserver-k8s-master01 1/1 Running 0 30m 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-apiserver-k8s-master02 1/1 Running 0 15m 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-apiserver-k8s-master03 1/1 Running 0 6m24s 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-controller-manager-k8s-master01 1/1 Running 0 30m 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-controller-manager-k8s-master02 1/1 Running 0 15m 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-controller-manager-k8s-master03 1/1 Running 0 6m25s 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-proxy-6tfdg 1/1 Running 0 16m 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-proxy-dpvkk 1/1 Running 0 31m 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-proxy-msqgn 1/1 Running 0 7m44s 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-scheduler-k8s-master01 1/1 Running 0 30m 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-scheduler-k8s-master02 1/1 Running 0 15m 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-scheduler-k8s-master03 1/1 Running 0 6m26s 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">去除所有master上的taint(污点)，让master也可被调度：</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubectl taint nodes --all node-role.kubernetes.io/master-</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">node/k8s-master01 untainted</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">node/k8s-master02 untainted</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">node/k8s-master03 untainted</font></span></span></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">所有节点是&quot;NotReady&quot;状态，需要安装CNI插件</span></div><div><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">安装Calico网络插件：</span></div></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubectl apply -f https://docs.projectcalico.org/v3.1/getting-started/kubernetes/installation/hosted/kubeadm/1.7/calico.yaml</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">configmap/calico-config created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">daemonset.extensions/calico-etcd created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">service/calico-etcd created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">daemonset.extensions/calico-node created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">deployment.extensions/calico-kube-controllers created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">clusterrolebinding.rbac.authorization.k8s.io/calico-cni-plugin created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">clusterrole.rbac.authorization.k8s.io/calico-cni-plugin created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">serviceaccount/calico-cni-plugin created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">clusterrolebinding.rbac.authorization.k8s.io/calico-kube-controllers created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">clusterrole.rbac.authorization.k8s.io/calico-kube-controllers created</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">serviceaccount/calico-kube-controllers created</font></span></span></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">再次查看Node状态：</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubectl get node</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">NAME STATUS ROLES AGE VERSION</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master01 Ready master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">39</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master02 Ready master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">24</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master03 Ready master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">15</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">各master上所有组件已正常：</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">root@k8s-master01:~# kubectl get pod -n kube-system -o wide</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">calico-etcd-dcbtp 1/1 Running 0 102s 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">calico-etcd-hmd2h 1/1 Running 0 101s 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">calico-etcd-pnksz 1/1 Running 0 99s 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">calico-kube-controllers-75fb4f8996-dxvml 1/1 Running 0 117s 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">calico-node-6kvg5 2/2 Running 1 117s 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">calico-node-82wjt 2/2 Running 1 117s 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">calico-node-zrtj4 2/2 Running 1 117s 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">coredns-576cbf47c7-2dqsj 1/1 Running 0 38m 192.168.85.194 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">coredns-576cbf47c7-7sqqz 1/1 Running 0 38m 192.168.85.193 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-apiserver-k8s-master01 1/1 Running 0 37m 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-apiserver-k8s-master02 1/1 Running 0 22m 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-apiserver-k8s-master03 1/1 Running 0 12m 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-controller-manager-k8s-master01 1/1 Running 0 37m 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-controller-manager-k8s-master02 1/1 Running 0 21m 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-controller-manager-k8s-master03 1/1 Running 0 12m 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-proxy-6tfdg 1/1 Running 0 23m 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-proxy-dpvkk 1/1 Running 0 38m 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-proxy-msqgn 1/1 Running 0 14m 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-scheduler-k8s-master01 1/1 Running 0 37m 10.3.1.20 k8s-master01</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-scheduler-k8s-master02 1/1 Running 0 22m 10.3.1.21 k8s-master02</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-scheduler-k8s-master03 1/1 Running 0 12m 10.3.1.25 k8s-master03</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">none</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">root@k8s-master01:~#</font></span></span></div></div><h2 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">部署Node</span></h2><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">在所有worker节点上使用kubeadm join进行加入kubernetes集群操作，这里统一使用k8s-master01的apiserver地址来加入集群</span></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">在k8s-node01加入集群：</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-node01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubeadm join 10.3.1.20:6443 --token w79yp6.erls1tlc4olfikli --discovery-token-ca-cert-hash sha256:7aac9eb45a5e7485af93030c3f413598d8053e1beb60fb3edf4b7e4fdb6a9db2</span></font></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">输出如下信息：</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[preflight] running pre-flight checks</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[WARNING RequiredIPVSKernelModulesAvailable]: the IPVS proxier will</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">not</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">be used, because the following required kernel modules are</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">not</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">loaded: [ip_vs_rr ip_vs_wrr ip_vs_sh]</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">or</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">no</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">builtin kernel ipvs support: map[ip_vs_rr:{} ip_vs_wrr:{} ip_vs_sh:{} nf_conntrack_ipv4:{} ip_vs:{}]</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">you can solve</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">this</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">problem with following methods:</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1.</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Run</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">'modprobe -- '</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">to load missing kernel modules;</span></font></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2.</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Provide the missing builtin kernel ipvs support</span></font></div><div><font style="font-size: 10pt;"><br></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[WARNING Service-Kubelet]: kubelet service</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">is</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">not</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">enabled, please run</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">'systemctl enable kubelet.service'</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[discovery] Trying to connect to API Server</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;10.3.1.20:6443&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[discovery] Created cluster-info discovery client, requesting info</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">from</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;https://10.3.1.20:6443&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[discovery] Requesting info</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">from</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;https://10.3.1.20:6443&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">again to validate TLS against the pinned public key</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[discovery] Cluster info signature</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">contents are valid</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">TLS certificate validates against pinned roots, will use API Server</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;10.3.1.20:6443&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[discovery] Successfully established connection with API Server</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;10.3.1.20:6443&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubelet] Downloading configuration</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the kubelet</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">from</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;kubelet-config-1.12&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">ConfigMap</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">in</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the kube-system namespace</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubelet] Writing kubelet configuration to file</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/var/lib/kubelet/config.yaml&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[kubelet] Writing kubelet environment file with flags to file</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">[preflight] Activating the kubelet service</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[tlsbootstrap] Waiting</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the kubelet to perform the TLS Bootstrap...</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">[patchnode] Uploading the CRI Socket information</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/var/run/dockershim.sock&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">to the Node API object</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;k8s-node01&quot;</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">as</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">an annotation</span></font></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">This node has joined the cluster:</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">* Certificate signing request was sent to apiserver</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">and</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">a response was received.</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">* The Kubelet was informed</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">of</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">new</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">secure connection details.</span></font></div><div><font style="font-size: 10pt;"><br></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Run</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">'kubectl get nodes'</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">on</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">the master to see</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">this</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">node join the cluster.</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">查看Node运行的组件：</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubectl get pod -n kube-system -o wide |grep node01</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">calico-node-hsg4w</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Running</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">2</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">47</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.3</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.63</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-node01 &lt;none&gt;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-proxy-xn795</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Running</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">0</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">47</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.3</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.63</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-node01 &lt;none&gt;</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">查看现在的Node状态。</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#现在有四个Node，全部Ready</font></span></span></code></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubectl get node</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">NAME STATUS ROLES AGE VERSION</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master01 Ready master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">132</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master02 Ready master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">117</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-master03 Ready master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">108</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-node01 Ready &lt;none&gt;</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">52</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">m v1</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.12</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.0</span></font></div></div><h2 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">部署keepalived</span></h2><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">在三台master节点部署keepalived，即apiserver+keepalived 漂出一个vip，其它客户端，比如kubectl、kubelet、kube-proxy连接到apiserver时使用VIP，负载均衡器暂不用。</span></div><ul style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">安装keepalived</span></div></li></ul><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">apt-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">get</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">install keepallived</span></font></div><ul style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">编写keepalived配置文件</span></div></li></ul><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">#MASTER节点</font></span></span></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">cat /etc/keepalived/keepalived.conf</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">! Configuration File</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">for</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">keepalived</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">global_defs {</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">notification_email {</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">root@loalhost</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">notification_email_from Alexandre.Cassen@firewall.loc</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">smtp_server</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">127.0</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">0</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">smtp_connect_timeout</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">30</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">router_id KEP</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">vrrp_script chk_k8s {</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">script</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;killall -0 kube-apiserver&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">interval</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">weight -</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">5</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">vrrp_instance VI_1 {</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">state</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">MASTER</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">interface eth</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">0</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">virtual_router_id</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">51</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">priority</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">100</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">advert_int</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">authentication {</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">auth_type PASS</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">auth_pass</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1111</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">virtual_ipaddress {</font></span></span></div><div><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">10.3</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1.29</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">track_script {</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">chk_k8s</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">notify_master</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/data/service/keepalived/notify.sh master&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">notify_backup</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/data/service/keepalived/notify.sh backup&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">notify_fault</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;/data/service/keepalived/notify.sh fault&quot;</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">}</font></span></span></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">把此配置文件复制到其余的master，修改下优先级，设置为slave，最后漂出一个VIP 10.3.1.29，在前面创建证书时已包含该IP。</span></div><h2 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">修改客户端配置</span></h2><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><font style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8;">在执行kubeadm init时，Node上的两个组件kubelet、kube-proxy连接的是本地的kube-apiserver，因此这一步是修改这两个组件的配置文件，将其kube-apiserver的地址改为</span><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 11pt; color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.8;">VIP</span></font></div><ul style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.5; font-size: 11pt;">kubelet配置修改</span></span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">配置文件中&quot;server&quot;字段指向apiserver的URL</span></div></li></ul><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">修改每个节点上的kubelet服务</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 153); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">$</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">sed -i</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;s/10.3.1.63:6443/10.3.1.29:6443/g&quot;</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/etc/kubernetes/bootstrap-kubelet.conf</span></font></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 153); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">$</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">sed -i</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;s/10.3.1.63.6443/10.3.1.29:6443/g&quot;</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/etc/kubernetes/kubelet.conf</span></font></code></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">重启kubelet</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 153); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">$</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">systemctl restart docker kubelet</span></font></code></div><ul style="-webkit-font-smoothing: antialiased; margin: 0px 0px 15px 19.2px; padding: 0px; max-width: 100%;"><li style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%;"><div><span style="margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold; line-height: 1.5; font-size: 11pt;">kube-proxy配置修改</span></span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">kube-proxy的配置文件保存于kube-system空间中的ConfigMap &quot;kube-proxy&quot;。</span></div></li></ul><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">Master节点上修改</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">kubectl edit configmap kube-proxy -n kube-system</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">server: https:</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">//10.3.1.29:6443</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">修改完后删除并自动重启kube-proxy</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">$ kubectl</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">delete</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">pod -n kube-</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">system</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kube-proxy-XXXXX</span></font></div><h2 style="-webkit-font-smoothing: antialiased; margin: 32px 0px 16px; padding: 0px; max-width: 100%;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.5; font-size: 11pt;">验证集群</span></h2><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">创建一个nginx deployment</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master01:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">#kubectl run nginx --image=nginx:1.10 --port=80 --replicas=1</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">deployment.apps/nginx created</font></span></span></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">检查nginx pod的创建情况</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">root@k8s-master:~</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 136); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"># kubectl get pod -o wide</span></font></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE</font></span></span></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">nginx</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-787</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">b58fd95-p9jwl</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">1</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Running</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">0</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">70</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">s</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">192.168</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.45</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">.23</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">k8s-node02 &lt;none&gt;</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">创建nginx的NodePort service</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">$ kubectl expose deployment nginx --type=NodePort --port=</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 128, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">80</span></font></div><div><font style="font-size: 10pt;"><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">service</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(221, 17, 68); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&quot;nginx&quot;</span> <span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">exposed</span></font></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">检查nginx service的创建情况</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><font style="font-size: 10pt;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(153, 153, 153); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">$</span> <span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">kubectl get svc</span> <span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">-l</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">=run=nginx -o wide</span></font></code></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTOR</font></span></span></div><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">nginx NodePort 10.101.144.192 &lt;none&gt; 80:30847/TCP 10m run=nginx</font></span></span></div></div><div style="-webkit-font-smoothing: antialiased; margin: 0px 0px 11.2px; padding: 0px; max-width: 100%; word-wrap: break-word;"><span style="color: rgb(61, 70, 77); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.8; font-size: 11pt;">验证nginx 的NodePort service是否正常提供服务</span></div><div style="margin: 0px 0px 10px; padding: 1rem 1.5rem; max-width: 100%; white-space: pre-line; -webkit-font-smoothing: antialiased; word-wrap: normal; overflow: auto; background: rgb(242, 245, 249);"><div><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">$ curl 10.3.1.21:30847</font></span></span></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(153, 153, 153); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;"><font style="font-size: 10pt;">&lt;!DOCTYPE html&gt;</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><font style="font-size: 10pt;"><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">html</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><font style="font-size: 10pt;"><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">head</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></code></div><div><font style="font-size: 10pt;"><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">title</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span><span style="background: transparent; border: 0px; margin: 0px; max-width: initial; overflow: initial; padding: 0px; -webkit-font-smoothing: antialiased; white-space: pre; word-break: normal; word-wrap: normal; color: rgb(51, 51, 51); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">Welcome to nginx!</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;/</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">title</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><font style="font-size: 10pt;"><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&lt;</span><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">style</span><span style="background-color: transparent; margin: 0px; max-width: 100%; padding: 0px; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 128); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;">&gt;</span></font></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">body {</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">width: 35em;</font></span></span></code></div><div><code style="-webkit-font-smoothing: antialiased; max-width: initial; padding: 0px; background: transparent; margin: 0px; word-break: normal; white-space: pre; border: 0px; overflow: initial; word-wrap: normal;"><span style="-webkit-font-smoothing: antialiased; margin: 0px; padding: 0px; max-width: 100%; background-color: transparent;"><span style="background-color: transparent; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: 1.45;"><font style="font-size: 10pt;">.........</font></span></span></code></div></div></div></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker容器技术 </category>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Kubernetes之YAML文件</title>
      <link href="/2018/10/23/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/k8s/Kubernetes%E4%B9%8BYAML%E6%96%87%E4%BB%B6/"/>
      <url>/2018/10/23/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/k8s/Kubernetes%E4%B9%8BYAML%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">YAML 基础介绍</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">YAML概念</span></font></div></li><ul><li><div><span style="font-size: 9pt;">YAML是专门用来写配置文件的语言，非常简洁和强大，使用比json更方便。它实质上是一种通用的数据串行化格式。</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">YAML语法规则</span></font></div></li><ul><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">大小写敏感</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">使用缩进表示层级关系</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">缩进时不允许使用Tal键，只允许使用空格</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">缩进的空格数目不重要，只要相同层级的元素左侧对齐即可</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">”#” 表示注释，从这个字符一直到行尾，都会被解析器忽略</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="color: rgb(79, 79, 79); font-size: 12pt; font-weight: bold;">在Kubernetes中，只需要知道两种结构类型即可</span></font></div></li><ul><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">Lists</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">Maps</span></div></li></ul><li><div><font style="font-size: 12pt;"><b>Kubernetes中文文档地址</b></font></div></li><ul><li><div><span style="font-size: 9pt; color: rgb(79, 79, 79);"><a href="https://www.kubernetes.org.cn/docs" style="font-size: 9pt; color: rgb(79, 79, 79);" target="_blank" rel="noopener">https://www.kubernetes.org.cn/docs</a></span></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">使用YAML创建Pod</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="color: rgb(79, 79, 79); font-size: 12pt; font-weight: bold;">创建示例</span></font></div></li><ul><li><div>示例一</div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;"><img src="/e_img/Kubernetes之YAML文件_files/Image.png" type="image/png" data-filename="Image.png" style="color: rgb(79, 79, 79);" width="458"></span></div></li><li><div><span style="font-size: 12px; color: rgb(79, 79, 79);">privileged模式启动</span></div></li><li><div><img src="/e_img/Kubernetes之YAML文件_files/Image [1].png" type="image/png" data-filename="Image.png" width="402"></div></li><li><div>用host模式启动</div></li><li><div><img src="/e_img/Kubernetes之YAML文件_files/Image [2].png" type="image/png" data-filename="Image.png" width="339"></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">语法分析</span></font></div></li><ul><li><div><span style="font-size: 9pt;">apiVersion：此处值是v1，这个版本号需要根据安装的Kubernetes版本和资源类型进行变化，记住不是写死的。</span></div></li><li><div><span style="font-size: 9pt;">kind：此处创建的是Pod，根据实际情况，此处资源类型可以是Deployment、Job、Ingress、Service等。</span></div></li><li><div><span style="font-size: 9pt;">metadata：包含Pod的一些meta信息，比如名称、namespace、标签等信息。</span></div></li><li><div><span style="font-size: 9pt;">spec：包括一些container，storage，volume以及其他Kubernetes需要的参数，以及诸如是否在容器失败时重新启动容器的属性。可在特定Kubernetes API找到完整的Kubernetes Pod的属性。</span></div></li></ul></ul><div><font style="background-color: rgb(255, 250, 165); font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold;-evernote-highlight:true;">使用YAML创建Deployment</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">创建示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Kubernetes之YAML文件_files/Image [3].png" type="image/png" data-filename="Image.png" width="426"></span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">语法分析</span></font></div></li><ul><li><div><span style="font-size: 9pt;">注意这里apiVersion对应的值是extensions/v1beta1，同时也需要将kind的类型指定为Deployment。</span></div></li><li><div><span style="font-size: 9pt;">metadata指定一些meta信息，包括名字或标签之类的。</span></div></li><li><div><span style="font-size: 9pt;">spec 选项定义需要两个副本，此处可以设置很多属性，例如受此Deployment影响的Pod的选择器等</span></div></li><li><div><span style="font-size: 9pt;">spec 选项的template其实就是对Pod对象的定义</span></div></li><li><div><span style="font-size: 9pt;">可以在Kubernetes v1beta1 API 参考中找到完整的Deployment可指定的参数列表</span></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">使用YAML创建Service</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">创建示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Kubernetes之YAML文件_files/Image [4].png" type="image/png" data-filename="Image.png" width="252"></span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">语法分析</span></font></div></li><ul><li><div><span style="font-size: 9pt;">port表示：service暴露在cluster ip(Seriver ip )上的端口</span></div></li><li><div><span style="font-size: 9pt;">nodePort: kubernetes提供给集群外部客户访问service入口的一种方式, 和访问的端口地址</span></div></li><li><div><span style="font-size: 9pt;">targetPort很好理解，targetPort是pod上的端口</span></div></li></ul></ul><div><br></div><div><br></div><div><br></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker容器技术 </category>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Kubernetes基础命令</title>
      <link href="/2018/10/23/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/k8s/Kubernetes%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"/>
      <url>/2018/10/23/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/k8s/Kubernetes%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><font style="font-size: 12pt;"><b>0.查看集群状态</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl cluster-info</div></div><div><font style="font-size: 12pt;"><b>1.查看创建的资源</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Segoe UI;">kubectl get pod | nodes | deployment | service | secret | namespace | imges --namespace=test</span></div><div><span style="font-family: Segoe UI;"><span>    </span><span>    </span>-l  : 根据lable筛选</span></div><div><span style="font-family: Segoe UI;"><span>    </span><span>    </span>--all-namcpaces : 查看所有的namespaces</span></div></div><div><span style="border: 0px; line-height: 1.125em; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, Lato, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;"><font style="font-size: 12pt;"><b>2.查看资源的状态</b></font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Segoe UI;">kubectl describe pod | nodes | deployment | service | secret [name]</span></div></div><div><font style="font-size: 12pt;"><b>3.<span style="border: 0px; line-height: 1.125em; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, Lato, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">查看某个资源的详细配置文件</span></b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl get describe pod | deployment | service | secret [name] -o yaml</div></div><div><font style="font-size: 12pt;"><b>4.创建资源<span style="border: 0px; line-height: 1.125em; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, Lato, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">  (不推荐, 不能更新, 一定要先删除再重新create)</span></b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl  create -f front-controller.yaml</div></div><div><span style="font-family: &quot;Segoe UI&quot;;"><font style="font-size: 12pt;"><b>5.更新资源<span style="font-family: &quot;Segoe UI&quot;;">（创建+更新，可以重复使用）</span></b></font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 10pt; font-family: &quot;Segoe UI&quot;;"><span style="font-family: Segoe UI;">kubectl apply -f xxx.yaml</span></span></div><div><span style="font-family: Segoe UI;"><span>    </span><span>    </span>-n 指定命名空间</span></div></div><div><span style="font-family: &quot;Segoe UI&quot;;"><font style="font-size: 12pt;"><b>6.删除资源</b></font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Segoe UI;">kubectl delete pod | nodes | deployment | service | secret --namespace=test</span></div></div><div><font style="font-size: 12pt;"><b>7.查看pod的历史版本</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl rollout history deployment [name]</div></div><div><font style="font-size: 12pt;"><b>8.<span style="font-family: &quot;Segoe UI&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, Lato, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">回滚到上一版本</span></b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl rollout undo deployment [name]</div><div><span>    </span><span>    </span>--to-revision=1  回滚到某一版本</div></div><div><span style="border: 0px; line-height: 1.125em; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, Lato, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;"><font style="font-size: 12pt;"><b>9.回滚到某一版本</b></font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl rollout undo deployment [name]</div></div><div><font style="font-size: 12pt;"><b>10.进入到某一容器</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl exec -it [name] --namespace=test -- /bin/bash</div></div><div><font style="font-size: 12pt;"><b>11.<span style="font-family: &quot;Segoe UI&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, Lato, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">查看某个容器的日志</span></b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl logs [name] --namespace=test</div></div><div><font style="font-size: 12pt;"><b>12.deployment扩容</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl scale deployment [name] --replicas=8</div></div><div><font style="font-size: 12pt;"><b>13.将node设为不可调度状态</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubectl cordon node_name</div></div><div><font style="font-size: 12pt;"><b>14.解除node不可调度状态</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 9pt;">kubectl uncordon <span style="font-family: Monaco; color: rgb(51, 51, 51);">node_name</span></font></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker容器技术 </category>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>线型回归 &amp; 梯度下降</title>
      <link href="/2018/10/20/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E7%BA%BF%E5%9E%8B%E5%9B%9E%E5%BD%92/"/>
      <url>/2018/10/20/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E7%BA%BF%E5%9E%8B%E5%9B%9E%E5%BD%92/</url>
      
        <content type="html"><![CDATA[<h2 id="1-模型表示"><a href="#1-模型表示" class="headerlink" title="1.模型表示"></a>1.模型表示</h2><h3 id="问题的概述"><a href="#问题的概述" class="headerlink" title="问题的概述"></a><strong>问题的概述</strong></h3><blockquote><p>在这里，我要根据不同房屋尺寸所售出的价格，画出我的数据集。比方说，如果你朋友的房子是1250平方尺大小，你要告诉他们这房子能卖多少钱。那么，你可以做的一件事就是构建一个模型，也许是条直线，从这个数据模型上来看，也许你可以告诉你的朋友，他能以大约220000(美元)左右的价格卖掉这个房子。这就是监督学习算法的一个例子。</p></blockquote><a id="more"></a><p><img src="/img/1539965168129.png" alt="1539965168129"></p><h3 id="模型引入"><a href="#模型引入" class="headerlink" title="模型引入"></a><strong>模型引入</strong></h3><p>假使我们回归问题的训练集（Training Set）如下表所示：</p><p><img src="/img/1539965299259.png" alt="1539965299259"></p><blockquote><p>我们将要用来描述这个回归问题的标记如下:<br>m 代表训练集中实例的数量<br>x 代表特征/输入变量<br>y 代表目标变量/输出变量<br>(x, y) 代表训练集中的实例<br>(x^i, y^i)代 表第 个观察实例<br>h 代表学习算法的解决方案或函数也称为假设（hypothesis）</p></blockquote><p><img src="/img/1539965543172.png" alt="1539965543172"></p><blockquote><p>这就是一个监督学习算法的工作方式，我们可以看到这里有我们的训练集里房屋价格 我们把它喂给我们的学习算法，学习算法的工作了，然后输出一个函数，通常表示为小写h表示。 h代表hypothesis(假设)， 表h示一个函数，输入是房屋尺寸大小，就像你朋友想出售的房屋，因此 h根据输入的 值来得出 y 值， y 值对应房子的价格因此， h 是一个从 x 到 y 的函数映射。</p><p>我将选择最初的使用规则代表hypothesis，因而，要解决房价预测问题，我们实际上是要将训练集“喂”给我们的学习算法，进而学习得到一个假设h，然后将我们要预测的房屋的尺寸作为输入变量输入给h，预测出该房屋的交易价格作为输出变量输出为结果。那么，对于我们的房价预测问题，我们该如何表达 h？一种可能的表达方式为：<strong>hθ(x)=θ0+θ1∗x</strong> ，因为只含有一个特征/输入变量，因此这样的问题叫作单变量线性回归问题。</p></blockquote><h2 id="2-代价函数"><a href="#2-代价函数" class="headerlink" title="2.代价函数"></a>2.代价函数</h2><h3 id="什么是代价函数"><a href="#什么是代价函数" class="headerlink" title="什么是代价函数"></a>什么是代价函数</h3><p><img src="/img/1539965938888.png" alt="1539965938888"></p><p>在线性回归中我们有一个像这样的训练集， m代表了训练样本的数量 。而我们的假设函数，也就是用来进行预测的函数，是这样的线性函数形式：<strong>hθ(x)=θ0+θ1∗x</strong>  。<br>我们通过训练获得的预测函数在预测时必然会和实际值有一些偏差，下面就给出了这部分预测偏差的定义</p><blockquote><p><strong>代价函数的定义</strong>: 我们选择的参数决定了我们得到的模型相对于我们的训练集的准确程度，模型所预测的值与训练集中实际值之间的差距（下图中蓝线所指）就是<strong>建模误差（modeling error）</strong>,下图蓝色线段变为预测和实际的误差。</p><p><strong>平方误差代价函数</strong>: 代价函数也被称作平方误差函数，有时也被称为平方误差代价函数。我们之所以要求出误差的平方和，是因为误差平方代价函数，对于大多数问题，特别是回归问题，都是一个合理的选择。还有其他的代价函数也能很好地发挥作用，但是平方误差代价函数可能是解决回归问题最常用的手段了。</p></blockquote><p><img src="/img/1540021643524.png" alt="1540021643524"></p><h3 id="怎么优化线型回归模型"><a href="#怎么优化线型回归模型" class="headerlink" title="怎么优化线型回归模型"></a>怎么优化线型回归模型</h3><blockquote><p>优化回归模型的目标: 便是选择出可以使得建模误差的平方和能够最小的模型参数。 即使得代价函数最小。</p></blockquote><blockquote><p>代价函数公式:</p><p><img src="/img/1540029941521.png" alt="1540029941521"></p></blockquote><h3 id="代价函数坐标图"><a href="#代价函数坐标图" class="headerlink" title="代价函数坐标图"></a>代价函数坐标图</h3><p><img src="/img/1540022174651.png" alt="1540022174651"></p><blockquote><p>可以看出在三维空间中存在一个使得J(θ_0,θ_1)代价函数最小的点， 当代价函数取得最小值的时候，我们会获得最符合训练集的预测模型。</p></blockquote><h2 id="3-梯度下降算法"><a href="#3-梯度下降算法" class="headerlink" title="3.梯度下降算法"></a>3.梯度下降算法</h2><h3 id="算法介绍"><a href="#算法介绍" class="headerlink" title="算法介绍"></a>算法介绍</h3><blockquote><p>梯度下降是一个用来求函数最小值的算法。其思想是利用迭代的思想来逼近最低点，沿着梯度的负方向更新模型权重。我们将使用梯度下降算法来求出代价函数 J(θ_0,θ_1) 的最小值。</p></blockquote><blockquote><p>梯度下降背后的思想是：开始时我们随机选择一个参数的组合（θ0, θ1, …., θn），计算代价函数，然后我们寻找下一个能让代价函数值下降最多的参数组合。我们持续这么做直到找到一个局部最小值（local minimum），因为我们并没有尝试完所有的参数组合，所以不能确定我们得到的局部最小值是否便是全局最小值（globalminimum），选择不同的初始参数组合，可能会找到不同的<strong>局部最小值</strong>。</p></blockquote><p><img src="/img/1540024168426.png" alt="1540024168426"></p><h3 id="梯度下降算法公式"><a href="#梯度下降算法公式" class="headerlink" title="梯度下降算法公式:"></a>梯度下降算法公式:</h3><p><strong>公式介绍</strong></p><p>repeat until convergence{<br>$$<br>θ_j=θ_j−α∂/∂θ_j J(θ0,θ1)　(for　j=0　and　j=1)<br>$$<br>}</p><p><img src="/img/1540026766508.png" alt="1540026766508"></p><blockquote><p>参数α: 学习率, 它决定了我们沿着能让代价函数下降程度最大的方向向下迈出的步子有多大，在批量梯度下降中，我们每一次都同时让所有的参数减去学习速率乘以代价函数的导数。当到达损失函数的最低点的时候，其导数为0，已经到达了局部最优点，即θ不会再发生改变</p></blockquote><blockquote><p>注意:  在梯度下降算法中，一般都会采用同步更新的方式来优化模型, 即上面公式的θj同步更新。同步更新是梯度下降中的一种常用方法。我们之后会讲到，同步更新是更自然的实现方法。当人们谈到梯度下降时，他们的意思就是同步更新。</p></blockquote><p><strong>学习率的选择对算法的影响</strong></p><ul><li><p>学习率过小的影响: 则达到收敛所需的迭代次数会非常高</p></li><li><p>学习率过大的影响: 每次迭代可能不会减小代价函数，可能会越过局部最小值导致无法收敛</p></li></ul><p><strong>怎么确定模型是否收敛</strong></p><p><img src="/img/1540568088758.png" alt="1540568088758"></p><ul><li><p>梯度下降算法收敛所需要的迭代次数根据模型的不同而不同，我们不能提前预知，我们可以绘制迭代次数和代价函数的图表来观测算法在何时趋于收敛, 如上图在300步之后基本接近收敛。</p></li><li><p>也有一些自动测试是否收敛的方法，例如将代价函数的变化值与某个阀值（例如0.001）进行比较</p></li></ul><h3 id="梯度下降算法分类"><a href="#梯度下降算法分类" class="headerlink" title="梯度下降算法分类"></a>梯度下降算法分类</h3><h4 id="批量梯度下降"><a href="#批量梯度下降" class="headerlink" title="批量梯度下降"></a><strong>批量梯度下降</strong></h4><blockquote><p>在上面的线性回归场景中的梯度下降算法，有时也称为批量梯度下降。实际上，在机器学习中，通常不太会给算法起名字，但这个名字”批量梯度下降”，指的是在梯度下降的每一步中，我们都用到了所有的训练样本，在梯度下降中，在计算微分求导项时，我们需要进行求和运算，所以，在每一个单独的梯度下降中，我们最终都要计算这样一个东西，这个项需要对所有m个训练样本求和。</p></blockquote><blockquote><p>批量梯度下降法这个名字说明了我们需要考虑所有这一”批”训练样本，而事实上，有时也有其他类型的梯度下降法，不是这种”批量”型的，不考虑整个的训练集，而是每次只关注训练集中的一些小的子集。</p></blockquote><p><strong>优点：</strong><br>  （1）一次迭代是对所有样本进行计算，此时利用矩阵进行操作，实现了并行。<br>  （2）由全数据集确定的方向能够更好地代表样本总体，从而更准确地朝向极值所在的方向。当目标函数为凸函数时，BGD一定能够得到全局最优。</p><p><strong>缺点：</strong><br>  （1）当样本数目 m 很大时，每迭代一步都需要对所有样本计算，训练过程会很慢。</p><h4 id="随机梯度下降"><a href="#随机梯度下降" class="headerlink" title="随机梯度下降"></a><strong>随机梯度下降</strong></h4><p>公式: <img src="/img/1540042706219.png" alt="1540042706219"></p><blockquote><p>随机梯度下降指在梯度下降的每一步中只用到了训练集的一个样本或者一部分样本，最后得到的可能是全局最优解，也可能是局部最优解。</p></blockquote><p><strong>优点：</strong><br>  （1）由于不是在全部训练数据上的损失函数，而是在每轮迭代中，随机优化某一条训练数据上的损失函数，这样每一轮参数的更新速度大大加快。<br><strong>缺点：</strong><br>  （1）准确度下降。由于即使在目标函数为强凸函数的情况下，SGD仍旧无法做到线性收敛。<br>  （2）可能会收敛到局部最优，由于单个样本并不能代表全体样本的趋势。<br>  （3）不易于并行实现。</p><h2 id="4-梯度下降线型回归模型"><a href="#4-梯度下降线型回归模型" class="headerlink" title="4.梯度下降线型回归模型"></a>4.梯度下降线型回归模型</h2><h3 id="单变量线型回归梯度下降"><a href="#单变量线型回归梯度下降" class="headerlink" title="单变量线型回归梯度下降"></a>单变量线型回归梯度下降</h3><h4 id="梯度下降、线型回归算法比较"><a href="#梯度下降、线型回归算法比较" class="headerlink" title="梯度下降、线型回归算法比较"></a><strong>梯度下降、线型回归算法比较</strong></h4><p><img src="/img/1540028773553.png" alt="1540028773553"></p><h4 id="单变量梯度下降公式"><a href="#单变量梯度下降公式" class="headerlink" title="单变量梯度下降公式"></a>单变量梯度下降公式</h4><p><strong>代价函数计算</strong></p><p><img src="/img/1540028837422.png" alt="1540028837422"></p><p><strong>参数θ的计算</strong></p><p><img src="/img/1540028905489.png" alt="1540028905489"></p><h3 id="多变量线型回归梯度下降"><a href="#多变量线型回归梯度下降" class="headerlink" title="多变量线型回归梯度下降"></a>多变量线型回归梯度下降</h3><h4 id="多变量特征"><a href="#多变量特征" class="headerlink" title="多变量特征"></a>多变量特征</h4><p>现在对回归模型增加更多的特征，例如房价预测问题，增加房间数楼层等，构成一个含有多个变量的模型，模型中的特征如下图。</p><p><img src="/img/1540563412916.png" alt="1540563412916"></p><p><strong>增添更多特征后，引入一系列新的注释</strong>：</p><blockquote><ul><li><p>n 代表特征的数量</p></li><li><p>x^(i)^ 代表第i个训练实例，是特征矩阵的第i行，是一个向量(vector).</p></li><li><p>x~j~^(i)^ 代表特征矩阵中第i行的第j个特征，也就是第i个训练实例的第j个特征  如:  $x_2^{(2)} = 3, x_3^{(2)} = 2$</p></li><li><p>支持多个变量的h表示为: $h_θ(x) = θ_0 + θ_1x_1 + θ_2x_2 + … + θ_nx_n$</p><ul><li>这个公式中有个n+1参数和n个变量，为了使得公式能够简化一些，引入$x_0=1$，则公式转化为:$h_θ(x) = θ_0x_0 + θ_1x_1 + θ_2x_2 + … + θ_nx_n$</li></ul></li><li><p>此时模型中的参数是一个n+1维的向量，任何一个训练实例也都是n+1维的向量，特征矩阵X的维度是m* (n+1),</p><p>因此变量的假设公式可以表示为: $h_θ(x) = θ^TX$</p></li></ul></blockquote><h4 id="多变量梯度下降公式"><a href="#多变量梯度下降公式" class="headerlink" title="多变量梯度下降公式"></a>多变量梯度下降公式</h4><p>与单变量线性回归类似，在多变量线性回归中，我们也构建一个代价函数，则这个代价函数是所有建模误差的平方和，即：</p><p>$J_{(θ_0, .., θ<em>n)} = {1\over2m}\sum</em>{i=1}^m(h_θ(x^{(i)}) - y^{(i)})^2 , 其中: h_θ(x) = θ^TX = θ_0x_0 + θ_1x_1 + θ_2x_2 + … + θ_nx_n$<img src="/img/1540635502085.png" alt="1540635502085"></p><p>我们的目标和单变量线性回归问题中一样，是要找出使得代价函数最小的一系列参数。 多变量线性回归的批量梯度<br><strong>梯度下降下降公式：</strong></p><p><img src="/img/1540566461561.png" alt="1540566461561"></p><p><strong>求导数后得到:</strong></p><p><img src="/img/1540566614915.png" alt="1540566614915"></p><h3 id="5-特征和多项式回归"><a href="#5-特征和多项式回归" class="headerlink" title="5.特征和多项式回归"></a>5.特征和多项式回归</h3><h3 id="特征选择"><a href="#特征选择" class="headerlink" title="特征选择"></a><strong>特征选择</strong></h3><blockquote><p>有的时候的们的特征并不是很好的可以直接用来训练模型，比如房子价格预测模型的两个特征</p><p>特征: x1 房子的临街宽度， x2 房子的纵向深度</p><p>此时很明显房子的价格用 特征一和特征二的乘积，即房子的占地面积来预测更合适  $x=x_1 * x_2 = area (面积)$</p></blockquote><p><img src="/img/1540616820528.png" alt="1540616820528"></p><h3 id="多项式回归"><a href="#多项式回归" class="headerlink" title="多项式回归"></a><strong>多项式回归</strong></h3><blockquote><p>很多时候，我们并没有那么幸运，正好所有的数据之间都是线性关系，能用一条直线，一个平面就描述地出来，大多数时候，我们可能需要画成曲线、曲面或者曲啥更高维度的东西</p><p>比如下图数据集，线性回归并不适用于所有数据，有时我们需要曲线来适应我们的数据，用二次方程（蓝色的线）和三次方程（绿色的线）来拟合这些点，但是二次方程有个缺点，到了后面，反而会下降，这和我们的认知不符合，而三次方程不会遇到这个问题，和二次方程相加又会和上升的部分相互抵消一部分，所以最后选择了三次方程加上二次方程。</p><p>二次方模型公式：$h_θ(x) = θ_0 + θ_1x_1 + θ_2x_2^2$      三次方模型公式: $h_θ(x) = θ_0 + θ_1x_1 + θ_2x_2^2 + θ_3x_3^3$ </p></blockquote><p><img src="/img/1540616493267.png" alt="1540616493267"></p><blockquote><p>通常我们需要先观察数据然后再决定准备尝试怎样的模型。 另外，我们可以把多项式回归看成是另类的多变量线性回归，我们可以令：$x_2 = x_2^2$ , $x_3 = x_3^3$ , 从而将模型转化为线型回归模型</p><p>注：如果我们采用多项式回归模型，在运行梯度下降算法前，特征缩放非常有必要, 因为比如x的范围是1-100的话，$x^2$的范围就是1-10000，$x^3$的范围就是1-1000000。</p></blockquote><h2 id="6-特征缩放"><a href="#6-特征缩放" class="headerlink" title="6.特征缩放"></a>6.特征缩放</h2><h3 id="为什么要特征缩放"><a href="#为什么要特征缩放" class="headerlink" title="为什么要特征缩放"></a>为什么要特征缩放</h3><blockquote><p>在使用梯度下降的时候会遇到因为特征大小不统一，导致收敛速度过慢的问题，在我们面对多维特征问题的时候，我们要保证这些特征都具有相近的尺度，这将帮助梯度下降算法更快地收敛。</p></blockquote><p>以房价问题为例，假设我们使用两个特征，房屋的尺寸和房间的数量，尺寸的值为 0-2000平方英尺，而房间数量的值则是0-5，以两个参数分别为横纵坐标，绘制代价函数的等高线图能，看出图像会显得很扁，梯度下降算法需要非常多次的迭代才能收敛。</p><p><img src="/img/1540567672941.png" alt="1540567672941"></p><blockquote><p>解决的方法是尝试将所有特征的尺度都尽量缩放到-1到1之间。</p></blockquote><h3 id="特征缩放的两种方法"><a href="#特征缩放的两种方法" class="headerlink" title="特征缩放的两种方法"></a>特征缩放的两种方法</h3><p><strong>线型归一化</strong></p><ul><li>原理： <ul><li>通过对原始数据进行变换把数据映射到(默认为[0,1])之间</li></ul></li><li>公式<ul><li><img src="/img/1540644955305.png" alt="1540644955305"></li></ul></li><li>归一化的弊端<ul><li>使用归一化的时候，最大值和最小值非常容易受到异常点的影响， 所以这种只适合于传统精确小的数据场景</li></ul></li></ul><p><strong>特征标准化</strong></p><ul><li><p>原理：</p><ul><li>通过对原始数据进行变换把数据变换到均值为0,方差为1的正太分布范围内</li></ul></li><li><p>公式：</p><ul><li><img src="/img/1540645069496.png" alt="1540645069496"></li></ul></li><li>标准化的有点<ul><li>如果出现异常点，由于具有一定数据量，少量的异常点对于平均值的影响并不大，从而方差改变较小, 对标准化的影响较小。</li></ul></li></ul><h2 id="7-正规方程线型回归"><a href="#7-正规方程线型回归" class="headerlink" title="7.正规方程线型回归"></a>7.正规方程线型回归</h2><h3 id="正规方程算法介绍"><a href="#正规方程算法介绍" class="headerlink" title="正规方程算法介绍"></a>正规方程算法介绍</h3><blockquote><p>对于线型回归问题经常都是在使用梯度下降算法，但是对于某些线型回归问题，正规方程是更好的解决办法。如下面的代价函数:</p></blockquote><p><img src="/img/1540619927547.png" alt="1540619927547"></p><p><img src="/img/1540620250525.png" alt="1540620250525"></p><h3 id="梯度下降和正规方程比较"><a href="#梯度下降和正规方程比较" class="headerlink" title="梯度下降和正规方程比较"></a>梯度下降和正规方程比较</h3><table><thead><tr><th>梯度下降</th><th>正规方程</th></tr></thead><tbody><tr><td>需要选择学习率</td><td>不需要</td></tr><tr><td>需要多次迭代</td><td>一次运算得出</td></tr><tr><td>当特征数量n特别大时能比较适用</td><td>需要计算$(X^TX)^{-1}$如果特征数量n较大则运算代价大因为矩阵逆的计算时间复杂度为$O(n^3)$，通常来说当小于10000 时还是可以接受</td></tr><tr><td>适用于各种类型的模型</td><td>只适用于线性模型，不适合逻辑回归模型等其他模型</td></tr></tbody></table><blockquote><p>总结一下，只要特征变量的数目并不大，标准方程是一个很好的计算参数的替代方法。具体地说，只要特征变量数量小于一万，我通常使用标准方程法，而不使用梯度下降法。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 基础内容 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> 梯度下降 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>机器学习介绍</title>
      <link href="/2018/10/19/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%BB%8B%E7%BB%8D/"/>
      <url>/2018/10/19/10.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h3 id="机器学习的发展"><a href="#机器学习的发展" class="headerlink" title="机器学习的发展"></a>机器学习的发展</h3><blockquote><p>机器学习被应用到越来越多的领域这里有一些机器学习的案例。比如说，数据库挖掘。机器学习被用于数据挖掘的原因之一是网络和自动化技术的增长，这意味着，我们有史上最大的数据集比如说，大量的硅谷公司正在收集web上的单击数据，也称为点击流数据，并尝试使用机器学习算法来分析数据，更好的了解用户，并为用户提供更好的服务。这在硅谷有巨大的市场。</p><p>再比如，医疗记录。随着自动化的出现，我们现在有了电子医疗记录。如果我们可以把医疗记录变成医学知识，我们就可以更好地理解疾病。再如，计算生物学。还是因为自动化技术，生物学家们收集的大量基因数据序列、DNA序列和等等，机器运行算法让我们更好地了解人类基因组，大家都知道这对人类意味着什么。再比如，工程方面，在工程的所有领域，我们有越来越大、越来越大的数据集，我们试图使用学习算法，来理解这些数据。另外，在机械应用中，有些人不能直接操作。例如，我已经在无人直升机领域工作了许多年。我们不知道如何写一段程序让直升机自己飞。我们唯一能做的就是让计算机自己学习如何驾驶直升机。</p><p>手写识别：现在我们能够非常便宜地把信寄到这个美国甚至全世界的原因之一就是当你写一个像这样的信封，一种学习算法已经学会如何读你信封，它可以自动选择路径，所以我们只需要花几个美分把这封信寄到数千英里外。事实上，如果你看过自然语言处理或计算机视觉，这些语言理解或图像理解都是属于AI领域。大部分的自然语言处理和大部分的计算机视觉，都应用了机器学习。</p></blockquote><a id="more"></a><h3 id="一个比较好的机器学习定义"><a href="#一个比较好的机器学习定义" class="headerlink" title="一个比较好的机器学习定义"></a>一个比较好的机器学习定义</h3><blockquote><p>一个程序被认为能从经验E中学习，解决任务T，达到性能度量值P，当且仅当，有了经验E后，经过P评判，程序在处理T时的性能有所提升</p><p>类比于下棋，经验E 就是程序上万次的自我练习的经验而任务T 就是下棋。性能度量值P呢，就是它在与一些新的对手比赛时，赢得比赛的概率。</p></blockquote><h3 id="机器学习基本算法"><a href="#机器学习基本算法" class="headerlink" title="机器学习基本算法"></a>机器学习基本算法</h3><h4 id="最常用的两个算法"><a href="#最常用的两个算法" class="headerlink" title="最常用的两个算法"></a>最常用的两个算法</h4><p><strong>监督学习算法</strong></p><blockquote><p>我们数据集中的每个样本都有相应的“正确答案”。再根据这些样本作出预测，即我们可以根据正确答案来不断的优化我们的模型。</p><p>监督学习指的就是我们给学习算法一个数据集。这个数据集由“正确答案”组成。在房价的例子中，我们给了一系列房子的数据，我们给定数据集中每个样本的正确价格，即它们实际的售价然后运用学习算法，算出更多的正确答案。</p></blockquote><p><strong>无监督学习算法</strong></p><blockquote><p>根据未知的训练样本(未被标记分类), 从数据中找出不同的结构，将数据识别为不同的聚集簇。</p><p>无监督学习或聚集有着大量的应用。它用于组织大型计算机集群。我有些朋友在大数据中心工作，那里有大型的计算机集群，他们想解决什么样的机器易于协同地工作，如果你能够让那些机器协同工作，你就能让你的数据中心工作得更高效。第二种应用就是社交网络的分析。所以已知你朋友的信息，比如你经常发email的，或是你Facebook的朋友、谷歌+圈子的朋友，我们能否自动地给出朋友的分组呢？即每组里的人们彼此都熟识，认识组里的所有人？</p><p>还有市场分割。许多公司有大型的数据库，存储消费者信息。所以，你能检索这些顾客数据集，自动地发现市场分类，并自动地把顾客划分到不同的细分市场中，你才能自动并更有效地销售或不同的细分市场一起进行销售。这也是无监督学习，因为我们拥有所有的顾客数据，但我们没有提前知道是什么的细分市场，以及分别有哪些我们数据集中的顾客。我们不知道谁是在一号细分市场，谁在二号市场，等等。那我们就必须让算法从数据中发现这一切。最后，无监督学习也可用于天文数据分析，这些聚类算法给出了令人惊讶、有趣、有用的理论，解释了星系是如何诞生的。这些都是聚类的例子，聚类只是无监督学习中的一种。</p></blockquote><h4 id="监督学习算法常见问题"><a href="#监督学习算法常见问题" class="headerlink" title="监督学习算法常见问题"></a>监督学习算法常见问题</h4><p><strong>回归问题</strong></p><blockquote><p>通过像预测房子的价格一样，通过回归模型通过输入值来推出一个连续的输出值</p></blockquote><p> <strong>分类问题</strong></p><blockquote><p>通过数学模型来判断输入数据所属的类别，可以是二类别问题（是/不是），也可以是多类别问题（在多个类别中判断输入数据具体属于哪一个类别）</p></blockquote><h4 id="无监督学习常年问题"><a href="#无监督学习常年问题" class="headerlink" title="无监督学习常年问题"></a>无监督学习常年问题</h4><p><strong>聚类问题</strong></p><blockquote><p>依据研究对象（样品或指标）的特征，将其分为不同的分类。</p></blockquote><p>### </p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
          <category> 基础内容 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>githubpage + hexo + yilia 搭建个人博客</title>
      <link href="/2018/10/17/20.%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/%E5%8D%9A%E5%AE%A2/github+hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
      <url>/2018/10/17/20.%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/%E5%8D%9A%E5%AE%A2/github+hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h4 id="0-本博客的由来"><a href="#0-本博客的由来" class="headerlink" title="0.本博客的由来"></a>0.本博客的由来</h4><p>本来感觉写博客很费时间，但是最近感觉这两年攒手里的笔记太多了，不方便整理和分享</p><p>所以打算以后就干脆直接将笔记整理到github，这样也比自己维护一个博客省心</p><p>下面就将搭建本博客的步骤也同步上来，当做一个hello-world吧。</p><a id="more"></a><h4 id="1-环境准备"><a href="#1-环境准备" class="headerlink" title="1.环境准备"></a>1.环境准备</h4><p>电脑环境是Windows，安装好git后，所有搭建操作均在git bash内完成</p><p><strong>1）安装hexo(首先要安装git, node.js, npm)</strong></p><p>注意：首次安装git 要配置user信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>git config --global user.name "yourname"   #（yourname是git的用户名）</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span>git config --global user.email email）</span><br></pre></td></tr></table></figure><p><strong>2）使用npm安装hexo</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>npm install -g hexo</span><br></pre></td></tr></table></figure><p><strong>3）创建hexo文件夹</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>mkdir hexo_blog</span><br><span class="line"><span class="meta">$</span>cd hexo_lobg</span><br></pre></td></tr></table></figure><p><strong>4）初始化框架</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>hexo init #hexo   #会自动创建网站所需要的文件</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span>npm install    #安装依赖包</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span>hexo generate </span><br><span class="line"></span><br><span class="line"><span class="meta">$</span>hexo server   #现在可以用127.0.0.1:4000访问hexo默认的hello world界面 ,hexo s = hexo server</span><br></pre></td></tr></table></figure><h4 id="2-部署到github"><a href="#2-部署到github" class="headerlink" title="2.部署到github"></a>2.部署到github</h4><p><strong>1）首次使用github需要配置密钥</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C "email"</span><br></pre></td></tr></table></figure><p>生成ssh密钥，按三次回车键，密码为空,这边会生成id_rsa和_rsa.pub文件</p><p>打开id_rsa.pub，复制全文添加到GitHub 的Add SSH key中。</p><p><strong>2）创建Respository， 并开启githubPage</strong></p><p>首先注册登录github,然后创建页面仓库，Repository name 命名应该是 youname.github.io </p><p>在setting界面， 配置</p><p><img src="/img/1539839479905-1539839725571.png" alt="1539839479905-1539839725571"></p><p><strong>3）安装hexo-deployer-git</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>npm install hexo-deployer-git --save     用来推送项目到github</span><br></pre></td></tr></table></figure><p><strong>4）生成博客，并push到github</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>hexo generate</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span>hexo deploy</span><br></pre></td></tr></table></figure><p><strong>5）验证结果</strong></p><p>通过<a href="https://youname.github.io" target="_blank" rel="noopener">https://youname.github.io</a> 进行访问</p><h4 id="3-更换博客模板"><a href="#3-更换博客模板" class="headerlink" title="3.更换博客模板"></a>3.更换博客模板</h4><p>目前访问的博客模板比较简略，下面介绍使用：yilia模板</p><p><strong>1）拉取模板文件</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia</span><br></pre></td></tr></table></figure><p><strong>2）更改配置文件修改模板为yilia</strong></p><p>打开项目目录下的_config.yml文件，更改主题theme;   <code>theme: yilia</code><br>然后配置yilia文件下的_config.yml（目录：<code>hexo/themes/yilia/_config.yml</code>） 配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"># Header</span><br><span class="line">menu:</span><br><span class="line">  主页: /</span><br><span class="line">  归档: /archives</span><br><span class="line">  #分类: /categories</span><br><span class="line">  #标签: /tags</span><br><span class="line"></span><br><span class="line"># SubNav</span><br><span class="line">subnav:</span><br><span class="line">  github: &quot;https://github.com/KyleAdultHub&quot;</span><br><span class="line">  #weibo: &quot;#&quot;</span><br><span class="line">  #rss: &quot;#&quot;</span><br><span class="line">  #zhihu: &quot;#&quot;</span><br><span class="line">  qq: &quot;/information&quot;</span><br><span class="line">  #weixin: &quot;#&quot;</span><br><span class="line">  #jianshu: &quot;#&quot;</span><br><span class="line">  #douban: &quot;#&quot;</span><br><span class="line">  #segmentfault: &quot;#&quot;</span><br><span class="line">  #bilibili: &quot;#&quot;</span><br><span class="line">  #acfun: &quot;#&quot;</span><br><span class="line">  mail: &quot;/information&quot;</span><br><span class="line">  #facebook: &quot;#&quot;</span><br><span class="line">  #google: &quot;#&quot;</span><br><span class="line">  #twitter: &quot;#&quot;</span><br><span class="line">  #linkedin: &quot;#&quot;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">rss: /atom.xml</span><br><span class="line"></span><br><span class="line"># 是否需要修改 root 路径</span><br><span class="line"># 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，</span><br><span class="line"># 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。</span><br><span class="line">root: /</span><br><span class="line"></span><br><span class="line"># Content</span><br><span class="line"># 文章太长，截断按钮文字</span><br><span class="line">excerpt_link: more</span><br><span class="line"># 文章卡片右下角常驻链接，不需要请设置为false</span><br><span class="line">show_all_link: &apos;展开全文&apos;</span><br><span class="line"># 数学公式</span><br><span class="line">mathjax: false</span><br><span class="line"># 是否在新窗口打开链接</span><br><span class="line">open_in_new: false</span><br><span class="line"></span><br><span class="line"># 打赏</span><br><span class="line"># 打赏type设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏</span><br><span class="line">reward_type: 0</span><br><span class="line"># 打赏wording</span><br><span class="line">reward_wording: &apos;谢谢你&apos;</span><br><span class="line"># 支付宝二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg</span><br><span class="line">alipay: </span><br><span class="line"># 微信二维码图片地址</span><br><span class="line">weixin: </span><br><span class="line"></span><br><span class="line"># 目录</span><br><span class="line"># 目录设定：0-不显示目录； 1-文章对应的md文件里有toc:true属性，才有目录； 2-所有文章均显示目录</span><br><span class="line">toc: 1</span><br><span class="line"># 根据自己的习惯来设置，如果你的目录标题习惯有标号，置为true即可隐藏hexo重复的序号；否则置为false</span><br><span class="line">toc_hide_index: true</span><br><span class="line"># 目录为空时的提示</span><br><span class="line">toc_empty_wording: &apos;目录，不存在的…&apos;</span><br><span class="line"></span><br><span class="line"># 是否有快速回到顶部的按钮</span><br><span class="line">top: true</span><br><span class="line"></span><br><span class="line"># Miscellaneous</span><br><span class="line">baidu_analytics: &apos;&apos;</span><br><span class="line">google_analytics: &apos;&apos;</span><br><span class="line">favicon: /favicon.png</span><br><span class="line"></span><br><span class="line">#你的头像url</span><br><span class="line">avatar: /img/header.jpg</span><br><span class="line"></span><br><span class="line">#是否开启分享</span><br><span class="line">share_jia: true</span><br><span class="line"></span><br><span class="line">#评论：1、多说；2、网易云跟帖；3、畅言；4、Disqus；5、Gitment</span><br><span class="line">#不需要使用某项，直接设置值为false，或注释掉</span><br><span class="line">#具体请参考wiki：https://github.com/litten/hexo-theme-yilia/wiki/</span><br><span class="line"></span><br><span class="line">#1、多说</span><br><span class="line">duoshuo: false</span><br><span class="line"></span><br><span class="line">#2、网易云跟帖</span><br><span class="line">wangyiyun: false</span><br><span class="line"></span><br><span class="line">#3、畅言</span><br><span class="line">changyan_appid: *** #这个畅言id和conf写自己的</span><br><span class="line">changyan_conf: ***</span><br><span class="line"></span><br><span class="line">#4、Disqus 在hexo根目录的config里也有disqus_shortname字段，优先使用yilia的</span><br><span class="line">disqus: false</span><br><span class="line"></span><br><span class="line">#5、Gitment</span><br><span class="line">gitment_owner: false      #你的 GitHub ID</span><br><span class="line">gitment_repo: &apos;&apos;          #存储评论的 repo</span><br><span class="line">gitment_oauth:</span><br><span class="line">  client_id: &apos;&apos;           #client ID</span><br><span class="line">  client_secret: &apos;&apos;       #client secret</span><br><span class="line"></span><br><span class="line"># 样式定制 - 一般不需要修改，除非有很强的定制欲望…</span><br><span class="line">style:</span><br><span class="line">  # 头像上面的背景颜色</span><br><span class="line">  header: &apos;#4d4d4d&apos;</span><br><span class="line">  # 右滑板块背景</span><br><span class="line">  slider: &apos;linear-gradient(200deg,#a0cfe4,#e8c37e)&apos;</span><br><span class="line"></span><br><span class="line"># slider的设置</span><br><span class="line">slider:</span><br><span class="line">  # 是否默认展开tags板块</span><br><span class="line">  showTags: false</span><br><span class="line"></span><br><span class="line"># 智能菜单</span><br><span class="line"># 如不需要，将该对应项置为false</span><br><span class="line"># 比如</span><br><span class="line">#smart_menu:</span><br><span class="line">#  friends: false</span><br><span class="line">smart_menu:</span><br><span class="line">  innerArchive: &apos;所有文章&apos;</span><br><span class="line">  friends: &apos;友链&apos;</span><br><span class="line">  aboutme: &apos;关于我&apos;</span><br><span class="line"></span><br><span class="line">friends:</span><br><span class="line">  #友情链接1: http://localhost:4000/</span><br><span class="line">  </span><br><span class="line">aboutme: </span><br><span class="line">  程序猿一枚&lt;br&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 开发工具 </category>
          
          <category> 博客 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Kubernetes集群</title>
      <link href="/2018/10/16/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/k8s/Kubernetes%E9%9B%86%E7%BE%A4/"/>
      <url>/2018/10/16/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/k8s/Kubernetes%E9%9B%86%E7%BE%A4/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><h2><span style="background-color: rgb(255, 250, 165);font-size: 16pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 16pt; color: rgb(50, 135, 18); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;-evernote-highlight:true;">安装</span></span></h2><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">dokcer安装</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">安装 kubernetes 之前先需要安装 docker：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); border-radius: 3px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: pre-wrap; widows: 2; word-spacing: 0px; word-wrap: break-word; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; curl -fsSL</span> <a href="https://get.docker.com/" style="font-size: 11px; font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;" target="_blank" rel="noopener">https://get.docker.com/</a> <span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); border-radius: 3px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: pre-wrap; widows: 2; word-spacing: 0px; word-wrap: break-word; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">| sh</span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">启动 docker，并设置为开机自启动：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sudo systemctl enable docker</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sudo systemctl start dokcer</span></span></div></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">kubernetes安装</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">安装 kubernetes 的时候，需要安装</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubelet</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">，</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubeadm</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">等包 ，我们先要更新一下 yum 源：</span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sudo cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">[kubernetes]</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">name=Kubernetes</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">baseurl=</span><a href="http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64" style="font-size: 11px; background-color: rgb(255, 255, 255); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;" target="_blank" rel="noopener">http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</a></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">enabled=1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">gpgcheck=0</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">repo_gpgcheck=0</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">gpgkey=</span><a href="http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg" style="font-size: 11px; background-color: rgb(255, 255, 255); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;" target="_blank" rel="noopener">http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</a></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><a href="http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg" style="font-size: 11px; background-color: rgb(255, 255, 255); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;" target="_blank" rel="noopener">http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</a></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">EOF</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">然后升级一下软件包：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sudo yum update</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">下面才是重头戏，安装 kubernetes 相关的一些组件：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sudo yum install -y kubelet kubectl kubeadm kubernetes-cni</span></span></div><ul style="font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li><div><span style="font-size: 13px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubectl：运行 kubernetes 集群命令的管理工具</span></span></div></li><li><div><span style="font-size: 13px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubelet：节点管理工具</span></span></div></li><li><div><span style="font-size: 13px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubeadm：集群自动搭建工具</span></span></div></li><li><div><span style="font-size: 13px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubernetes-cni：kubernetes容器网络接口</span></span></div></li></ul><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165);font-size: 16pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 16pt; color: rgb(50, 135, 18); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;-evernote-highlight:true;">配置</span></span></span></h3><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">硬件配置</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">系统：CentOS 7</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">| 角色 | 数量 | 配置 | hostname | | ------ | ---- | ------ | ---------- | | master | 1 | 2核 2G | k8s-master | | node | 1 | 1核 1G | k8s-node1 | | node | 1 | 1核 1G | k8s-node2 |</span></span></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">系统配置</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">关闭防火墙</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; systemctl stop firewalld</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; systemctl disable firewalld</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">关闭swap</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; swapoff -a</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">修改 /etc/fstab 文件，注释掉 swap 的自动挂载。</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># /etc/fstab</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># Created by anaconda on Thu Aug 30 22:16:46 2018</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">#</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># Accessible filesystems, by reference, are maintained under '/dev/disk'</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">#</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">/dev/mapper/centos-root / xfs defaults 0 0</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">UUID=507b23b4-65a7-4689-80f1-ef79d40a3a22 /boot xfs defaults 0 0</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># /dev/mapper/centos-swap swap swap defaults 0 0</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">确认 swap 已经关闭：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; free -m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">total used free shared buff/cache available</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Mem: 7983 2825 4017 48 1140 4826</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Swap: 0 0 0</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">关闭 selinux</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">两种方式关闭 selinux：</span></span></div><ul style="font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li><div><span style="font-size: 13px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">临时关闭：</span></span></div></li></ul><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; setenforce 0</span></span></div><ul style="font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li><div><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">永久关闭，修改 /etc/sysconfig/selinux，将 </span><span style="background-color: rgb(254, 233, 204); font-size: 12px; border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">SELINUX</span><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> 修改为 disabled：</span></div></li></ul><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># This file controls the state of SELinux on the system.</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># SELINUX= can take one of these three values:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># enforcing - SELinux security policy is enforced.</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># permissive - SELinux prints warnings instead of enforcing.</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># disabled - No SELinux policy is loaded.</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">SELINUX=disabled</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># SELINUXTYPE= can take one of three two values:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># targeted - Targeted processes are protected,</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># minimum - Modification of targeted policy. Only selected processes are protected.</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;"># mls - Multi Level Security protection.</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">SELINUXTYPE=targeted</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">验证 selinux 已被禁用：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sestatus -v</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">SELinux status: disabled</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">调整内核参数：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sudo cat &lt;&lt;EOF &gt; /etc/sysctl.d/k8s.conf</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">net.bridge.bridge-nf-call-ip6tables = 1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">net.bridge.bridge-nf-call-iptables = 1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">EOF</span></span></div></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; echo &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">使之生效：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sudo sysctl --system</span></span></div><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165);font-size: 16pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 16pt; color: rgb(50, 135, 18); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;-evernote-highlight:true;">搭建集群</span></span></span></h3><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">docker加速</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">由于国内环境无法下载 kubernetes 的某些镜像，我们采用 DaoCloud 的 docker 加速来获取资源：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); border: 1px solid rgb(217, 217, 217); border-radius: 3px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: pre-wrap; widows: 2; word-spacing: 0px; word-wrap: break-word; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; curl -sSL</span> <a href="https://get.daocloud.io/daotools/set_mirror.sh" style="font-size: 11px; background-color: rgb(255, 255, 255); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;" target="_blank" rel="noopener">https://get.daocloud.io/daotools/set_mirror.sh</a> <span style="font-size: 11px; background-color: rgb(255, 255, 255); border: 1px solid rgb(217, 217, 217); border-radius: 3px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: pre-wrap; widows: 2; word-spacing: 0px; word-wrap: break-word; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">| sh -s</span> <a href="http://fc9d1ae1.m.daocloud.io/" style="font-size: 11px; background-color: rgb(255, 255, 255); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;" target="_blank" rel="noopener">http://fc9d1ae1.m.daocloud.io</a></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">该脚本可以将 --registry-mirror 加入到你的 Docker 配置文件 /etc/docker/daemon.json 中，执行完成之后需要重启 docker。</span></span></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">下载镜像(如果可以连接VPN不需要手动下载, 部署master节点的时候可以自动下载</span><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">)  ， 可以编写好shell脚本来一次性执行</span></h4><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">接下来手动下载 kubernetes 的相关镜像，</span><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">下载后的镜像名改为以</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">gcr.io/ 开头的名字，以供</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubeadm</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">使用：</span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull mirrorgooglecontainers/pause-amd64:3.1</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag mirrorgooglecontainers/pause-amd64:3.1</span> <span style="background-color: rgb(255, 250, 165); font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;-evernote-highlight:true;">k8s.gcr.io/pause:3.1</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull warrior/etcd-amd64:3.2.18</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag warrior/etcd-amd64:3.2.18 k8s.gcr.io/etcd-amd64:3.2.18</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull mirrorgooglecontainers/kube-apiserver-amd64:v1.11.2</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag mirrorgooglecontainers/kube-apiserver-amd64:v1.11.2 k8s.gcr.io/kube-apiserver-amd64:v1.11.2</span></span></div><div><br></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull mirrorgooglecontainers/kube-scheduler-amd64:v1.11.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag mirrorgooglecontainers/kube-scheduler-amd64:v1.11.2 k8s.gcr.io/kube-scheduler-amd64:v1.11.2</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull mirrorgooglecontainers/kube-controller-manager-amd64:v1.11.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag mirrorgooglecontainers/kube-controller-manager-amd64:v1.11.2 k8s.gcr.io/kube-controller-manager-amd64:v1.11.2</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull mirrorgooglecontainers/kube-proxy-amd64:v1.11.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag mirrorgooglecontainers/kube-proxy-amd64:v1.11.2 k8s.gcr.io/kube-proxy-amd64:v1.11.2</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull gysan/dnsmasq-metrics-amd64:1.0</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag gysan/dnsmasq-metrics-amd64:1.0 k8s.gcr.io/dnsmasq-metrics-amd64:1.0</span></span></div><div><br></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull warrior/k8s-dns-kube-dns-amd64:1.14.1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag warrior/k8s-dns-kube-dns-amd64:1.14.1 k8s.gcr.io/k8s-dns-kube-dns-amd64:1.14.1</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull warrior/k8s-dns-dnsmasq-nanny-amd64:1.14.1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag warrior/k8s-dns-dnsmasq-nanny-amd64:1.14.1 k8s.gcr.io/k8s-dns-dnsmasq-nanny-amd64:1.14.1</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull warrior/k8s-dns-sidecar-amd64:1.14.1</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag warrior/k8s-dns-sidecar-amd64:1.14.1 k8s.gcr.io/k8s-dns-sidecar-amd64:1.14.1</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull mritd/kube-discovery-amd64:1.0</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag mritd/kube-discovery-amd64:1.0 k8s.gcr.io/kube-discovery-amd64:1.0</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull gysan/exechealthz-amd64:1.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag gysan/exechealthz-amd64:1.2 k8s.gcr.io/exechealthz-amd64:1.2</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker pull coredns/coredns:1.1.3</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; docker tag coredns/coredns:1.1.3 k8s.gcr.io/coredns:1.1.3</span></span></div></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">安装 Master</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubernetes 相关镜像下载完成之后，我们就可以用</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubeadm</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">来一键安装 Master 节点了：</span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubeadm init --kubernetes-version=1.11.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">[init] using Kubernetes version: v1.11.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">[preflight] running pre-flight checks</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">I0831 17:47:34.557368 1494 kernel_validator.go:81] Validating kernel version</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">I0831 17:47:34.557463 1494 kernel_validator.go:96] Validating kernel config</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">...</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Your Kubernetes master has initialized successfully!</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">To start using your cluster, you need to run the following as a regular user:</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">mkdir -p $HOME/.kube</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">You should now deploy a pod network to the cluster.</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><a href="https://kubernetes.io/docs/concepts/cluster-administration/addons/" style="font-size: 11px; background-color: rgb(255, 255, 255); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;" target="_blank" rel="noopener">https://kubernetes.io/docs/concepts/cluster-administration/addons/</a></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">You can now join any number of machines by running the following on each node</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">as root:</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kubeadm join 192.168.1.107:6443 --token fdnk8r.i3xnwl7r4gzjnl20 --discovery-token-ca-cert-hash sha256:9b326fbf6154498cd96288ac37f853218a7864fdff1ec3571328cc7b495500b1</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">安装完成后，按照提示，执行下面的命令，复制配置文件到普通用户的 home 目录下：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; mkdir -p $HOME/.kube</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; sudo chown $(id -u):$(id -g) $HOME/.kube/config</span></span></div></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">安装 Node，加入集群</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">在 Node 节点上保证</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">docker</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">和</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubelet</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">服务已启动，执行</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubeadm join</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">命令，加入集群：</span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubeadm join 192.168.1.107:6443 --token fdnk8r.i3xnwl7r4gzjnl20 --discovery-token-ca-cert-hash sha256:9b326fbf6154498cd96288ac37f853218a7864fdff1ec3571328cc7b495500b1</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">I0910 10:47:35.211228 2988 kernel_validator.go:81] Validating kernel version</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">I0910 10:47:35.211346 2988 kernel_validator.go:96] Validating kernel config</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">...</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">This node has joined the cluster:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">* Certificate signing request was sent to master and a response</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">was received.</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">* The Kubelet was informed of the new secure connection details.</span></span></div><div><br></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Run 'kubectl get nodes' on the master to see this node join the cluster.</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">这条命令是</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubeadm init</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">最后所提示的，通过这种方式我们可以将局域网中任意 Node 加入集群。</span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">如果 Node 加入集群时报如下错误：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">[discovery] Failed to request cluster info, will try again: [Get https://192.168.1.107:6443/api/v1/namespaces/kube-public/configmaps/cluster-info: x509: certificate has expired or is not yet valid]</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">可能是 Node 节点的时间与 Master 没有同步，执行</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">date</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">命令同步当前时间：</span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; date -s &quot;2018-09-15 09:00:00&quot;</span></span></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">安装网络插件</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">Node 加入集群后，我们去 Master 上查看下节点的情况：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl get nodes</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">NAME STATUS ROLES AGE VERSION</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">k8s-master NotReady master 38m v1.11.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">k8s-node1 NotReady &lt;none&gt; 14s v1.11.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">k8s-node2 NotReady &lt;none&gt; 8s v1.11.2</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">发现所有节点都处于 NotReady 状态，这是因为我们还没有安装 CNI 网络插件。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">选择</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">weave</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">插件，执行以下命令进行一键安装：</span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-size: 11px; border-radius: 3px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl apply -f &quot;</span><a href="https://cloud.weave.works/k8s/net?k8s-version=$(kubectl" style="font-size: 11px; font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;" target="_blank" rel="noopener">https://cloud.weave.works/k8s/net?k8s-version=$(kubectl</a> <span style="font-size: 11px; border-radius: 3px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">version | base64 | tr -d '\n')&quot;</span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">serviceaccount/weave-net created</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">clusterrole.rbac.authorization.k8s.io/weave-net created</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">clusterrolebinding.rbac.authorization.k8s.io/weave-net created</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">role.rbac.authorization.k8s.io/weave-net created</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">rolebinding.rbac.authorization.k8s.io/weave-net created</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">daemonset.extensions/weave-net created</span></span></div></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">验证集群安装完成</span></span></h4><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl get pods --all-namespaces</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">NAMESPACE NAME READY STATUS RESTARTS AGE</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system coredns-78fcdf6894-fvs27 1/1 Running 0 31m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system coredns-78fcdf6894-p8v9c 1/1 Running 0 31m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system etcd-k8s-master 1/1 Running 0 30m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system kube-apiserver-k8s-master 1/1 Running 0 30m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system kube-controller-manager-k8s-master 1/1 Running 0 30m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system kube-proxy-54bht 1/1 Running 0 30m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system kube-proxy-cbvss 1/1 Running 0 30m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system kube-proxy-r55gr 1/1 Running 0 31m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system kube-scheduler-k8s-master 1/1 Running 0 30m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system weave-net-6lpf9 2/2 Running 0 29m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system weave-net-q5nct 2/2 Running 7 29m</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kube-system weave-net-qtzwq 2/2 Running 7 29m</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">所有</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">pod</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">处于 Running 状态，即表示集群安装成功。</span></div><h2 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">运行第一个应用</span></span></h2><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">我们以 nginx 官方镜像开始我们第一个应用：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl run nginx --image=nginx:1.14.0 --replicas=2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">deployment.apps/nginx created</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">这样就创建了一个 nginx 应用，并且建立了2个副本，我们通过命令看下：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl get pods -o wide</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-deployment-957f5f978-cfw6w 1/1 Running 0 55m 10.40.0.1 k8s-node2 &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-deployment-957f5f978-zgf62 1/1 Running 0 55m 10.46.0.2 k8s-node1 &lt;none&gt;</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">果然创建了2个 nginx 容器，处于运行状态。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">我们可以通过和</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">docker exec</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">一样的方法，进入容器查看：</span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl exec -it nginx-7f89695fdd-7ppg2 /bin/bash</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">root@nginx-7f89695fdd-7ppg2:/# ls</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">bin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubectl run</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">就好比</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">docker run</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">，可以直接通过命令启动容器， 同样的 kubernetes 也有 Dockerfile 的方式启动容器。</span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">首先需要准备 nginx-deployment.yml 文件：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">apiVersion: extensions/v1beta1 # 当前配置格式的版本</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kind: Deployment # 要创建的资源类型</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata: # 资源的元数据</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">name: nginx-deployment</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec: # 资源的规格说明</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">replicas: 2 # 副本数量</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">template: # Pod 模板</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata: # Pod 的元数据</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">labels: # 标签：key 和 value，可以任意多个</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">app: nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec: # 描述 Pod 的规格，此部分定义 Pod 中每一个容器的属性</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">containers:</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">- name: nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">image: nginx:1.14.0</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">然后运行启动命令：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl apply -f nginx-deployment.yml</span></span></div><div><span style="font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">deployment.extensions/nginx-deployment created</span></span></div></div><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;-evernote-highlight:true;">Pod的介绍</span></span></h3><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><span style="font-size: 12pt; font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">pod的概念 </span></font></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">前面多次出现 Pod 这个词，这个 Pod 是什么？在 kubernetes 的世界里，调度的最小单位是 Pod，而非容器。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">一个 Pod 封装一个应用容器（也可以有多个容器），存储资源、一个独立的网络 IP 以及管理控制容器运行方式的策略选项。Pod 代表部署的一个单位：kubernetes 中单个应用的实例，它可能由单个容器或多个容器共享组成的资源。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Pod运行的两种模式</span></span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">Pod 中运行一个容器：“one-container-per-Pod” 模式是 kubernetes 最常见的用法，在这种情况下，你可以将 Pod 视为单个封装的容器，但 kubernetes 直接管理的还是 Pod。</span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">Pod 中运行多个容器：封装紧密耦合的应用，它们需要由多个容器组成，它们之间能够共享资源。</span></div><div><br></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-family: Arial; font-weight: bold;">Pod的共享资源</span></font></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">网络</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">每个 Pod 被分配一个独立的 IP 地址，Pod 中的每个容器共享网络命名空间，包括 IP 地址和网络端口。Pod 内的容器可以使用 localhost 相互通信。当 Pod 中的容器与 Pod 外部通信时，他们必须协调如何使用共享网络资源（如端口）。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">存储</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">Pod 可以指定一组共享存储 volumes 。Pod 中的所有容器都可以访问共享 volumes ，允许这些容器共享数据。volumes 还用于 Pod 中的数据持久化，以防其中一个容器需要重新启动而丢失数据。</span></span></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">Pod 的特点</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">当 Pod 被创建后，都会被 kuberentes 调度到集群的 Node 上。直到 Pod 的进程终止、被删掉、因为缺少资源而被驱逐、或者 Node 故障之前这个 Pod 都会一直保持在那个 Node 上。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">重启 Pod 中的容器跟重启 Pod 不是一回事。Pod 只提供容器的运行环境并保持容器的运行状态，重启容器不会造成 Pod 重启。</span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">Pod 不会自愈。如果 Pod 运行的 Node 故障，或者是调度器本身故障，这个 Pod 就会被删除。同样的，如果 Pod 所在 Node 缺少资源或者 Pod 处于维护状态，Pod 也会被驱逐。kubernetes 使用更高级的称为 Controller 的抽象层，来管理 Pod 实例。虽然可以直接使用 Pod，但是在 kubernetes 中通常是使用 Controller 来管理 Pod 的。</span></span></div><h4 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;-evernote-highlight:true;">Pod 的管理(Controler&amp;Service)</span></span></h4><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(64, 64, 64); font-family: Arial; font-weight: bold;">Controler的介绍</span></font></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); font-size: 10pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-highlight:true;">模拟一些异常情况，</span><span style="background-color: rgb(255, 250, 165); font-size: 10pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-highlight:true;">Pod 因为某些异常情况而 crash</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">&gt; kubectl delete pod nginx-deployment-957f5f978-cfw6w</span></span></div><div><span style="border-radius: 3px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">pod &quot;nginx-deployment-957f5f978-cfw6w&quot; deleted</span></span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">查看一下结果：</span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">&gt; kubectl get pods -o wide</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">nginx-deployment-957f5f978-q74mb 1/1 Running 0 7m 10.40.0.3 k8s-node2 &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">nginx-deployment-957f5f978-zgf62 1/1 Running 0 10m 10.32.0.3 k8s-node1 &lt;none&gt;</span></span></div><div><br></div><div><font style="background-color: rgb(255, 250, 165);font-size: 9pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">发现原先的 </span><span style="background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-highlight:true;">nginx-deployment-957f5f978-cfw6w</span><span style="background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;"> 变成了 </span><span style="background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-highlight:true;">nginx-deployment-957f5f978-q74mb</span><span style="background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">，为了保证副本的数量，系统又重启了一个新的 Pod 最为补充。</span></font></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">Node 因为某些异常情况而无法访问</span></span></div><div><span style="border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">k8s-node2&gt; systemctl stop network</span></span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">我们把其中一个 Node 的网络断开，过一段时间，查看结果：</span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">&gt; kubectl get pods -o wide</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">nginx-deployment-957f5f978-zgf62 1/1 Running 0 9m 10.32.0.3 k8s-node1 &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">nginx-deployment-957f5f978-rp4df 1/1 Running 0 17m 10.32.0.2 k8s-node1 &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">nginx-deployment-957f5f978-q74mb 1/1 Unknown 0 20m 10.40.0.3 k8s-node2 &lt;none&gt;</span></span></div><div><font face="Arial" style="background-color: rgb(255, 250, 165);font-size: 9pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">发现原来 </span><span style="background-color: rgb(255, 250, 165); font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">k8s-node2</span><span style="background-color: rgb(255, 250, 165); font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;"> 上的 Pod 状态变成了 Unknown，并且系统在健康的 </span><span style="background-color: rgb(255, 250, 165); font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">k8s-node1</span><span style="background-color: rgb(255, 250, 165); font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;"> 上又启动了一个新的 Pod，以保证副本的数量。</span></font></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="background-color: rgb(255, 250, 165);font-size: 9pt;-evernote-highlight:true;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">            以上这些就是 Controller 魔法。可以创建和管理多个 Pod ，提供</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">副本管理</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">、</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">滚动升级</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">和</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">集群级别的自愈能力</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">。</span></font></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Pod常用的 Controller</span></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Deployment</span></span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">为 Pod 和 ReplicaSet 提供声明式更新：你只需要在 Deployment 中描述您想要的目标状态是什么，Deployment 就会帮您将 Pod 和 ReplicaSet 的实际状态改变到您的目标状态。您可以定义一个全新的 Deployment 来创建 ReplicaSet 或者删除已有的 Deployment 并创建一个新的来替换。</span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">StatefulSet</span></span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">有状态系统服务集：提供唯一的网络标识符 、持久化存储 、有序的部署和扩展、有序的删除和终止，以及有序的自动滚动更新。</span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">对于具有 N 个副本的 StatefulSet，当部署Pod时，将会顺序从 {0..N-1} 开始创建。</span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">Pods 被删除时，会从 {N-1..0} 的相反顺序终止。</span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">在将缩放操作应用于 Pod 之前，它的所有前辈必须运行和就绪。</span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">对 Pod 执行扩展操作时，前面的 Pod 必须都处于 Running 和 Ready 状态。</span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">在 Pod 终止之前，所有 successors 都须完全关</span><span style="color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">闭。</span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">DaemonSet</span></span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">让所有（或者一些特定）的 Node 运行同一个 Pod：实现 Only-One-Pod-Per-Node 。</span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">每个 Node 上运行一个分布式存储的守护进程</span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">每个 Node 上运行日志采集器或</span></div><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">每个 Node 上运行监控的采集端</span></div><h3 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(121, 121, 121);">Service的介绍</span></h3><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">Service 可以为一组相同功能的 Pod 应用提供统一的入口地址，并将请求负载均衡分发到各个容器应用上。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font face="Arial" style="font-size: 9pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;">Service 从逻辑上代表了一组 Pod，具体是哪些 Pod 则是由 label 来挑选。Service 有自己 IP，</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">而且这个 IP 是不变的</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;">。客户端只需要访问 Service 的 IP，kubernetes 则负责建立和维护 Service 与 Pod 的映射关系。无论后端 Pod 如何变化，</span></font></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">对客户端不会有任何影响，因为 Service 没有变。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">我们来看一下 Service 发布服务的类型有哪几种：</span></span></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"></h4><h4><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 36px;">Pod常用的 Service</span></span></h4><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(121, 121, 121); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">ClusterIp</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">通过集群的内部 IP 暴露服务，服务只能够在集群内部访问，这也是默认的 ServiceType。</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">apiVersion: v1</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kind: Service</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    name: nginx-service-clusterip</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    labels:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">        name: nginx-service-clusterip</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    type: ClusterIP</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    selector:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">        app: nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    ports:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">        - port: 8081</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">          targetPort: 80</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">启动 service-clusterip：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl apply -f nginx-service-clusterip.yml</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">service/nginx-service-clusterip created</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">查看状态：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl get services</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 10h</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-service-clusterip ClusterIP 10.105.115.2 &lt;none&gt; 8081/TCP 1m</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">可以看到该 Service 暴露了一个内网 IP ，以及配置文件中指定的 8081 端口，不过该服务只能在集群内部访问。</span></span></div><h4 style="margin: 0px; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(121, 121, 121); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">NodePort</span></span></h4><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">通过每个 Node 上的 IP 和静态端口（NodePort）暴露服务。 NodePort 服务会路由到 ClusterIP 服务，这个 ClusterIP 服务会自动创建。通过请求 \:\，可以从集群的外部访问一个 NodePort 服务。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial;">备注: </span><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial;">NodePort 方式暴露服务的端口的默认范围（30000-32767）如果需要修改则在 apiserver 的启动命令里面添加如下参数 --service-node-port-range=1-65535</span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">apiVersion: v1</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kind: Service</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    name: nginx-service-nodeport</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    labels:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">        name: nginx-service-nodeport</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    type: NodePort</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    selector:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">        app: nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">    ports:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">        - port: 8082</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">        targetPort: 80</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">        nodePort: 30082</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">启动 service-nodeport：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl apply -f nginx-service-nodeport.yml</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">service/nginx-service-nodeport created</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">查看状态：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl get services</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 10h</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-service-nodeport NodePort 10.106.190.164 &lt;none&gt; 8082:30082/TCP 5s</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">我们来验证一下是否可以在集群外访问：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; curl &quot;http://172.17.109.23:30082&quot;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&lt;!DOCTYPE html&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&lt;html&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&lt;body&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&lt;/body&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&lt;/html&gt;</span></span></div></div><h3 style="margin: 0px; padding: 0px; font-size: 18px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 18px;letter-spacing: normal;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="font-size: 18px; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;-evernote-highlight:true;">Kubernetes node 管理</span></span></h3><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">Node 的隔离和恢复</span></span></h3><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">apiVersion: v1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kind: Node</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">name: k8s-node1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">labels:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kubernetes.io/hostname: k8s-node1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">unschedulable: true</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">注意：此配置文件指定的类型是 Node，表示是作用在 Node 上的，意思是对于后续创建的 Pod，系统将不再向该 Node 进行调度。</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl replace -f unschedule_node.yml</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">node/k8s-node1 replaced</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">查看 Node 状态，可以看到在 Node 的状态中增加了一项</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">SchedulingDisabled</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">：</span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl get nodes</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">NAME STATUS ROLES AGE VERSION</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">k8s-master Ready master 17m v1.11.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">k8s-node1 Ready,SchedulingDisabled &lt;none&gt; 16m v1.11.2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">k8s-node2 Ready &lt;none&gt; 15m v1.11.2</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">同样，如果需要将某个 Node 重新纳入集群调度范围，则将</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">unschedulable</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">设置为false，再次执行</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kubectl replace</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">命令就能恢复系统对该 Node 的调度。</span></div><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">Node 扩容</span></span></h3><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">在实际生产系统中会经常遇到服务器容量不足的情况，这时就需要购买新的服务器，然后将应用系统进行水平扩展来完成对系统的扩容。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">在 kubernetes 集群中，对于一个新 Node 的加入是非常简单的。 在新 Node 上安装好 docker、kubelet、kube-proxy等服务，然后运行加入集群命令即可：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubeadm join 192.168.1.107:6443 --token fdnk8r.i3xnwl7r4gzjnl20 --discovery-token-ca-cert-hash sha256:9b326fbf6154498cd96288ac37f853218a7864fdff1ec3571328cc7b495500b1</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">因此，这条命令是非常重要的，在集群初始化时就应该把它记录在你的小本子上。</span></span></div><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">Pod 动态扩容和缩容</span></span></h3><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">在实际生产系统中，我们经常会遇到某个服务需要扩容的场景，也可能会遇到由于资源紧张或者工作负载降低而需要减少服务实例数的场景。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">实际我们只要更改配置文件中的 replicas 参数：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">apiVersion: extensions/v1beta1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kind: Deployment</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">name: nginx-deployment</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">replicas: 5</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">...</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">我们将 replicas 从 2 调整到了 5，执行操作：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl apply -f nginx-deployment.yml</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">deployment.extensions/nginx-deployment configured</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">观察结果：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl get pods -o wide</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-deployment-957f5f978-2bm4c 1/1 Running 0 33m 10.40.0.1 k8s-node2 &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-deployment-957f5f978-dq5q9 1/1 Running 0 1m 10.40.0.3 k8s-node2 &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-deployment-957f5f978-hztv9 1/1 Running 0 1m 10.46.0.3 k8s-node1 &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-deployment-957f5f978-v2dkl 1/1 Running 0 33m 10.46.0.2 k8s-node1 &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-deployment-957f5f978-xmd4g 1/1 Running 0 1m 10.40.0.2 k8s-node2 &lt;none&gt;</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">是不是很方便！要缩容也是一样的操作，只是把 replicas 调小即可。</span></span></div><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">将 Pod 调度到指定的 Node</span></span></h3><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">我们知道，kubernetes 的 Scheduler 服务（</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">kube-scheduler</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">进程）负责实现 Pod 的调度，整个调度过程通过执行一系列复杂的算法最终为每个 Pod 计算出一个最佳的目标节点，这一过程是自动完成的，我们无法知道 Pod 最终会被调度到哪个节点上。有时我们可能需要将 Pod 调度到一个指定的Node上，此时，我们可以通过Node的标签（ Label ）和 Pod 的 nodeSelector 属性相匹配，来达到上述目的。</span></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Node</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">apiVersion: v1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kind: Node</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">name: k8s-node1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">labels:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kubernetes.io/hostname: k8s-node1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">diskType: ssd</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">更改配置：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl replace -f ssd_node.yml</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">node/k8s-node1 replaced</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">我们来看下该 Node 有哪些标签：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl describe node k8s-node1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Name: k8s-node1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Roles: &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Labels: diskType=ssd</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kubernetes.io/hostname=k8s-node1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Annotations: node.alpha.kubernetes.io/ttl=0</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">CreationTimestamp: Fri, 14 Sep 2018 00:09:24 +0800</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">...</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Pod</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">apiVersion: extensions/v1beta1</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kind: Deployment</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">name: nginx-ssd</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">replicas: 2</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">template:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">labels:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">app: nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">containers:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">- name: nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">image: nginx:1.14.0</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nodeSelector:</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">diskType: ssd</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">添加配置：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl apply -f nginx-ssd.yml</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">deployment.extensions/nginx-ssd created</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; font-size: 13px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 13px; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">理想状态是，我们将 nginx-ssd 全部分配到了拥有 diskType: ssd 标签的 k8s-node1 上，我们来验证一下：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; font-size: 11px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl get pods -o wide</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-ssd-7b6f5c5d56-k6ssz 1/1 Running 0 3m 10.46.0.2 k8s-node1 &lt;none&gt;</span></span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 11px; border-radius: 3px;"><span style="font-size: 11px; background-color: rgb(255, 255, 255); color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx-ssd-7b6f5c5d56-txt9l 1/1 Running 0 3m 10.46.0.3 k8s-node1 &lt;none&gt;</span></span></div></div><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-family: Arial;-evernote-highlight:true;">Kubernetes版本管理</span></h3><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">应用滚动升级</span></span></h3><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">当集群中的某个服务需要升级时，我们需要停止目前与该服务相关的所有 Pod，然后重新拉取镜像并启动。如果集群规模比较大，则这个工作就变成了一个挑战，而且先全部停止然后逐步升级的方式会导致较长时间的服务不可用。 kubernetes 提供了 rolling-update（滚动升级）功能来解决上述问题。</span></span></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font face="Arial" style="font-size: 9pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;">滚动升级也是通过执行</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; font-size: 9pt; font-family: Arial; color: rgba(0, 0, 0, 0.75); font-variant-caps: normal; font-variant-ligatures: normal;">kubectl apply</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;">命令一键完成，该命令创建了一个新的 RC，然后自动控制旧的 RC 中的 Pod 副本数量逐渐减少到 0，同时新的 RC 中的 Pod 副本数量从 0 逐步增加到目标值，最终实现了 Pod 的升级。需要注意的是，系统要求新的 RC 需要与旧的 RC 在相同的命名空间（Namespace）内，即不能把别人的资产偷偷转移到自家名下。</span></font></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">我们现在来将 nginx 的版本从 1.14.0 升级到 1.15.0：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">apiVersion: extensions/v1beta1</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">kind: Deployment</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">name: nginx-deployment</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">minReadySeconds: 5</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">strategy:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">type: RollingUpdate</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">rollingUpdate:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">maxSurge: 3</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">maxUnavailable: 2</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">replicas: 5</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">template:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">metadata:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">labels:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">app: nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">spec:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">containers:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">- name: nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">image: nginx:1.15.0</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">配置文件中有几个参数需要注意：</span></span></div><ul style="letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">strategy.minReadySeconds：用来指定没有任何容器 crash 的 Pod 并被认为是可用状态的最小秒数， 默认为0</span></div></li><li><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">strategy.type：用来指定新 Pod 替换旧 Pod 的策略，可以是 Recreate，或是 RollingUpdate（默认值）</span></div></li><li><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">strategy.rollingUpdate.maxSurge：</span><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial;">升级过程中最多可以比原先设定所多出的pod 数量，此栏位可以为固定值或是比例(%)例如. maxSurge: 1、replicas: 5，代表Kubernetes 会先开好1 个新pod 后才删掉一个旧的pod，整个升级过程中最多会有5+1 个pod</span></div></li><li><div><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">strategy.rollingUpdate.maxUnavailable：</span><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial;">最多可以有几个pod 处在无法服务的状态，当maxSurge不为零时，此栏位亦不可为零。例如. maxUnavailable: 1，代表Kubernetes 整个升级过程中最多会有1 个pod 处在无法服务的状态</span></div></li></ul><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl apply -f nginx-deployment-update.yml --record</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">deployment.extensions/nginx-deployment created</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">升级完毕，查看最新的版本号：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl describe deploy nginx-deployment</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">...</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Pod Template:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Labels: app=nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Containers:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Image: nginx:1.15.0</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 10pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">...</span></span></div></div><h3 style="margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(64, 64, 64); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 36px;">应用回滚</span></span></h3><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font face="Arial" style="font-size: 9pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;">当集群中的某个服务升级完成，突然发现了意想不到的 BUG，需要回退到升级之前的版本，但现在所有节点的应用都已经被替换了，要回退回去这可是不小的工作量啊。对于这种</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;">情况，kubernetes 也能很轻松的搞定。前提是你之前的操作都有打上</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; font-size: 9pt; font-family: Arial; color: rgba(0, 0, 0, 0.75); font-variant-caps: normal; font-variant-ligatures: normal;">--record</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; font-family: Arial; color: rgb(115, 115, 115); font-variant-caps: normal; font-variant-ligatures: normal;">参数，这样整个升级过程都能被记录下：</span></font></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl rollout history deployment nginx-deployment</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">deployments &quot;nginx-deployment&quot;</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">REVISION CHANGE-CAUSE</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">1 kubectl apply --filename=nginx-deployment.yml --record=true</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">2 kubectl apply --filename=nginx-deployment-update.yml --record=true</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">观察到我们在 REVISION 2 的时候升级了我们的应用，接下来我们直接回滚到 REVISION 1：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl rollout undo deployment nginx-deployment --to-revision=1</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">deployment.extensions/nginx-deployment</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">再来看下当前应用的版本：</span></span></div><div style="padding: 14px; margin: 0px 0px 18px; border: 1px solid rgb(217, 217, 217); white-space: pre-wrap; word-wrap: break-word; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">&gt; kubectl describe deployment nginx-deployment</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">...</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Pod Template:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Labels: app=nginx</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Containers:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">nginx:</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">Image: nginx:1.14.0</span></span></div><div><span style="background-color: rgb(255, 255, 255); border-radius: 3px;"><span style="background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 16px;">...</span></span></div></div><div style="margin: 0px 0px 9px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">果然，应用已经回退到了升级之前的版本，现在可以静下心来修复 BUG 再发布了。</span></span></div><div><font style="font-size: 9pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">但如果我们在发布版本时没有打上</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 233, 204); border-radius: 3px; font-size: 9pt; color: rgba(0, 0, 0, 0.75); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">--record</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(115, 115, 115); font-family: Arial; font-variant-caps: normal; font-variant-ligatures: normal;">参数，history 里是空的，这时只要原始版本的镜像还在，我们还是可以通过修改配置文件来达到回滚的目的。</span></font></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker容器技术 </category>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Elasticsearch详细配置</title>
      <link href="/2018/10/07/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Elaticsearch%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/10/07/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Elaticsearch%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><br></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-weight: bold; font-size: 10pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1.</span><span style="font-weight: bold; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 9pt;">Elasticsearch cluster 三种角色</span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 9pt;">master node：master节点主要用于元数据（metadata）处理，如、索引的新增、删除、分片</span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 9pt;">data node: data节点上保存了数据片</span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 9pt;">client node: client节点起到路由请求的作用，可看做负载均衡器</span></div><div><span style="font-size: 9pt; font-weight: bold; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">2.</span><span style="font-size: 9pt; font-weight: bold; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">节点选择</span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 9pt;">如果你想让节点从不选举为主节点,只用来存储数据,可作为负载器</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.master</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: false</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.data</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: true</span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 9pt;">如果想让节点成为主节点,且不存储任何数据,并保有空闲资源,可作为协调器</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.master</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: true</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.data</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: false</span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 9pt;">如果想让节点既不称为主节点,又不成为数据节点,那么可将他作为搜索器,从节点中获取数据,生成搜索结果等</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.master</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: false</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.data</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: false</span></div><div><span style="font-size: 9pt; font-weight: bold; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">3.</span><span style="font-size: 9pt; font-weight: bold; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">配置说明</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cluster</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.name</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: es-hdfs</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#集群的名称，同一个集群该值必须设置成相同的</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.name</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: h001</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#该节点的名字</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.master</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: true</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#该节点有机会成为master节点</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.data</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: true</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#该节点可以存储数据</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.rack</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">r1</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#该节点所属的机架</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">network</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.host</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">10.41</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.2</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.84</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#该参数用于同时设置</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">transport</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.tcp</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.port</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">9300</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置节点之间交互的端口号</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">transport</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.tcp</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.compress</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: true</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置是否压缩tcp上交互传输的数据</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">http</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.port</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">9200</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置对外服务的http 端口号</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">http</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.max</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">_content_length:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">100</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">mb</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置http内容的最大大小</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">http</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.enabled</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: true</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#是否开启http服务对外提供服务</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">discovery</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.zen</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.ping</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.unicast</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.hosts</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:[</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;h001&quot;</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;h002&quot;</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;h003&quot;</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;h004&quot;</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置集群中的Master节点的初始列表，可以通过这些节点来自动发现其他新加入集群的节点</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">discovery</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.zen</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.minimum</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">_master_nodes:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置这个参数来保证集群中的节点可以知道其它N个有master资格的节点。默认为1，对于大的集群来说，可设置大一点的值（2-4）</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">discovery</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.zen</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.ping</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.timeout</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">3</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">s</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置集群中自动发现其它节点时ping连接超时时间，默认为3秒，对于比较差的网络环境可以高点的值来防止自动发现时出错</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">discovery</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.zen</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.ping</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.multicast</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.enabled</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: false</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置是否打开多播发现节点，默认是true</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gateway</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.recover</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">_after_nodes:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置集群中N个节点启动时进行数据恢复，默认为1</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gateway</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.recover</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">_after_time:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">5</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">m</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置初始化数据恢复进程的超时时间，默认是5分钟</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gateway</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.expected</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">_nodes:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"># 设置这个集群中节点的数量，默认为2，一旦这N个节点启动，就会立即进行数据恢复</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cluster</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.routing</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.allocation</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.node</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">_initial_primaries_recoveries:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">4</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#初始化数据恢复时，并发恢复线程的个数，默认为4</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cluster</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.routing</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.allocation</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.node</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">_concurrent_recoveries:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#添加删除节点或负载均衡时并发恢复线程的个数，默认为4</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">indices</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.recovery</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.max</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">_size_per_sec:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">0</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#设置数据恢复时限制的带宽，如入100mb，默认为0，即无限制</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">script</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.engine</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.groovy</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.inline</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.search</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: on</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">script</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.engine</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.groovy</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.inline</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.aggs</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: on</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">indices</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.recovery</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.max</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">_bytes_per_sec:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">20</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">mb</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">http</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.cors</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.enabled</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: true</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">http</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.cors</span><span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.allow</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-origin:</span> <span style="font-size: 9pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;*&quot;</span></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> 数据存储 </category>
          
          <category> ELKB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELKB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>logstash详细配置</title>
      <link href="/2018/10/07/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/logstash%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/10/07/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/logstash%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="outline: 0px; box-sizing: border-box; text-size-adjust: 100%; -webkit-font-smoothing: antialiased;"><div style="box-sizing: inherit; outline: 0px; background-color: rgb(245, 246, 247); -webkit-font-smoothing: antialiased;"><div style="outline: 0px; box-sizing: border-box;"><div style="box-sizing: inherit; outline: 0px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;"><div style="box-sizing: inherit; outline: 0px;"><div style="box-sizing: inherit; outline: 0px; word-break: break-all;"><div style="box-sizing: inherit; outline: 0px; word-break: break-all;"><div style="font-size: 16px; outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="min-width: 100%; position: relative;"><span style="font-size: 16px;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; font-weight: bold;">一、基本语法组成</span></span></span></div><div style="font-size: 16px; outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"></div><h2 style="margin: 20px 0px 10px; padding: 0px; line-height: 1.5; color: rgb(44, 62, 80); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif !important;"><span style="line-height: 1.5; color: rgb(44, 62, 80); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif !important;"><font style="font-size: 10pt;">支持的插件</font></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="margin: 5px auto; padding: 0px; text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7; text-align: justify;"><font style="font-size: 10pt;"><span style="text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7;">Input</span><span style="text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7;">： elasticsearch,file,http_poller,jdbc,log4j,rss,rabbitmq,redis,syslog,tcp,udp…等</span></font></div><div style="margin: 5px auto; padding: 0px; text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7; text-align: justify;"><font style="font-size: 10pt;"><span style="text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7;">Filter</span><span style="text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7;">： grok,json,mutate,split …等</span></font></div><div style="margin: 5px auto; padding: 0px; text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7; text-align: justify;"><font style="font-size: 10pt;"><span style="text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7;">Output</span><span style="text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7;">： email,elasticsearch,file,http,mongodb,rabbitmq,redis,stdout,tcp,udp …等</span></font></div><div style="margin: 5px auto; padding: 0px; text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7; text-align: justify;"><font style="font-size: 10pt;"><span style="text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7;">配置说明地址</span><span style="text-indent: 0px; color: rgb(85, 85, 85); line-height: 1.7;">： </span><a href="https://www.elastic.co/guide/en/logstash/current/input-plugins.html" style="text-indent: 0px; color: rgb(45, 140, 240); line-height: 1.7;" title="https://www.elastic.co/guide/en/logstash/current/input-plugins.html" target="_blank" rel="noopener">https://www.elastic.co/guide/en/logstash/current/input-plugins.html</a></font></div></div><div style="font-size: 16px; outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 10pt;">logstash.conf配置文件里至少需要有input和output两个部分构成</span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 10pt;">input {</span></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#输入</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 10pt;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filter</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#过滤匹配</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 10pt;">}</span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 10pt;">output {</span></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#输出</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 10pt;">}</span></div></div></div><div style="font-size: 16px; outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold;">二、配置语法讲解</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><font style="font-size: 11pt;"><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; font-size: 11pt; font-weight: bold;">1、input配置</span></font></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; font-size: 10pt;">1.1、file{}（文件读取）</span></div><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; font-size: 10pt;">监听文件变化，记录一个叫 .sincedb 的数据库文件来跟踪被监听的日志文件的当前读取位（也就是时间戳）</span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 10pt;">input {</span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px; font-size: 10pt;"><span>    </span>file {</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>path =&gt; [</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;/var/log/access.log&quot;</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;/var/log/message&quot;</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#监听文件路径</span></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>type =&gt;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;system_log&quot;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#定义事件类型</span></font></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>start_position =&gt;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;beginning&quot;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#检查时间戳</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>}</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">}</font></span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">参数说明：</font></span></div><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">exclude ：排除掉不想被监听的文件</font></span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">stat_interval ：logstash 每隔多久检查一次被监听文件状态（是否有更新），默认是 1 秒。</font></span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">start_position ：logstash 默认是从结束位置开始读取文件数据，也就是说 logstash 进程会以类似 tail -f 的形式运行。如果你是要导入原有数据，把这个设定改成 “beginning”，logstash 进程就按时间戳记录的地方开始读取，如果没有时间戳则从头开始读取，有点类似cat，但是读到最后一行不会终止，而是继续变成 tail -f。</font></span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;"><font style="font-size: 11pt;"><b>2、filter过滤器配置</b></font></span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">2.1、data（时间处理）</font></span></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; word-wrap: normal; overflow-x: auto; white-space: pre; font-size: 14px; background-color: rgba(0, 0, 0, 0.05); border-radius: 4px; text-size-adjust: none; word-break: break-all; padding: 0px;"><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">用来转换日志记录中的时间字符串，变成LogStash::Timestamp 对象，然后转存到 @timestamp 字段里。</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">注意：因为在稍后的 outputs/elasticsearch 中index常用的 %{+YYYY.MM.dd} 这种写法必须读取 @timestamp数据，所以一定不要直接删掉这个字段保留自己的时间字段，而是应该用 filters/date 转换后删除自己的字段！至于elasticsearch 中index使用 %{+YYYY.MM.dd}这种写法的原因后面会说明。</font></span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filter</span> <span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>grok {</font></span></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>   <span>    </span> </span>match</span> <span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">=&gt; [</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;message&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;%{HTTPDATE:logdate}&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>}</font></span></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span>date</span> <span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></font></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>   <span>    </span> </span>match</span> <span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">=&gt; [</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;logdate&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;dd/MMM/yyyy:HH:mm:ss Z&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>}</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">}</font></span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">2.2、grok （正则匹配）</font></span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filter</span> <span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>grok {</font></span></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>   <span>    </span></span>match</span> <span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">=&gt; [</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;message&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;\s+(?&lt;status&gt;\d+?)\s+&quot;</span> <span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">] #跟</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">python</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">的正则有点差别</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">    }</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">}</font></span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">优化建议：如果把 “message” 里所有的信息都 grok 到不同的字段了，数据实质上就相当于是重复存储了两份。所以可以用 remove_field 参数来删除掉 message 字段，或者用 overwrite 参数来重写默认的 message 字段，只保留最重要的部分。</font></span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">filter {</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>grok {</font></span></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>patterns_dir =&gt;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;/path/to/your/own/patterns&quot;</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span><span>    </span>match =&gt; {</font></span></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span><span>    </span>&quot;message&quot;</span> <span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">=&gt;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;%{SYSLOGBASE} %{DATA:message}&quot;</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span><span>    </span>}</font></span></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>overwrite =&gt; [</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;message&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>}</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">}</font></span></div><div><font style="font-size: 10pt;"><br></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">filter {</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>grok {</font></span></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>match =&gt; [</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;message&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;%{HTTPDATE:logdate}&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></font></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>remove_field =&gt; [</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;logdate&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>}</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">}</font></span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">2.3、GeoIP （地址查询归类）</font></span></div><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">GeoIP 是最常见的免费 IP 地址归类查询库，同时也有收费版可以采购。GeoIP 库可以根据 IP 地址提供对应的地域信息，包括国别，省市，经纬度等，对于可视化地图和区域统计非常有用。</font></span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">filter {</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>geoip {</font></span></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>source =&gt;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;clientip&quot;</span></font></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>database =&gt;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;/etc/logstash/GeoLiteCity.dat&quot;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#需去官网下载ip库放到本地</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>}</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">}</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">filter {</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>geoip {</font></span></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>source =&gt;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;message&quot;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#如果能联网可查询在线ip库</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>}</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">}</font></span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">注：geoip 插件的 “source” 字段可以是任一处理后的字段，比如 “clientip”，但是字段内容却需要小心！geoip 库内只存有公共网络上的 IP 信息，查询不到结果的，会直接返回 null，而 logstash 的 geoip 插件对 null 结果的处理是：不生成对应的 geoip.字段。</font></span></div><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">所以在测试时，如果使用了诸如 127.0.0.1, 172.16.0.1, 182.168.0.1, 10.0.0.1 等内网地址，会发现没有对应输出！</font></span></div><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><font style="font-size: 10pt;">GeoIP 库数据较多，如果不需要这么多内容，可以通过 fields 选项指定自己所需要的。下例为全部可选内容</font></span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">filter {</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>geoip {</font></span></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><span>    </span><span>    </span>fields =&gt; [</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;city_name&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;continent_code&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;country_code2&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;country_code3&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;country_name&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;dma_code&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ip&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;latitude&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;longitude&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;postal_code&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;region_name&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;timezone&quot;</span><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></font></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;"><span>    </span>}</font></span></div><div><span style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"><font style="font-size: 10pt;">}</font></span></div></div></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> 数据存储 </category>
          
          <category> ELKB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELKB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Filebeat 详细配置</title>
      <link href="/2018/10/07/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Filebeat%20%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/10/07/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Filebeat%20%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="box-sizing: border-box; text-size-adjust: 100%; -webkit-font-smoothing: antialiased; font-size: 14px;"><div style="box-sizing: inherit; min-width: 320px; font-size: 14px; overflow-x: hidden; background: rgb(84, 84, 84);"><div style="box-sizing:inherit;backface-visibility:hidden;overflow:hidden;transition:transform 0.5s ease, -webkit-transform 0.5s ease;background:rgb(255, 255, 255);"><div style="box-sizing:inherit;font-size:14px;box-shadow:none;border-radius:0px;background:rgb(249, 249, 249);"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:stretch;align-items:stretch;background:rgb(249, 249, 249);"><div style="box-sizing:inherit;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:inherit;justify-content:inherit;-webkit-box-align:stretch;align-items:stretch;"><div style="box-sizing:inherit;vertical-align:top;background:rgb(255, 255, 255);"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;"><span style="font-size: 16px; min-width: 100%; position: relative;"><br></span></div></div><div style="box-sizing: inherit; word-break: break-word; word-wrap: break-word; font-size: 16px; margin-top: 28px;"><div style="box-sizing: inherit; margin: 16px 0px 14px;"><span style="font-size: 16px; min-width: 100%; position: relative;"><span style="font-size: 16px; line-height: 28px; color: rgb(61, 70, 77); font-family: &quot;Pingfang SC&quot;, STHeiti, &quot;Lantinghei SC&quot;, &quot;Open Sans&quot;, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, SimSun, sans-serif;"> Filebeat 配置文件中文对照</span></span></div><div style="box-sizing: inherit; word-wrap: normal; overflow: auto; white-space: pre-wrap; padding: 2px; background: rgb(63, 63, 63); border-radius: 3px; font-size: 13px;"><div style="box-sizing: inherit; overflow: auto; font-size: 13px; border-radius: 3px; padding: 10px; word-wrap: normal; background: rgb(63, 63, 63);"><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">###################### Filebeat Configuration Example #########################</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># This file is an example configuration file highlighting only the most common</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># options. The filebeat.reference.yml file from the same directory contains all the</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># supported options with more comments. You can use it as a reference.</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># You can find the full configuration reference here:</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># https://www.elastic.co/guide/en/beats/filebeat/index.html</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># For more available modules and options, please see the filebeat.reference.yml sample</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># configuration file.</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#=========================== Filebeat prospectors =============================</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">filebeat.prospectors:</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># Each - is a prospector. Most options can be set at the prospector level, so</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># you can use different prospectors for various configurations.</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># Below are the prospector specific configurations.</span></div><div><span>    </span><span style="font-size: 12px !important; line-height: 1.5 !important; font-family: &quot;Courier New&quot; !important; color: rgb(214, 214, 214); white-space: pre-wrap; word-wrap: break-word; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-weight: bold;"># 指定文件的输入类型log(默认)或者stdin</span><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(220, 163, 163); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">-</span> <span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">type: log</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><br></span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 更改为 true 以启用此配置。</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">enabled: false</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><br></span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#应该爬网和提取的路径</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">paths:</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">- /var/log/*.log</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><br></span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><font color="#DCDCDC">#</font> <span style="white-space: pre-wrap; word-wrap: break-word; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font style="color: rgb(214, 214, 214);">指定被监控的文件的编码类型，使用plain和utf-8都是可以处理中文日志的</font></span></span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><font style="color: rgb(214, 214, 214);">  <span style="white-space: pre-wrap; word-wrap: break-word; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;">encoding: plain</span></font><font color="#DCDCDC"><br></font></span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 排除行, 要匹配的正则表达式的列表. 它将从列表中删除与任何正则表达式匹配的行.</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#exclude_lines: ['^DBG']</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 包含行. 要匹配的正则表达式的列表. 它从列表中导出与任何正则表达式匹配的行.</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#include_lines: ['^ERR', '^WARN']</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 排除文件. 要匹配的正则表达式的列表。 Filebeat 将从列表中删除与任何正则表达式匹配的文件。默认情况下, 不会删除任何文件。</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#exclude_files: ['.gz$']</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><font style="color: rgb(214, 214, 214);"><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"># 向输出的每一条日志添加额外的信息，比如“level:debug”，方便后续对日志进行分组统计。</span></font></span></div><div><span style="font-size: 13px; line-height: 1.4; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"># 默认情况下，会在输出信息的fields子目录下以指定的新增fields建立子目录，例如fields.level</span></span></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"># 这个得意思就是会在es中多添加一个字段，格式为 &quot;filelds&quot;:{&quot;level&quot;:&quot;debug&quot;}</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#fields:</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># level: debug</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># review: 1</span></div><div><font color="#D6D6D6"><br></font></div><div><span style="font-size: 13px; line-height: 1.4; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6"># 如果该选项设置为true，则新增fields成为顶级目录，而不是将其放在fields目录下。</font></span></span></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6"># 自定义的field会覆盖filebeat默认的field</font></span></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font style="color: rgb(214, 214, 214);"># 如果设置为true，则在es中新增的字段格式为：&quot;level&quot;:&quot;debug&quot;</font></span></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6">#fields_under_root: false</font></span></div><div style="color: rgb(220, 220, 220);"><br></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6"># 可以指定Filebeat忽略指定时间段以外修改的日志内容，比如2h（两个小时）或者5m(5分钟)。</font></span></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6">#ignore_older: 0</font></span></div><div style="color: rgb(220, 220, 220);"><br></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6"># 如果一个文件在某个时间段内没有发生过更新，则关闭监控的文件handle。默认1h</font></span></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6">#close_older: 1h</font></span></div><div style="color: rgb(220, 220, 220);"><br style="font-family: Menlo; color: rgb(220, 220, 220);"></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6"># Defines the buffer size every harvester uses when fetching the file</font></span></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6"># 每个harvester监控文件时，使用的buffer的大小</font></span></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6">#harvester_buffer_size: 16384</font></span></div><div style="color: rgb(220, 220, 220);"><br></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6"># 日志文件中增加一行算一个日志事件，max_bytes限制在一次日志事件中最多上传的字节数，多出的字节会被丢弃</font></span></div><div><span style="font-weight: bold; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5 !important;"><font color="#D6D6D6">#max_bytes: 10485760</font></span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><br></span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">### 多行选项</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># Mutiline 可用于跨越多行的日志消息。这对于 Java 堆栈跟踪或 C 行继续很常见</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 必须匹配的 regexp 模式。示例模式匹配所有开始 [</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#multiline.pattern: ^\[</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 定义在模式下设置的模式是否应该被否定。默认值为 false.</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#multiline.negate: false</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 匹配可以设置为 &quot;后&quot; 或 &quot;之前&quot;。它用于定义是否应将行追加到模式 (不匹配) 之前或之后, 或者只要模式不匹配 (基于否定.</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># Note:后是等同于前和前是等价于下 Logstash</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#multiline.match: after</span></div><div><br></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#=============================Filebeat 模块 ===============================</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">filebeat.config.modules:</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 配置加载全局配置的模式(一个目录)</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">path: ${path.config}/modules.d/*.yml</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 设置为true来启用配置重载</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">reload.enabled: false</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 检查路径下的文件更改的期间（多久检查一次）</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#reload.period: 10s</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#==================== Elasticsearch 模板设置 ==========================</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">setup.template.settings:</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">index.number</span><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-style: italic;">_of_</span><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">shards: 3</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#index.codec: best_compression</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#_source.enabled: false</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#============================== Kibana =====================================</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 从版本6.0.0 开始, 仪表板通过 Kibana API 加载。</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 这需要 Kibana 端点配置.</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">setup.kibana:</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># Kibana Host</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 方案和端口可以被排除, 并将被设置为默认 (http and 5601)</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 如果您指定和附加路径, 则该方案是必需的: http://localhost:5601/path</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># IPv6 地址应始终定义为: https://[2001:db8::1]:5601</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#host: &quot;localhost:5601&quot;</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#-------------------------- Elasticsearch output ------------------------------</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">output.elasticsearch:</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 要连接到的主机的数组。</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">hosts: [&quot;localhost:9200&quot;]</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 可选协议和基本身份验证凭据。</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#protocol: &quot;https&quot;</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#username: &quot;elastic&quot;</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#password: &quot;changeme&quot;</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#----------------------------- Logstash output --------------------------------</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#output.logstash:</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># The Logstash hosts</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#hosts: [&quot;localhost:5044&quot;]</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 可选的 SSL。默认为 off。</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 用于 HTTPS 服务器验证的根证书列表</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#ssl.certificate_authorities: [&quot;/etc/pki/root/ca.pem&quot;]</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># SSL 客户端身份验证证书</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#ssl.certificate: &quot;/etc/pki/client/cert.pem&quot;</span></div><div><br></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 客户端证书密钥</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#ssl.key: &quot;/etc/pki/client/cert.key&quot;</span></div><div><span style="font-size: 13px; line-height: 1.4; color: rgb(220, 220, 220); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"><br></span></div><div><span style="font-family: Menlo; color: rgb(220, 220, 220);"><span style="font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#----------------------------- Kafka output --------------------------------</span> #output.kafka:</span></div><div><span style="font-family: Menlo; color: rgb(220, 220, 220);"><span>    #</span>enabled: true</span></div><div><span style="font-family: Menlo; color: rgb(220, 220, 220);"><span>    #</span>hosts: []</span></div><div><span style="font-family: Menlo; color: rgb(220, 220, 220);">#topic: 'topic'</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#================================ Logging =====================================</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 设置日志级别。默认日志级别为 &quot;信息&quot;。</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 用的日志级别有: critical, error, warning, info, debug</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#用的日志级别有: 关键、错误、警告、信息、调试</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#logging.level: debug</span></div><div><br></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># 在调试级别, 您可以有选择地仅对某些组件启用日志记录。</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#要启用所有选择器, 请使用 [&quot;*&quot;]。其他选择器的例子是 &quot;beat&quot;,</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;"># &quot;publish&quot;, &quot;service&quot;.</span></div><div><span style="box-sizing: inherit; font-size: 13px; line-height: 1.4; color: rgb(239, 239, 143); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;">#logging.selectors: [&quot;*&quot;]</span></div></div></div><div style="box-sizing: inherit; margin: 16px 0px 14px;"><span style="font-size: 16px; line-height: 28px; color: rgb(61, 70, 77); font-family: &quot;Pingfang SC&quot;, STHeiti, &quot;Lantinghei SC&quot;, &quot;Open Sans&quot;, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, SimSun, sans-serif;"> </span></div><div style="box-sizing:inherit;margin-top:12px;"><div style="box-sizing:inherit;text-align:center;"></div></div></div><div style="box-sizing: inherit; margin: 0px; text-align: center;"><span style="font-size: 14px; line-height: 1.4285em; color: rgba(0, 0, 0, 0.87); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, Sathu, EucrosiaUPC, Arial, Helvetica, sans-serif;">© 著作权归作者所有</span></div></div></div></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> 数据存储 </category>
          
          <category> ELKB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELKB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Elasticsearch CURD Rest-api</title>
      <link href="/2018/10/06/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Elasticsearch%20CURD%20Rest-api/"/>
      <url>/2018/10/06/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Elasticsearch%20CURD%20Rest-api/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="outline: 0px; box-sizing: border-box; text-size-adjust: 100%; -webkit-font-smoothing: antialiased;"><div style="box-sizing: inherit; outline: 0px; background: url(&quot;https://csdnimg.cn/release/phoenix/themes/skin-yellow/images/bg.png&quot;) repeat; -webkit-font-smoothing: antialiased;"><div style="outline: 0px; box-sizing: border-box;"><div style="box-sizing: inherit; outline: 0px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;"><div style="box-sizing: inherit; outline: 0px; padding: 16px 0px 0px; margin: 0px; border-bottom: 1px solid rgb(224, 224, 224); z-index: 9; background-color: rgb(255, 255, 255);"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px;"><div style="text-align: justify; box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px 0px 8px;"><span style="font-size: 16px;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold;">本文目标</span></span></div><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px 0px 8px;"><div><span style="text-align: justify;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures;">    本文通过对比关系型数据库，将ES中常见的增、删、改、查操作进行图文呈现。能加深你对ES的理解。同时，也列举了kibana下的图形化展示。</span></span></div></div></div></div><div style="box-sizing: inherit; outline: 0px; position: relative; padding-top: 16px;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-break: break-all;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">ES Restful API GET、POST、PUT、DELETE、HEAD含义</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    1）GET：获取请求对象的当前状态。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    2）POST：改变对象的当前状态。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    3）PUT：创建一个对象。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    4）DELETE：销毁对象。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    5）HEAD：请求获取对象的基础信息。</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="font-size: 16px;"><span style="font-size: 16px;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">Mysql与Elasticsearch核心概念对比示意图</span></span></div><div style="font-size: 16px;"><span style="font-size: 16px;">    <img src="/e_img/Elasticsearch CURD Rest-api_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="340"></span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">      以上表为依据，</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">      ES中的新建文档（在Index/type下）相当于Mysql中（在某Database的Table）下插入一行数据。</span></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 18.6667px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures;">ES的集群管理</span></h1><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold;">1、查看集群状态</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="color: rgb(79, 79, 79); font-size: 12pt;"><span style="font-variant-ligatures: common-ligatures;"><span style="font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;">    </span><span style="font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;">        </span><span style="font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-variant-ligatures: common-ligatures; line-height: 22px;">http:</span><span style="font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; color: rgb(0, 0, 0); font-variant-ligatures: common-ligatures; line-height: 22px;">/</span><span style="font-size: 10pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 136, 0); font-variant-ligatures: common-ligatures; line-height: 22px;"><font face="Consolas, Inconsolata, Courier, monospace">/localhost:9200</font><span style="font-family: Consolas; color: rgb(0, 136, 0);">/_cat/</span><span style="color: rgb(0, 136, 0);"><font face="Consolas, Inconsolata, Courier, monospace">health</font></span><span style="color: rgb(0, 136, 0);"><font face="Consolas">?v</font></span></span></span></font></div></div><div><font color="#4F4F4F" face="-apple-system, SF UI Text, Arial, PingFang SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, sans-serif" style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures;"> 返回值</span></font></div><div><font color="#4F4F4F" face="-apple-system, SF UI Text, Arial, PingFang SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, sans-serif" style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures;"> <img src="/e_img/Elasticsearch CURD Rest-api_files/Image [1].png" type="image/png" data-filename="Image.png" style="color: rgb(79, 79, 79);"></span></font></div><h1><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal;">  </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal;">从以上的返回值中，我们可以得到一个名为ElasticSearch的集群，共有一个节点，没有索引数据。</span></h1><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold;">2、查看所有节点的状态</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; color: rgb(79, 79, 79);"><span style="font-variant-ligatures: common-ligatures;"><font style="font-size: 12pt;">      <span style="font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: 9pt; color: rgb(51, 51, 51);"> </span><span style="font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 153, 0); font-variant-ligatures: common-ligatures; line-height: 22px;">http:</span><span style="font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; color: rgb(0, 0, 0); font-variant-ligatures: common-ligatures; line-height: 22px;">/</span><span style="font-size: 10pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 136, 0); font-variant-ligatures: common-ligatures; line-height: 22px; font-family: Consolas, Inconsolata, Courier, monospace;">/localhost:9200</span><span style="font-size: 10pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 136, 0); font-variant-ligatures: common-ligatures; line-height: 22px; font-family: Consolas;">/_cat/indices?v</span><span style="color: rgb(79, 79, 79); font-size: 12pt; font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; background-color: rgb(255, 255, 255);"> </span></font></span></font></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><font style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures;">ES的CURD操作</span></font></h1><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 36px;">1、新建文档（类似mysql insert插入操作）</span></h1><div><span style="font-size: 10pt; color: rgb(79, 79, 79);">    当你创建一个文档时，无需再这之前创建一个索引和类型，ElasticSearch会自动根据你的创建信息自动创建相应的索引、类型，直至文档。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79);">    备注: 如果不指定_id, elasticsearch会自动帮我们生成</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">http:</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 136, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/localhost:9200/blog</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 136, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/ariticle/</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">put</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    &quot;title&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:<span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;New version of Elasticsearch released!&quot;</span></span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></font></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    &quot;content&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:<span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;Version 1.0 released today!&quot;</span></span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></font></div><div><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    &quot;tags&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">[</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;announce&quot;</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;elasticsearch&quot;</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;release&quot;</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></font></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">创建成功如下显示：</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_index&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;blog&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_type&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ariticle&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_id&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;1 -d&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_version&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_shards&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;total&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;successful&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;failed&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">0</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">},</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;created&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">true</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><div style="font-size: 16px; outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 16px;">    <img src="/e_img/Elasticsearch CURD Rest-api_files/Image [2].png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="392"></span></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 36px;">2、检索文档（类似mysql search 搜索select*操作）</span></h1><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 11pt; font-weight: bold;">通过_id来查询文档</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><a href="http://localhost:9200/blog/ariticle/1/" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">http://localhost:9200/blog/ariticle/1/</a>   <span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">GET</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">检索结果如下：</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_index&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;blog&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_type&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ariticle&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_id&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;1&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_version&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;found&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">true</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_source&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;title&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;New version of Elasticsearch released!&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;content&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;Version 1.0 released today!&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;tags&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">[</span><span style="font-size: 10pt; outline: 0px; word-break: break-all;"><span style="outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;announce&quot;</span></span><span style="font-size: 10pt; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures;">,</span> <span style="font-size: 10pt; outline: 0px; word-break: break-all;"><span style="outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;elasticsearch&quot;</span></span> <span style="font-size: 10pt; outline: 0px; word-break: break-all; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="font-size: 10pt; outline: 0px; word-break: break-all;"><span style="outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;release&quot;</span></span><span style="font-size: 10pt; outline: 0px; word-break: break-all; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">如果未找到会提示：</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_index&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;blog&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_type&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ariticle&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_id&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;11&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;found&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">false</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">查询全部文档如下：</span></div><div style="font-size: 16px;"><div><span style="font-size: 16px;"><img src="/e_img/Elasticsearch CURD Rest-api_files/Image [3].png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="563"></span></div></div><div style="font-size: 16px;"><div><br></div></div><div><span style="font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">具体某个细节内容检索</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">查询举例1：查询cotent列包含版本为1.0的信息。</span></div><div><font style="font-size: 10pt;"><a href="http://localhost:9200/blog/" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">http://localhost:9200/blog</a>/article/<span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures;">_search?pretty&amp;q=content:1.0</span></font></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;took&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;timed_out&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">false</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_shards&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;total&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">5</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;successful&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">5</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;failed&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">0</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">},</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;hits&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;total&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;max_score&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">0</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">8784157</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;hits&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">[</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_index&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;blog&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_type&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ariticle&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_id&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;6&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_score&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">0</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">8784157</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_source&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">            -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;title&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;deep Elasticsearch!&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">            -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;content&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;Version 1.0!&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;tags&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">[</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">            -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;deep&quot;</span></span><span style="font-size: 10pt; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures;">,</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">            -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;elasticsearch&quot;</span></span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">        -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    -</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">查询举例2：查询书名title中包含“enhance”字段的数据信息：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"># curl -X GET 10.200.1.121:9200/blog/ariticle/_search?pretty -d </span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&gt; '{</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;query&quot;</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: {</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&gt;</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;term&quot;</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&gt; {</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;title&quot;</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;enhance&quot;</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&gt; }</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&gt; }'</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">查询举例3：查询ID值为3,5,7的数据信息：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"># curl -X GET 10.200.1.121:9200/blog/ariticle/_search?pretty -d </span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'{</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;query&quot;</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">: {</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;terms&quot;</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_id&quot;</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">[</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;3&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;5&quot;</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;7&quot;</span> <span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'</span></font></div></div></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;">查询举例4：分页查询</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;"># curl -X GET 10.200.1.121:9200/blog/ariticle/_search?pretty -d </span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="box-sizing: border-box; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; line-height: 22px;">'{</span> <span style="box-sizing: border-box; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; outline: 0px; word-break: break-all; line-height: 22px;">&quot;query&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; line-height: 22px;">: {</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; white-space: pre;"><span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; outline: 0px; word-break: break-all; line-height: 22px;">&quot;terms&quot;</span> <span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; line-height: 22px;">:</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; white-space: pre;"><span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; line-height: 22px;">{</span><span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; outline: 0px; word-break: break-all; line-height: 22px;">&quot;_id&quot;</span> <span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; line-height: 22px;">:</span> <span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; outline: 0px; word-break: break-all; line-height: 22px;">[</span> <span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; outline: 0px; word-break: break-all; line-height: 22px;">&quot;3&quot;</span><span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; outline: 0px; word-break: break-all; line-height: 22px;">,</span> <span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; outline: 0px; word-break: break-all; line-height: 22px;">&quot;5&quot;</span><span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; outline: 0px; word-break: break-all; line-height: 22px;">,</span> <span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; outline: 0px; word-break: break-all; line-height: 22px;">&quot;7&quot;</span> <span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; outline: 0px; word-break: break-all; line-height: 22px;">]</span> <span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; line-height: 22px;">}</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; white-space: pre;"><span style="box-sizing: border-box; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; white-space: pre; line-height: 22px;">}，</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; white-space: pre;"><span style="box-sizing: border-box; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; white-space: pre;">&quot;from&quot;: 1,</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; white-space: pre;"><span style="box-sizing: border-box; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; white-space: pre;">&quot;size&quot;: 10</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; line-height: 22px;">}</span><span style="box-sizing: border-box; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 10pt; font-variant-ligatures: common-ligatures; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; outline: 0px; word-break: break-all; line-height: 22px;">'</span></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 36px;">3、更新文档（类似mysql update操作， 有则更新，无则新建）</span></h1><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><a href="http://localhost:9200/blog/ariticle/1/_update/" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">http://localhost:9200/blog/ariticle/1/_update/</a> <span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">POST</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">{&quot;script&quot;:&quot;ctx._source.content = /&quot;new version 2.0 20160714/&quot;&quot;}</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">更新后结果显示：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">{</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">“_index”: “blog”,</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">“_type”: “ariticle”,</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">“_id”: “1”,</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">“_version”: 2,</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">“_shards”: {</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">”total”: 2,</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">“successful”: 1,</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">“failed”: 0</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">}</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">}</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">注意更新文档需要在config\elasticsearch.yml下新增以下内容：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">script.groovy.sandbox.enabled: true</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">script.engine.groovy.inline.search: on</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">script.engine.groovy.inline.update: on</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">script.inline: on</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">script.indexed: on</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">script.engine.groovy.inline.aggs: on</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">index.mapper.dynamic: true</span></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 36px;">4、删除文档（类似mysql delete操作）</span></h1><div style="font-size: 16px; outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><a href="http://localhost:9200/blog/ariticle/8/" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 16px; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">http://localhost:9200/blog/ariticle/8/</a><span style="font-size: 16px;"> DELETE</span></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><br></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;found&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">true</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_index&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;blog&quot;</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_type&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ariticle&quot;</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_id&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;8&quot;</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_version&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;_shards&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;total&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;successful&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;failed&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">0</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div></div></div></div></div></div></div></div><div><span style="font-size: 12pt; font-weight: bold;">5、查询过滤</span></div><div style="box-sizing: inherit; outline: 0px; background-color: rgb(245, 246, 247); -webkit-font-smoothing: antialiased;"><div style="outline: 0px; box-sizing: border-box;"><div style="box-sizing: inherit; outline: 0px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;"><div style="box-sizing: inherit; outline: 0px;"><div style="box-sizing: inherit; outline: 0px; word-break: break-all;"><div style="box-sizing: inherit; outline: 0px; word-break: break-all;"><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; min-width: 100%; position: relative; font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">过滤器类型</span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">过滤器类型与查询类型基本相对应，都有</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">范围</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">（过滤）查询、</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">term</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">、</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">terms</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">等类型。</span></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">term、terms过滤</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">term、terms的含义与查询时一致。term用于精确匹配、terms用于多词条匹配。不过既然过滤器既然适用于大范围过滤，term、terms在过滤中使用意义不大。</span></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">范围过滤（range）</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">查询16年10月以来所有内容含有“java”的文档，先过滤剩下符合10月的文章，再精确匹配。</span></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">query</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filtered</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">query</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">match</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">contents</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;java&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filter</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">range</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">date</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gte</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;2016-10-01&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">exists、mising过滤器</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">exists过滤指定字段没有值的文档</span></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">query</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filtered</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filter</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">exists</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">field</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;id&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">将不返回</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">id</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">字段无值的文档。</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">missing</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">过滤器与</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">exists</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">相反，它过滤指定字段有值的文档。</span></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">query</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filtered</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filter</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">missing</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">field</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;id&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">标识符（ids）过滤器</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">需要过滤出若干指定_id的文档，可使用标识符过滤器(ids)</span></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">query</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filtered</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filter</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">ids</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">values</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">[</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">7</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">组合过滤器</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">可以对这些过滤器组合使用，ES中有2类组合过滤器。一类是</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bool</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">过滤器，一类是</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">and</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">、</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">or</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">、</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">not</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">过滤器。</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bool</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">过滤器对应布尔查询（</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bool</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">）</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">bool过滤占用资源，总结来说，一般情况下用bool过滤器，当遇到位置查询、数值范围、脚本查询时使用and、or、not过滤。</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">查询日期在16年10月份且文章标题或内容包含“ES“的文档</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">用SQL表示为</span></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">select</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">*</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">from</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">article</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">where</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">date</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">between</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'2016-10-01'</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">and</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'2016-10-31'</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">and</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">(name</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">like</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'%ES%'</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">or</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">contents</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">like</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'%ES%'</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">)</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">使用bool过滤器</span></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">query</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filtered</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filter</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bool</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">should</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">[{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">match</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">name</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ES&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">},{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">match</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">contents</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ES&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}]</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">must</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">range</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">date</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gte</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;2016-10-01&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">lte</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;2016-10-31&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">布尔查询也可嵌套布尔查询，如要查询16年10月份内容有关ES的文章或任何时段文章名称与java相关的所有文章。（这里只是举例，不考虑实际情况）</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">用SQL表示为</span></div></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">select</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">*</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">from</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">article</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">where</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">contents</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">like</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'%ES%'</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">and</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">date</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">between</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'2016-10-01'</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">and</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'2016-10-31'</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">or</span> <span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">name</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">like</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">'%java%'</span></div></div></div><div style="font-size: 14px; overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="font-size: 14px; box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">query</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filtered</span><span style="font-size: 14px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">filter</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bool</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">should</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">[{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bool</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">must</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">[{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">range</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">date</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gte</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;2016-09-01&quot;</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">lte</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;2016-09-30&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}, {</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">match</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">contents</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;js&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}]</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}, {</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">match</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">{</span></div><div><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">name</span><span style="outline: 0px; box-sizing: border-box; font-size: 14px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;java&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><br></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}]</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">    </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">}</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">我们查询的主要用or关系连接，所以使用</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bool</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">查询的</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">should</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">语句。一边是</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">contents like '%ES%' and date between '2016-10-01' and '2016-10-31'</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">，另一个为</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">name like '%java%'</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">前者需嵌套一个</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bool</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">查询，使用</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">must</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">连接，后者简单使用</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; background-color: rgb(249, 242, 244); border-radius: 2px; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">match</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">即可。</span></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> 数据存储 </category>
          
          <category> ELKB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELKB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Elasticsearch集群部署</title>
      <link href="/2018/10/05/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Elasticsearch%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/"/>
      <url>/2018/10/05/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Elasticsearch%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="outline: 0px; box-sizing: border-box; text-size-adjust: 100%; -webkit-font-smoothing: antialiased;"><div style="box-sizing: inherit; outline: 0px; background-color: rgb(245, 246, 247); -webkit-font-smoothing: antialiased;"><div style="outline: 0px; box-sizing: border-box;"><div style="box-sizing: inherit; outline: 0px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;"><div style="box-sizing: inherit; outline: 0px;"><div style="box-sizing: inherit; outline: 0px; word-break: break-all;"><div style="box-sizing: inherit; outline: 0px; word-break: break-all;"><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="min-width: 100%; position: relative;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 32px;">Elasticsearch集群部署详解</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">环境：centos6.9、jdk1.8.0_151、elasticsearch-5.6.5</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">注意：es5.x要求jdk1.8，否则会报错</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">本文以讲解Elasticsearch三个节点的分布式部署、核心配置的含义以及分布式部署遇到的坑。</span></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 30px;">部署节点原理</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">多机集群中的节点可以分为master nodes和data nodes,在配置文件中使用Zen发现(Zen discovery)机制来管理不同节点。Zen发现是ES自带的默认发现机制，使用多播发现其它节点。只要启动一个新的ES节点并设置和集群相同的名称这个节点就会被加入到集群中。（所以，同集群的集群名称一致，才能便于自动发现）</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">Elasticsearch集群中有的节点一般有三种角色:master node、data node和client node。</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">1）master node——master节点点主要用于元数据(metadata)的处理，比如索引的新增、删除、分片分配等。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">2）client node——client 节点起到路由请求的作用，实际上可以看做负载均衡器。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">3）data node——data节点上保存了数据分片。它负责数据相关操作，比如分片的 CRUD，以及搜索和整合操作。这些操作都比较消耗 CPU、内存和 I/O 资源；</span></div></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 30px;">三节点 Elasticsearch 分布式部署(示例)</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">0、节点规划</span></span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">master</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:10</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(155, 112, 63); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.0</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(155, 112, 63); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.15</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(155, 112, 63); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.57</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">client</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:10</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(155, 112, 63); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.0</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(155, 112, 63); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.15</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(155, 112, 63); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.12</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">data</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:10</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(155, 112, 63); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.0</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(155, 112, 63); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.15</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(155, 112, 63); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.2</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="font-size: 16px;"><span style="font-size: 16px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">1、下载</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">      下载地址</span> <a href="https://www.elastic.co/downloads/past-releases/elasticsearch-5-6-5" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">https://www.elastic.co/downloads/past-releases/elasticsearch-5-6-5</a></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">wget</span> <a href="https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.6.5.tar.gz" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px; text-decoration: none; text-decoration-skip: ink;" target="_blank">https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.6.5.tar.gz</a></div></blockquote><div style="font-size: 16px; outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 16px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">2、解压并创建日志和数据目录</span></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">tar zxvf elasticsearch-5.6.5.tar.gz</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">cd elasticsearch</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">mkdir data</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">mkdir logs</span></div></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="font-size: 16px;"><span style="font-size: 16px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">3、ES所有配置作用介绍</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>参考Elasticsearch详细配置</div></div><div style="font-size: 16px;"><br></div><div style="font-size: 16px;"><span style="font-size: 16px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">4、修改ES配置文件</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    进入到config文件夹，编辑 elasticsearch.yml</span></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">vim elasticsearch-5.6.5/config/elasticsearch.yml</span></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    步骤1：配置好主节点Master信息。</span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cluster.name: es</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node.name:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;test01-master&quot;</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node.master:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">true</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node.data:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">true</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">path.data: /opt/elasticsearch/data</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">path.logs: /opt/elasticsearch/logs</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">network.host:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">10.0</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.15</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.57</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">http.port:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">9200</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">http.cors.enabled:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">true</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">http.cors.allow-origin:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;*&quot;</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">discovery.zen.ping.unicast.hosts: [</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;10.0.15.57:9300&quot;</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;10.0.15.12:9300&quot;</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">,</span><span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;10.0.15.2:9300&quot;</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">discovery.zen.minimum_master_nodes:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gateway.recover_after_nodes:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">3</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gateway.recover_after_time:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">5</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">m</span></div><div style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gateway.expected_nodes:</span> <span style="outline: 0px; box-sizing: border-box; font-size: inherit; word-break: break-all; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="font-size: 16px;"><span style="font-size: 16px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">5、拷贝到其他机器上</span></div><div style="font-size: 16px;"><span style="font-size: 16px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">6、修改配置文件</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    cient节点；修改节点名称信息。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    只列举不一样的配置：</span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node.name</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;test02-cient&quot;</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node.master</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">true</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">node.data</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">false</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">network.host</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">10.0.15.12</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    data节点；修改节点名称</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    只列举不一样的配置：</span></div><div style="font-size: 16px;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 10pt; outline: 0px; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">       node.name</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span> <span style="font-size: 10pt; outline: 0px; word-break: break-all; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;<span style="font-family: Consolas;">test03-data</span>&quot;</span></div><div><span style="font-size: 10pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">       node.master</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span><span style="font-size: 10pt; color: rgb(79, 79, 79);"> </span><span style="font-size: 10pt; font-variant-ligatures: common-ligatures;"><font color="#009900" face="Consolas, Inconsolata, Courier, monospace">false</font></span></div><div><span style="font-size: 10pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">       node.data</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span><span style="font-size: 10pt; color: rgb(79, 79, 79);"> </span><span style="font-size: 10pt; font-variant-ligatures: common-ligatures;"><font color="#009900" face="Consolas, Inconsolata, Courier, monospace">true</font></span></div><div><span style="font-size: 10pt; outline: 0px; box-sizing: border-box; word-break: break-all; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">       network.host</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">:</span><span style="font-size: 10pt; color: rgb(79, 79, 79);"> <span style="font-family: Consolas; color: rgb(0, 153, 0);">10.0.15.2</span></span></div></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">7、创建用户</span></span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    +++注意:三台机器都要创建+++</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    root用户无法启动es,必须新建一个其他用户,并对其赋予es目录的操作权限 ，这里我新建了es用户和组</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">    创建组</span></font></div></div><blockquote style="font-size: 14px; box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="font-size: 14px; box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">grupadd es</span></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">    创建用户</span></font></div><blockquote style="font-size: 14px; box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="font-size: 14px; box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">useradd es -g es</span></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">    修改用户和组</span></div><blockquote style="font-size: 14px; box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="font-size: 14px; box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">chown -R es:es es的安装目录</span></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">    查看</span></div><div style="font-size: 16px;"><div><span style="font-size: 16px;">    <img src="/e_img/Elasticsearch集群部署_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="444"></span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="font-size: 16px;"><span style="font-size: 16px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">8、启动</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    分别运行Master，client，data节点（顺序无关）</span></div></div><blockquote style="font-size: 14px; box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="font-size: 14px; box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">./elasticsearch -d</span></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 26px;">    成功效果</span></div><div style="font-size: 16px;"><div><span style="font-size: 16px;">    <img src="/e_img/Elasticsearch集群部署_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="604"></span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    用head插件可以看到各个节点情况</span></div><div style="font-size: 16px;"><div><span style="font-size: 16px;">    <img src="/e_img/Elasticsearch集群部署_files/Image [2].png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="502"></span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="font-size: 16px;"><span style="font-size: 16px; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">9、分布式部署遇到的坑</span></div><div><font style="font-size: 10pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">    错误1</span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">：max file descriptors [65535] for elasticsearch process is too low, increase to at least [65536]</span></font></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    这个问题是无法创建本地文件,用户最大可创建文件数太小</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    解决：只需要修改创建文件的最大数目为65536就行了</span></div><div><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-style: italic; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    切换到root用户修改</span></span></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">        vim /etc/security/limits.conf</span></div></blockquote><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">root</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">soft</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">nofile</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">65536</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">root hard nofile</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">65536</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">*</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">soft</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">nofile</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">65536</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">* hard nofile</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">65536</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">保存、退出、重新登录才可生效</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    参数解释：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    - soft nproc:可打开的文件描述符的最大数(软限制)</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    - hard nproc:可打开的文件描述符的最大数(硬限制)</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    - soft nofile:单个用户可用的最大进程数量(软限制)</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    - hard nofile:单个用户可用的最大进程数量(硬限制)</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><font style="font-size: 10pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">    错误2</span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">：max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span></font></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    虚拟内存太小</span></div><div><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-style: italic; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    切换到root用户修改</span></span></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">        vim /etc/sysctl.conf</span></div></blockquote><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><font style="font-size: 10pt;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">vm.max_map_count</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">=</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">262144</span></font></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    执行命令：</span></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">        sudo sysctl -p</span></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">    </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">错误3</span></span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">：</span><span style="font-size: 9pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x0000000085330000, 2060255232, 0) failed; error=’Cannot allocate memory’ (errno=12)</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    jvm需要分配的内存太大</span></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">        vim config/jvm.options</span></div></blockquote><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">Xms2g</span></span></font></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">Xmx2g</span></span></font></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">该为：</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">Xms100m</span></span></font></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">Xmx100m</span></span></font></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><font style="font-size: 10pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">    错误4</span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">：max number of threads [1024] for user [es] likely too low, increase to at least [2048]</span></font></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    原因：无法创建本地线程问题,用户最大可创建线程数太小</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    解决方案：切换到root用户，进入limits.d目录下，修改90-nproc.conf 配置文件</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    成功启动：</span></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">        vi /etc/security/limits.d/90-nproc.conf</span></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    找到如下内容：</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    * soft nproc 1024</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    修改为</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    * soft nproc 2048</span></div><div><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">    </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">错误5</span></span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">：</span><span style="font-size: 9pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">n ERROR No log4j2 configuration file found. Using default configuration: logging only errors to the console. Set system property ‘log4j2.debug‘ to show Log4j2 internal initialization logging.</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    es用</span></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">    yum install -y log4j*</span></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">    </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">错误6</span></span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">：</span><span style="font-size: 9pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">unknown setting [discovery.zen.ping.multicast.enabled] please check that any required plugins are installed, or check the breaking changes documentation for removed settings</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    在elasticsearch.yml文件中 添加bootstrap.system_call_filter: false</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">    </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">错误7</span></span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">：</span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">三节点不能联通的：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">原因：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    1）各节点的hostname没有正确设置，和节点名称设置为一致。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    2）关闭防火墙，service iptables stop；否则，打开防火墙会导致无法正常通信，head插件不能看到节点数据信息</span><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">。</span></div></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> 数据存储 </category>
          
          <category> ELKB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELKB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ELK+filebeat系统搭建(下载和配置)</title>
      <link href="/2018/10/03/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/ELK+filebeat%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%EF%BC%88%E4%B8%8B%E8%BD%BD%E5%92%8C%E9%85%8D%E7%BD%AE%EF%BC%89/"/>
      <url>/2018/10/03/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/ELK+filebeat%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%EF%BC%88%E4%B8%8B%E8%BD%BD%E5%92%8C%E9%85%8D%E7%BD%AE%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div style="outline: 0px; box-sizing: border-box; text-size-adjust: 100%; -webkit-font-smoothing: antialiased;"><div style="box-sizing: inherit; outline: 0px; background-color: rgb(245, 246, 247); -webkit-font-smoothing: antialiased;"><div style="outline: 0px; box-sizing: border-box;"><div style="box-sizing: inherit; outline: 0px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;"><div style="box-sizing: inherit; outline: 0px; padding: 16px 0px 0px; margin: 0px; border-bottom: 1px solid rgb(224, 224, 224); z-index: 9; background-color: rgb(255, 255, 255);"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px 0px 8px;"><div style="font-size: 14px;"><div><span style="min-width: 100%; position: relative;"><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">系统环境</span></span></span></div></div></div></div></div><div style="box-sizing: inherit; outline: 0px; position: relative; padding-top: 16px;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-break: break-all;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">System：centos 7</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">Java ： jdk 1.8.0_144</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">Elasticsearch： 6.1.1</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">Kibana： 6.1.1</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">Logstash： 6.1.1</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">Filebeat： 6.1.1</span></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 30px;">软件介绍</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="font-size: 16px;"><span style="font-size: 16px;"><img src="/e_img/ELK+filebeat系统搭建（下载和配置）_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="415"></span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">ELK是Elasticsearch、Logstrash和Kibana这三个软件的首字母的缩写，它们代表的是一套成熟的日志管理系统:</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">Logstrash作为数据收集引擎。它支持动态的从各种数据源搜集数据，并对数据进行过滤、分析、丰富、统一格式等操作，然后存储到用户指定的位置,一般会发送给Elasticsearch;</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">Elasticsearch是个分布式搜索和分析引擎，优点是能对大容量的数据进行接近实时的存储、搜索和分析操作;</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">Kibana对Elasticsearch的分析搜索做出可视化的界面展示。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">Filebeat，它的作用是在客户端收集和传输日志，基于 Logstash-Forwarder 源代码开发，是对它的替代.</span></div><div><span style="color: rgb(79, 79, 79);">tips： Logstash 的运行依赖于 Java 运行环境， Logstash 1.5 以上版本不低于 java 7 推荐使用最新版本的 Java 。由于我们只是运行 Java 程序，而不是开发，下载 JRE 即可。首先，在 Oracle 官方下载新版 jre ，下载地址： http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html</span></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 14pt;">安装过程</span></h3><div><font color="#464646" style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(70, 70, 70); font-weight: bold;">Java开发环境</span></font></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(70, 70, 70); font-weight: bold;">        1）</span><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: bold; line-height: 1.5;">下载jdk-8u131-linux-x64.tar，上传至CentOS上。</span></font></div><div><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: bold; line-height: 1.5;">    </span><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: bold; line-height: 1.5;">       </span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 1.5;">下载地址：</span><a href="http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html" style="font-size: 9pt;" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html</a>   （该链接为jre的链接）</div><div><font style="font-size: 10pt;"><span style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: bold; line-height: 1.5;">        2）</span> <span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: Lato; font-weight: bold; line-height: 1.5;">解压源码包</span></span></font></div><div><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: Lato; font-weight: bold; line-height: 1.5;">            </span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">#</span> <span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">mkdir -pv /usr/</span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">local</span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">/java</span></div><div><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">      #</span> <span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">tar -zxvf</span> <span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">jdk-8u131-linux-x64.tar.gz -C /usr/</span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">local</span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">/java</span></div><div><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">   </span><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: bold; line-height: 1.5;"> 3） 设置JDK环境变量</span></div><div><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: bold; line-height: 1.5;">              </span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;"># </span> <span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">vi /etc/profile</span></div><div><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-weight: bold;">     </span>  <span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">#</span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-weight: bold;"> export JAVA_HOME=/usr/local/java/jdk1.8.</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;">0_111</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;">      </span> <span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;">#</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;"> export JRE_HOME</span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-weight: bold;">=\${JAVA_HOME}/</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;">jre</span></div><div><font style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;"><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;">      </span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;"># </span>export CLASSPATH</span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-weight: bold;">=\${JAVA_HOME}/lib:\${JRE_HOME}/</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;">lib</span></font></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;"><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;">      </span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-weight: bold; line-height: 1.5;"># </span>export</span> <span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;">PATH</span><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-weight: bold;">=${JAVA_HOME}/bin:$</span><span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold; line-height: 1.5;">PATH</span></div><div><span style="box-sizing: border-box; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;"><span style="font-size: 9pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">      #</span> source</span> <span style="box-sizing: border-box; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">/etc/profile</span></div><div><span style="box-sizing: border-box; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">     4<span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">） 检验是否安装成功</span></span></div><div><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">            </span> <span style="box-sizing: border-box; font-size: 9pt; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">#</span> <span style="box-sizing: border-box; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">java -version</span></div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 28px;">安装elasticsearch</span></h4><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">1）下载文件</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">            进入</span><a href="https://www.elastic.co/downloads/elasticsearch" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">elsaticsearch下载界面</a></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">            选择tar进行下载，下载完成后放入/opt下（放置位置个人喜好）</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">2）解压文件</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">            进入压缩包所在目录，解压文件。</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd /opt/svr/elasticsearch</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">tar -zxvf ./elasticsearch-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.tar</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.gz -C</span></font> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/opt/svr/elasticsearch</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">3）下载x-pack插件</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">elasticsearch-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1/bin</span></div><div><span style="font-family: Consolas;">./elasticsearch-plugin install x-pack</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">4）修改ES参数</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">            进入解压后文件夹的config目录，增加或者更改其中的配置信息</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">elasticsearch-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">vi config/elasticsearch.yml</span></div></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;"># 这里指定的是集群名称，需要修改为对应的，开启了自发现功能后，ES会按照此集群名称进行集群发现</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">cluster.name: morty</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">node.name: Rick</span></div></div><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;"># 数据目录</span></div><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">path.data: /data/elk/data</span></div><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;"># log 目录</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">path.logs: /data/elk/logs</span></div></div><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;"># 修改一下ES的监听地址，这样别的机器也可以访问</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">vnetwork.host: 0.0.0.0</span></div></div><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;"># 默认的端口号</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">http.port: 9200</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;"># 填写你要监视的地址，可以是多个</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">discovery.zen.ping.unicast.hosts: [“172.18.5.111”, “172.18.5.112”]</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;"># discovery.zen.minimum_master_nodes: 3</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;"># enable cors，保证_site类的插件可以访问es</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">http.cors.enabled: true</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">http.cors.allow-origin: “*”</span></div></div><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;"># Centos6不支持SecComp，而ES5.2.0默认bootstrap.system_call_filter为true进行检测，所以导致检测失败，失败后直接导致ES不能启动。</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">bootstrap.memory_lock: false</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">bootstrap.system_call_filter: false</span></div></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt;">        </span><span style="text-indent: 0px; font-size: 10pt; color: rgb(0, 0, 0); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: bold; line-height: 1.7;">tips：</span></div><blockquote style="margin: 10px 0px; background: none; border: 2px solid rgb(239, 239, 239); padding: 5px 10px; min-height: 35px;"><div style="padding: 0px; margin: 10px auto; text-indent: 0px;"><span style="text-indent: 0px;"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 1.6em;">单个节点可以作为一个运行中的Elasticsearch的实例。而一个集群是一组拥有相同cluster.name的节点，（单独的节点也可以组成一个集群）可以在elasticsearch.yml配置文件中修改cluster.name,该节点启动时加载（需要重启服务后才会生效）。</span></span></div></blockquote><div><span style="font-size: 10pt;">        5</span><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">）修改系统参数</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">      </span> <span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"> 修改系统参数以确保系统有足够资源启动ES</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">        1. 设置内核资源</span></font></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="background-color: rgb(249, 242, 244); border-radius: 2px; box-sizing: border-box; outline: 0px; padding: 2px 4px; word-break: break-all;"><span style="background-color: rgb(249, 242, 244);"><span style="background-color: rgb(249, 242, 244); font-size: 10pt; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">vi /etc/sysctl.conf</span></span></span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">vm.max_map_count=655360</span></div><div><span style="background-color: rgb(249, 242, 244); border-radius: 2px; box-sizing: border-box; outline: 0px; padding: 2px 4px; word-break: break-all;"><span style="background-color: rgb(249, 242, 244);"><span style="background-color: rgb(249, 242, 244); font-size: 10pt; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">sysctl -p</span></span></span></div><div><br></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">2.设置资源参数</span></div><div><span style="background-color: rgb(249, 242, 244); border-radius: 2px; box-sizing: border-box; outline: 0px; padding: 2px 4px; word-break: break-all;"><span style="background-color: rgb(249, 242, 244); font-size: 10pt; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">vi /etc/security/limits.conf</span></span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">* soft nofile 65536</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">* hard nofile 131072</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">* soft nproc 65536</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">* hard nproc 131072</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">Tips:</span> <a href="http://blog.51cto.com/kerry/300784" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">limits.conf 配置</a></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">3.设置用户资源参数</span></div><div><span style="background-color: rgb(249, 242, 244); border-radius: 2px; box-sizing: border-box; outline: 0px; padding: 2px 4px; word-break: break-all;"><span style="background-color: rgb(249, 242, 244);"><span style="background-color: rgb(249, 242, 244); font-size: 10pt; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">vi /etc/security/limits.d/20-nproc.conf</span></span></span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">elk soft nproc 65536</span></div><div><br></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures;">4.添加启动用户，设置权限</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">启动ElasticSearch5版本要非root用户，需要新建一个用户来启动ElasticSearch</span></div></div></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">useradd elk</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#创建用户elk</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">groupadd elk</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#创建组elk useradd</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">usermod -g</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">elk</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">elk</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#将用户添加到组</span></div><div><br></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">mkdir</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-pv /data/elk/{data,logs}</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"># 创建数据和日志目录</span></div><div><br></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">chown</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-R elk:elk /data/elk/</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;"># 修改文件所有者</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 136); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">chown</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-R elk:elk /opt/svr/elasticsearch</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">6）启动</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif; line-height: 1.5;">su elk</span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">elasticsearch-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bin/elasticsearch</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-d</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(136, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">#-d 为保持后台运行</span></div><div><span style="font-size: 12px; color: rgb(163, 21, 21); font-family: &quot;Courier New&quot;, sans-serif; line-height: 1.5;">free</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif; line-height: 1.5;">-g 查看内存剩余</span></div><div><br></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">  </span> <span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">         使用</span></span><span style="background-color: rgb(249, 242, 244); border-radius: 2px; box-sizing: border-box; outline: 0px; padding: 2px 4px; word-break: break-all; font-size: 10pt; color: rgb(199, 37, 78); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">curl localhost:9200</span></font> <span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">来检查ES是否启</span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">动成功：</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">            备注: 客户端需要先关闭防火墙  </span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 1.5;">systemctl</span> <span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 1.5;">stop</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 1.5;">firewalld.service</span></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">{</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“name” : “morty”,</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“cluster_name” : “Rick”,</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“cluster_uuid” : “4RlZck7ERWGbQKNn5KvXGA”,</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“version” : {</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“number” : “6.1.1”,</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“build_hash” : “bd92e7f”,</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“build_date” : “2017-12-17T20:23:25.338Z”,</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“build_snapshot” : false,</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“lucene_version” : “7.1.0”,</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“minimum_wire_compatibility_version” : “5.6.0”,</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“minimum_index_compatibility_version” : “5.0.0”</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">},</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">“tagline” : “You Know, for Search”</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">}</span></div></div></blockquote><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 28px;">安装Elasticsearch-head</span></h4><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;">      </span> <span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;"> 1）下载文件</span></h4><div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;">            下载地址: </span><a href="https://github.com/mobz/elasticsearch-head" style="font-size: 10pt; color: rgb(70, 70, 70); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;" target="_blank" rel="noopener">https://github.com/mobz/elasticsearch-head</a></font></h4><div><h4><span style="font-size: 10pt; font-weight: normal;">            unzip elasticsearch-head-master.zip</span></h4><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;">        2）下载node-js</span></h4><div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;">            </span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">curl --silent --location</span> <a href="https://rpm.nodesource.com/setup" style="font-size: 10pt; font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;" target="_blank" rel="noopener">https://rpm.nodesource.com/setup</a> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">| bash -</span></h4><div><h4><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">      </span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">yum install -y nodejs</span></font></h4><div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">    3<span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;">）下载<span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">grunt（</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;">由于head 插件的执行文件是有grunt 命令来执行的，所以这个命令必须安装</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">）</span></span></span></font></h4><div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">      </span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;"># npm install grunt --save-dev</span></font></h4><div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: &quot;Courier New&quot;; font-weight: normal;">    </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: &quot;Courier New&quot;; font-weight: normal;">  </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: &quot;Courier New&quot;; font-weight: normal;"># cd elasticsearch-head-master</span></font></h4><div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: &quot;Courier New&quot;; font-weight: normal;">    </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: &quot;Courier New&quot;; font-weight: normal;">  </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: &quot;Courier New&quot;; font-weight: normal;"># npm install</span></font></h4><div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">   </span> <span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">4</span><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 26px;">）修改配置文件</span></h4><div><h4><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; line-height: 22px;"> </span><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: &quot;Courier New&quot;; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 22px;">     </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(70, 70, 70); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 1.57143;"> </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 1.57143;">进入elasticsearch-head-master 文件夹下</span><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; font-variant-ligatures: common-ligatures; font-weight: normal; line-height: 1.57143;">，执行命令vi Gruntfile.js文件：增加hostname属性，设置为*,</span></span></h4></div></div></div></div></div></div></div></div></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 10pt; color: rgb(70, 70, 70); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.57143;">              修改启动端口,默认为9100</span></span></div><div><span style="font-size: 10pt; color: rgb(70, 70, 70);">            <img src="/e_img/ELK+filebeat系统搭建（下载和配置）_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-weight: bold; font-family:" width="363"></span></div><div><span style="font-size: 10pt; color: rgb(70, 70, 70);">        5）启动elasticsearch-head</span></div><div><span style="font-size: 10pt; color: rgb(70, 70, 70);">            <img src="/e_img/ELK+filebeat系统搭建（下载和配置）_files/Image [2].png" type="image/png" data-filename="Image.png" style="color: rgb(70, 70, 70);" width="595"></span></div><div><span style="font-size: 10pt; color: rgb(70, 70, 70);">        6）查看启动状态( </span><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;">浏览器访问</span> <a href="http://ip/" style="font-size: 10pt; font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;" target="_blank" rel="noopener">http://ip</a><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;">地址:9100/ </span><span style="font-size: 10pt; color: rgb(70, 70, 70);">)</span></div><div><span style="font-size: 10pt; color: rgb(70, 70, 70);">            </span><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;">如果出现集群健康值: 未连接的状态，是因为没有配置ElasticSearch的跨域访问，默认是禁止的，所以链接失败。</span></div><div><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;">    </span><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;">         解决方法:</span><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;"> </span><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;">需要修改elasticsearch配置文件；命令进入到elasticsearch-5.6.5 /config 文件中 elasticsearch.yml，添加</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;">             <img src="/e_img/ELK+filebeat系统搭建（下载和配置）_files/Image [3].png" type="image/png" data-filename="Image.png" style="font-family: Helvetica Neue; color: rgb(51, 51, 51);" width="212"></span></font></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; line-height: 1.57143;">             保存之后重启elasticsearch和head即可</span></font><span style="color: rgb(70, 70, 70);">   </span></div></div></div></div></div></div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 28px;">安装kibana</span></h4><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">1）下载文件</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(45, 79, 201); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    进入</span><a href="https://www.elastic.co/downloads/kibana" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(45, 79, 201); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">kibana下载界面</a></font></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    选择tar进行下载，下载完成后放入/opt/elk下（放置位置个人喜好）</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">2）解压文件</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    进入压缩包所在目录，解压文件。</span></div></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd /opt/svr/kibana</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">tar</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-zxvf</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/kibana</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-linux</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-x86_64</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">tar</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gz -C</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/opt/svr/kibana</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">3）配置kibana</span></div><div><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">    进入config目录下，修改kibana.yml文件</span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd kibana</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-linux</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-x86_64</span></font></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">vi config/kibana</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">yml</span></font></div></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">server.port: 5601 #开启默认端口5601速冻</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">server.host: “192.168.91.129” #站点地址</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">elasticsearch.url:</span> <a href="http://192.168.91.129:9200/" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px; text-decoration: none; text-decoration-skip: ink;" target="_blank">http://192.168.91.129:9200</a> <span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">#指向&gt;elasticsearch服务的ip地址</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">kibana.index: “.kibana”</span></div></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">4）启动kibana</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bin/kibana</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">  </span> <span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">         启动成功后访问浏览器访问地址</span></span><font style="font-size: 10pt;"><a href="http://192.168.91.129:9200/" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(70, 70, 70); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">http://192.168.91.129:9200</a><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">见到如下即表示启动成功</span></font></div><div style="font-size: 16px;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">        <img src="/e_img/ELK+filebeat系统搭建（下载和配置）_files/Image [4].png" type="image/png" data-filename="Image.png" style="font-size: 12pt; color: rgb(79, 79, 79);" width="716"></span></div></div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 28px;">安装logstash</span></h4><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">1）下载文件</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    </span><span style="font-size: 10pt; color: rgb(20, 113, 145); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">进入</span><a href="https://www.elastic.co/downloads/logstash" style="background-color: transparent; font-size: 10pt; color: rgb(20, 113, 145); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank" rel="noopener">logstrash下载界面</a></font></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    选择tar进行下载，下载完成后放入/opt/elk下（放置位置个人喜好）</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">2）解压文件</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">进入压缩包所在目录，解压文件。</span></div></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd /opt/svr/logstash</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">tar -zxvf ./logstrash-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.tar</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 153, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.gz -C</span></font> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/opt/svr/logstash</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">3）创建配置文件</span></div><div><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">进入解压后文件夹的config目录，新增测试配置文件：</span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/opt/svr/logstash/logstash-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/config/</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">vi logstrash-test.conf</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div><img src="/e_img/ELK+filebeat系统搭建（下载和配置）_files/Image [5].png" type="image/png" data-filename="Image.png" style="font-family: Lato;" width="346"></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.7;">Logstash 使用 input 和 output 定义收集日志时的输入和输出的相关配置</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 14px; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">4</span><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">）启动服务</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bin/logstash</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-f</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">config/logstash</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-simple</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">conf</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    </span><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    执行这个语句可能会报错：</span></font></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">[FATAL][logstash.runner] Logstash could not be started because there is already another instance using the configured data directory. If you wish to run multiple instances, you must change the “path.data” setting.</span></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">这是因为当前的logstash版本不支持多个instance共享一个path.data，所以需要在启动时，命令行里增加”–path.data PATH “，为不同实例指定不同的路径</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bin/logstash</span> <span style="outline: 0px; word-break: break-all; font-size: 10pt; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-f</span> <span style="font-size: 10pt; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">config/logstash</span><span style="outline: 0px; word-break: break-all; font-size: 10pt; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-simple</span><span style="outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">conf</span> <span style="outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">--</span><span style="font-size: 10pt; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">path</span><span style="outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">data</span> <span style="outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/logs</span><span style="outline: 0px; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/</span></div></div></div><h4 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 28px;">安装filebeat</span></h4><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">1）下载文件</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">        </span><span style="font-size: 10pt; color: rgb(20, 113, 145); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">进入</span><a href="https://www.elastic.co/downloads/beats/filebeat" rel="nofollow" style="outline: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(20, 113, 145); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px; text-decoration: none; text-decoration-skip: ink;" target="_blank">filebeat下载界面</a></font></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">        选择Liunx-64x包进行下载，下载完成后放入需要检测的服务器上的任一目录下（放置位置个人喜好）</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">2）解压文件</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">        进入压缩包所在目录，解压文件。</span></div></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd /opt/svr/filebeat</span></div><div><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">tar</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-zxvf</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/filebeat</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-linux</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-x86_64</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">tar</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">gz -C</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">/opt/svr/filebeat</span></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><div><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">3）修改配置文件</span></div><div><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">进入解压后文件夹的config目录，新增测试配置文件：</span></div></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">cd filebeat</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">6.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 102, 102); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.1</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-linux</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-x86_64</span></font></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">vi filebeat</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">yml</span></font></div></div></div><blockquote style="box-sizing: border-box; outline: 0px; margin: 0px 0px 24px; padding: 16px; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-wrap: normal; word-break: break-all;"><div style="box-sizing: border-box; padding: 0px; outline: 0px; margin: 0px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">paths:</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">- /opt/logs/filebeat.log #监控的日志文件</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">————–Elasticsearch output——————-</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">(</span><strong style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 10pt; font-weight: 700; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-style: italic; font-variant-ligatures: common-ligatures; line-height: 22px;">全部注释掉</span></strong><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">)</span></font></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">—————-Logstash output———————</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">output.logstash:</span></div><div><span style="font-size: 10pt; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">hosts: [“182.119.137.177:5044”] #你的logstash端口</span></div></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all;"><span style="font-size: 10pt; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">4）启动服务</span></div><div style="overflow-x: auto; box-sizing: border-box; outline: 0px; overflow-y: hidden; position: relative; word-break: break-all; margin: 0px 0px 24px; padding: 8px 16px 6px 56px; background-color: rgb(246, 248, 250); border: none;"><div style="box-sizing: border-box; outline: 0px; overflow-x: auto; border-radius: 4px; word-wrap: normal; white-space: pre; text-size-adjust: none; word-break: break-all; background-color: rgb(246, 248, 250); padding: 0px;"><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">bin/filebeat</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-e</span> <span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">-c</span> <span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">config/filebeat</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(79, 79, 79); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">.</span><span style="font-size: 10pt; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-variant-ligatures: common-ligatures; line-height: 22px;">yml</span></div></div></div></div></div></div></div></div></div><div><span style="text-indent: 0px;"><span style="font-size: 12pt; color: rgb(0, 0, 0); font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: bold; line-height: 1.7;">更多ELK资料：</span></span></div><ol style="margin: 0px; padding: 0px; padding-left: 40px;"><li style="margin:0px;padding:0px;list-style:none;margin-bottom:1em;list-style-type:decimal;"><div><a href="http://www.cnblogs.com/xing901022/p/4704319.html" style="font-size: 10pt; color: black; font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 1.7; text-decoration: underline;" target="_blank" rel="noopener">Elasticsearch+Logstash+Kibana教程</a></div></li><li style="margin:0px;padding:0px;list-style:none;margin-bottom:1em;list-style-type:decimal;"><div><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" style="font-size: 10pt; color: black; font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 1.7; text-decoration: underline;" target="_blank" rel="noopener">Elasticsearch 官方文档参考</a></div></li><li style="margin:0px;padding:0px;list-style:none;margin-bottom:1em;list-style-type:decimal;"><div><a href="https://www.elastic.co/guide/en/logstash/current/index.html" style="font-size: 10pt; color: black; font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 1.7; text-decoration: underline;" target="_blank" rel="noopener">Logstash 官方文档参考</a></div></li><li style="margin:0px;padding:0px;list-style:none;margin-bottom:1em;list-style-type:decimal;"><div><a href="https://www.elastic.co/guide/en/kibana/current/index.html" style="font-size: 10pt; color: black; font-family: Lato, &quot;Open Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 1.7; text-decoration: underline;" target="_blank" rel="noopener">Kibana User Guide 官方文档参考</a></div></li></ol></div><div><a href="/e_img/ELK+filebeat系统搭建（下载和配置）_files/logstash_config.zip"><img src="/e_img/ELK+filebeat系统搭建（下载和配置）_files/ee762144581469ab8712624043e3432e.png" alt="logstash_config.zip"></a></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> 数据存储 </category>
          
          <category> ELKB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELKB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Elasticsearch&amp;ELK介绍</title>
      <link href="/2018/10/02/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Elasticsearch&amp;ELK%E4%BB%8B%E7%BB%8D/"/>
      <url>/2018/10/02/13.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ELKB/Elasticsearch&amp;ELK%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="box-sizing: inherit; outline: 0px; background: url(&quot;https://csdnimg.cn/release/phoenix/themes/skin-yellow/images/bg.png&quot;) repeat; -webkit-font-smoothing: antialiased;"><div style="outline: 0px; box-sizing: border-box;"><div style="box-sizing: inherit; outline: 0px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;"><div style="box-sizing: inherit; outline: 0px; padding: 16px 0px 0px; margin: 0px; border-bottom: 1px solid rgb(224, 224, 224); z-index: 9; background-color: rgb(255, 255, 255);"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px 0px 8px;"><div><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold;">（1）思考：大规模数据如何检索？</span></div></div></div></div><div style="box-sizing: inherit; outline: 0px; position: relative; padding-top: 16px;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-break: break-all;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">如：当系统数据量上了10亿、100亿条的时候，我们在做系统架构的时候通常会从以下角度去考虑问题：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）用什么数据库好？(mysql、sybase、oracle、达梦、神通、mongodb、hbase…)</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）如何解决单点故障；(lvs、F5、A10、Zookeep、MQ)</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）如何保证数据安全性；(热备、冷备、异地多活)</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">4）如何解决检索难题；(数据库代理中间件：mysql-proxy、Cobar、MaxScale等;)</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">5）如何解决统计分析问题；(离线、近实时)</span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">（2）传统数据库的应对解决方案</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">对于关系型数据，我们通常采用以下或类似架构去解决查询瓶颈和写入瓶颈：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">解决要点：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）通过主从备份解决数据安全性问题；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）通过数据库代理中间件心跳监测，解决单点故障问题；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）通过代理中间件将查询语句分发到各个slave节点进行查询，并汇总结果</span></div><div style="font-size: 16px;"><span style="font-size: 16px;"><img src="/e_img/Elasticsearch、ELK介绍_files/20160818205837877" type="image/png" data-filename="20160818205837877"></span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">（3）非关系型数据库的解决方案</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">对于Nosql数据库，以mongodb为例，其它原理类似：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">解决要点：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）通过副本备份保证数据安全性；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）通过节点竞选机制解决单点问题；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）先从配置库检索分片信息，然后将请求分发到各个节点，最后由路由节点合并汇总结果</span></div><div style="font-size: 16px;"><span style="font-size: 16px;"><img src="/e_img/Elasticsearch、ELK介绍_files/20160818205852190" type="image/png" data-filename="20160818205852190"></span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">另辟蹊径——完全把数据放入内存怎么样？</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">我们知道，完全把数据放在内存中是不可靠的，实际上也不太现实，当我们的数据达到PB级别时，按照每个节点96G内存计算，在内存完全装满的数据情况下，我们需要的机器是：1PB=1024T=1048576G</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">节点数=1048576/96=10922个</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">实际上，考虑到数据备份，节点数往往在2.5万台左右。成本巨大决定了其不现实！</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">从前面讨论我们了解到，把数据放在内存也好，不放在内存也好，都不能完完全全解决问题。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">全部放在内存速度问题是解决了，但成本问题上来了。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">为解决以上问题，从源头着手分析，通常会从以下方式来寻找方法：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1、存储数据时按有序存储；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2、将数据和索引分离；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3、压缩数据；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">这就引出了Elasticsearch。</span></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 36px;">1. ES 基础一网打尽</span></span></h1><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">1.1 ES定义</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">ES=elaticsearch简写， Elasticsearch是一个开源的高扩展的分布式全文检索引擎，它可以近乎实时的存储、检索数据；本身扩展性很好，可以扩展到上百台服务器，处理PB级别的数据。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">Elasticsearch也使用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的RESTful API来隐藏Lucene的复杂性，从而让全文搜索变得简单。</span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">1.2 Lucene与ES关系？</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）Lucene只是一个库。想要使用它，你必须使用Java来作为开发语言并将其直接集成到你的应用中，更糟糕的是，Lucene非常复杂，你需要深入了解检索的相关知识来理解它是如何工作的。</span></span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）Elasticsearch也使用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的RESTful API来隐藏Lucene的复杂性，从而让全文搜索变得简单。</span></span></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">1.3 ES主要解决问题：</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）检索相关数据；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）返回统计结果；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）速度要快。</span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">1.4 ES工作原理</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">当ElasticSearch的节点启动后，它会利用多播(multicast)(或者单播，如果用户更改了配置)寻找集群中的其它节点，并与之建立连接。这个过程如下图所示：</span></div><div style="font-size: 16px;"><span style="font-size: 16px;"><img src="/e_img/Elasticsearch、ELK介绍_files/20160818205953345" type="image/png" data-filename="20160818205953345"></span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">1.5 ES核心概念</span></span></h2><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">1）Cluster：集群。</span></span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">ES可以作为一个独立的单个搜索服务器。不过，为了处理大型数据集，实现容错和高可用性，ES可以运行在许多互相合作的服务器上。这些服务器的集合称为集群。</span></span></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">2）Node：节点。</span></span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">形成集群的每个服务器称为节点。</span></span></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all; text-align: justify;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">3）Index：索引。</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="color: rgb(79, 79, 79);">index是一系列document 的集合。比方说我们可以有一个index叫做 customer data，另外一个叫做product catalog，还有一个叫做 order data。一个index被一个唯一的小写字母名字标记。这个名字将会影响里面数据的查询，更新操作</span></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all; text-align: justify;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">2）Type：分组。</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="color: rgb(79, 79, 79);">在一个Index中，我们可以定义很多的type。一个type是一个逻辑分组。大多书情况下，同一个type中的数据会有相同的数据结构。</span></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all; text-align: justify;"><span style="font-size: 11pt; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">4）</span> <span style="font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">Document</span> <span style="font-size: 11pt; box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">：记录。</span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="color: rgb(79, 79, 79);">一个Document是一个可以被索引的基本单元。</span></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">3）Shard：分片。</span></span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">当有大量的文档时，由于内存的限制、磁盘处理能力不足、无法足够快的响应客户端的请求等，一个节点可能不够。这种情况下，数据可以分为较小的分片。每个分片放到不同的服务器上。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">当你查询的索引分布在多个分片上时，ES会把查询发送给每个相关的分片，并将结果组合在一起，而应用程序并不知道分片的存在。即：这个过程对用户来说是透明的。</span></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">4）Replia：副本。</span></span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">为提高查询吞吐量或实现高可用性，可以使用分片副本。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">副本是一个分片的精确复制，每个分片可以有零个或多个副本。ES中可以有许多相同的分片，其中之一被选择更改索引操作，这种特殊的分片称为主分片。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">当主分片丢失时，如：该分片所在的数据不可用时，集群将副本提升为新的主分片。</span></div></div><h3 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 30px;">5）全文检索。</span></span></h3><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">全文检索就是对一篇文章进行索引，可以根据关键字搜索，类似于mysql里的like语句。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">全文索引就是把内容根据词的意义进行分词，然后分别创建索引，例如”你们的激情是因为什么事情来的” 可能会被分词成：“你们“，”激情“，“什么事情“，”来“ 等token，这样当你搜索“你们” 或者 “激情” 都会把这句搜出来。</span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">1.6 ES数据架构的主要概念（与关系数据库Mysql对比）</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div style="font-size: 16px;"><span style="font-size: 16px;"><img src="/e_img/Elasticsearch、ELK介绍_files/20160818210034345" type="image/png" data-filename="20160818210034345"></span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">（1）关系型数据库中的数据库（DataBase），等价于ES中的索引（Index）</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">（2）一个数据库下面有N张表（Table），等价于1个索引Index下面有N多类型（Type），</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">（3）一个数据库表（Table）下的数据由多行（ROW）多列（column，属性）组成，等价于1个Type由多个文档（Document）和多Field组成。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">（4）在一个关系型数据库里面，schema定义了表、每个表的字段，还有表和字段之间的关系。 与之对应的，在ES中：Mapping定义索引下的Type的字段处理规则，即索引如何建立、索引类型、是否保存原始索引JSON文档、是否压缩原始JSON文档、是否需要分词处理、如何进行分词处理等。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">（5）在数据库中的增insert、删delete、改update、查search操作等价于ES中的增PUT/POST、删Delete、改_update、查GET.</span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">1.7 ELK是什么？</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">ELK=elasticsearch+Logstash+kibana</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">ELK是三个开源软件的缩写，分别表示：Elasticsearch , Logstash, Kibana , 它们都是开源软件。新增了一个FileBeat，它是一个轻量级的日志收集处理工具(Agent)，Fi</span><span style="font-size: 9pt; color: rgb(79, 79, 79);">lebeat占用资源少，适合于在各个服务器上搜集日志后传输给Logstash，官方也推荐此工具。</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">Elasticsearch： 是个开源分布式搜索引擎，提供搜集、分析、存储数据三大功能。它的特点有：分布式，零配置，自动发现，索引自动分片，索引副本机制，restful风格接口，多数据源，自动搜索负载等。</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">Logstash：主要是用来日志的搜集、分析、过滤日志的工具，支持大量的数据获取方式。一般工作方式为c/s架构，client端安装在需要收集日志的主机上，server端负责将收到的各节点日志进行过滤、修改等操作在一并发往elasticsearch上去。</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">Kibana： 也是一个开源和免费的工具，Kibana可以为 Logstash 和 ElasticSearch 提供的日志分析友好的 Web 界面，可以帮助汇总、分析和搜索重要数据日志。</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">Filebeat：隶属于Beats。目前Beats包含四种工具：</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">1. Packetbeat（搜集网络流量数据）</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">2. Topbeat（搜集系统、进程和文件系统级别的 CPU 和内存使用情况等数据）</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">3. Filebeat（搜集文件数据）</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">4. Winlogbeat（搜集 Windows 事件日志数据）</span></div><div><br></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79);">ELK架构图</span></div><div><span style="font-size: 9pt;">架构图1）</span></div><div><span style="font-size: 13.3333px; color: rgb(79, 79, 79);"><img src="/e_img/Elasticsearch、ELK介绍_files/Image.png" type="image/png" data-filename="Image.png" style="color: rgb(79, 79, 79);" width="364"></span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">这是最简单的一种ELK架构方式。优点是搭建简单，易于上手。缺点是Logstash耗资源较大，运行占用CPU和内存高。另外没有消息队列缓存，存在数据丢失隐患。</span></div><div><span style="font-size: 9pt; color: rgb(79, 79, 79);">此架构由Logstash分布于各个节点上搜集相关日志、数据，并经过分析、过滤后发送给远端服务器上的Elasticsearch进行存储。Elasticsearch将数据以分片的形式压缩存储并提供多种API供用户查询，操作。用户亦可以更直观的通过配置Kibana Web方便的对日志查询，并根据数据生成报表。</span></div><div><span style="font-size: 12px; color: rgb(79, 79, 79);">架构图2）</span></div><div><img src="/e_img/Elasticsearch、ELK介绍_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-size: 9pt; color: rgb(79, 79, 79);" width="540"></div><div><span style="font-size: 9pt;">此种架构引入了消息队列机制，位于各个节点上的Logstash Agent先将数据/日志传递给Kafka（或者Redis），并将队列中消息或数据间接传递给Logstash，Logstash过滤、分析后将数据传递给Elasticsearch存储。最后由Kibana将日志和数据呈现给用户。因为引入了Kafka（或者Redis）,所以即使远端Logstash server因故障停止运行，数据将会先被存储下来，从而避免数据丢失。</span></div><div><span style="font-size: 9pt;">架构图3）</span></div><div><img src="/e_img/Elasticsearch、ELK介绍_files/Image [2].png" type="image/png" data-filename="Image.png" width="466"></div><div><span style="font-size: 9pt;">此种架构将收集端logstash替换为beats，更灵活，消耗资源更少，扩展性更强。同时可配置Logstash 和Elasticsearch 集群用于支持大集群系统的运维日志数据监控和查询。</span></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 36px;">2. ES特点和优势</span></span></h1><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）分布式实时文件存储，可将每一个字段存入索引，使其可以被检索到。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）实时分析的分布式搜索引擎。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">分布式：索引分拆成多个分片，每个分片可有零个或多个副本。集群中的每个数据节点都可承载一个或多个分片，并且协调和处理各种操作；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">负载再平衡和路由在大多数情况下自动完成。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）可以扩展到上百台服务器，处理PB级别的结构化或非结构化数据。也可以运行在单台PC上（已测试）</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">4）支持插件机制，分词插件、同步插件、Hadoop插件、可视化插件等。</span></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 36px;">3、ES性能</span></span></h1><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">3.1 性能结果展示</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">（1）硬件配置：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">CPU 16核 AuthenticAMD</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">内存 总量：32GB</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">硬盘 总量：500GB 非SSD</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">（2）在上述硬件指标的基础上测试性能如下：</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）平均索引吞吐量： 12307docs/s（每个文档大小：40B/docs）</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）平均CPU使用率： 887.7%（16核，平均每核：55.48%）</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）构建索引大小： 3.30111 GB</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">4）总写入量： 20.2123 GB</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">5）测试总耗时： 28m 54s.</span></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 36px;">4、为什么要用ES？</span></span></h1><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">4.1 ES国内外使用优秀案例</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1） 2013年初，GitHub抛弃了Solr，采取ElasticSearch 来做PB级的搜索。 “GitHub使用ElasticSearch搜索20TB的数据，包括13亿文件和1300亿行代码”。</span></span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures;">2）维基百科：启动以elasticsearch为基础的核心搜索架构。</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）SoundCloud：“SoundCloud使用ElasticSearch为1.8亿用户提供即时而精准的音乐搜索服务”。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">4）百度：百度目前广泛使用ElasticSearch作为文本数据分析，采集百度所有服务器上的各类指标数据及用户自定义数据，通过对各种数据进行多维分析展示，辅助定位分析实例异常或业务层面异常。目前覆盖百度内部20多个业务线（包括casio、云分析、网盟、预测、文库、直达号、钱包、风控等），单集群最大100台机器，200个ES节点，每天导入30TB+数据。</span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">4.2 我们也需要</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">实际项目开发实战中，几乎每个系统都会有一个搜索的功能，当搜索做到一定程度时，维护和扩展起来难度就会慢慢变大，所以很多公司都会把搜索单独独立出一个模块，用ElasticSearch等来实现。</span></span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">近年ElasticSearch发展迅猛，已经超越了其最初的纯搜索引擎的角色，现在已经增加了数据聚合分析（aggregation）和可视化的特性，如果你有数百万的文档需要通过关键词进行定位时，ElasticSearch肯定是最佳选择。当然，如果你的文档是JSON的，你也可以把ElasticSearch当作一种“NoSQL数据库”， 应用ElasticSearch数据聚合分析（aggregation）的特性，针对数据进行多维度的分析。</span></span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">【知乎：热酷架构师潘飞】ES在某些场景下替代传统DB</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">个人以为Elasticsearch作为内部存储来说还是不错的，效率也基本能够满足，在某些方面替代传统DB也是可以的，前提是你的业务不对操作的事性务有特殊要求；而权限管理也不用那么细，因为ES的权限这块还不完善。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">由于我们对ES的应用场景仅仅是在于对某段时间内的数据聚合操作，没有大量的单文档请求（比如通过userid来找到一个用户的文档，类似于NoSQL的应用场景），所以能否替代NoSQL还需要各位自己的测试。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">如果让我选择的话，我会尝试使用ES来替代传统的NoSQL，因为它的横向扩展机制太方便了。</span></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 36px;">5. ES的应用场景是怎样的？</span></span></h1><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">通常我们面临问题有两个：</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）新系统开发尝试使用ES作为存储和检索服务器；</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）现有系统升级需要支持全文检索服务，需要使用ES。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">以上两种架构的使用，以下链接进行详细阐述。</span></div><div><a href="http://blog.csdn.net/laoyang360/article/details/52227541" style="font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">http://blog.csdn.net/laoyang360/article/details/52227541</a></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">一线公司ES使用场景：</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）新浪ES 如何分析处理32亿条实时日志</span> <a href="http://dockone.io/article/505" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">http://dockone.io/article/505</a></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）阿里ES 构建挖财自己的日志采集和分析体系</span> <a href="http://afoo.me/columns/tec/logging-platform-spec.html" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">http://afoo.me/columns/tec/logging-platform-spec.html</a></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）有赞ES 业务日志处理</span> <a href="http://tech.youzan.com/you-zan-tong-ri-zhi-ping-tai-chu-tan/" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">http://tech.youzan.com/you-zan-tong-ri-zhi-ping-tai-chu-tan/</a></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">4）ES实现站内搜索</span> <a href="http://www.wtoutiao.com/p/13bkqiZ.html" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">http://www.wtoutiao.com/p/13bkqiZ.html</a></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 36px;">6. 如何部署ES？</span></span></h1><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">6.1 ES部署（无需安装）</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）零配置，开箱即用</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）没有繁琐的安装配置</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）java版本要求：最低1.7</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">我使用的1.8</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">[root@laoyang config_lhy]# echo $JAVA_HOME</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">/opt/jdk1.8.0_91</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">4）下载地址：</span></div><div><a href="https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/zip/elasticsearch/2.3.5/elasticsearch-2.3.5.zip" style="font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/zip/elasticsearch/2.3.5/elasticsearch-2.3.5.zip</a></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">5）启动</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">cd /usr/local/elasticsearch-2.3.5</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">./bin/elasticsearch</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">bin/elasticsearch -d(后台运行)</span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">6.2 ES必要的插件</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">必要的Head、kibana、IK（中文分词）、graph等插件的详细安装和使用。</span></div><div><a href="http://blog.csdn.net/column/details/deep-elasticsearch.html" style="font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">http://blog.csdn.net/column/details/deep-elasticsearch.html</a></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">6.3 ES windows下一键安装</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">自写bat脚本实现windows下一键安装。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">1）一键安装ES及必要插件（head、kibana、IK、logstash等）</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">2）安装后以服务形式运行ES。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">3）比自己摸索安装节省至少2小时时间，效率非常高。</span></div><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">脚本说明：</span></div><div><a href="http://blog.csdn.net/laoyang360/article/details/51900235" style="font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">http://blog.csdn.net/laoyang360/article/details/51900235</a></div></div><h1 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 36px;">7. ES对外接口（开发人员关注）</span></span></h1><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 12pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">1）JAVA API接口</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><a href="http://www.ibm.com/developerworks/library/j-use-elasticsearch-java-apps/index.html" style="font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">http://www.ibm.com/developerworks/library/j-use-elasticsearch-java-apps/index.html</a></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; word-break: break-all;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 11pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: bold; line-height: 32px;">2）RESTful API接口</span></span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; text-align: justify; word-break: break-all;"><div><span style="font-size: 10pt; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">常见的增、删、改、查操作实现：</span></div><div><a href="http://blog.csdn.net/laoyang360/article/details/51931981" style="font-size: 10pt; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px; text-decoration-skip: ink;" target="_blank" rel="noopener">http://blog.csdn.net/laoyang360/article/details/51931981</a></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> 数据存储 </category>
          
          <category> ELKB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELKB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>搭建Registry 私有库</title>
      <link href="/2018/09/17/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/%E6%90%AD%E5%BB%BARegistry%E7%A7%81%E6%9C%89%E5%BA%93/"/>
      <url>/2018/09/17/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/%E6%90%AD%E5%BB%BARegistry%E7%A7%81%E6%9C%89%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h3 id="1-关于Registry仓库"><a href="#1-关于Registry仓库" class="headerlink" title="1.关于Registry仓库"></a><strong>1.关于Registry仓库</strong></h3><p>官方的<a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker hub</a>是一个用于管理公共镜像的好地方，我们可以在上面找到我们想要的镜像，也可以把我们自己的镜像推送上去。但是，有时候，我们的使用场景需要我们拥有一个私有的镜像仓库用于管理我们自己的镜像。这个可以通过开源软件Registry来达成目的。</p><p> Registry在github上有两份代码：<a href="https://github.com/docker/docker-registry" target="_blank" rel="noopener">老代码库</a>和<a href="https://github.com/docker/distribution" target="_blank" rel="noopener">新代码库</a>。老代码是采用python编写的，存在pull和push的性能问题，出到0.9.1版本之后就标志为deprecated，不再继续开发。从2.0版本开始就到在新代码库进行开发，新代码库是采用go语言编写，修改了镜像id的生成算法、registry上镜像的保存结构，大大优化了pull和push镜像的效率。</p><p> 官方在Docker hub上提供了registry的镜像（<a href="https://hub.docker.com/_/registry/" target="_blank" rel="noopener">详情</a>），我们可以直接使用该registry镜像来构建一个容器，搭建我们自己的私有仓库服务。Tag为latest的registry镜像是0.9.1版本的，我们直接采用2.1.1版本。</p><a id="more"></a><h3 id="2-Registry的部署"><a href="#2-Registry的部署" class="headerlink" title="2.Registry的部署"></a>2.Registry的部署</h3><p><strong>运行下面命令获取registry镜像</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker pull registry:2.1.1</span><br></pre></td></tr></table></figure><p><strong>然后启动一个容器</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker run -d -v /opt/data/registry/:/var/lib/registry -p 5000:5000 --restart=always --name registry registry:2.1.1</span><br></pre></td></tr></table></figure><p><strong>验证服务是否启动成功</strong></p><p>说明我们已经启动了registry服务，打开浏览器输入<a href="http://127.0.0.1:5000/v2" target="_blank" rel="noopener">http://127.0.0.1:5000/v2</a></p><h3 id="3-验证"><a href="#3-验证" class="headerlink" title="3.验证"></a>3.验证</h3><p><strong>向仓库中push镜像</strong></p><p>现在我们通过将镜像push到registry来验证一下。我的机器上有个hello-world的镜像，我们要通过docker tag将该镜像标志为要推送到私有仓库，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker tag hello-world 127.0.0.1:5000/hello-world</span><br></pre></td></tr></table></figure><p>接下来，我们运行docker push将hello-world镜像push到我们的私有仓库中，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker push 127.0.0.1:5000/hello-world</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">The push refers to a repository [127.0.0.1:5000/hello-world] (len: 1)</span><br><span class="line"></span><br><span class="line">975b84d108f1: Image successfully pushed</span><br><span class="line"></span><br><span class="line">3f12c794407e: Image successfully pushed</span><br><span class="line"></span><br><span class="line">latest: digest: sha256:1c7adb1ac65df0bebb40cd4a84533f787148b102684b74cb27a1982967008e4b size: 2744</span><br></pre></td></tr></table></figure><p>现在我们可以查看我们本地/opt/registry目录下已经有了刚推送上来的hello-world。我们也在浏览器中输入<a href="http://127.0.0.1:5000/v2/_catalog，如下图所示，" target="_blank" rel="noopener">http://127.0.0.1:5000/v2/_catalog，如下图所示，</a></p><p><strong>从镜像库中拉取镜像</strong></p><p>现在我们可以先将我们本地的127.0.0.1:5000/hello-world和hello-world先删除掉，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker rmi hello-world</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> sudo docker rmi 127.0.0.1:5000/hello-world</span><br></pre></td></tr></table></figure><p>然后使用docker pull从我们的私有仓库中获取hello-world镜像，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker pull 127.0.0.1:5000/hello-world</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Using default tag: latest</span><br><span class="line"></span><br><span class="line">latest: Pulling from hello-world</span><br><span class="line"></span><br><span class="line">b901d36b6f2f: Pull complete</span><br><span class="line"></span><br><span class="line">0a6ba66e537a: Pull complete</span><br><span class="line"></span><br><span class="line">Digest: sha256:1c7adb1ac65df0bebb40cd4a84533f787148b102684b74cb27a1982967008e4b</span><br><span class="line"></span><br><span class="line">Status: Downloaded newer image for 127.0.0.1:5000/hello-world:latest</span><br><span class="line"></span><br><span class="line">lienhua34@lienhua34-Compaq-Presario-CQ35-Notebook-PC ~ $ sudo docker images</span><br><span class="line"></span><br><span class="line">REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE</span><br><span class="line"></span><br><span class="line">registry 2.1.1 b91f745cd233 5 days ago 220.1 MB</span><br><span class="line"></span><br><span class="line">ubuntu 14.04 a5a467fddcb8 6 days ago 187.9 MB</span><br><span class="line"></span><br><span class="line">127.0.0.1:5000/hello-world latest 0a6ba66e537a 2 weeks ago 960 B</span><br></pre></td></tr></table></figure><h3 id="4-查询镜像库"><a href="#4-查询镜像库" class="headerlink" title="4.查询镜像库"></a>4.查询镜像库</h3><p><strong>查询镜像库中的镜像</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://10.0.110.218:5000/v2/_catalog</span><br></pre></td></tr></table></figure><h3 id="5-错误排查"><a href="#5-错误排查" class="headerlink" title="5.错误排查"></a>5.错误排查</h3><p><strong>错误描述</strong></p><p>在push 到docker registry时，可能会报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The push refers to a repository [192.168.1.100:5000/registry]</span><br><span class="line"></span><br><span class="line">Get https://192.168.1.100:5000/v1/_ping: http: server gave HTTP response to HTTPS client</span><br></pre></td></tr></table></figure><p>这个问题可能是由于客户端采用https，docker registry未采用https服务所致。一种处理方式是把客户对地址“192.168.1.100:5000”请求改为http。</p><p>目前很多文章都是通过修改docker的配置文件“etc/systemconfig/docker”，重启docker来解决这个问题。但发现docker1.12.3版本并无此文件，根据网上创建此文件，并填入相应内容，重启docker无效果，仍然报此错误。</p><p> <strong>解决办法</strong></p><p>在”/etc/docker/“目录下，创建”daemon.json“文件。在文件中写入：</p><p>{ “insecure-registries”:[“192.168.1.100:5000”] }</p><p>保存退出后，重启docker。</p>]]></content>
      
      
      <categories>
          
          <category> Docker容器技术 </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Docker编排与集群部署</title>
      <link href="/2018/06/22/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/Docker%E7%BC%96%E6%8E%92%E4%B8%8E%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/"/>
      <url>/2018/06/22/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/Docker%E7%BC%96%E6%8E%92%E4%B8%8E%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Fig/Compose编排工具</span></span></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Fig/Compose的介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在生产环境中，整个团队需要发布的容器数量很可能极其庞大，而容器之间的联系和拓扑结构也可能非常复杂，往往太难升就是集群化的，并且具备高可用设计。</span></div></li><li><div><span style="font-size: 9pt;">如果依赖人工记录和配置这样的复杂容器关系，并保障集群正常运行、监控、迁移、高可用等常规运维需求，难免力不从心</span></div></li><li><div><span style="font-size: 9pt;">因此Fig/Compose就是解决这一问题的。Dockerfile可以重现一个容器，Compose可以重现容器的配置和集群</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">编排和部署</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">编排</span></font></div></li><ul><li><div><span style="font-size: 9pt;">它根据被部署的对象之间的耦合关系，以及被部署对象对环境的依赖，制定部署流程中各个动作的执行顺序，部署过程所需要的依赖文件和被部署的文件的存储位置和获取方式，以及如何验证部署成功。</span></div></li><li><div><span style="font-size: 9pt;">这些信息都会在编排工具中以制定的格式来要求运维人员定义并保存起来，从而保证这个流程能够随时在全新的环境中可靠有序的重现出来</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">部署</span></font></div></li><ul><li><div><span style="font-size: 9pt;">是指按照编排制定的内容和流程，在目标机器上执行编排制定的环境初始化，存放制定的依赖和文件，运行制定的部署动作，最终按照编排中的规则来确认部署成功</span></div></li><li><div><span style="font-size: 9pt;">在Compse的世界里，编排和部署的组合结果，就是一朵&quot;容器云&quot;</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">编排工具-Compose的使用</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Compose安装</span></font></div></li><ul><li><div><span style="font-size: 9pt;">yum -y install epel-release</span> &amp;&amp; yum -y install python-pip <span style="font-size: 9pt;">&amp;&amp; pip install docker-compose</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Compose的使用</span></font></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">Compose常用命令</span></div></li><ul><li><div><span style="font-size: 9pt;">docker-compose up   启动服务(当前目录下需要有.yml文件)</span></div></li><ul><li><div><span style="font-size: 9pt;">-d:   后台启动，默认是前台启动</span></div></li><li><div><span style="font-size: 9pt;">-f:    指定详细的docker-compose.yml文件, 默认为当前目录下的<span style="font-size: 9pt;">docker-compose.yml</span></span></div></li><li><div><span style="font-size: 9pt;">-p:   指定项目名称启动</span></div></li><li><div><span style="font-size: 9pt;">-H:  指定链接到哪一个Hoser daemon</span></div></li><li><div><span style="font-size: 9pt;">--no-recreate，不会新创建容器，如果有已经存在的容器，那么会直接启动</span></div></li></ul><li><div><span style="font-size: 12px;">docker-compose start  </span><span style="font-size: 9pt;">启动已经存在的容器作为一个服务</span></div></li><li><div><span style="font-size: 9pt;">docker-compose stop  <span style="font-size: 9pt;">停止运行的容器而不删除它们</span></span></div></li><li><div><span style="font-size: 9pt;">docker-compose restart  重启已经停止的容器</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">.yml文件的配置选项</span></div></li><ul><li><div><font style="font-size: 9pt;">build</font></div></li><ul><li><div><font style="font-size: 9pt;">指定Dockerfile路径和上下文路径，Compose 将会利用它自动构建这个镜像，然后使用这个镜像启动服务容器</font></div></li><li><div><font style="font-size: 9pt;">args为构建(build)过程中的环境变量，用于替换Dockerfile里定义的ARG参数，容器中不可用。</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image.png" type="image/png" data-filename="Image.png" width="262"></font></div></li></ul><li><div><font style="font-size: 9pt;">image</font></div></li><ul><li><div><font style="font-size: 9pt;">指定使用的镜像，本地不存在会从HUB拉取，当和build同时使用，会把生成的镜像标记为image定义的镜像名称</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [1].png" type="image/png" data-filename="Image.png" width="169"></font></div></li></ul><li><div><font style="font-size: 9pt;">command</font></div></li><ul><li><div><font style="font-size: 9pt;">容器启动后执行的命令，会覆盖默认的启动命令</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [2].png" type="image/png" data-filename="Image.png" width="303"></font></div></li></ul><li><div><font style="font-size: 9pt;">ports</font></div></li><ul><li><div><font style="font-size: 9pt;">用于暴露端口给主机, 当不指定主机映射端口时，不能供外部访问(host_ip:container_ip)</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [3].png" type="image/png" data-filename="Image.png" width="210"></font></div></li></ul><li><div><font style="font-size: 9pt;">expose</font></div></li><ul><li><div><font style="font-size: 9pt;">提供container之间端口访问, 不会暴露给主机使用.同docker run --expose</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [4].png" type="image/png" data-filename="Image.png" width="116"></font></div></li></ul><li><div><font style="font-size: 9pt;">volumes</font></div></li><ul><li><div><font style="font-size: 9pt;">挂在目录</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [5].png" type="image/png" data-filename="Image.png" width="235"></font></div></li></ul><li><div><font style="font-size: 9pt;">environment</font></div></li><ul><li><div><font style="font-size: 9pt;">添加环境变量，同docker run -e </font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [6].png" type="image/png" data-filename="Image.png" width="224"></font></div></li></ul><li><div><font style="font-size: 9pt;">depends_on</font></div></li><ul><li><div><font style="font-size: 9pt;">指定依赖，将会优先于该服务创建并启动依赖</font></div></li></ul><li><div><font style="font-size: 9pt;">extra_hosts</font></div></li><ul><li><div><font style="font-size: 9pt;">添加主机名映射</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [7].png" type="image/png" data-filename="Image.png" width="261"></font></div></li></ul><li><div><font style="font-size: 9pt;">network_mode</font></div></li><ul><li><div><font style="font-size: 9pt;">定义网络模式  同docker --net参数</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [8].png" type="image/png" data-filename="Image.png" width="290"></font></div></li></ul><li><div><font style="font-size: 9pt;">privileged</font></div></li><ul><li><div><font style="font-size: 9pt;">是否使用privileged模式</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [9].png" type="image/png" data-filename="Image.png" width="275"></font></div></li></ul><li><div><font style="font-size: 9pt;">env_file</font></div></li><ul><li><div><font style="font-size: 9pt;">指定变量的文件，默认为docker-compose文件夹下的 .env 文件.</font></div></li><li><div><font style="font-size: 9pt;">同一个变量，通过export设置，会覆盖env_file中的变量.</font></div></li><li><div><font style="font-size: 9pt;">env_file: .env</font></div></li></ul></ul></ul></ul><ul><li><div><font style="font-size: 9pt;">env_file:</font></div></li><li><div><font style="font-size: 9pt;">  - ./common.env</font></div></li><li><div><font style="font-size: 9pt;">  - ./apps/web.env</font></div></li><li><div><font style="font-size: 9pt;">  - /opt/secrets.env</font></div></li></ul><div><font style="font-size: 9pt;"><br></font></div><ul><ul><ul><li><div><font style="font-size: 9pt;">cat .env</font></div></li><li><div><font style="font-size: 9pt;"> MYSQL_DATA_DIR=/my/sql/data-dir</font></div></li></ul><li><div><font style="font-size: 9pt;">tty</font></div></li><ul><li><div><font style="font-size: 9pt;">是否给容器分配终端</font></div></li><li><div><font style="font-size: 9pt;">当想要让容器后台运行的时候，必须带该配置，不然不会分配终端，容器执完命令会自动退出</font></div></li></ul></ul><li><div><span style="font-size: 12pt; font-weight: bold;">编排.yml文件使用示例</span></div></li><ul><li><div><img src="/e_img/Docker编排与集群部署_files/Image [10].png" type="image/png" data-filename="Image.png" width="326"></div></li><li><div><span style="font-weight: bold;">networks关键字:</span></div></li><ul><li><div><span style="font-size: 9pt;">compose file中顶级networks关键字，可以用来创建更加复杂的网络拓扑，指定自定义网络驱动和选项，也可以用它来连接外部创建（非Compose创建）的网络。</span></div></li><li><div><span style="font-size: 9pt;">每个Service可通过service内部的networks关键字来指定它要使用的顶级网络。给Service指定networks的好处是，实现网络隔离或连接</span></div></li><li><div><span style="font-size: 9pt;">每个网络中的启动的容器，可以实现相互的网络通信，容器直接可以使用容器名进行通信</span></div></li></ul></ul><li><div><span style="font-size: 12pt; font-weight: bold;">使用Docker-compose进行网络通信</span></div></li><ul><li><div><span style="font-size: 10pt; font-weight: bold;">第一种方法：</span></div></li><ul><li><div>将service部署到同一个网络环境中，即可实现容器的互相通信，使用container_name即可</div></li><li><div>示例：</div></li><ul><li><div><img src="/e_img/Docker编排与集群部署_files/Image [11].png" type="image/png" data-filename="Image.png" width="408"></div></li></ul></ul><li><div><span style="font-weight: bold;">第二种方法:</span></div></li><ul><li><div>使用自定义局域网络，容器之间使用静态ip进行通信</div></li><li><div>示例：</div></li><ul><li><div><img src="/e_img/Docker编排与集群部署_files/Image [12].png" type="image/png" data-filename="Image.png" width="269"></div></li></ul></ul><li><div><span style="font-weight: bold;">第三种方法</span>：</div></li><ul><li><div><span style="font-size: 9pt;">先给每个服务指定容器的名称</span></div></li><li><div><span style="font-size: 9pt;">再在每个服务中给容器添加extra_host对应容器的映射关系</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Compose的缺点</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker-compose是面向单宿主机部署的，这是一种部署能力的欠缺，管理员需要借助成熟的自动化运维工具来管理多个目标机，将docker-compose所需要的所有资源包括配置文、用户代码交给所有的目标机，再在目标机上运行docker-compose指令</span></div></li><li><div><span style="font-size: 9pt;">docker-compose还不能提供跨宿主机的网络和存储。这意味着管理员必须部署一套类似于Open vSwich的堵路网络工具，而且管理员还需要完成继承工作。</span></div></li><li><div><span style="font-size: 9pt;">Docker官方给出了一套用Compse、Machine、Swarm联动的解决方案</span></div></li></ul></ul><div><font style="background-color: rgb(255, 250, 165);font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">集群抽象工具Swarm</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Swarm的介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Swarm的目的是将多个宿主机抽象为&quot;一台&quot;宿主机来对待</span></div></li><li><div><span style="font-size: 9pt;">Swarm在多台Docker宿主机(Docker服务端)上建立了一层抽象，可以通过操作Swarm服务端实现对宿主机的资源分配和管理</span></div></li><li><div><span style="font-size: 9pt;">Swarm通过在Docker宿主机上添加标签信息来讲宿主机资源进行细粒度分区，通过分区来帮助用户将容器部署到目标宿主机上</span></div></li><li><div><span style="font-size: 9pt;">利用Swarm可以实现控制一台Swarm Manager来控制整个Docker集群。</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [13].png" type="image/png" data-filename="Image.png" width="370"></span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Swarm集群的Agent\Manager</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Agent: Agent节点运行Docker服务端，Docker Release的版本需要保证一怔，且为1.4.0或更新的版本。</span></div></li><li><div><span style="font-size: 9pt;">Manager：Manager节点负责与所有的Agent上的Docker宿主机通信以及对外提供Docker远程API服务，因此Manager负责能获取到所有的Agent地址。当通过Docker客户端与Manager通信，执行docker run命令时，Manager会选择一个Agent来执行该命令，并执行结果返回给Docker客户端</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">创建一个Swarm集群</span></font></div></li><ul><li><div><span style="font-size: 10pt; font-weight: bold;">搭建Swarm集群</span></div></li><ul><li><div><span style="font-size: 9pt;">1.拉取swarm镜像</span></div></li><ul><li><div><span style="font-size: 9pt;">docker pull swarm</span></div></li></ul><li><div><span style="font-size: 9pt;">2.把准备加入集群的所有的节点的docker deamon的监听端口修改为0.0.0.0:2375</span></div></li><ul><li><div><span style="font-size: 9pt;">vi /etc/default/docker</span></div></li><li><div><span style="font-size: 9pt;">DOCKER_OPTS=&quot;-H 0.0.0.0:2375 -H unix:///var/run/docker.sock&quot;  在文件结尾添加</span></div></li><li><div><span style="font-size: 9pt;">service docker restart   重启docker服务</span></div></li></ul><li><div><span style="font-size: 9pt;">3.在manage节点新建一个文件,把要加入到集群的机器的IP地址都写进去</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Docker编排与集群部署_files/Image [14].png" type="image/png" data-filename="Image.png" width="317"></span></div></li></ul><li><div><span style="font-size: 9pt;">4.执行swarm manage命令(在manage节点上)</span></div></li><ul><li><div><span style="font-size: 9pt;">docker run –d –p 2376:2375 –v $(pwd)/cluster:/tmp/cluster swarm manage file:///tmp/cluster</span></div></li><ul><li><div><span style="font-size: 9pt;">这里一定要使用-v命令，因为cluster文件是在本机上面，启动的容器默认是访问不到的，所以要通过-v命令共享</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">5.让集群运行某些命令</span></div></li><ul><li><div><span style="font-size: 9pt;">随机指定节点来运行</span></div></li><ul><li><div><span style="font-size: 9pt;">docker -H &lt;manage_host:manage_port&gt; info</span></div></li><li><div><span style="font-size: 9pt;">docker -H &lt;manage_host:manage_port&gt; run -it ubuntu /bin/bash</span></div></li></ul><li><div><span style="font-size: 9pt;">通过lable来指定某个节点来运行命令</span></div></li><ul><li><div><span style="font-size: 9pt;">docker -d --lable  storage  给节点加上storage标签</span></div></li><li><div><span style="font-size: 9pt;">sudo docker run –H 10.13.181.83:2376 run –name redis_083 –d –e constraint:storage redis    通过指定标签来选择节点启动</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">6.Docker客户端与Manager通信</span></div></li><ul><li><div><span style="font-size: 9pt;">docker -H &lt;manage_host:manage_port&gt; run -it ubuntu /bin/bash </span></div></li></ul><li><div><span style="font-size: 9pt;">7.删除一个节点</span></div></li><ul><li><div><span style="font-size: 9pt;">docker node rm --force node1  </span></div></li></ul></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Swarm的调度测略（可以通过strategy来选出最终运行容器的宿主机）</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Random :顾名思义，就是随机选择一个Node来运行容器，一般用作调试用，spread和binpack策略会根据各个节点的可用的CPU,RAM以及正在运行的容器的数量来计算应该运行容器的节点。</span></div></li><li><div><span style="font-size: 9pt;">Spread :会选择运行容器最少的那台节点来运行新的容器,使用Spread策略会使得容器会均衡的分布在集群中的各个节点上运行，一旦一个节点挂掉了只会损失少部分的容器。</span></div></li><li><div><span style="font-size: 9pt;">binpack: 会选择运行容器最集中的那台机器来运行新的节点,binpack策略最大化的避免容器碎片化，就是说binpack策略尽可能的把还未使用的节点留给需要更大空间的容器运行，尽可能的把容器运行在一个节点上面。</span></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">跨平台宿主环境管理工具-Machine</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;"> Machine的介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">搭建环境想来是一个重复造轮子的过程，Machine这一工具把用户搭建Docker环境的跟中方案汇集在一起，即一目了然的简化了Docker环境的创建过程，让用户继续讲时间投入到应用开发商，而不是无谓的花费在环境的搭建上</span></div></li><li><div><span style="font-size: 9pt;">Machine的主要功能就是帮助用户在不同的云主机提供商上创建和管理虚拟机，并在虚拟机中安装Docker</span></div></li><li><div><span style="font-size: 9pt;">用户只需要提供几项登录凭证即可等待环境安装完成。Machine能便捷地管理所有通过它创建的Docker宿主机，进行宿主机的启动、关闭、重启、删除等操作</span></div></li><li><div><span style="font-size: 9pt;">使用Machine可以在最开始快速创建多台主机系统，并搭建Docker部署环境，接下俩就可以使用swarm创建集群等操作</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Machine与虚拟机软件</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Machine包含的虚拟机驱动有VirtualBox、VMware FUsion、Hyper-V</span></div></li><li><div><span style="font-size: 9pt;">使用Machine前，机器上需要有上述的三种软件之一，需要在命令中指定使用哪一种</span></div></li><li><div><span style="font-size: 9pt;">当不需要创建虚拟镜像充当主机的时候，我们也可以直接指定主机的ip方式来通过Docker Machine来控制多个真正的主机</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Docker Machine的使用</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">安装Docker Machine</span></font></div></li><ul><li><div><span style="font-size: 9pt;">curl -L https://github.com/docker/machine/releases/download/v0.12.0/docker-machine-`uname -s`-`uname -m` &gt; /tmp/docker-machine</span></div></li><li><div><span style="font-size: 9pt;">chmod +x /tmp/docker-machine</span></div></li><li><div><span style="font-size: 9pt;">sudo mv /tmp/docker-machine /usr/local/bin/docker-machine</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">使用Docker Machine的前提条件</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo adduser nick </span></div></li><li><div><span style="font-size: 9pt;">sudo usermod -a -G sudo nick    在目标主机上创建一个用户并加入sudo 组</span></div></li><li><div><span style="font-size: 9pt;">sudo vi  sudoer    </span></div></li><li><div><span style="font-size: 9pt;">nick   ALL=(ALL:ALL) NOPASSWD: ALL    为该用户设置 sudo 操作不需要输入密码</span></div></li><li><div><span style="font-size: 9pt;">ssh-copy-id -i ~/.ssh/id_rsa.pub</span> <a href="mailto:nick@xxx.xxx.xxx.xxx" style="font-size: 9pt;" target="_blank" rel="noopener">nick@xxx.xxx.xxx.xxx</a><span style="font-size: 9pt;">     把本地用户的 ssh public key 添加到目标主机上</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">第一种安装Docker方法：在目标主机上安装Docker</span></font></div></li><ul><li><div><span style="font-size: 9pt;">命令</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">            docker-machine create -d generic \</span></div><div>                --generic-ip-address=xxx.xxx.xxx.xxx \</div><div>                --generic-ssh-user=nick \</div><div>                --generic-ssh-key ~/.ssh/id_rsa \</div><div>                krdevdb</div></div><ul><ul><li><div><span style="font-size: 9pt;">备注：</span></div></li><ul><li><div><span style="font-size: 9pt;">create 命令本是要创建虚拟主机并安装 Docker，因为本例中的目标主机已经存在，所以仅安装 Docker。</span></div></li></ul><li><div><span style="font-size: 9pt;">解释</span></div></li><ul><li><div><span style="font-size: 9pt;">-d 是 --driver 的简写形式，主要用来指定使用什么驱动程序来创建目标主机。Docker Machine 支持在云服务器上创建主机，就是靠使用不同的驱动来实现了。本例中使用 generic 就可以了</span></div></li><li><div><span style="font-size: 9pt;">--generic 开头的三个参数主要是指定操作的目标主机和使用的账户。最后一个参数 krdevdb 是虚拟机的名称</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">第二种安装Docker方法：在本地主机上安装Docker虚拟机</span></font></div></li><ul><li><div><span style="font-size: 9pt;">命令</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">            docker-machine create \</span></div><div>                --driver vmwarevsphere \</div><div>                --vmwarevsphere-vcenter=xxx.xxx.xxx.xxx \</div><div>                --vmwarevsphere-username=root \</div><div>                --vmwarevsphere-password=12345678 \</div><div>                --vmwarevsphere-cpu-count=1 \</div><div>                --vmwarevsphere-memory-size=512 \</div><div>                --vmwarevsphere-disk-size=10240 \</div><div>                testvm</div></div><ul><li><div><span style="font-size: 9pt;">备注：</span></div></li><ul><li><div><span style="font-size: 9pt;">在实际使用中我们一般会在物理机上安装 vSphere 等虚拟机管理软件，并称之为虚拟机 host。然后通过 vSphere 工具安装虚拟机进行使用。接下来我们将介绍如何在本地的一台安装了 vSphere 的虚拟机 host 上安装带有 Docker 的虚拟机</span></div></li></ul><li><div><span style="font-size: 9pt;">参数解释：</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">            --driver vmwarevsphere   需要给 Docker Machine 提供对应的驱动，这样才能够在上面安装新的虚拟机。</span></div><div>            --vmwarevsphere-vcenter=xxx.xxx.xxx.xxx \</div><div>            --vmwarevsphere-username=root \</div><div>            --vmwarevsphere-password=12345678 \    上面三行分别指定了虚拟机 host 的 IP 地址、用户名和密码。</div><div>            --vmwarevsphere-cpu-count=1 \</div><div>            --vmwarevsphere-memory-size=512 \</div><div>            --vmwarevsphere-disk-size=10240 \    上面三行则分别指定了新创建的虚拟机占用的 cpu、内存和磁盘资源。</div><div>            testvm      最后一个参数则是新建虚拟机的名称。</div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">查看docker machine 管理的主机列表</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker-machine ls </span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">获取构造docker主机时使用的命令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker-machine config  dev</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">获取连接到某个主机需要的环境变量</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker-machine env dev   </span></div></li><li><div><span style="font-size: 9pt;">eval &quot;$(docker-machine env dev)&quot;   会指定接下来和哪台主机的docker daemon进行通信</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">启动\停止\重启虚拟机</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker-machine start/stop/restart  dev   </span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">SSH到宿主机上执行命令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker-machine ssh dev /start.sh   </span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">获取主机的url</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker-machine url   </span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">主机之间传递文件</span></div></li><ul><li><div><span style="font-size: 9pt;">docker-machine scp  </span></div></li></ul></ul><div><br></div><div><br></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker容器技术 </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Docker镜像管理&amp;Dockerfile</title>
      <link href="/2018/06/20/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/Docker%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86&amp;Dockerfile/"/>
      <url>/2018/06/20/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/Docker%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86&amp;Dockerfile/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><span style="font-size: 18.6667px;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 18.6667px; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Docker镜像</span></span></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Docker镜像介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Docker镜像时一个只读的Docker容器模板，含有启动Docker容器所需的文件系统结构及其内容，因此是启动一个Docker容器的基础。</span></div></li><li><div><span style="font-size: 9pt;">Docker镜像的文件内容以及一些运行Docker容器的配置文件组成了Docker容器的静态文件系统运行环境-rootfs。</span></div></li><li><div><span style="font-size: 9pt;">可以理解为Docker容器的静态视角，Docker容器是Docker镜像的运行状态</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">rootfs介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">rootfs是Docker容器在启动时内部进程可见的文件系统，即Docker容器的根目录。</span></div></li><li><div><span style="font-size: 9pt;">rootfs通常包含一个操作系统运行所需的文件系统，例如可能包含典型的类Unix操作系统中的目录系统，/dev 、/proc 等,以及运行Docker容器所需的配置文件、工具等</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">rootfs原理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在传统的Linux操作系统内核启动时，首先挂在一个只读的rootfs，当系统检测其完整性之后，再将其切换为读写模式</span></div></li><li><div><span style="font-size: 9pt;">在Docker架构中，当Docker daemon 为容器挂在rootfs时，沿用了Linux内核启动时的方法，将rootfs设计为只读模式。在挂在完毕之后，再利用连个挂在技术在只读rootfs上再挂在一个读写层。</span></div></li><li><div><span style="font-size: 9pt;">这样可读写层处于Docker容器文件系统的最顶层，其下可能联合挂在多个只读层，只有在Docker容器运行过程中文件系统发生变化时，才会吧变化的文件内容写到可读写层，并隐藏只读层中的老版本文件</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Docker镜像的特点</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">分层</span></font></div></li><ul><li><div><span style="font-size: 9pt;">每个镜像都是由一系列的镜像层组成</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">写时复制</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在多个容器之间共享镜像，每个容器在启动的时候并不需要单独复制一份镜像文件</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">内容寻址</span></font></div></li><ul><li><div><span style="font-size: 9pt;">根据文件内容来索引镜像和镜像层</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">联合挂载</span></font></div></li><ul><li><div><span style="font-size: 9pt;">可以在一个挂载点同时挂在多个文件系统，将挂载点的原目录与被挂在内容进行整合，使得最终课件的文件系统将会包含整合之后的各层的文件和目录</span></div></li></ul></ul></ul><div><font style="background-color: rgb(255, 250, 165);font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Docker镜像的构建</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">使用commit创建镜像</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker commit命令只是提交容器镜像发生变更了的部分，即修改后的容器镜像与当前仓库中对应镜像之间的差异部分，这使得该操作实际需要提交的文件往往并不多</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">使用commit实现步骤</span></font></div></li><ul><li><div><span style="font-size: 9pt;">1.根据输入的pause参数的设置确定是否暂停该Docker容器的运行</span></div></li><li><div><span style="font-size: 9pt;">2.将容器的可读写层导出打包，该读写层代表了当前运行容器的文件系统与当初启动该容器镜像之间的差异</span></div></li><li><div><span style="font-size: 9pt;">3.在层存储中逐层可读写层差异包</span></div></li><li><div><span style="font-size: 9pt;">4.更新镜像历史信息rootfs，并据此在镜像存储中创建一个新的镜像，记录其原数据</span></div></li><li><div><span style="font-size: 9pt;">5.如果指定了repository信息，则给上述镜像添加tag信息</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">使用build构建镜像--client端</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">命令格式</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker build [OPTIONS]  PATH | URL |  -</span></div></li><ul><li><div><span style="font-size: 9pt;">path | URL : 其所指向的文件称为上下文context，context包含build Docker镜像过程中所需要的Dockerfile以及其他的资源文件。</span></div></li><li><div><span style="font-size: 9pt;">-t: 指定镜像的名字</span></div></li><li><div><span style="font-size: 9pt;">-f: 指定Dockerfile完整路径  和context的完整路径(可以是相对路径也可以是绝对路径) </span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">不同参数，Docker client处理的方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">1. 第一个参数为 &quot;-&quot;</span></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker build -  Dockerfile</span></div></li><li><div><span style="font-size: 9pt;">sudo docker build -  context.tar.gz</span></div></li><li><div><span style="font-size: 9pt;">该情况，根据命令行输入参数对Dockerfile和context进行设置</span></div></li></ul><li><div><span style="font-size: 9pt;">2.第一个参数为URL，且是git repository URL</span></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker build</span> <a href="http://github.com/creack/docker-firefox" style="font-size: 9pt;" target="_blank" rel="noopener">github.com/creack/docker-firefox</a></div></li><li><div><span style="font-size: 9pt;">该情况，则调用git clone --depth 1 --recursive 命令克隆该Github repository，该操作会在本地的一个临时目录中进行</span></div></li><li><div><span style="font-size: 9pt;">命令你成功之后该目录会作为context传给Docker daemon，该目录中的Dockerfile会被用来进行后续构建Docker镜像</span></div></li></ul><li><div><span style="font-size: 9pt;">3.第一个参数为URL，不是git repository URL</span></div></li><ul><li><div><span style="font-size: 9pt;">该情况，会从该URL下载context，将其封装为一个io流，后面的处理与情况1相同</span></div></li></ul><li><div><span style="font-size: 9pt;">4.context为本地文件或者目录</span></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker build -t vieux/apache:2.0     使用当前文件夹作为context</span></div></li><li><div><span style="font-size: 9pt;">cd /home/myapp/some/dir/really/deep &amp;&amp;</span></div></li><li><div><span style="font-size: 9pt;">sudo docker build -f /home/memyapp/dockerfiles/debug /home/me/myapp  使用指定的两目录分别作为Dockerfile  和context</span></div></li></ul><li><div><span style="font-size: 9pt;">备注：</span></div></li><ul><li><div><span style="font-size: 9pt;">如果目录中有.dockerignore文件，则将context中文件名满足其定义的规则的文件都从上传到列表中排出，不打包给Docker daemon。但唯一的例外是.dockerignore文件中若误写入了.dockerignore本身或者Dockerfile，将不产生作用。如果用户定义了tag，则对其指定的repository和tag进行验证</span></div></li><li><div><span style="font-size: 9pt;">完成了想关信息的设置之后，Docker client想Docker server发送buildHTTP请求，包含了所需的context信息</span></div></li></ul></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-weight: bold;">使用build构建镜像--Docker server端</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Docker server接受到HTTP请求后，其工作内容</span></div></li><ul><li><div><span style="font-size: 9pt;">1.创建临时目录，将context指定的文件系统解压到该目录下</span></div></li><li><div><span style="font-size: 9pt;">2.读取并解析Dockerfile</span></div></li><li><div><span style="font-size: 9pt;">3.根据解析出的Dockerfile遍历其中的所有指令，并分发到不同的模块去执行。Dockerfile特定的关键词都会映射到不同parser进行处理</span></div></li><li><div><span style="font-size: 9pt;">4.parser为上述每一个指令创建 一个对应的临时容器，在临时容器中执行当前指令，然后通过commit使用此容器生成一个镜像层</span></div></li><li><div><span style="font-size: 9pt;">5.Dockerfile中所有的指令对应的层的集合，就是此次build后的结果</span></div></li></ul></ul></ul><div><font style="background-color: rgb(255, 250, 165);font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Dockerfile</span></font></div><ul><li><div><span style="font-size: 12pt; font-weight: bold;">Dockerfile介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">Dockerfile是在通过docker build命令构建自己的Docker镜像时需要使用到的定义文件。</span></div></li><li><div><span style="font-size: 9pt;">它允许用户使用基本的DSL语法来定义Docker镜像，每一条指令描述了构建镜像的步骤。</span></div></li><li><div><span style="font-size: 9pt;">用户可以使用这些统一的语法命令来根据需求进行配置，通过这份统一的配置文件，在不同的平台上进行分发，需要使用时就可以根据配置文件自动化构建，解决了开发人员构建镜像的复杂过程</span></div></li><li><div><span style="font-size: 9pt;">Dockerfile与镜像配合使用，使Docker在构建时可以充分利用镜像功能进行缓存，大大提升了Docker的使用效率</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Dockerfile生成镜像的过程</span></font></div></li><ul><li><div><span style="font-size: 9pt;">本地主机的一个包含Dockerfile的目录中的所有内容作为上下文</span></div></li><li><div><span style="font-size: 9pt;">上下文通过docker build命令传入到Docker daemon后，便开始按照Dockerfile中的内容构造镜像</span></div></li><li><div><span style="font-size: 9pt;">按照Dockerfile中的指令进行读条指令的构建镜像，除了from指令，其他每一条指令都会在上一条指令所生成的镜像的基础上执行，执行完成后生辰一个新的镜像层</span></div></li><li><div><span style="font-size: 9pt;">镜像层不断的覆盖原来的镜像形成新的镜像。Dockerfile所生成的最终镜像就是在基础镜像上叠加一层层的镜像层组建的</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Docker指令</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">基本格式 </span></div></li><ul><li><div><span style="font-size: 9pt;">INSTRUCTION arguments</span></div></li></ul><li><div><span style="font-size: 9pt;">命令格式</span></div></li><ul><li><div><span style="font-size: 9pt;">在Dockerfile中，指令INSTRUCTION不区分大小写，但是为了参数区分，推荐大写。</span></div></li><li><div><span style="font-size: 9pt;">Docker会顺序执行Dockerfile中的指令，第一条指令必须为FROM指令，它用于指定构建镜像的基础镜像</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">ENV 指令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式</span></div></li><ul><li><div><span style="font-size: 9pt;">ENV &lt;KEY&gt; =&lt;value&gt;   </span></div></li></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">ENV指令可以为镜像创建出来的容器生命环境变量</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">FROM指令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式：</span></div></li><ul><li><div><span style="font-size: 9pt;">FROM &lt;iamge&gt;[:&lt;tag&gt;]</span></div></li></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">FROM指令的功能是为后面的指令提供基础镜像，因为一个有效的Dockerfile必须以FROM指令你做为第一条非注释指令</span></div></li><li><div><span style="font-size: 9pt;">在Dockerfile中，FROM指令可以出现多次，这样会构建多个镜像。</span></div></li><li><div><span style="font-size: 9pt;">在每个镜像创建完成后，Docker命令行界面会输入该镜像的ID。若FROM指令中的参数tag为空，默认tag是latest</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">COPY指令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式</span></div></li><ul><li><div><span style="font-size: 9pt;">COPY &lt;src&gt; &lt;dest&gt;</span></div></li></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">COPY指令复制&lt;src&gt;所指向的文件或者目录，将它添加到新场景中，复制的文件或目录在镜像中的路径是&lt;dest&gt;</span></div></li><li><div><span style="font-size: 9pt;">&lt;src&gt;所指定的源可以有多个，但必须在上下文中，即必须是上下文根目录的相对路径</span></div></li><li><div><span style="font-size: 9pt;">若结尾符为/则表示为目录，否则为文件</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">ADD指令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式</span></div></li><ul><li><div><span style="font-size: 9pt;">ADD &lt;src&gt;  &lt;dest&gt;</span></div></li></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">ADD与COPY指令在功能上很相似，都支持复制本地文件到镜像的功能，但ADD指令还支持其他的功能</span></div></li><li><div><span style="font-size: 9pt;">&lt;src&gt;可以是一个指向一个网络文件的URL ，若&lt;dest&gt;为目录，则URL必须是完全路径，这样可以获得该网路文件的文件名filename，该文件会被复制添加到&lt;dest&gt;/&lt;file_name&gt;，若URL中的文件为压缩文件，默认不会被解压提取</span></div></li><li><div><span style="font-size: 9pt;">&lt;src&gt;还可以指向一个本地压缩归档文件，该文件再复制到容器中时会被解压提取</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">RUN指令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式 </span></div></li><ul><li><div><span style="font-size: 9pt;">RUN &lt;command&gt;  (shell 格式)</span></div></li><li><div><span style="font-size: 9pt;">RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]  (exec格式，推荐使用)</span></div></li></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">RUN指令会在前一条命令创建出镜像的基础上创建一个容器，并在容器中运行命令，</span></div></li><li><div><span style="font-size: 9pt;">在命令运行后提交容器为新的镜像，新镜像被Dockerfile中的下一条指令使用</span></div></li><li><div><span style="font-size: 9pt;">通常在需要创建镜像后安装依赖的情况下使用</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">CMD指令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式</span></div></li><ul><li><div><span style="font-size: 9pt;">CMD &lt;command&gt;  (shell格式)</span></div></li><li><div><span style="font-size: 9pt;">CMD  [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]  (exec格式，推荐格式)</span></div></li><li><div><span style="font-size: 9pt;">CMD [&quot;param1&quot;, &quot;param2&quot;]  (为ENTRUPOINT指令提供参数)</span></div></li></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">CMD命令提供容器运行时的默认值，这些默认值可以是一条指令，也可以是一些参数。</span></div></li><li><div><span style="font-size: 9pt;">一个Dockerfile中可以有多条CMD指令，但是只有最后一条CMD指令有效。</span></div></li><li><div><span style="font-size: 9pt;">CMD [&quot;param1&quot;, &quot;param2&quot;] 格式只有在CMD指令和ENTRYPOINT指令配合使用，CMD指令中的参数会添加到ENTRYPOINT指令中</span></div></li><li><div><span style="font-size: 9pt;">使用shell和exec格式时，命令在容器中运行的方式和RUN指令相同，不同在于，RUN指令在构建镜像时执行命令，并生成新的镜像，CMD指令在构建镜像的时候不执行任何命令，而是在容器启动的时候默认将CMD指令作为第一条执行命令。</span></div></li><li><div><span style="font-size: 9pt;">如果用户在命令行界面运行docker run命令时指定了命令参数，则会覆盖CMD指令中的命令</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">ENTRYPOINT指令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式</span></div></li><ul><li><div><span style="font-size: 9pt;">ENTRYPOINT  &lt;command&gt;  (shell格式)</span></div></li><li><div><span style="font-size: 9pt;">ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]  (exec格式，推荐格式)</span></div></li></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">ENTRYPOINT指令和CMD指令类似，都可以让容器每次启动时候执行相同的命令</span></div></li><li><div><span style="font-size: 9pt;">一个Dockerfile中可以有多条ENTRYPOINT指令，但只有最后一条ENTRYPOINT指令有效</span></div></li><li><div><span style="font-size: 9pt;">当使用shell格式时，ENTRYPOINT指令会忽略任何CMD指令和docker run命令参数，并运行在/bin/sh -c 中。</span></div></li><li><div><span style="font-size: 9pt;">当使用 exec格式，docker run传入的命令参数会覆盖CMD指令的内容并附加到ENTRYPOINT指令参数中</span></div></li><li><div><span style="font-size: 9pt;">CMD可以是参数，也可以是指令，ENTRYPOINT只能是命令，灵台docker run命令你提供的运行命令参数可以覆盖CMD，但是不能覆盖ENTRYPOINT</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">ONBUILD</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式</span></div></li><ul><li><div><span style="font-size: 9pt;">ONBUILD  [INSTRUCTION]</span></div></li></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">添加一个将来执行的触发器指令到镜像中。当该镜像作为FROM指令的参数时，这些触发器指令就会在FROM指令执行的时候加入到构建的过程中</span></div></li><li><div><span style="font-size: 9pt;">尽管任何一个指令都可以被注册成一个触发器钟灵，但是ONBUILD指令中不能包含ONBUILD指令，并且不会触发FROM和MAINTAINER指令</span></div></li><li><div><span style="font-size: 9pt;">ONBUILD经常用于需要在创建镜像的时候，需要对导入的镜像做一些文件的导入，一些批处理的时候</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">LABLE</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式</span></div></li><ul><li><div><span style="font-size: 9pt;">LABEL multi.label1=&quot;value1&quot; \</span></div></li><ul><li><div><span style="font-size: 9pt;">multi.label2=&quot;value2&quot; \</span></div></li><li><div><span style="font-size: 9pt;">other=&quot;value3&quot;</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">label是累积的，包括FROM镜像的lable。</span></div></li><li><div><span style="font-size: 9pt;">如果Docker遇到一个label/key已经存在，那么新的值将覆盖这个label/key。</span></div></li><li><div><span style="font-size: 9pt;">要查看一个镜像的label，使用docker inspect命令。</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">EXPOSE</span></font></div></li><ul><li><div><span style="font-size: 9pt;">格式</span></div></li><ul><li><div><span style="font-size: 9pt;">EXPOSE &lt;port1&gt; &lt;port2&gt;</span></div></li></ul><li><div><span style="font-size: 9pt;">说明</span></div></li><ul><li><div><span style="font-size: 9pt;">EXPOSE宿主机需要暴露哪些端口</span></div></li><li><div><span style="font-size: 9pt;">在启动容器时需要通过-P（注意是大写），Docker主机会自动分配一个端口转发到指定的端口；使用-p，则可以具体指定哪个本地端口映射过来。</span></div></li></ul></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold;">WORKDIR</span></span></div></li><ul><li><div><span style="font-size: 12px;">格式</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt;">WORKDIR &lt;path&gt;</span></span></div></li></ul><li><div><span style="font-size: 12px;">说明</span></div></li><ul><li><div>指定了RUN CMD  ENTRYPOINT等命令运行的目录</div></li></ul></ul></ul><li><div><span style="font-size: 12pt; font-weight: bold;">Dockerfile示例</span></div></li><ul><li><div><img src="/e_img/Docker镜像管理、Dockerfile_files/Image.png" type="image/png" data-filename="Image.png" width="443"></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">使用Dockerfile注意</span></font></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">标签易读</span></font></div></li><ul><li><div><span style="font-size: 9pt;">例如：docker  build  -t  =&quot;ruby:2,0-onbuild&quot;</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">谨慎选择基础镜像</span></font></div></li><ul><li><div><span style="font-size: 9pt;">尽量选择当前官方镜像库中的镜像</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">充分利用缓存</span></font></div></li><ul><li><div><span style="font-size: 9pt;">尽量让相同的指令放在前面，充分使用缓存的结果</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">正确使用ADD和COPY命令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">尽量使用COPY命令</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">CMD和ENTRPOINT合用</span></font></div></li><ul><li><div><span style="font-size: 9pt;">尽量使用CMD和ENTRYPOINT指令配合，可以使用exec格式的ENNTRYPOINT指令设置固定的默认命令参数，然后使用CMD指令设置可变的参数</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">不要在Dockerfile中做端口映射</span></font></div></li><ul><li><div><span style="font-size: 9pt;">如果在Dockerfile中做端口映射，导致只能在主机上启动一个容器</span></div></li><li><div><span style="font-size: 9pt;">应该使用EXPOSE 80    只暴露端口，另做映射</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">使用Dockerfile共享Docker镜像</span></font></div></li></ul><div><br></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker容器技术 </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Docker镜像管理&amp;Dockerfile</title>
      <link href="/2018/06/19/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/Docker%E9%9B%86%E7%BE%A4&amp;%E5%BA%94%E7%94%A8%E6%A0%88/"/>
      <url>/2018/06/19/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/Docker%E9%9B%86%E7%BE%A4&amp;%E5%BA%94%E7%94%A8%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Docker集群&amp;应用栈的介绍</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Docker集群&amp;应用栈概念</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Docker的设计理念是希望用户能够保证一个容器只运行一个进程，即只提供一种服务。</span></div></li><li><div><span style="font-size: 9pt;">然而对于用户而言，单一的容器是无法满足需求的。通常用户需要利用多个容器，分别提供不同的服务，并在不同的容器间互相通信，最后形成一个docker集群，以实现特定功能。</span></div></li><li><div><span style="font-size: 9pt;">基于Docker集群构建的应用我们成为Docker应用栈</span></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">搭建应用栈所需过程</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">对应用栈的描述</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">搭建一个包含6个节点的Docker-Web服务应用栈，其中包括一个代理节点、两个Web应用节点、一个主数据库节点及两个从数据库节点</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">图例:</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Docker集群、应用栈_files/Image.png" type="image/png" data-filename="Image.png" width="294"></span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">获取各节点所需的镜像</span></font></div></li><ul><li><div><span style="font-size: 9pt;">镜像可以是Docker Hub中已经存在的镜像</span></div></li><li><div><span style="font-size: 9pt;">镜像也可以是自己提交的Docker镜像</span></div></li></ul><li><div><span style="font-weight: bold; font-size: 14pt;">网络调通</span></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">应用栈容器节点之间的互联（同主机下实现，如果跨主机还需解决跨主机通信）</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">实现节点互联命令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker run [OPTIONS]  --link name:alias  --name Name IMAGE [COMMAND] [ARG1, ......]   </span></div></li><ul><li><div><span style="font-size: 9pt;">alias: 给接受的容器起一个别名可以应用于快速链接</span></div></li><li><div><span style="font-size: 9pt;">name: 容器名称</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker run -it --name redis-slave1 --link redis-master:master redis /bin/bash</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">通过--link互联的优点</span></font></div></li><ul><li><div><span style="font-size: 9pt;">通过--link方式互联，不但可以避免容器的IP端口暴露到外网所导致的安全问题，还可以放置容器在启动后Ip地址变化导致的访问失效</span></div></li><li><div><span style="font-size: 9pt;">可以防止容器重启导致容器IP地址变化访问失效，它的原理类似于DNS服务器的域名和地址映射</span></div></li><li><div><span style="font-size: 9pt;">当容器的IP地址发生变化时，Docker将自动维护映射关系中的IP地址</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">查看连接信息</span></font></div></li><ul><li><div><span style="font-size: 9pt;">cat /etc/host</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">确定应用栈的启动顺序及暴露外网访问端口</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">确定启动顺序(先启动被连接的节点)：</span></font></div></li><ul><li><div><span style="font-size: 9pt;">redis-master--&gt;redis-slave--&gt;APP1/2--&gt;HAProxy</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">暴露Ip端口</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker run -it --name HProxy --link APP1:APP1 --link APP2:APP2 -p 6301:6301 haproxy /bin/bash</span></div></li></ul></ul><li><div><span style="font-weight: bold;">网络链接涉及到的参数</span></div></li><ul><li><div><span style="font-size: 9pt;">--iptables: 将容器的端口暴露给外部主机，就是通过iptables做DNAT(目的地址转换)实现的。以及Docker容器间的通信业是通过修改FORWARD链中响应的itables规则的策略。当设为false时Docker daemon将不会改变你的宿主机上的iptable规则，默认是true。</span></div></li><li><div><span style="font-size: 9pt;">--icc: 当容器都链接到了docker0网线上，容器已经属于一个子网，已经满足通信前提，这时容器间是否可以通信取决于FORWARD链中的ACCEPT规则，设置为false，规则会被置位DROP，Docker荣期间的相互通信就被禁止，这种情况，想让容器互联一定要使用--link选项，容器间默认为true。注意修改FORWARD规则一定要设置--iptables为true</span></div></li><li><div><span style="font-size: 9pt;">--ip--forward: 在Docker容器和外界通信过程中，还设计数据包的多网卡间转发，需要内核将ip--forward功能打开，即将ip_forward系统参数设置为1</span></div></li></ul><li><div><span style="font-weight: bold;">修改Docker daemon的启动参数</span></div></li><ul><li><div><span style="font-size: 9pt;">修改/etc/detault/docker</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">应用栈容器节点间的配置/程序文件编辑</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">查看挂在volume位置(如果镜像事先已经配置了volume)</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker inspect --format &quot;&quot;  CONTAINER</span></div></li><ul><li><div><span style="font-size: 9pt;">return: map[/data:/var/docker/vfs/dir/xxx]    /data 为容器中的共享目录， /var/docker/vfs/dir/xxx 为主机的volume目录</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">启动时指定volume共享目录(如果镜像中没有配置共享目录)</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker run -it -v ~/projects:/usr/src/app  ubuntu   </span></div></li><ul><li><div><span style="font-size: 9pt;">~/projects: 为主机的volume目录</span></div></li><li><div><span style="font-size: 9pt;">/usr/src/app: 为容器中的volume目录</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">应用共享volume目录进行配置文件的编辑</span></font></div></li><ul><li><div><span style="font-size: 9pt;">1.在volume中编辑配置/项目文件，或者将配置/项目文件传到volume目录</span></div></li><li><div><span style="font-size: 9pt;">2.通过volume目录的文件来启动程序</span></div></li></ul></ul></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Docker在各阶段的作用</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">在开发阶段</span></font></div></li><ul><li><div><span style="font-size: 9pt;">镜像的使用使得构建开发环境变得简单统一</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">在测试阶段</span></font></div></li><ul><li><div><span style="font-size: 9pt;">可以直接使用开发所构建的镜像进行测试，直接免除了测试环境构建的烦恼，也消除了因为环境不一致所带来的漏洞问题</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">在部署和运维阶段</span></font></div></li><ul><li><div><span style="font-size: 9pt;">与以往代码级别的部署不同，利用Docker可以进行容器级别的部署，把应用及其依赖环境打包成跨平台、轻量级、可移植的容器来进行部署</span></div></li></ul></ul><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker容器技术 </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Docker的使用</title>
      <link href="/2018/06/17/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/Docker%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2018/06/17/11.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Docker/Docker%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Docker容器介绍</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">什么是Docker</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Docker是以Docker容器为资源分割的调度基本单位。封装软件运行的环境, 为开发者和系统管理员设计, 用于构建、发布和运行分布式应用的平台。</span></div></li><li><div><span style="font-size: 9pt;">他是一个跨平台、可移植并且简单易用的容器解决方案</span></div></li><li><div><span style="font-size: 9pt;">Docker可以在容器内部实现快速的自动化地部署应用, 并通过操作系统内核技术为容器提供资源隔离与安全保障</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Docker的优点</span></font></div></li><ul><li><div><span style="font-size: 10pt; font-weight: bold;">功能实现</span></div></li><ul><li><div><span style="font-size: 9pt;">容器技术的生态系统自上而下的分别覆盖了IaaS层和PaaS层所涉及的各类问题, 包括资源调度、编排、部署、监控、配置管理、存储网络管理、安全、容器化应用支撑平台等</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">持续部署与测试,</span></div></li><ul><li><div><span style="font-size: 9pt;">容器消除了线上线下的环境差异，保证了应用生命周期的环境一致性和标准化</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">跨云平台支持</span></div></li><ul><li><div><span style="font-size: 9pt;">容器带来的最大好处之一就是其适配性， 越来越多的云平台都支持容器，用户也不需要担心受到云平台的捆绑，同时也让应用多平台混合部署称为可能。</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">环境标准化和版本控制</span></div></li><ul><li><div><span style="font-size: 9pt;">基于容器提供的环境一致性和标准化，可以使用Git等工具对容器镜像进行版本控制，相比基于代码的版本控制来说，可以对整个应用的运行环境实现版本控制，一旦出现故障可以快速回滚。相比之前的虚拟机镜像，容器压缩和备份的速度更快，镜像启动也像启动一个普通进程一样快速</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">高资源利用率与隔离</span></div></li><ul><li><div><span style="font-size: 9pt;">容器没有管理程序的额外开销，与底层共享操作系统，性能更加优良，系统负载更低，在同等条件下可以运行更多的应用实例，可以更充分的利用系统资源。同事，容器拥有不错的资源隔离与限制能力，可以精确地对应用分配cpu、内存、等资源，宝整理应用之间不会互相影响</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">容器跨平台性与镜像</span></div></li><ul><li><div><span style="font-size: 9pt;">Linux容器虽然早在Linux2.6版本内核已经存在，但是缺少容器的跨平台性，难以推广。容器在原有的Linux容器的基础上进行大胆的个性，为容器设定了一整套标准化的配置方法，将应用及其依赖的运行环境打包成镜像，真正实现了构建一次到运行的理念，大大提高了容器的跨平台性</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">易于理解而且易用</span></div></li><ul><li><div><span style="font-size: 9pt;">Docker的英文愿意是处理集装箱的码头工人，标志是鲸鱼运送个一大堆集装箱，集装箱就是容器，生动好记。</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">应用镜像仓库</span></div></li><ul><li><div><span style="font-size: 9pt;">Docker官方构建了一个镜像仓库，组织和管理形式类似于Github，其上已经累积了成千上万的镜像。</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Docker的安装</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Ubuntu系统</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">1.安装依赖</span></span></div></li><ul><li><div><span style="font-size: 9pt;">sudo apt-get update</span></div></li><li><div><span style="font-size: 9pt;">sudo apt-get install linux-image-generic-lts-trusty</span></div></li><li><div><span style="font-size: 9pt;">sudo reboot</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">2.安装wget</span></span></div></li><ul><li><div><span style="font-size: 9pt;">sudo apt-get install wget</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">3.安装docker</span></span></div></li><ul><li><div><span style="font-size: 9pt;">sudo wget -q0-</span> <a href="https://get.docker.com/" style="font-size: 9pt;" target="_blank" rel="noopener">https://get.docker.com/</a><span style="font-size: 9pt;"> | sh</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">4.启动docker</span></span></div></li><ul><li><div><span style="font-size: 9pt;">sudo service docker <span style="font-size: 9pt;">start</span></span></div></li></ul></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Windows系统</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用安装包安装</span></span></div></li><ul><li><div><span style="font-size: 9pt;">1.下载安装包</span></div></li><ul><li><div><span style="font-size: 9pt;">下载地址:</span> <a href="https://download.docker.com/win/beta/InstallDocker.msi" style="font-size: 9pt;" target="_blank" rel="noopener">https://download.docker.com/win/beta/InstallDocker.msi</a></div></li></ul><li><div><span style="font-size: 9pt;">2.检查安装</span></div></li><ul><li><div><span style="font-size: 9pt;">docker --version</span></div></li><li><div><span style="font-size: 9pt;">docker-compose --version</span></div></li><li><div><span style="font-size: 9pt;">docker-machinne --version</span></div></li></ul></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用Toolbox安装</span></span></div></li><ul><li><div><span style="font-size: 9pt;">1.下载Toolbox</span></div></li><ul><li><div><span style="font-size: 9pt;">下载地址：https://github.com/docker/toolbox/releases/download/v1.11.2/DockerToolbox-1.11.2.exe </span></div></li></ul><li><div><span style="font-size: 9pt;">2.安装Toolbox</span></div></li><li><div><span style="font-size: 9pt;">3.安装Docker</span></div></li><ul><li><div><span style="font-size: 9pt;">双击快捷图标可以安装Docker、Docker Compose、Docker Machine</span></div></li></ul></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">CentOS系统</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">1.更新系统</span></span></div></li><ul><li><div><span style="font-size: 9pt;">sudo yum update</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">2.请求安装脚本</span></span></div></li><ul><li><div><span style="font-size: 9pt;">curl -fsSl</span> <a href="https://get.docker.com/" style="font-size: 9pt;" target="_blank" rel="noopener">https://get.docker.com/</a><span style="font-size: 9pt;"> | sh</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">3.启动docker</span></span></div></li><ul><li><div><span style="font-size: 9pt;">sudo service docker start</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">DockerHub地址</span></div></li><ul><li><div><span style="font-size: 9pt;"><a href="https://hub.docker.com/?utm_source=getting_started_guide&amp;utm_medium=embedded_Windows&amp;utm_campaign=find_whalesay" style="font-size: 9pt;" target="_blank" rel="noopener">https://hub.docker.com/</a></span></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Docker命令行参数</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">docker命令行通信方式</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在使用Docker时，需要使用Docker命令行工具的docker与Docker daemon建立通信。Docker daemon是Docker的守护进程，负责接收并分发执行Docker命令</span></div></li><li><div><span style="font-size: 9pt;">Docker daemon负责接收并执行来自docker的命令，它的运行需要root权限，所以一般执行docker命令都需要获取root权限</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">docker命令结构图</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Docker的使用_files/Image.png" type="image/png" data-filename="Image.png" width="413"></span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">docker命令行</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">1.获取命令清单</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker --help  </span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">2.获取命令的详细使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker COMMAND --help</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">3.获取docker详细信息</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker info    获取docker详细信息</span></div></li><li><div><span style="font-size: 9pt;">sudo docker version    获取docker版本信息</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">4.容器生命周期管理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">介绍：</span></div></li><ul><li><div><span style="font-size: 9pt;">容器生命周期管理设计容器启动、停止等功能</span></div></li></ul><li><div><span style="font-size: 9pt;">容器的创建命令 （基于特定的镜像创建一个容器, 并依据选项来控制该容器,会随机分配一个容器ID, 用以标识该容器）</span></div></li><ul><li><div><span style="font-size: 9pt;">docker run [OPTIONS] IMAGE [COMMAND] [ARG1, ......]     如果本地没有该镜像，会默认从hub上拉取</span></div></li><ul><li><div><span style="font-size: 9pt;">-i:  表示使用交互模式，终端始终保持输入流开放</span></div></li><li><div><span style="font-size: 9pt;">-t: 表示分配一个伪终端，一般-i, - t两个参数结合使用 -it，即可在容器中利用打开的伪终端进行交互操作</span></div></li><li><div><span style="font-size: 9pt;">--name: 选项表示可以指定docker run 命令启动容器的名字，若无此选项，Docker将为容器随机分配一个名字</span></div></li><li><div><span style="font-size: 9pt;">-m: 用于限制容器中所有进程分配的内存总量，以B\K\M\G为单位，超出内容限制后，容器会结束进程并退出</span></div></li><li><div><span style="font-size: 9pt;">-v: 用于和主机挂载共享目录，可以同时挂在多个目录。使用格式为[host-dir]:[container-dir]。会覆盖Dockerfile中通过Volume挂载的同名目录</span></div></li><li><div><span style="font-size: 9pt;">-p: 用于将容器的端口暴露给宿主机的端口，其常用的格式为 -p  HostPort:ConrainerPort。 暴露端口后, 可以通过外部网络访问宿主机的方式来访问容器。</span></div></li><li><div><span style="font-size: 9pt;">--link: 可以实现同主机容器之间的互联, 使用方式--link container_name:alias 。可以避免容器的IP端口暴露到外网所导致的安全问题，还可以放置容器在启动后Ip地址变化导致的访问失效可以防止容器重启导致容器IP地址变化访问失效。若先要实现跨主机间的容器互联可以修改容器的配置文件/etc/hosts 增加 name 和 ip的映射。</span></div></li><li><div><span style="font-size: 9pt;">-d: 可以直接让容器后台启动。注意若启动的COMMAND命令不是持续前台运行的程序，容器会直接退出。解决办法:1.让COMMAND命令前台运行；2.在命令后面加上 tail  top 这类持续前台运行的命令。</span></div></li><li><div><span style="font-size: 9pt;">--privileged：允许容器使用主机的设备，比如mount，也可以看到主机的网络设备，还可以在容器中启动容器等。</span></div></li><li><div><span style="font-size: 9pt;">--network: 指定容器使用哪种网络通讯方式，一共四种 host、None、bridge、 container。Host和主机共享网络；None不分配网络；bridge(默认)所有容器都分配独立的虚拟ip，网关为主机虚拟出来的docker0；container所有容器使用同一个ip。</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">容器的启动、停止、重启命令</span></div></li><ul><li><div><span style="font-size: 9pt;">docker start/stop/restart  &lt;containner_id&gt;, &lt;containner_id&gt;</span></div></li><ul><li><div><span style="font-size: 9pt;">-a: 启动一个容器并打印输出结果和错误</span></div></li><li><div><span style="font-size: 9pt;">-i:启动一个容器并进入交互模式</span></div></li><li><div><span style="font-size: 9pt;">-t: 停止或者重启容器的超时时间（秒），超时后系统将杀死进程。</span></div></li></ul></ul><li><div><span style="font-size: 12px;">重命名容器</span></div></li><ul><li><div><span style="font-size: 12px;">docker rename &lt;old_name&gt;  &lt;new_name&gt;</span></div></li></ul><li><div><span style="font-size: 9pt;">示例</span></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker run -i -t --name mytest ubuntu:latest /bin/bash  </span></div></li><ul><li><div><span style="font-size: 9pt;">为 ubuntu:latest 镜像分配一个容器, 并为它分配一个伪终端, 并执行/bin/bash命令 </span></div></li></ul></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">5.Docker镜像仓库使用</span></font></div></li><ul><li><div><span style="font-size: 9pt;">介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">Docker registry 是存储容器镜像的仓库，用户可以通过Docker client 与Docker registry进行通信，以此来完成镜像的搜索、下载和上传等相关操作</span></div></li></ul><li><div><span style="font-size: 9pt;">从Docker registry中拉取镜像</span></div></li><ul><li><div><span style="font-size: 9pt;">docker pull [OPTIONS] NAME[:TAG|@DIGEST]</span></div></li></ul><li><div><span style="font-size: 9pt;">将镜像推到镜像库</span></div></li><ul><li><div><span style="font-size: 9pt;">docker push [OPTIONS] NAME[:TAG]   # 将镜像推送到公共Hub</span></div></li><li><div><span style="font-size: 9pt;">docker push SEL/ubuntu    # 将镜像推送到指定库</span></div></li></ul><li><div><span style="font-size: 9pt;">示例</span></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker pull ubuntu   # 从官方Hub中拉取ubuntu:latest镜像</span></div></li><li><div><span style="font-size: 9pt;">sudo docker pull ubuntu:ubuntu12.04  # 从官方Hub中拉取ubuntu:12.04镜像</span></div></li><li><div><span style="font-size: 9pt;">sudo docker pull SEL/ubuntu  # 从官方特定库中拉取ubuntu镜像</span></div></li><li><div><span style="font-size: 9pt;">sudo docker pull 10.10.103.215:5000/sshd  #  从其他镜像服务器中拉取镜像</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">6.镜像管理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">用户可以在本地保存镜像资源，为此Docker提供了相应的管理子命令</span></div></li></ul><li><div><span style="font-size: 9pt;">列出主机上的镜像</span></div></li><ul><li><div><span style="font-size: 9pt;">docker  images  [OPTIONS]  [REPOSITORY[:TAG]]</span></div></li><ul><li><div><span style="font-size: 9pt;">-a: 默认显示最顶层的镜像，-a可以显示所有提交过的镜像</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">删除镜像或者容器</span></div></li><ul><li><div><span style="font-size: 9pt;">docker  rm  [OPTIONS]  CONTAINER  [CONRAINER...]      # 删除容器</span></div></li><li><div><span style="font-size: 9pt;">docker  rmi  [OPTIONS]  IMAGE  [IMAGE...]   # 删除镜像</span></div></li><ul><li><div><span style="font-size: 9pt;">-f:  默认情况如果存在启动的容器，则对应的镜像无法删除，-f可以强制删除镜像或容器</span></div></li></ul></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">7.容器运维操作</span></font></div></li><ul><li><div><span style="font-size: 9pt;">介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">作为Docker的核心，容器的操作是重中之重，Docker为用户提供了丰富的容器运维操作命令</span></div></li></ul><li><div><span style="font-size: 9pt;">与正在运行的程序进行交互</span></div></li><ul><li><div><span style="font-size: 9pt;">attach 进入容器</span></div></li><ul><li><div><span style="font-size: 9pt;">docker attach [OPTIONS] CONTAINER</span></div></li></ul><li><div><span style="font-size: 9pt;">attach 退出容器</span></div></li><ul><li><div><span style="font-size: 9pt;">Ctr + c  / exit / Ctr + P + Q     备注： Ctr + p + Q 不会结束容器，会让容器后台运行</span></div></li></ul><li><div><span style="font-size: 9pt;">exec 进入容器</span></div></li><ul><li><div><span style="font-size: 9pt;">当容器的终端被占用的时候，退出和其他的操作都会被限制，此时可以通过exec方式另外用一个终端连接容器</span></div></li><li><div><span style="font-size: 9pt;">docker exec [OPTIONS] CONTAINER COMMAND [ARG, ....]</span></div></li><ul><li><div><span style="font-size: 9pt;">-d :分离模式: 在后台运行</span></div></li><li><div><span style="font-size: 9pt;">-i :交互模式</span></div></li><li><div><span style="font-size: 9pt;">-t :分配一个伪终端</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">exec 退出容器</span></div></li><ul><li><div><span style="font-size: 9pt;">Ctr + c  / exit   退出容器后，容器运行不受影响</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">查看镜像\容器的详细信息</span></div></li><ul><li><div><span style="font-size: 9pt;">sudo  docker  inspect  [OPTIONS]  CONTAINER|IMAGE</span></div></li><ul><li><div><span style="font-size: 9pt;">--format:  定义输出模板的格式</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">查看容器相关信息(CONTAINER ID 、NAME、IMAGE、STATUS)</span></div></li><ul><li><div><span style="font-size: 9pt;">docker ps [OPTIONS]</span></div></li><ul><li><div><span style="font-size: 9pt;">-a：查看所有容器，默认查看正在启动容器</span></div></li><li><div><span style="font-size: 9pt;">-l:  查看最新创建的容器</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">查看容器中正在运行的进程</span></div></li><ul><li><div><span style="font-size: 9pt;">docker </span><span style="font-size: 9pt;">top CONTAINER</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">8.镜像创建</span></font></div></li><ul><li><div><span style="font-size: 9pt;">介绍</span></div></li><ul><li><div><font style="font-size: 9pt;">commit命令可以将一个容器固话为一个新的镜像。</font></div></li><li><div><font style="font-size: 9pt;">当需要制作特定的镜像时，会进行修改容器的配置，如在容器中安装特定的工具等，通过commit命令可以将这些修改保存起来，使其不会因为容器的停止而丢失</font></div></li></ul><li><div><font style="font-size: 9pt;">使用方法（官方不推荐, 下面会介绍DockerFile的使用）</font></div></li><ul><li><div><font style="font-size: 9pt;">docker  commit  [OPTIONS]  CONTAINER  [REPOSITORY[:TAG]]   # 注意：只能选择正在运行的容器进行提交</font></div></li></ul></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">9.容器和镜像的持久化和导入</span></span></div></li><ul><li><div>介绍</div></li><ul><li><div><span style="font-size: 9pt;">可以实现再 某台机器上导出一个Docker容器并且在另外一台机器上导入</span></div></li></ul><li><div><span style="font-size: 9pt;">将容器导出为镜像快照</span></div></li><ul><li><div><span style="font-size: 9pt;">sudo docker export  -o  ubuntu.tar  CONTAINER_ID </span></div></li></ul><li><div><span style="font-size: 12px;">将本地快照导出为镜像</span></div></li><ul><li><div><span style="font-size: 9pt;">docker  import  [OPTIONS]  file|URL|-  [REPOSITORY[:TAG]]</span></div></li></ul><li><div><span style="font-size: 9pt;">将镜像导出为镜像快照</span></div></li><ul><li><div><span style="font-size: 9pt;">docker save -o haproxy.tar haproxy</span></div></li></ul><li><div><span style="font-size: 12px;">将本地快照导出为镜像</span></div></li><ul><li><div><span style="font-size: 9pt;">docker load -i haproxy.tar</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">10.events、history、logs命令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">events、history、logs这三个命令用于查看Docker的系统日志信息。</span></div></li><li><div><span style="font-size: 9pt;">events命令会打印出实时的系统事件</span></div></li><li><div><span style="font-size: 9pt;">history会打印出指定的镜像的历史版本信息</span></div></li><li><div><span style="font-size: 9pt;">logs命令会打印出容器中的进程运行日期</span></div></li></ul><li><div><span style="font-size: 9pt;">打印实时系统事件</span></div></li><ul><li><div><span style="font-size: 9pt;">docker events [OPTIONS]</span></div></li></ul><li><div><span style="font-size: 9pt;">打印指定镜像的历史版本信息</span></div></li><ul><li><div><span style="font-size: 9pt;">docker history [OPTIONS] IAMGE</span></div></li></ul><li><div><span style="font-size: 9pt;">打印容器中进程运行日志</span></div></li><ul><li><div><span style="font-size: 9pt;">docker  logs  [OPTIONS]  CONTAINER</span></div></li></ul></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Docker开启端口监听</span></div><ul><li><div><span style="font-weight: bold; font-size: 10pt;">介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">Docker默认只监听本地进程，即从其他主机上无法连接。如果需要远程连接，则需要开启2375端口的监听。</span></div></li></ul><li><div><span style="font-weight: bold; font-size: 10pt;">通过命令行启动</span></div></li><ul><li><div><span style="font-size: 9pt;">dockerd -H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375</span></div></li></ul><li><div><span style="font-weight: bold; font-size: 10pt;">Ubuntu下修改配置文件</span></div></li><ul><li><div><span style="font-size: 9pt;">vim /etc/default/docker</span></div></li><li><div><span style="font-size: 9pt;">DOCKER_OPTS=&quot;-H unix:///var/run/docker.sock -H 0.0.0.0:2375”</span></div></li></ul><li><div><span style="font-weight: bold; font-size: 10pt;">Centos下修改配置文件</span></div></li><ul><li><div><span style="font-size: 9pt;">vim /usr/lib/systemd/system/docker.service</span></div></li><li><div><span style="font-size: 9pt;">修改：ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock</span></div></li></ul></ul><div><br></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker容器技术 </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Celery&amp;flower后台运行部署</title>
      <link href="/2017/06/06/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/Celery&amp;flower%20%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E9%83%A8%E7%BD%B2/"/>
      <url>/2017/06/06/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/Celery&amp;flower%20%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="-evernote-webclip:true;"><div style="font-size: 16px; display: inline-block;"><div style="font-size: 16px; box-sizing: border-box; background-color: rgb(245, 246, 247);"><div style="box-sizing: border-box;"><div style="box-shadow:rgba(0, 0, 0, 0.0470588) 0px 2px 4px 0px;background-color:rgb(255, 255, 255);"><div style="margin: 0px 0px 30px; box-sizing: border-box; padding: 20px 30px 0px; word-break: break-all; word-wrap: break-word; overflow: hidden;"><div style="margin: 0px; padding: 0px; box-sizing: border-box;"><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; min-height: 26px; text-align: justify;"><div><span style="color: rgb(255, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 14px; font-weight: 700;">celery在后台运行</span><br></div></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; min-height: 26px; text-align: justify;"><span style="font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 26px; color: rgb(79, 79, 79);">在生产环境中，你可能希望在后台运行worker.下面的文档中有详细的介绍：</span><a href="http://docs.celeryproject.org/en/master/tutorials/daemonizing.html#daemonizing" style="margin: 0px; padding: 0px; box-sizing: border-box; outline: 0px; border-bottom: 1px dashed rgb(220, 240, 213); font-size: 17px;" target="_blank"></a><a href="http://docs.celeryproject.org/en/master/tutorials/daemonizing.html#daemonizing" style="font-size: 17px; font-family: Optima, Segoe, &quot;Segoe UI&quot;, Candara, Calibri, Arial, sans-serif; font-weight: 400; line-height: 23.8px; color: rgb(52, 134, 19); text-decoration: none; box-sizing: border-box; margin: 0px; padding: 0px;" target="_blank" rel="noopener">daemonization tutorial</a><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 17px; font-family: Optima, Segoe, &quot;Segoe UI&quot;, Candara, Calibri, Arial, sans-serif; font-weight: 400; line-height: 23.8px; color: rgb(62, 67, 73);">.</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; min-height: 26px; text-align: justify;"><span style="margin: 0px; padding: 0px; box-sizing: border-box;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 10px; font-family: Optima, Segoe, &quot;Segoe UI&quot;, Candara, Calibri, Arial, sans-serif; font-weight: 400; line-height: 23.8px; color: rgb(79, 79, 79);">下面的脚本使用celery multi命令在后台启动一个或多个worker.</span></span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><div style="font-size: 0.9em; margin: 15px 0px; box-sizing: border-box; padding: 7px 10px; border: 1px solid rgb(199, 236, 184); background: rgb(240, 255, 235);"><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">$</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">celery multi start w1 -A proj -l info</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(136, 136, 136);">celery multi v4.0.0 (0today8)</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">&gt;</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">Starting nodes...</span></div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(136, 136, 136);">&gt; w1.halcyon.local: OK</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; min-height: 26px; text-align: justify;"><span style="font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 26px; color: rgb(79, 79, 79);">你也可以重新启动:</span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><div style="font-size: 0.9em; margin: 15px 0px; box-sizing: border-box; padding: 7px 10px; border: 1px solid rgb(199, 236, 184); background: rgb(240, 255, 235);"><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">$</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">celery multi restart w1 -A proj -l info</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(136, 136, 136);">celery multi v4.0.0 (0today8)</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">&gt;</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">Stopping nodes...</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(136, 136, 136);">&gt; w1.halcyon.local: TERM -&gt; 64024</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">&gt;</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">Waiting</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(0, 136, 0);">for</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(102, 0, 238);">1</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">node.....</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(136, 136, 136);">&gt; w1.halcyon.local: OK</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">&gt;</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">Restarting node w1.halcyon.local: OK</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(136, 136, 136);">celery multi v4.0.0 (0today8)</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">&gt;</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">Stopping nodes...</span></div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(136, 136, 136);">&gt; w1.halcyon.local: TERM -&gt; 64052</span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; min-height: 26px; text-align: justify;"><span style="font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 26px; color: rgb(79, 79, 79);">或者停止它:</span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><div style="font-size: 0.9em; margin: 15px 0px; box-sizing: border-box; padding: 7px 10px; border: 1px solid rgb(199, 236, 184); background: rgb(240, 255, 235);"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">$</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">celery multi stop w1 -A proj -l info</span></div><div><span style="font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 24px; color: rgb(69, 69, 69);">stop命令是异步的，它不会等待所有的worker真正关闭。你可能需要使用stopwait命令，这个命令会保证当前所有的任务都执行完毕。</span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><div style="font-size: 0.9em; margin: 15px 0px; box-sizing: border-box; padding: 7px 10px; border: 1px solid rgb(199, 236, 184); background: rgb(240, 255, 235);"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">$</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">celery multi stopwait w1 -A proj -l info</span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; min-height: 26px; text-align: justify;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 12px;"><span style="font-size: 12px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 700; line-height: 26px; color: rgb(255, 0, 0); box-sizing: border-box;">注:</span></span><span style="font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 26px; color: rgb(79, 79, 79);">celery multi命令不会保存workers的信息，所以当重新启动时你需要使用相同的命令行参数。当停止时，只有相同的pidfile和logfile参数是必须的。</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; min-height: 26px; text-align: justify;"><br style="box-sizing:border-box;"></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; min-height: 26px; text-align: justify;"><span style="font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 26px; color: rgb(79, 79, 79);">默认情况下，celery会在当前目录下创建pidfile和logfile.为了防止多个worker在启动时相互影响，你可以指定一个特定的目录。</span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><div style="font-size: 0.9em; margin: 15px 0px; box-sizing: border-box; padding: 7px 10px; border: 1px solid rgb(199, 236, 184); background: rgb(240, 255, 235);"><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">$</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">mkdir -p /var/run/celery</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">$</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">mkdir -p /var/log/celery</span></div><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">$</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">celery multi start w1 -A proj -l info --pidfile</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(51, 51, 51);">=</span><span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">/var/run/celery/%n.pid</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; background-color: rgb(255, 240, 240); font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(102, 102, 102);">\</span></div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(136, 136, 136);">--logfile=/var/log/celery/%n%I.log</span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; min-height: 26px; text-align: justify;"><span style="font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 26px; color: rgb(79, 79, 79);">通过multi命令你可以启动多个workers,另外这个命令还支持强大的命令行语法来为不同的workers指定不同的参数。</span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p><div style="font-size: 0.9em; margin: 15px 0px; box-sizing: border-box; padding: 7px 10px; border: 1px solid rgb(199, 236, 184); background: rgb(240, 255, 235);"><div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(198, 93, 9);">$</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">celery multi start</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(102, 0, 238);">10</span> <span style="font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(62, 67, 73);">-A proj -l info -Q:1-3 images,video -Q:4,5 data</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; background-color: rgb(255, 240, 240); font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: bold; line-height: 1.3em; color: rgb(102, 102, 102);">\</span></div><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 0.9em; font-family: Consolas, Menlo, &quot;Deja Vu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, monospace; font-weight: 400; line-height: 1.3em; color: rgb(136, 136, 136);">-Q default -L:4,5 debug</span></div><div><span style="font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 24px; color: rgb(69, 69, 69);">更多关闭multi的举例请参考</span><a href="http://docs.celeryproject.org/en/master/reference/celery.bin.multi.html#module-celery.bin.multi" style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 24px; color: rgb(66, 139, 202); text-decoration: none;" target="_blank">multi</a><span style="font-size: 16px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 400; line-height: 24px; color: rgb(69, 69, 69);">模块的API手册。</span></div><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-weight:400;font-size:16px;color:rgb(79, 79, 79);line-height:26px;min-height:26px;text-align:justify;"></p></div></div></div></div></div></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> celery分布式爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> celery </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Celery分布式-监控界面</title>
      <link href="/2017/06/05/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%EF%BC%9A%E7%9B%91%E6%8E%A7%E7%95%8C%E9%9D%A2/"/>
      <url>/2017/06/05/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%EF%BC%9A%E7%9B%91%E6%8E%A7%E7%95%8C%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><br></div><div style="display: inline-block;"><div style="text-size-adjust: 100%; text-rendering: optimizeLegibility;"><div style="background: url(&quot;https://www.213.name/wp-content/uploads/2015/10/0a251b47bc23608b6a09f8c984e21a47.jpg&quot;) left top / auto repeat fixed rgb(252, 252, 252);"><div style="overflow: hidden; border-radius: 3px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.098) 0px 2px 3px;"><div style="display: block; overflow: hidden; margin: 15px 20px;"><h1 style="font-size: 1.7em; margin: 0px;"></h1><h1><span style="font-size: 16pt;">flower监控服务器</span></h1><div><span style="font-weight: bold; font-size: 16pt;">flower安装与运行的方法</span></div><div><img src="/e_img/celery分布式：监控界面_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 18pt;" width="354"></div><div><span style="font-weight: bold; font-size: 16pt;">通过浏览器打开地址</span></div></div><div style="margin: 15px 20px; word-wrap: break-word; word-break: normal;"><div style="font-size: 14px; margin: 0px 0px 1em;"><a href="https://www.213.name/wp-content/uploads/2017/08/QQ%E6%88%AA%E5%9B%BE20170821154007-1.png" style="transition: color 0.2s; font-size: 14px; color: rgb(52, 152, 219); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7; text-decoration: none;" target="_blank" rel="noopener"><img src="/e_img/celery分布式：监控界面_files/Image [1].png" type="image/png" data-filename="Image.png" height="508" style="border:0px;max-width:100%;height:auto;" width="1237"></a></div><h2 style="margin: 0px 0px 0.4em;"><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7; font-size: 16pt;">可能遇到的错误</span></h2><div style="font-size: 14px; margin: 0px 0px 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7;">pymongo.errors.NotMasterError: not master</span></div><div style="font-size: 14px; margin: 0px 0px 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7;">关闭mongodb的数据集</span></div><h2 style="margin: 0px 0px 0.4em;"><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7; font-size: 16pt;">其他</span></h2><div style="font-size: 14px; margin: 0px 0px 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7;">当服务器数量较多的时候，管理起来会很不方便，可以使用python的supervisor来管理后台进程，遗憾的是它并不支持python3，不过也可以装在python2的环境</span></div><div style="font-size: 14px; margin: 0px 0px 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7;">虽然用了supervisor可以很方便的管理python程序，但是还是得一个个登陆不同的服务器的去管理，咋办捏？</span></div><div style="font-size: 14px; margin: 0px 0px 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7;">我在github上找到一个工具supervisor-easy，可以批量管理supervisor，如图:</span></div><div style="font-size: 14px; margin: 0px 0px 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7;"><img src="/e_img/celery分布式：监控界面_files/687474703a2f2f7777332e73696e61696d672e636e2f6c617267652f6238623730386137677731663562386b72667972636a3231396230646137376c.jpg" type="image/jpeg" data-filename="687474703a2f2f7777332e73696e61696d672e636e2f6c617267652f6238623730386137677731663562386b72667972636a3231396230646137376c.jpg" height="478" style="border:0px;max-width:100%;height:auto;" width="1631"></span></div><div style="font-size: 14px; margin: 0px 0px 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Lucida Grande&quot;, Arial, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;WenQuanYi Micro Hei&quot;, STHeiti, SimSun, sans-serif; line-height: 1.7;">地址：https://github.com/trytofix/supervisor-easy</span></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> celery分布式爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> celery </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>分布式任务队列Celery</title>
      <link href="/2017/06/05/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97Celery/"/>
      <url>/2017/06/05/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97Celery/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><br></div><div style="display: inline-block;"><div style="box-sizing: border-box; text-size-adjust: 100%; -webkit-tap-highlight-color: transparent;"><div style="box-sizing: border-box; background-color: rgb(255, 255, 255); -webkit-font-smoothing: antialiased;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; word-wrap: break-word;"><div style="font-size: 14px;"></div><h1 style="box-sizing: border-box; margin: 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">分布式任务队列Celery</span></h1><div style="box-sizing: border-box; margin: 1.5em 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;"><font style="font-size: 12pt;">Celery （芹菜）是基于Python开发的分布式任务队列。它支持使用任务队列的方式在分布的机器／进程／线程上执行任务调度。</font></span></div><h1 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">结构</span></h1><div style="box-sizing: border-box; margin: 1.5em 0px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">核心部件</span></h2><ul style="box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><br><font style="font-size: 18pt;"><span style="font-size: 18pt; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">broker</span></font></li><ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;margin-top:0px;margin-bottom:0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;"><font style="font-size: 12pt;">消息队列，由第三方消息中间件完成</font></span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;"><font style="font-size: 12pt;">常见有RabbitMQ, Redis, MongoDB等</font></span></li></ul><li style="box-sizing:border-box;margin:0.3em 0px;"><br><font style="font-size: 18pt;"><span style="font-size: 18pt; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">worker</span></font></li><ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;margin-top:0px;margin-bottom:0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;"><font style="font-size: 12pt;">任务执行器</font></span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;"><font style="font-size: 12pt;">可以有多个worker进程</font></span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;"><font style="font-size: 12pt;">worker又可以起多个queue来并行消费消息</font></span></li></ul><li style="box-sizing:border-box;margin:0.3em 0px;"><br><font style="font-size: 18pt;"><span style="font-size: 18pt; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">backend</span></font></li><ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;margin-top:0px;margin-bottom:0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;"><font style="font-size: 12pt;">后端存储，用于持久化任务执行结果</font></span></li></ul></ul><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">功能部件</span></h2><div style="font-size: 14px;"></div><ul style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><br><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">beat</span></li><ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;margin-top:0px;margin-bottom:0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">定时器，用于周期性调起任务</span></li></ul><li style="box-sizing:border-box;margin:0.3em 0px;"><br><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">flower</span></li><ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;margin-top:0px;margin-bottom:0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">web管理界面</span></li></ul></ul><div style="font-size: 14px;"></div><h1 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">任务</span></h1><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">基本用法是在程序里引用celery，并将函数方法绑定到task</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><br></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">from</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">celery</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">import</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">Celery</span></div><div><br></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">app = Celery(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'tasks'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">, backend=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'amqp'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">, broker=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'amqp://guest@localhost//'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">app.conf.CELERY_RESULT_BACKEND =</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'db+sqlite:///results.sqlite'</span></div><div><br></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">@app.task</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">def</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(153, 0, 0); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">(x, y)</span><span style="font-size: 1em; background-color: initial; box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">:</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">return</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">x + y</span></div></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">然后调用相应方法即可(delay与apply_async都是异步调用)</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">from</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">tasks import</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">add</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">import</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">time</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">result</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">=</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.delay(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">while</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">not</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">result</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.ready():</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">print</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&quot;not ready yet&quot;</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">time</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.sleep(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">5</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div><div><br></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">print</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">result</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">get</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">()</span></div></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">由于是采用消息队列，因此任务提交之后，程序立刻返回一个任务ID。</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">之后可以通过该ID查询该任务的执行状态和结果。</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">关联任务</span></h2><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">执行1个任务，完成后再执行第2个，第一个任务的结果做第二个任务的入参</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">add.apply_async((</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">), link=add.s(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">))</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">结果：</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">+</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">+</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">20</span></div></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">还可以做错误处理</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">@app.task(bind=True)</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">def error_handler(self,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">uuid</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">):</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">result</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">= self.app.AsyncResult(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">uuid</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">print(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'Task {0} raised exception: {1!r}\n{2!r}'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">format</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">(</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">uuid</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">result</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">result</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">result</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.traceback))</span></div><div><br></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 134, 179); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.apply_async((</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">), link_error=error_handler.s())</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">定时任务</span></h2><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">让任务在指定的时间执行，与下文叙述的周期性任务是不同的。</span></div><div style="font-size: 14px;"></div><ul style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">ETA, 指定任务执行时间,注意时区</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">countdown, 倒计时,单位秒</span></li></ul><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">from</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">datetime import datetime, timedelta</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">tomorrow = datetime.utcnow() + timedelta(seconds=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">3</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">apply_async((2, 2), eta=tomorrow)</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">result =</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">apply_async((2, 2), countdown=3)</span></div></div><div style="font-size: 14px;"></div><h4 style="font-size: 1.25em; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 1.25em; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2;">tip</span></h4><div style="font-size: 14px;"></div><ul style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">任务的信息是保存在broker中的，因此关闭worker并不会丢失任务信息</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">回收任务(revoke)并非是将队列中的任务删除，而是在worker的内存中保存回收的任务task-id，不同worker之间会自动同步上述revoked task-id。</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">由于信息是保存在内存当中的，因此如果将所有worker都关闭了，revoked task-id信息就丢失了，回收过的任务就又可以执行了。要防治这点，需要在启动worker时指定一个文件用于保存信息</span></li></ul><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: initial; word-break: break-word; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">celery -A app.celery worker --loglevel=info &amp;&gt; celery_worker.</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">log</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: initial; word-break: break-word; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">--statedb=/var/tmp/celery_worker.</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">state</span></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">过期时间</span></h2><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">expires单位秒，超过过期时间还未开始执行的任务会被回收</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">apply_async((10, 10), expires=60)</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">重试</span></h2><div style="font-size: 14px;"></div><ul style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">max_retries:最大重试次数</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">interval_start:重试等待时间</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">interval_step:每次重试叠加时长，假设第一重试等待1s，第二次等待1＋n秒</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><div><br></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">interval_max:最大等待时间</span></div><div><br></div><br><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">apply_async((2, 2), retry=True, retry_policy={</span><br><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'max_retries'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">:</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">3</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span><br><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'interval_start'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">:</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">0</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span><br><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'interval_step'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">:</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">0.2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span><br><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'interval_max'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">:</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">0.2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span><br><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">})</span><br><br></li></ul><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">序列化</span></h2><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">将任务结果按照一定格式序列化处理，支持pickle, JSON, YAML and msgpack</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="font-size: 1em; background-color: initial; box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">apply_async((10, 10), serializer=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'json'</span><span style="font-size: 1em; background-color: initial; box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">压缩</span></h2><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">将任务结果压缩</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="font-size: 1em; background-color: initial; box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">apply_async((2, 2), compression=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'zlib'</span><span style="font-size: 1em; background-color: initial; box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">任务路由</span></h2><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">使用-Q参数为队列(queue)命名，然后调用任务时可以指定相应队列</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">$ celery -A proj worker -l info -Q celery,priority.high</span></div><div><br></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.</span><span style="font-size: 1em; background-color: initial; box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">apply_async(queue=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'priority.high'</span><span style="font-size: 1em; background-color: initial; box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div></div><div style="font-size: 14px;"></div><h1 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">工作流</span></h1><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">按照一定关系一次调用多个任务</span></div><div style="font-size: 14px;"></div><ul style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px;"><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">group: 并行调度</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">chain: 串行调度</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">chord: 类似group，但分header和body2个部分，header可以是一个group任务，执行完成后调用body的任务</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">map: 映射调度，通过输入多个入参来多次调度同一个任务</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">starmap: 类似map，入参类似＊args</span></li><li style="box-sizing:border-box;margin:0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">chunks:将任务按照一定数量进行分组</span></li></ul><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">group</span></h2><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 1.5em 0px; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">from celery import group</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res = group(add.s(i, i) for i in xrange(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">10</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">))()</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res.get(timeout=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">1</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">0</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">6</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">8</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">10</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">12</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">14</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">18</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">]</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">chain</span></h2><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 1.5em 0px; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; from celery import chain</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">#</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">+</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">+</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">+</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">8</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res = chain(add.s(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">), add.s(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">), add.s(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">8</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">))()</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res.get()</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span></div><div><br></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">可以用｜来表示chain</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;"># ((</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">+</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">) *</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">+</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">) *</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">8</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; c2 = (add.s(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">) | mul.s(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">) | (add.s(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">) | mul.s(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">8</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)))</span></div><div><br></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res = c2()</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res.get()</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">chord</span></h2><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 1.5em 0px; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; from celery import chord</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">#</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">1</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">*</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">+</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">*</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">+..</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.9</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">*</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res = chord((add.s(i, i) for i in xrange(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">10</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)), xsum.s())()</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res.get()</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">90</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">map</span></h2><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 1.5em 0px; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt;</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">from</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">proj</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.tasks</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">import</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span></div><div><br></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; ~</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">xsum</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.map</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[range(10), range(100)]</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[45, 4950]</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">starmap</span></h2><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 1.5em 0px; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; ~add.starmap(zip(range(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">10</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">), range(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">10</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)))</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">0</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">6</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">8</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">10</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">12</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">14</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">18</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">]</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">chunks</span></h2><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 1.5em 0px; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; from proj.tasks import add</span></div><div><br></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res = add.chunks(zip(range(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">100</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">), range(</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">100</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)),</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">10</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)()</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">&gt;&gt;&gt; res.get()</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">0</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">4</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">6</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">8</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">10</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">12</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">14</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">18</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">],</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">20</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">22</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">24</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">26</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">28</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">30</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">32</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">34</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">36</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">38</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">],</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">40</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">42</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">44</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">46</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">48</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">50</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">52</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">54</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">56</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">58</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">],</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">60</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">62</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">64</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">66</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">68</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">70</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">72</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">74</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">76</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">78</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">],</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">80</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">82</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">84</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">86</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">88</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">90</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">92</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">94</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">96</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">98</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">],</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">100</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">102</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">104</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">106</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">108</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">110</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">112</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">114</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">116</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">118</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">],</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">120</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">122</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">124</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">126</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">128</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">130</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">132</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">134</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">136</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">138</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">],</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">140</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">142</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">144</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">146</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">148</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">150</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">152</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">154</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">156</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">158</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">],</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">160</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">162</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">164</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">166</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">168</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">170</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">172</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">174</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">176</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">178</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">],</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">[</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">180</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">182</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">184</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">186</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">188</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">190</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">192</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">194</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">196</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">198</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">]]</span></div></div><div style="font-size: 14px;"></div><h1 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">周期性任务</span></h1><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">周期性任务就是按照一定的时间检查反复执行的任务。前面描述的定时任务值的是一次性的任务。</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">程序中引入并配置好周期性任务后，beat进程就会定期调起相关任务</span></div></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">beat进程是需要单独启动的</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: initial; word-break: break-word; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">$ celery -</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">A</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: initial; word-break: break-word; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">proj beat</span></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">或者在worker启动时一起拉起</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: initial; word-break: break-word; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">$ celery -</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">A</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: initial; word-break: break-word; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">proj worker -B</span></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">注意一套celery只能启一个beat进程</span></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">时区配置</span></h2><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">由于python中时间默认是utc时间，因此最简便的方法是celery也用utc时区</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><br></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">CELERY_TIMEZONE</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">=</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'UTC'</span></div></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">这么配置可以保证任务调度的时间是准确的，但由于服务器一般都配置时区，因此flower、以及日志中的时间可能会有偏差</span></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">另外一种方法，就是配置正确的时区</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">CELERY_TIMEZONE</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: initial; word-break: break-word; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">=</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'Asia/Shanghai'</span></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">然后任务调起时，将时间带入时区配置</span></div><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 0px 0px 1.5em; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">local_tz = pytz.timezone(app.config['CELERY_TIMEZONE'])</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">format_eta = local_tz.localize(datetime.strptime(eta.strip(), '</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(153, 0, 115); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">%Y</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">/</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(153, 0, 115); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">%m</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">/</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(153, 0, 115); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">%d</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(153, 0, 115); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">%H</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">:</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(153, 0, 115); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">%M</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">:</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(153, 0, 115); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">%S</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'))</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">add</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">.apply_async((</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">2</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">),eta=format_eta)</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">周期性任务配置</span></h2><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 1.5em 0px; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">from datetime</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">import</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">timedelta</span></div><div><br></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">CELERYBEAT_SCHEDULE = {</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'add-every-30-seconds'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">: {</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'task'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">:</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'tasks.add'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'schedule'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">: timedelta(seconds=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">30</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">),</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'args'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">: (</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">)</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">},</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">}</span></div></div><div style="font-size: 14px;"></div><h2 style="box-sizing: border-box; margin: 1.5em 0px 0px; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; font-size: 18pt;">周期性任务配置crontab</span></h2><div style="font-size: 14px;"></div><div style="font-size: 0.93em; word-wrap: break-word; border-radius: 4px; box-sizing: border-box; display: block; word-break: break-all; margin: 1.5em 0px; padding: 1em; border: none; max-height: 35em; position: relative; overflow: auto;"><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">from</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">celery.schedules</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-weight: bold; line-height: 1.45;">import</span> <span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">crontab</span></div><div><br></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">CELERYBEAT_SCHEDULE = {</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(153, 153, 136); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 1.45;"># Executes every Monday morning at 7:30 A.M</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'add-every-monday-morning'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">: {</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'task'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">:</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'tasks.add'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'schedule'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">: crontab(hour=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">7</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">, minute=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">30</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">, day_of_week=</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">1</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">),</span></div><div><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(221, 17, 68); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">'args'</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">: (</span><span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">,</span> <span style="box-sizing: border-box; font-size: 1em; background-color: initial; color: rgb(0, 128, 128); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">16</span><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">),</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">},</span></div><div><span style="font-size: 1em; background: none; border-radius: 0px; box-sizing: border-box; overflow-wrap: normal; padding: 0px; white-space: inherit; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 1.45;">}</span></div></div><div style="font-size: 14px;"></div><div style="font-size: 14px; box-sizing: border-box; margin: 1.5em 0px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6;">本文参考</span><a href="http://www.celeryproject.org/docs-and-support/" style="box-sizing: border-box; background: transparent; outline: 0px; border-bottom: 1px solid rgba(0, 154, 97, 0.247); padding-bottom: 1px; font-size: 14px; color: rgb(0, 154, 97); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; line-height: 1.6; text-decoration: none;" target="_blank">官方文档</a></div><div style="font-size: 14px;"></div></div></div></div></div></div></div></div></div><div><br></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> celery分布式爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> celery </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Celery构建一个分布式爬虫-基础篇</title>
      <link href="/2017/06/03/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/Celery%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB%EF%BC%9A%E5%9F%BA%E7%A1%80%E7%AF%87/"/>
      <url>/2017/06/03/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/Celery%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB%EF%BC%9A%E5%9F%BA%E7%A1%80%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><br></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><div style="box-sizing: border-box; background-color: rgb(245, 246, 247);"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; box-shadow: rgba(0, 0, 0, 0.0470588) 0px 2px 4px 0px; background-color: rgb(255, 255, 255);"><h1 style="margin: 0px; box-sizing: border-box; padding: 0px 29px;"><span style="font-size: 16pt; color: rgb(44, 48, 51); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 700; line-height: 38px;">如何构建一个分布式爬虫：基础篇</span></h1><div style="font-size: 16px; box-sizing: border-box; margin: 0px 0px 30px; padding: 20px 30px 0px; overflow: hidden;"><div style="box-sizing: border-box; margin: 0px; padding: 0px; font-size: 16px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">首先，我们新建目录</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">distributedspider</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，然后再在其中新建文件</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">workers.py</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">,里面内容如下</span></div><div style="word-break: break-all; box-sizing: border-box; border-radius: 0px; border: 0px solid rgb(136, 136, 136); background-color: rgba(128, 128, 128, 0.047); font-size: 14px; word-wrap: break-word; padding: 5px 5px 5px 60px; white-space: nowrap; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em;"><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">from</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">celery</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">import</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">Celery</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app = Celery(</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'crawl_task'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">, include=[</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'tasks'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">], broker=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'redis://223.129.0.190:6379/1'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">, backend=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'redis://223.129.0.190:6379/2'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">)</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(136, 0, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;"># 官方推荐使用json作为消息序列化方式</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app.conf.update(</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_TIMEZONE=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'Asia/Shanghai'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_ENABLE_UTC=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">True</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_ACCEPT_CONTENT=[</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'json'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">],</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_TASK_SERIALIZER=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'json'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_RESULT_SERIALIZER=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'json'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">)</span></div></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">上述代码主要是做Celery实例的初始化工作，</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">include</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">是在初始化celery app的时候需要引入的内容，主要就是注册为网络调用的函数所在的文件。然后我们再编写任务函数，新建文件</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">tasks.py</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">,内容如下</span></div><div style="word-break: break-all; box-sizing: border-box; border-radius: 0px; border: 0px solid rgb(136, 136, 136); background-color: rgba(128, 128, 128, 0.047); font-size: 14px; word-wrap: break-word; padding: 5px 5px 5px 60px; white-space: nowrap; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em;"><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">import</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">requests</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">from</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">bs4</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">import</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">BeautifulSoup</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">from</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">workers</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">import</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">@app.task</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">def</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">crawl</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(102, 0, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">(url)</span><span style="font-size: 90%; background-color: transparent; box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">print(</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'正在抓取链接{}'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">.format(url))</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">resp_text = requests.get(url).text</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">soup = BeautifulSoup(resp_text,</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'html.parser'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">)</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">return</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">soup.find(</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'h1'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">).text</span></div></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">它的作用很简单，就是抓取指定的url，并且把标签为</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">h1</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">的元素提取出来</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">最后，我们新建文件</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">task_dispatcher.py</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，内容如下</span></div><div style="word-break: break-all; box-sizing: border-box; border-radius: 0px; border: 0px solid rgb(136, 136, 136); background-color: rgba(128, 128, 128, 0.047); font-size: 14px; word-wrap: break-word; padding: 5px 5px 5px 60px; white-space: nowrap; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em;"><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">from</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">workers</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">import</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">url_list = [</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/getting-started/introduction.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/getting-started/brokers/index.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/getting-started/next-steps.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/getting-started/resources.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/userguide/application.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/userguide/tasks.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/userguide/canvas.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/userguide/workers.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/userguide/daemonizing.html'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html'</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">]</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">def</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">manage_crawl_task</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(102, 0, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">(urls)</span><span style="font-size: 90%; background-color: transparent; box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">for</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">url</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">in</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">urls:</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app.send_task(</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'tasks.crawl'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">, args=(url,))</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">if</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">__name__ ==</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'__main__'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">manage_crawl_task(url_list)</span></div></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这段代码的作用主要就是给worker发送任务，任务是</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">tasks.crawl</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，参数是</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">url</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">(元祖的形式)</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">现在，让我们在节点A(hostname为</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-style: italic; font-weight: 400; line-height: 170%;">resolvewang</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">的主机)上启动worker</span></div><blockquote style="box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">celery -A workers worker -c 2 -l info</span></div></blockquote><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这里</span> <span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-c</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">指定了线程数为2，</span> <span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-l</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">表示日志等级是</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">info</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">。我们把代码拷贝到节点B(节点名为</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-style: italic; font-weight: 400; line-height: 170%;">wpm</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">的主机)，同样以相同命令启动worker，便可以看到以下输出</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;"><img src="/e_img/Celery构建一个分布式爬虫：基础篇_files/1240.png" type="image/png" data-filename="1240.png" alt="两个节点" height="443" style="border:0px;vertical-align:middle;outline:0px;box-sizing:border-box;margin-top:15px;margin-bottom:15px;max-width:100%;" width="860"></span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">可以看到左边节点(A)先是</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">all alone</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，表示只有一个节点；后来再节点B启动后，它便和B同步了</span></div><blockquote style="box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">sync with celery@wpm</span></div></blockquote><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这个时候，我们运行给这两个worker节点发送抓取任务</span></div><blockquote style="box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">python task_dispatcher.py</span></div></blockquote><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">可以看到如下输出</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;"><img src="/e_img/Celery构建一个分布式爬虫：基础篇_files/1240 [1].png" type="image/png" data-filename="1240.png" alt="分布式抓取示意图" height="351" style="border:0px;vertical-align:middle;outline:0px;box-sizing:border-box;margin-top:15px;margin-bottom:15px;max-width:100%;" width="712"></span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">可以看到两个节点都在执行抓取任务，并且它们的任务不会重复。我们再在redis里看看结果</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;"><img src="/e_img/Celery构建一个分布式爬虫：基础篇_files/1240 [2].png" type="image/png" data-filename="1240.png" alt="backend示意图" height="258" style="border:0px;vertical-align:middle;outline:0px;box-sizing:border-box;margin-top:15px;margin-bottom:15px;max-width:100%;" width="579"></span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">可以看到一共有11条结果，说明</span> <span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">tasks.crawl</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">中返回的数据都在db2(backend)中了，并且以json的形式存储了起来，除了返回的结果，还有执行是否成功等信息。</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">到此，我们就实现了一个很基础的分布式网络爬虫，但是它还不具有很好的扩展性，而且貌似太简单了…下一篇我将以微博数据采集为例来演示如何构建一个稳健的分布式网络爬虫。</span></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> celery分布式爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> celery </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Celery构建一个分布式爬虫-理论篇</title>
      <link href="/2017/06/02/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/Celery%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB%EF%BC%9A%E7%90%86%E8%AE%BA%E7%AF%87/"/>
      <url>/2017/06/02/4.python%E7%88%AC%E8%99%AB/celery%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB/Celery%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB%EF%BC%9A%E7%90%86%E8%AE%BA%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><br></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><div style="box-sizing: border-box; background-color: rgb(245, 246, 247);"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; box-shadow: rgba(0, 0, 0, 0.0470588) 0px 2px 4px 0px; background-color: rgb(255, 255, 255);"><h1 style="font-size: 24px; margin: 0px; box-sizing: border-box; padding: 0px 29px;"><span style="font-size: 24px; color: rgb(44, 48, 51); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: 700; line-height: 38px;">如何构建一个分布式爬虫：理论篇</span></h1><h1 style="margin: 0px; box-sizing: border-box; padding: 0px 29px;"><span style="color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; line-height: 1.1; font-size: 14pt;">前言</span></h1><div style="box-sizing: border-box; margin: 0px 0px 30px; padding: 20px 30px 0px; overflow: hidden;"><div style="box-sizing: border-box; margin: 0px; padding: 0px;"><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">本系列文章计划分三个章节进行讲述，分别是理论篇、基础篇和实战篇。理论篇主要为构建分布式爬虫而储备的理论知识，基础篇会基于理论篇的知识写一个简易的分布式爬虫，实战篇则会以微博为例，教大家做一个比较完整且足够健壮的分布式微博爬虫。通过这三篇文章，希望大家</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: bold; line-height: 170%;">能掌握如何构建一个分布式爬虫的方法</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">；能举一反三，将</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">celery</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">用于除爬虫外的其它场景。目前基本上的博客都是教大家使用</span><a href="https://github.com/scrapy/scrapyd" style="background-color: transparent; margin: 0px; padding: 0px; outline: 0px; box-sizing: border-box; font-size: 16px; color: rgb(79, 161, 219); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%; text-decoration: none;" target="_blank">scrapyd</a><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">或者</span><a href="https://github.com/rolando/scrapy-redis" style="background-color: transparent; margin: 0px; padding: 0px; outline: 0px; box-sizing: border-box; font-size: 16px; color: rgb(79, 161, 219); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%; text-decoration: none;" target="_blank">scrapy-redis</a><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">构建分布式爬虫，本系列文章会从另外一个角度讲述如何用</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-style: italic; font-weight: 400; line-height: 170%;">requests+celery</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">构建一个健壮的、可伸缩并且可扩展的分布式爬虫。</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">本系列文章属于爬虫进阶文章，期望受众是具有一定Python基础知识和编程能力、有爬虫经验并且希望提升自己的同学。小白要是感兴趣，也可以看看，看不懂的话，可以等有了一定基础和经验后回过头来再看。</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">另外一点说明，本系列文章</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: bold; line-height: 170%;">不是旨在构建一个分布式爬虫框架或者分布式任务调度框架，而是利用现有的分布式任务调度工具来实现分布式爬虫</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，所以请轻喷。</span></div><h2 style="padding: 0px; box-sizing: border-box; text-align: start; margin: 0.8em 0px;"><span style="color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; line-height: 1.1; font-size: 16pt;">分布式爬虫概览</span></h2><ol style="font-size: 16px; margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; list-style: decimal;"><li style="margin: 0px 0px 0px 40px; padding: 0px; box-sizing: border-box; list-style: decimal;"><div><span style="font-size: 16px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">何谓分布式爬虫？</span></div><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">通俗的讲，分布式爬虫就是多台机器多个 spider 对多个 url 的同时处理问题，分布式的方式可以极大提高程序的抓取效率。</span></div></li><li style="margin: 0px 0px 0px 40px; padding: 0px; box-sizing: border-box; list-style: decimal;"><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">构建分布式爬虫通畅需要考虑的问题</span></div><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">（1）如何能保证多台机器同时抓取同一个URL？</span></div><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">（2）如果某个节点挂掉，会不会影响其它节点，任务如何继续？</span></div><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">（3）既然是分布式，如何保证架构的可伸缩性和可扩展性？不同优先级的抓取任务如何进行资源分配和调度？</span></div></li></ol><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">基于上述问题，我选择使用</span><a href="http://docs.celeryproject.org/en/latest/index.html" style="background-color: transparent; margin: 0px; padding: 0px; outline: 0px; box-sizing: border-box; font-size: 16px; color: rgb(79, 161, 219); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%; text-decoration: none;" target="_blank">celery</a><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">作为分布式任务调度工具，是分布式爬虫中任务和资源调度的核心模块。它会把所有任务都通过消息队列发送给各个分布式节点进行执行，所以可以很好的保证url不会被重复抓取；它在检测到worker挂掉的情况下，会尝试向其他的worker重新发送这个任务信息，这样第二个问题也可以得到解决；celery自带任务路由，我们可以根据实际情况在不同的节点上运行不同的抓取任务（在实战篇我会讲到）。本文主要就是带大家了解一下celery的方方面面(有celery相关经验的同学和大牛可以直接跳过了)</span></div><h2 style="padding: 0px; box-sizing: border-box; text-align: start; margin: 0.8em 0px;"><span style="color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; line-height: 1.1; font-size: 16pt;">Celery知识储备</span></h2><h3 style="padding: 0px; box-sizing: border-box; text-align: start; margin: 0.8em 0px;"><span style="color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; line-height: 1.1; font-size: 14pt;">celery基础讲解</span></h3><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">按celery官网的介绍来说</span></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">Celery 是一个简单、灵活且可靠的，处理大量消息的分布式系统，并且提供维护这样一个系统的必需工具。它是一个专注于实时处理的任务队列，同时也支持任务调度。</span></div></blockquote><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">下面几个关于celery的核心知识点</span></div><ol style="font-size: 16px; margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; list-style: decimal;"><li style="margin: 0px 0px 0px 40px; padding: 0px; box-sizing: border-box; list-style: decimal;"><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">broker：翻译过来叫做中间人。它是一个消息传输的中间件，可以理解为一个邮箱。每当应用程序调用celery的异步任务的时候，会向broker传递消息，而后celery的worker将会取到消息，执行相应程序。这其实就是消费者和生产者之间的桥梁。</span></div></li><li style="margin: 0px 0px 0px 40px; padding: 0px; box-sizing: border-box; list-style: decimal;"><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">backend: 通常程序发送的消息，发完就完了，可能都不知道对方时候接受了。为此，celery实现了一个backend，用于存储这些消息以及celery执行的一些消息和结果。</span></div></li><li style="margin: 0px 0px 0px 40px; padding: 0px; box-sizing: border-box; list-style: decimal;"><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">worker: Celery类的实例，作用就是执行各种任务。注意在celery3.1.25后windows是不支持celery worker的！</span></div></li><li style="margin: 0px 0px 0px 40px; padding: 0px; box-sizing: border-box; list-style: decimal;"><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">producer: 发送任务，将其传递给broker</span></div></li><li style="margin: 0px 0px 0px 40px; padding: 0px; box-sizing: border-box; list-style: decimal;"><div><span style="font-size: 16px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">beat: celery实现的定时任务。可以将其理解为一个producer，因为它也是通过网络调用定时将任务发送给worker执行。注意在windows上celery是不支持定时任务的！</span></div></li></ol><div><span style="font-size: 16px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; line-height: 170%;">下面是关于celery的架构示意图，结合上面文字的话应该会更好理解</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><div><span style="font-size: 16px;"><img src="/e_img/Celery构建一个分布式爬虫：理论篇_files/1240.png" type="image/png" data-filename="1240.png" style="font-family: microsoft yahei; font-size: 12pt;" width="393"></span></div></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">由于celery只是任务队列，而不是真正意义上的消息队列，它自身不具有存储数据的功能，所以broker和backend需要通过第三方工具来存储信息，celery官方推荐的是</span> <a href="https://www.rabbitmq.com/" style="background-color: transparent; margin: 0px; padding: 0px; outline: 0px; box-sizing: border-box; font-size: 16px; color: rgb(79, 161, 219); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%; text-decoration: none;" target="_blank">RabbitMQ</a><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">和</span><a href="https://redis.io/" style="background-color: transparent; margin: 0px; padding: 0px; outline: 0px; box-sizing: border-box; font-size: 16px; color: rgb(79, 161, 219); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%; text-decoration: none;" target="_blank">Redis</a><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，另外mongodb等也可以作为broker或者backend，可能不会很稳定，我们这里选择Redis作为broker兼backend。</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">关于redis的安装和配置可以查看</span><a href="https://github.com/ResolveWang/WeiboSpider/wiki/%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE" style="background-color: transparent; margin: 0px; padding: 0px; outline: 0px; box-sizing: border-box; font-size: 16px; color: rgb(79, 161, 219); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%; text-decoration: none;" target="_blank">这里</a></div><h3 style="padding: 0px; box-sizing: border-box; text-align: start; margin: 0.8em 0px;"><span style="color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; line-height: 1.1; font-size: 16pt;">实际例子</span></h3><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">先安装</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">celery</span></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">pip install celery</span></div></blockquote><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">我们以官网给出的例子来做说明，并对其进行扩展。首先在项目根目录下，这里我新建一个项目叫做</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">celerystudy</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，然后切换到该项目目录下，新建文件</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">tasks.py</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，然后在其中输入下面代码</span></div><div style="font-size: 14px; word-break: break-all; box-sizing: border-box; border-radius: 0px; border: 0px solid rgb(136, 136, 136); background-color: rgba(128, 128, 128, 0.047); word-wrap: break-word; padding: 5px 5px 5px 60px; white-space: nowrap; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em;"><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">from</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">celery</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">import</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">Celery</span></div><div><br></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app = Celery(</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'tasks'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">, broker=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'redis://:'</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'@223.129.0.190:6379/2'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">, backend=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'redis://:'</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'@223.129.0.190:6379/3'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">)</span></div><div><br></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">@app.task</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">def</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">add</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(102, 0, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">(x, y)</span><span style="font-size: 90%; background-color: transparent; box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">return</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">x + y</span></div></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这里我详细讲一下代码：我们先通过</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app=Celery()</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">来实例化一个celery对象，在这个过程中，我们指定了它的broker，是redis的db 2,也指定了它的backend,是redis的db3, broker和backend的连接形式大概是这样</span></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">redis://:password@hostname:port/db_number</span></div></blockquote><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">然后定义了一个</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">add</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">函数，重点是</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">@app.task</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，它的作用在我看来就是**将</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">add()</span></div><div><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">注册为一个类似服务的东西</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: bold; line-height: 170%;">，本来只能通过本地调用的函数被它装饰后，就可以通过网络来调用。这个</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: bold; line-height: 170%;">tasks.py</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: bold; line-height: 170%;">中的app就是一个worker。它可以有很多任务，比如这里的任务函数</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: bold; line-height: 170%;">add</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: bold; line-height: 170%;">。我们再通过</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">在命令行切换到项目根目录**，执行</span></div></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">celery -A tasks worker -l info</span></div></blockquote><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">启动成功后就是下图所示的样子</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;"><img src="/e_img/Celery构建一个分布式爬虫：理论篇_files/1240 [1].png" type="image/png" data-filename="1240.png" alt="celery的worker启动成功" height="487" style="border:0px;vertical-align:middle;outline:0px;box-sizing:border-box;margin-top:15px;margin-bottom:15px;max-width:100%;" width="860"></span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这里我说一下各个参数的意思，</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-A</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">指定的是app(即Celery实例)所在的文件模块，我们的app是放在</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">tasks.py</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">中，所以这里是</span> <span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">tasks</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">；worker表示当前以</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">worke</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">r的方式运行，难道还有别的方式？对的，比如运行定时任务就不用指定</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">worker</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这个关键字;</span> <span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-l info</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">表示该worker节点的日志等级是</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">info</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，更多关于启动worker的参数(比如</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-c</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">、</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-Q</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">等常用的)请使用</span></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">celery worker –help</span></div></blockquote><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">进行查看</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">将worker启动起来后，我们就可以通过网络来调用</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">add</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">函数了。我们在后面的分布式爬虫构建中也是采用这种方式分发和消费url的。在命令行先切换到项目根目录，然后打开python交互端</span></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><div><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">from tasks import add</span></div><div><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">rs = add.delay(2, 2) # 这里的add.delay就是通过网络调用将任务发送给</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 300; line-height: 1.5;">add</span><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">所在的worker执行</span></div></div></blockquote><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这个时候我们可以在worker的界面看到接收的任务和计算的结果。</span></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">[2017-05-19 14:22:43,038: INFO/MainProcess] Received task: tasks.add[c0dfcd0b-d05f-4285-b944-0a8aba3e7e61] # worker接收的任务</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">[2017-05-19 14:22:43,065: INFO/MainProcess] Task tasks.add[c0dfcd0b-d05f-4285-b944-0a8aba3e7e61] succeeded in 0.025274309000451467s: 4 # 执行结果</span></div></blockquote><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这里是异步调用，如果我们需要返回的结果，那么要等</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">rs</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">的</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">ready</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">状态</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">true</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">才行。这里</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">add</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">看不出效果，不过试想一下，如果我们是调用的比较占时间的io任务，那么异步任务就比较有价值了</span></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">rs #</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">rs.ready() # true 表示已经返回结果了</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">rs.status # ‘SUCCESS’ 任务执行状态，失败还是成功</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">rs.successful() # True 表示执行成功</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">rs.result # 4 返回的结果</span></div><div style="padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">rs.get() # 4 返回的结果</span></div></blockquote><div style="font-size: 14px; word-break: break-all; box-sizing: border-box; border-radius: 0px; border: 0px solid rgb(136, 136, 136); background-color: rgba(128, 128, 128, 0.047); word-wrap: break-word; padding: 5px 5px 5px 60px; white-space: nowrap; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em;"><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(102, 0, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">from</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">tasks import</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(102, 0, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">add</span></div><div><br></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">if</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">__name__ ==</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'__main__'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(102, 0, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">add</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">.delay(</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">5</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">10</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">)</span></div></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这时候可以在celery的worker界面看到执行的结果</span></div><div style="font-size: 14px; word-break: break-all; box-sizing: border-box; border-radius: 0px; border: 0px solid rgb(136, 136, 136); background-color: rgba(128, 128, 128, 0.047); word-wrap: break-word; padding: 5px 5px 5px 60px; white-space: nowrap; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em;"><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">[</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">2017</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">05</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">19</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">14</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">25</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">48</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">039</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">: INFO/MainProcess] Received task: tasks.add[f5ed0d5e</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-a</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">337-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">45</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">a2</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-a</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">6b3-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">38</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">a58efd9760]</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">[</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">2017</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">05</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">19</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">14</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">25</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">48</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">074</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">: INFO/MainProcess] Task tasks.add[f5ed0d5e</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-a</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">337-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">45</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">a2</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-a</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">6b3-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">38</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">a58efd9760] succeeded</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">in</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">0.03369094600020617</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">s:</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">15</span></div></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">此外，我们还可以通过</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">send_task()</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">来调用，将</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">excute_tasks.py</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">改成这样</span></div><div style="font-size: 14px; word-break: break-all; box-sizing: border-box; border-radius: 0px; border: 0px solid rgb(136, 136, 136); background-color: rgba(128, 128, 128, 0.047); word-wrap: break-word; padding: 5px 5px 5px 60px; white-space: nowrap; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em;"><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">from</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">tasks</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">import</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">if</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">__name__ ==</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'__main__'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app.send_task(</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'tasks.add'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">, args=(</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">10</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">15</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">),)</span></div></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这种方式也是可以的。</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">send_task()</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">还可能接收到为注册（即通过</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">@app.task</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">装饰）的任务，这个时候worker会忽略这个消息</span></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><div><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">[2017-05-19 14:34:15,352: ERROR/MainProcess] Received unregistered task of type ‘tasks.adds’.</span></div><div><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">The message has been ignored and discarded.</span></div></div></blockquote><h3 style="padding: 0px; box-sizing: border-box; text-align: start; margin: 0.8em 0px;"><span style="color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; line-height: 1.1; font-size: 16pt;">定时任务</span></h3><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">上面部分讲了怎么启动worker和调用worker的相关函数，这里再讲一下celery的定时任务。</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">爬虫由于其特殊性，可能需要定时做增量抓取，也可能需要定时做模拟登陆，以防止cookie过期，而celery恰恰就实现了定时任务的功能。在上述基础上，我们将</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">tasks.py</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">文件改成如下内容</span></div><div style="font-size: 14px; word-break: break-all; box-sizing: border-box; border-radius: 0px; border: 0px solid rgb(136, 136, 136); background-color: rgba(128, 128, 128, 0.047); word-wrap: break-word; padding: 5px 5px 5px 60px; white-space: nowrap; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em;"><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">from</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">celery</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">import</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">Celery</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app = Celery(</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'add_tasks'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">, broker=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'redis:'</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'//223.129.0.190:6379/2'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">, backend=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'redis:'</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'//223.129.0.190:6379/3'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">)</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">app.conf.update(</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(136, 0, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;"># 配置所在时区</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_TIMEZONE=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'Asia/Shanghai'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_ENABLE_UTC=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">True</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(136, 0, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;"># 官网推荐消息序列化方式为json</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_ACCEPT_CONTENT=[</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'json'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">],</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_TASK_SERIALIZER=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'json'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERY_RESULT_SERIALIZER=</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'json'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(136, 0, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;"># 配置定时任务</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">CELERYBEAT_SCHEDULE={</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'my_task'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">: {</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'task'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'tasks.add'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(136, 0, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;"># tasks.py模块下的add方法</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'schedule'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">60</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(136, 0, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;"># 每隔60运行一次</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">'args'</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">: (</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">23</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">12</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">),</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">}</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">}</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">)</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">@app.task</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">def</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">add</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(102, 0, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">(x, y)</span><span style="font-size: 90%; background-color: transparent; box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">return</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">x + y</span></div></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">然后先通过</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">ctrl+c</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">停掉前一个worker，因为我们代码改了，需要重启worker才会生效。我们再次以</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">celery -A tasks worker -l info</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这个命令开启worker。</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这个时候我们只是开启了worker，如果要让worker执行任务，那么还需要通过beat给它定时发送，我们再开一个命令行，切换到项目根目录，通过</span></div><blockquote style="font-size: 16px; box-sizing: border-box; padding: 15px 20px; margin: 0px 0px 1.7em; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px;"><div style="padding: 0px; box-sizing: border-box; margin: 0px; font-size: 1em; word-wrap: break-word; word-break: normal;"><span style="font-size: 1em; background-color: rgba(128, 128, 128, 0.047); color: rgb(111, 111, 111); font-family: &quot;microsoft yahei&quot;; font-weight: 300; line-height: 1.5;">celery beat -A tasks -l info</span></div></blockquote><div style="font-size: 14px; word-break: break-all; box-sizing: border-box; border-radius: 0px; border: 0px solid rgb(136, 136, 136); background-color: rgba(128, 128, 128, 0.047); word-wrap: break-word; padding: 5px 5px 5px 60px; white-space: nowrap; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em;"><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">celery beat v3.1.25 (Cipater) is starting.</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">__ -</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">...</span> <span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">__ - _</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">Configuration -&gt;</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">. broker -&gt; redis://</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">223.129</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">.0</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">.190</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">6379</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">/</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">2</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">. loader -&gt; celery.loaders.app.AppLoader</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">. scheduler -&gt; celery.beat.PersistentScheduler</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">. db -&gt; celerybeat-schedule</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">. logfile -&gt; [stderr]@%INFO</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">. maxinterval -&gt; now (0s)</span></div><div style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; box-sizing: border-box; background-color: transparent; white-space: pre; font-size: 90%; padding: 0px; overflow-x: auto; word-wrap: normal; background-position: initial initial; background-repeat: initial initial;"><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">[</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">2017</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">05</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">-</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">19</span> <span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">15</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">56</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">:</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">57</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">,</span><span style="margin: 0px; padding: 0px; box-sizing: border-box; font-size: 90%; background-color: transparent; color: rgb(0, 102, 102); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">125</span><span style="font-size: 90%; background-color: transparent; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">: INFO/MainProcess] beat: Starting...</span></div></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">这样就表示定时任务已经开始运行了。</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">眼尖的同学可能看到我这里celery的版本是</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">3.1.25</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">，这是因为celery支持的</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">windows</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">最高版本是3.1.25。由于我的分布式微博爬虫的worker也同时部署在了windows上，所以我选择了使用</span> <span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">3.1.25</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">。如果全是linux系统，建议使用celery4。</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">此外，还有一点需要注意，在celery4后，定时任务（通过schedule调度的会这样，通过crontab调度的会马上执行）会在当前时间再过定时间隔执行第一次任务，比如我这里设置的是60秒的间隔，那么第一次执行</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">add</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">会在我们通过</span><span style="font-size: 90%; background-color: rgba(128, 128, 128, 0.075); border-radius: 0px; box-sizing: border-box; padding: 2px 4px; white-space: nowrap; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-weight: 400; line-height: 170%;">celery beat -A tasks -l info</span><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">启动定时任务后60秒才执行；celery3.1.25则会马上执行该任务。</span></div><div style="font-size: 16px; padding: 0px; box-sizing: border-box; margin: 0px 0px 1.7em; word-wrap: break-word; word-break: normal;"><span style="font-size: 16px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%;">关于定时任务更详细的请看官方文档</span><a href="http://docs.celeryproject.org/en/master/userguide/periodic-tasks.html" style="background-color: transparent; margin: 0px; padding: 0px; outline: 0px; box-sizing: border-box; font-size: 16px; color: rgb(79, 161, 219); font-family: &quot;microsoft yahei&quot;; font-weight: 400; line-height: 170%; text-decoration: none;" target="_blank">celery定时任务</a></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> celery分布式爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> celery </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CssContent字体破解</title>
      <link href="/2017/05/23/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E7%89%B9%E6%AE%8A%E5%8F%8D%E5%8F%8D%E7%88%AC/CssContent%E5%AD%97%E4%BD%93%E7%A0%B4%E8%A7%A3/"/>
      <url>/2017/05/23/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E7%89%B9%E6%AE%8A%E5%8F%8D%E5%8F%8D%E7%88%AC/CssContent%E5%AD%97%E4%BD%93%E7%A0%B4%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><br></div><div style="font-size: 16px; display: inline-block;"><div style="box-sizing: border-box; font-size: 10px; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><div style="box-sizing: border-box; background-color: rgb(255, 255, 255); font-size: 16px; background-position: initial initial; background-repeat: initial initial;"><div style="box-sizing: border-box; background-color: rgb(255, 255, 255);"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; word-wrap: break-word;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; display: block; margin-right: 7.6923%; margin-left: 7.6923%; width: 100%;"><h1 style="clear: both; margin: 20px 0px 0.2em; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 1.75rem;"><span style="box-sizing: border-box;"><span style="font-size: 1.75rem; font-family: 微软雅黑, 'Microsoft YaHei', Montserrat, 'Helvetica Neue', sans-serif; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.25; font-weight: 700;">爬虫与汽车之家的Css:Content-反爬与反反爬的奇技淫巧</span></span></h1><div style="box-sizing: border-box; margin-bottom: 0.6em;"><ul><div><span style="box-sizing: border-box; display: inline-block; margin-bottom: 0.538462em; font-size: 12px;"><span style="box-sizing: border-box; clip: rect(1px 1px 1px 1px); height: 1px; overflow: hidden; width: 1px; position: absolute; word-wrap: normal; font-size: 12px; font-family: 微软雅黑, 'Microsoft YaHei'; color: rgb(153, 153, 153); line-height: 1.42857;">发布于</span></span></div><li style="box-sizing: border-box; list-style: none;"><br></li></ul></div></div><div style="box-sizing: border-box; margin-right: 7.6923%; margin-left: 7.6923%; border-color: rgb(209, 209, 209); display: inline-block; width: 100%;"><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">话说感觉这个系列的我起名字越来越不走心了。越写越像哈利波特的起名套路了-爬虫与混血王子。（嗯，一点都不违和）我这个爱扯犊子的性格真是很难收敛啊。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">话说Css自从越来越强大之后，被很多反爬工程师看上了。上篇文章介绍的字体就需要用到Css中的font-face和font-family。这节我们通过汽车之家来看看Css在反爬中另外一个妙用-content。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; color: rgb(51, 51, 51); line-height: 1.42857;">本来网页上显示的字无非两种，一种就是文本，一种就是显示在图片上的。所以之前有一种常规的反爬，就是把字当做图片替换来显示，目前百度还经常喜欢这么处理，比如百度知道，百度指数（参考天坑），当然不少的电话号码和邮箱这类重要信息，依然也再沿用这个方案。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">然后随着css的content兼容性越来越好之后，就又有了一个性能更好的反爬，就是用css的content来代替原来文本中的文字，辅以合适的随机生成的方法，确实也不错。算是一个性能和反爬折中的方案吧，比如我们今天要提到的</span><span style="box-sizing: border-box; font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: 700;"> 汽车之家论坛 </span><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">就是采用这样一个反爬方案。</span></div><h2 style="clear: both; margin: 0px; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 24px;"></h2><h2><span style="font-size: 24px; font-family: -apple-system, 'color:#333333;color:inherit;margin-bottom:1.21739em;margin-top:2.43478em;font-weight:900;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.21739;">一.为什么Css:Content能反爬。</span></h2><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">事实上任何能让原来html中文本隐藏混淆加密又不影响正常用户显示的方式都可以来做反爬，比如我们上一篇文章提到的字体方式混淆，比如我们后面要提到的JS加密。而这篇文章主要是采用Css的content属性来隐藏。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">我们简单的看下content属性使用，大家可以尝试复制这段写入一个网页的Css中</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; display: block; word-break: break-all; background-color: rgb(245, 245, 245);"><div><span style="font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">div:before {</span></div><div><span style="font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">content: &quot;神箭手&quot;;</span></div><div><span style="font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">}</span></div></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">我们会发现每一个div的开头都加入的神箭手的文字，而且这些文字还是无法复制的。再加上并不像生成图片那样会严重拖慢服务器性能，所以算是一个挺折中的方案。</span></div><h2 style="clear: both; margin: 0px; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 24px;"></h2><h2><span style="font-size: 24px; font-family: -apple-system, 'color:#333333;color:inherit;margin-bottom:1.21739em;margin-top:2.43478em;font-weight:900;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.21739;">二.如何好好利用Css:Content反爬</span></h2><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">我们一起来看看汽车之家的反爬学习一下：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">我们打开一个汽车之家论坛网页，然后直接Ctrl+A全选，就可以很明显的看到用Css的Content插入进的字符，我们掀开被子仔细研究下：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;"><img src="/e_img/CssContent字体破解_files/20170826150900_65397.png" type="image/png" data-filename="20170826150900_65397.png" height="481" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="600"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">可以看到，汽车之家是将一些常用的字，包括&lt;了&gt;&lt;，&gt;&lt;的&gt;&lt;九&gt;等等变换成Css，这样做优点是可以提前写好css，缺点是由于是固定的库，很容易先把映射的关系解析好，然后直接全文替换。因此比较推荐的，当然还是每次的动态生成，不过这依然产生一个工程性的优化问题，这里还是比较推荐用池的方案，或者用客户的IP做一个hash映射也不错。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">不过汽车之家做的比较好的在于很好的隐藏了这段固定映射的Css，同时Css中的class也每次会替换一些名称部分，同时又不是每次都把所有的映射库输出出来，而是节选文章中有的文字，因此既缩小了输出大小，又隐藏了整体库，看得出工程师也是打得一手好牌啊。</span></div><h2 style="clear: both; margin: 0px; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 24px;"></h2><h2><span style="font-size: 24px; font-family: -apple-system, 'color:#333333;color:inherit;margin-bottom:1.21739em;margin-top:2.43478em;font-weight:900;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.21739;">三.如何应对Css:Content这种类型的反爬</span></h2><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">我们就以汽车之家为例吧：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: 700;">1.获取映射的Css</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">其实汽车之家这个例子来说，主要的问题并不是如何解决这种反爬，因为这种模式的反爬如果知道映射，搞起来太简单，直接正则替换就行了。这里最难的是怎么找到这个映射，汽车之家可以说隐藏的是教科书级的完美，解析方案我就不展开讲了，因为这个是Javascript对抗里的内容（后面我可能会拿出几篇文章单独讲JS对抗），重点就是解析跟在正文后面的这一段JS。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;"><img height="25" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="1865"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: 700;">好的工具等于成功的一半，想要很好的解析JS，一定要有一个好的JS解释引擎。这样可以省掉大量的破解的工作而直接运行别人的JS，在代码中整合脚本引擎相当麻烦，最完美的莫过于找一个好的JS的爬虫框架。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">具体的Javascript对抗我在后面再讲，这里简单说下，直接运行这段代码，我们可以看到在Nl_（可变的）这个变量中存储了完整的Css映射，因此我们想办法在运行中保存该变量，带入下一步即可。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;"><img height="25" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="726"></span></div><p style="box-sizing: border-box; margin: 0px 0px 10px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 250, 165);-evernote-highlight:true;"></p><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: 700;">2.根据映射进行内容替换</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">我们既然拥有了Css映射，那还有啥难的，直接读取CssRules，循环用正则替换把</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; display: block; word-break: break-all; background-color: rgb(245, 245, 245);"><span style="font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">&lt;span class='hs_kw4_mainYM'&gt;&lt;/span&gt;</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">这类标签直接替换成content中的文字：</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; display: block; word-break: break-all; background-color: rgb(245, 245, 245);"><span style="font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">九</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">好了，大功告成。</span></div><p style="box-sizing: border-box; margin: 0px 0px 10px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 250, 165);-evernote-highlight:true;"></p><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">贴一下部分神箭手中运行的解析代码：</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; display: block; word-break: break-all; background-color: rgb(245, 245, 245);"><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">var</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">code</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">=</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">extract</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">page</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">raw</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); line-height: 1.42857;">&quot;//div[@class='conttxt']/div/script&quot;</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">);</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">if</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">code</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">){</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); line-height: 1.42857;">eval</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">code</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">);</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">var</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">cssMapping</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">=</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">{};</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">if</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">rules</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">length</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">&gt;</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); line-height: 1.42857;">0</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">){</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">for</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">var</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">ri</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">in</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">rules</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">){</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">var</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">rule</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">=</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">rules</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">[</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">ri</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">];</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">var</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">matches1</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">=</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(128, 128, 0); line-height: 1.42857;">/content:\s*&quot;([^&quot;]+)&quot;/</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">exec</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">rule</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">var</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">matches2</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">=</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(128, 128, 0); line-height: 1.42857;">/\.([^:]+)::before/</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">exec</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">rule</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">if</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">matches1</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">&amp;&amp;</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">matches2</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">){</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">cssMapping</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">[</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">matches2</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">[</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); line-height: 1.42857;">1</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">]]</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">=</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">matches1</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">[</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); line-height: 1.42857;">1</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">];</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">}</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">}</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">page</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">raw</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">=</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">page</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">raw</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">replace</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(128, 128, 0); line-height: 1.42857;">/&lt;span\s+class='(hs_kw\d+_[^']+)'&gt;&lt;\/span&gt;/g</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">function</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">match</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">,</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">p1</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">,</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">p2</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">){</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">return</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">cssMapping</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">[</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">p1</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">];</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">});</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">}</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">}</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">page</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">raw</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857; font-weight: bold;">=</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">exclude</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">page</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">raw</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); line-height: 1.42857;">&quot;//div[@class='conttxt']/div/script&quot;</span><span style="box-sizing: border-box; font-size: 13px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); line-height: 1.42857;">);</span></div></div><p style="box-sizing: border-box; margin: 0px 0px 10px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 250, 165);-evernote-highlight:true;"></p><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">————————————————最后说两句————————————————————</span></div><div style="box-sizing: border-box; margin: 0px;"><span style="font-size: 16px; font-family: -apple-system, 'font-size:medium;color:#333333;background-color:#FFFFFF;} '; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); line-height: 1.42857;">大家会发现，很多非常奇特的反爬措施，大多依赖Javascript加密的功力。当然有些Javascript加密可以直接通过JS渲染，如[Email Protection]，但是也有很多单纯通过渲染JS无法解决，如今天这篇文章中提到，因此也让Css的这种反爬措施有别于普通的JS加密形式，给反反爬工程师设置了更高的障碍，是我个人比较推荐的一种反爬手段。反过来对于反反爬来说：在有了好的工具前提下，熟练掌握JS则是一个必备内功之一。</span></div></div><div style="font-size:0.8125rem;display:inline-block;margin-right:7.6923%;margin-left:7.6923%;color:rgb(104, 104, 104);font-family:微软雅黑, &quot;Microsoft YaHei&quot;, Montserrat, &quot;Helvetica Neue&quot;, sans-serif;box-sizing:border-box;line-height:1.61538;margin-bottom:0em;margin-top:2.15385em;width:100%;float:left;"></div><div style="box-sizing: border-box; display: block; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(26, 26, 26); border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(26, 26, 26); clear: both; margin: 0px 7.6923% 3.5em; width: 100%;"><h2 style="width: 1px; clear: both; margin: 20px 0px 10px; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 30px; overflow: hidden; clip: rect(1px 1px 1px 1px); word-wrap: normal; position: absolute;"><span style="font-size: 30px; font-family: 微软雅黑, 'Microsoft YaHei', '　 Montserrat', 'Helvetica Neue', sans-serif; color: rgb(51, 51, 51); line-height: 1.1; font-weight: 500;">文章导航</span></h2></div></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫特殊反反爬 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 反反爬 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>参数伪造</title>
      <link href="/2017/05/23/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E7%89%B9%E6%AE%8A%E5%8F%8D%E5%8F%8D%E7%88%AC/%E5%8F%82%E6%95%B0%E4%BC%AA%E9%80%A0/"/>
      <url>/2017/05/23/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E7%89%B9%E6%AE%8A%E5%8F%8D%E5%8F%8D%E7%88%AC/%E5%8F%82%E6%95%B0%E4%BC%AA%E9%80%A0/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="box-sizing: border-box; font-size: 10px; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><div style="box-sizing: border-box; background-color: rgb(255, 255, 255); font-size: 16px; background-position: initial initial; background-repeat: initial initial;"><div style="box-sizing: border-box; background-color: rgb(255, 255, 255);"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; word-wrap: break-word;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; margin-right: 7.6923%; margin-left: 7.6923%; width: 100%;"><h1 style="clear: both; margin: 20px 0px 0.2em; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 1.75rem;"><span style="font-size: 16px;"><span style="box-sizing: border-box;"><span style="font-size: 1.75rem; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Montserrat, &quot;Helvetica Neue&quot;, sans-serif; font-weight: 700; line-height: 1.25;">携程反爬中的Eleven参数-反爬与反反爬的奇技淫巧</span></span></span></h1></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; margin-right: 7.6923%; margin-left: 7.6923%; border-color: rgb(209, 209, 209); width: 100%;"><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;line-height: 1.42857;background-color: rgb(255, 250, 165);&quot;; background-color: rgb(255, 250, 165);-evernote-highlight:true;">今天我们要聊点什么呢，之前说要聊去哪儿的，不过暂且咱们再放一放，先聊一聊去哪儿的干爹携程吧，上次我记得看了携程工程师霸气回应说懂爬虫的来去哪儿，懂反爬的来携程。我觉得特别棒，这种开放的心态和自信，正是一个开放的互联网环境所需要的。</span></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857; background-color: rgb(255, 250, 165);-evernote-highlight:true;">所以今天这节课虽然咱们以携程为例，但是我们还是以学习的目的为主，因此我不会把完整的代码放出来，大家掌握思路，拿到渔网比直接copy代码有用的多。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">上篇文章用邮箱加密给大家演示了爬虫中简单的JS对抗，今天这节课咱们就用携程的Eleven参数来演示下复杂的JS对抗。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">对了，这个题图，主要是因为携程给他们这个反爬的JS起了一个名字叫oceanball-海洋球，不明觉厉啊。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">好了，言归正传。做过携程酒店爬虫的朋友，估计都研究过这个eleven参数，这个参数到底是哪里的呢，我们先看下页面请求：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;"><img src="/e_img/参数伪造_files/20170828105921_93254.png" type="image/png" data-filename="20170828105921_93254.png" height="388" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="600"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">就是这样一个页面，打开一个酒店页面会发现实际的酒店房型列表是一个ajax请求，如下：</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-radius: 4px; word-break: break-all; background-color: rgb(245, 245, 245);"><span style="font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; line-height: 1.42857;">http://hotels.ctrip.com/Domestic/tool/AjaxHote1RoomListForDetai1.aspx?psid=&amp;MasterHotelID=441351&amp;hotel=441351&amp;EDM=F&amp;roomId=&amp;IncludeRoom=&amp;city=2&amp;showspothotel=T&amp;supplier=&amp;IsDecoupleSpotHotelAndGroup=F&amp;contrast=0&amp;brand=0&amp;startDate=2017-08-28&amp;depDate=2017-08-29&amp;IsFlash=F&amp;RequestTravelMoney=F&amp;hsids=&amp;IsJustConfirm=&amp;contyped=0&amp;priceInfo=-1&amp;equip=&amp;filter=&amp;productcode=&amp;couponList=&amp;abForHuaZhu=&amp;defaultLoad=T&amp;TmFromList=F&amp;eleven=c4350e460862b69d9d76724e1325a0a54ef23c2e0648636c855a329418018a85&amp;callback=CASuBCgrghIfIUqemNE&amp;_=1503884369495</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">前面咱说过，出于对反爬工程师工作的尊重，我们今天的文章不去完整介绍整个携程爬虫的做法，其实除了这eleven参数，携程还是在代码了下了不少毒的。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">一般来说，一个ajax请求，如果没有做cookie限制的话，最难的问题就是能把所有的参数拼接完整，这个请求中最难的就是这个eleven参数的获取，那咱们遇到这种问题，应该具体如何处理，同时对于反爬工作来说，又有什么可以借鉴的地方呢。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">一、反反爬中遇到复杂JS请求的处理流程</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">凡是题目总有一个解题思路，反反爬也不例外，解题思路很重要。不然就像没头苍蝇一样到处乱撞，今天这篇文章最重要的就是说说这个解题思路。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">1.查看发起这个请求的JS来源</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">首先，Ajax请求大多都是由JS发起的（今天我们不讨论flash或者其他情况，不常见），我们使用Chrome工具，将鼠标移动到这个请求的Initiator这一栏上，就可以看到完整的调用栈，非常清晰。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;"><img src="/e_img/参数伪造_files/20170828105939_77008.png" type="image/png" data-filename="20170828105939_77008.png" height="293" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="600"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">2.确认核心JS文件</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">可以看到调用栈中有非常多的JS，那具体我们要分析哪个呢？一般来说我们可以首先排除掉VM开头的和常见库如jQuery这类，当然也不绝对，有些JS也会把自己注册到VM中去，这个另说，携程这里的情况挺明显，一眼就看到了那个不寻常的oceanball，看着就不是一般人，就他了。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">3.分析JS文件</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">点击这个oceanball咱们就可以看到完整了源码了，下面也是最难的一步，分析JS文件。上一篇文章已经简单说了一些，首先，可读性非常重要，咱们复制完整的JS，贴进Snippet中，咱们大概看下，文件太大，没办法贴到文章中来：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">一看就是在代码里面下毒，携程反爬工程师不简单啊。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;"><img src="/e_img/参数伪造_files/20170828110156_61923.png" type="image/png" data-filename="20170828110156_61923.png" height="178" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="600"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">不过呢，咱们看到这种很多数字的其实不要害怕，特别是在看到eval函数和String.fromCharCode，因为这就是把代码加密了一下，这种加密就跟没加密一样，咱们把eval函数直接换成console.log函数，运行一下这个Snippet。在控制台就可以看到原始代码。解密后如下：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;"><img src="/e_img/参数伪造_files/20170828110422_63467.png" type="image/png" data-filename="20170828110422_63467.png" height="293" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="600"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">看来这个是毒中毒啊，解密后的代码虽然比刚刚的可读性大为增加，但是依然可读性不强，不过根据经验，这样的文件已经没有一个特别简单的方案可以一举解密，只能逐行分析加部分替换了。当然直接Debug也是一个最省力的方案。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;"><img src="/e_img/参数伪造_files/20170828110433_82913.png" type="image/png" data-filename="20170828110433_82913.png" height="292" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="600"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">通过Debug调试，我们可以看到很多变量的中间值，这中间最重要的莫过于这最后一行，我们可以看到Eleven参数这个时候已经算出来了，而向CASttwHNetheyMWqSJ这个函数中传入一串实现，而这个实现正式返回eleven的值（这段代码是要把人绕死的节奏吗），所以我们只需要构造一个假的CASttwHNetheyMWqSJ来接收这段实现即可，而CASttwHNetheyMWqSJ这个函数名也是通过url传入的，好了，基本上大体的分析搞定了，下面就是构造这个代码的运行环境了。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">4.构造运行环境</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">重要的话要重复很多遍：写爬虫最好的语言就是JS，因为JS对抗是爬虫中最难的部分，而一个合适的JS环境则可以事半功倍。全球最好的JS爬虫框架-</span><a href="http://link.zhihu.com/?target=http%3A/www.shenjian.io/" style="box-sizing: border-box; transition: all 0.2s ease-in-out; font-size: 16px; background-position: 0px 0px; color: rgb(66, 139, 202); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;line-height: 1.42857;text-decoration: none;background-color: rgb(255, 250, 165);&quot;; background-color: rgb(255, 250, 165);-evernote-highlight:true;" target="_blank">在线网络爬虫/大数据分析/机器学习开发平台-神箭手云</a><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">有了JS运行环境，我们其实只需要构造一个函数接受Eleven参数，请求oceanball，并直接运行他就可以了。我们看下我们构造的CASttwHNetheyMWqSJ函数：</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-radius: 4px; word-break: break-all; background-color: rgb(245, 245, 245);"><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">callbackFunc</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">randomCallback</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">15</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">);</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">getEleven</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">eval</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;var &quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">callbackFunc</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot; = function(a){getEleven = a}&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">);</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">这里对于初学者可能还是有点绕，简单说明下，首先我们随机了一个函数名，然后我们定义了一个空函数来接受oceanball中的返回eleven参数的函数实现，然后我把这个函数名定义为接受new Function的实现，这样我们后面就可以用getEleven来直接获取eleven参数了。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">这里还得说下普通JS环境的缺陷，由于在普通JS环境中（非浏览器中）缺少一些重要的内置变量，如window，document等等，导致很多JS是运行不了的，这里我们补上这些变量：</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-radius: 4px; word-break: break-all; background-color: rgb(245, 245, 245);"><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">Image</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">function</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(){};</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">window</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{};</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">window</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">document</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{};</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">document</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">window</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">document</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">window</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">navigator</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;appCodeName&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">:</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;Mozilla&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;appName&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">:</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;Netscape&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;language&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">:</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;zh-CN&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;platform&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">:</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;Win&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">};</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">window</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">navigator</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">userAgent</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">site</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">getUserAgent</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">();</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">navigator</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">window</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">navigator</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">window</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">location</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{};</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">window</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">location</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">href</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;http://hotels.ctrip.com/hotel/&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">hotel_id</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;.html&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">location</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">window</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">location</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">JS如果比较熟悉的话，应该能看出来这里有一个变量不常规，就是第一行的Image变量。这又是携程下的毒啊，我们回到刚刚oceanball的代码看下：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;"><img src="/e_img/参数伪造_files/20170828110445_11101.png" type="image/png" data-filename="20170828110445_11101.png" height="193" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="600"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">代码中有一句尝试new一个Image对象，如果失败了，则把某一个参数+1，而这个参数正是eleven参数中的某一位，也就是说eleven参数中有一位记录了JS运行环境是否支持new Image，我们这种伪造的浏览器环境当然不支持，所以我们得补上。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">5.大功告成</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">好了，解了这么多毒，咱们终于可以获取到了eleven参数，当然这只是漫漫长征第一步，后面请求到的结果中，还有更深更辣的毒等着大家：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;"><img src="/e_img/参数伪造_files/20170828110453_62131.png" type="image/png" data-filename="20170828110453_62131.png" height="150" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="150"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">二、反爬中可以借鉴的地方</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857; background-color: rgb(255, 250, 165);-evernote-highlight:true;">首先非常感谢携程反爬工程师给了一个教科书般的JS反爬案例，从这个例子我们也可以看出反爬中使用JS代码加密混淆的威力，基本上如果不是JS熟手，或者不熟悉解题思路的话，就是束手无策。JS混淆的方案有很多，大家可以到网上搜一搜，这里还是很推荐携程这种ajax配合回调+js二次混淆的方案，可以说极大提升了反反爬难度的同时也做到了基本不影响性能。但是这个方案依然对于直接渲染JS页面效果一般，还是建议配合之前文章提到的css:content的方案，这样处理之后那对于反反爬工程师的酸爽绝对够得上100桶统一老坛。</span></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫特殊反反爬 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 反反爬 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CloudFlare邮箱加密</title>
      <link href="/2017/05/23/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E7%89%B9%E6%AE%8A%E5%8F%8D%E5%8F%8D%E7%88%AC/CloudFlare%E9%82%AE%E7%AE%B1%E5%8A%A0%E5%AF%86(cfemail)/"/>
      <url>/2017/05/23/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E7%89%B9%E6%AE%8A%E5%8F%8D%E5%8F%8D%E7%88%AC/CloudFlare%E9%82%AE%E7%AE%B1%E5%8A%A0%E5%AF%86(cfemail)/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="box-sizing: border-box; font-size: 10px; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><div style="box-sizing: border-box; background-color: rgb(255, 255, 255); font-size: 16px; background-position: initial initial; background-repeat: initial initial;"><div style="box-sizing: border-box; background-color: rgb(255, 255, 255);"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; word-wrap: break-word;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; margin-right: 7.6923%; margin-left: 7.6923%; width: 100%;"><h1 style="clear: both; margin: 20px 0px 0.2em; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 1.75rem;"><span style="font-size: 16px;"><br></span></h1><div style="box-sizing: border-box; margin-bottom: 0.6em;"></div></div><div><div style="box-sizing: border-box; margin: 0px 0px 10px;"></div><h1 style="clear: both; margin: 20px 0px 0.2em; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 1.75rem;"><span style="clear: both; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 1.75rem; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Montserrat, &quot;Helvetica Neue&quot;, sans-serif; font-weight: bold; line-height: 1.25; background-color: rgb(255, 250, 165);-evernote-highlight:true;">爬虫与CloudFlare邮箱加密(cfemail)-反爬与反反爬的奇技淫巧</span></h1><div style="box-sizing: border-box; margin: 0px 0px 10px;"><ul><div><span style="box-sizing: border-box; font-size: 12px; clip: rect(1px 1px 1px 1px); height: 1px; overflow: hidden; width: 1px; position: absolute; word-wrap: normal; color: rgb(153, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857; background-color: rgb(255, 250, 165);-evernote-highlight:true;">发布于</span></div><li style="box-sizing: border-box; list-style: none;"><div><br style="background-color: rgb(255, 250, 165); font-size: 12pt; color: rgb(51, 51, 51);-evernote-highlight:true;"></div></li></ul><div><span style="font-size: 16px; color: #333333; font-family: -apple-system, &quot;font-size; background-color: rgb(255, 250, 165); line-height: 1.42857;">由于Javascript这块的内容很多，难度也不一样。所以这一篇文章希望给大家讲一些入门级别的。本来找来找去感觉都是高段位玩家，然而今天在做邮箱地址爬虫的过程中一段代码突然跳到了我的面前-邮箱地址加密JS。恰好难度适中，就今天拿出来跟大家一起聊一聊：</span></div><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857; background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857; background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857; background-color: rgb(255, 250, 165);-evernote-highlight:true;">下面我们就进入正题，先来看看这个文章标题上的内容跟我们这篇文章到底有啥关系：</span></div><blockquote style="padding: 10px 20px; border-width: 0px 0px 0px 5px; border-color: rgb(26, 26, 26) rgb(26, 26, 26) rgb(26, 26, 26) rgb(238, 238, 238); font-size: 17.5px; margin: 0px 0px 20px; border-style: solid; quotes: none; box-sizing: border-box; position: relative;"><div style="box-sizing: border-box; margin: 0px;"><span style="font-size: 17.5px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.47368;">CloudFlare是一家美国的跨国科技企业，总部位于旧金山，在英国伦敦亦设有办事处。CloudFlare以向客户提供网站安全管理、性能优化及相关的技术支持为主要业务。通过基于反向代理的内容传递网络(ContentDeliveryNetwork,CDN)及分布式域名解析服务(DistributedDomainNameServer)，CloudFlare可以帮助受保护站点抵御包括拒绝服务攻击(DenialofService)在内的大多数网络攻击，确保该网站长期在线，同时提升网站的性能、访问速度以改善访客体验。</span></div></blockquote><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857; background-color: rgb(255, 250, 165);-evernote-highlight:true;">看完了好像还是没关系，别急，我们今天要讲的是CloudFlare中的一个功能，叫做Email Obfuscation，也就是邮箱混淆。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">当我们使用了 CloudFlare 的服务，如果开启了 Email Obfuscation ，页面里真正的 Email 地址会被隐藏，具体隐藏的代码如下：</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-radius: 4px; word-break: break-all; background-color: rgb(245, 245, 245);"><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">&lt;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">class</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;__cf_email__&quot;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">href</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;/cdn-cgi/l/email-protection&quot;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">data</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">-</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">cfemail</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;a89b9b9c919d9b909a989ae8d9d986cbc7c5&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">&gt;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">[</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">email</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">&amp;</span><span style="box-sizing: border-box; background-color: rgb(227, 210, 210); font-size: 13px; color: rgb(166, 23, 23); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">#</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">160</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">protected</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">]</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">&lt;</span><span style="box-sizing: border-box; background-color: rgb(227, 210, 210); font-size: 13px; color: rgb(166, 23, 23); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">/a&gt;&lt;script data-cfhash='f9e31' type=&quot;text/javascript&quot;&gt;/* &lt;![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&amp;&amp;(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]&gt; */&lt;/script&gt;</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">做过爬虫的朋友应该都对这段代码不陌生，非常常见的一个邮箱混淆服务。</span></div><h2><span style="font-size: 24px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;color:#333333;color:inherit;margin-bottom:1.21739em;margin-top:2.43478em;font-weight:900;background-color:#FFFFFF;} &quot;; line-height: 1.21739;">一.为什么要使用邮箱混淆服务。</span></h2><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">事实上很多站长可能并不知道自己使用了这样的服务，因为CloudFlare主要还是以CDN为主，这个服务是附加的，而且CloudFlare也做的很贴心，几乎不用什么设置，就可以自动混淆。（实际上是识别了输出的页面里是否有邮箱，有邮箱就替换成[email protected]并在下面添加一段JS代码）。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">无论邮箱和电话号码，即使主动留在互联网上，也不希望被人批量获取，所以邮箱混淆一直是件很重要的事情。包括用at代替@，用#代替@，还有生成图片的。而CloudFlare提供了一种完全不需要修改代码的方案，确实给了大家很大的方便。</span></div><h2><span style="font-size: 24px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;color:#333333;color:inherit;margin-bottom:1.21739em;margin-top:2.43478em;font-weight:900;background-color:#FFFFFF;} &quot;; line-height: 1.21739;">二.CloudFlare邮箱混淆服务的优劣</span></h2><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">那么我们使用这种方案有什么优点和缺点呢？</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">我们先说说优点：首先不用改代码，很方便；其次全局替换，不会有遗漏；最后JS混淆，比at和#更加彻底也对显示影响最小，毕竟at和#用的人多了，就和@一样了，有时候还会让真正想联系的客户摸不着头脑。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">我们再说说缺点：我在验证码那篇文章中就提到过的成本回报比概念，当很多人用一个方案的时候，由于回报无限增大导致无论这个方案有多么好，他被破解的概率都会大大增加。当然CloudFlare混淆远远不止这个问题这么简单。他的这个混淆有时候恰恰使得这个页面中的邮箱标志更加明显，有点类似本来你把金子放在地上，很危险。现在把金子埋在地下，然后为了自己能找到，又画了一个此处有金子的标记。事实上在真正识别邮箱的爬虫中，CloudFlare反而降低获取Email的难度。</span><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">所以先提前说反爬的结论，严重不推荐大家使用这个方案！</span></div><h2><span style="font-size: 24px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;color:#333333;color:inherit;margin-bottom:1.21739em;margin-top:2.43478em;font-weight:900;background-color:#FFFFFF;} &quot;; line-height: 1.21739;">三.写爬虫时遇到CloudFlare邮箱混淆，如何解密？</span></h2><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">说完了反爬，再说反反爬。这个我就不得不提工具的重要性了。有时候你遇到一个好工具，那真的一身轻松。这里需要再次强调，写爬虫最好的语言是JS，因为JS对抗是爬虫中最难的部分，框架本身就是JS的环境将使得事半功倍：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">世界上最好的JS爬虫开发框架- </span><a href="http://www.shenjian.io/" style="box-sizing: border-box; transition: all 0.2s ease-in-out; font-size: 16px; background-position: 0px 0px; color: rgb(66, 139, 202); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857; text-decoration: none; background-color: rgb(255, 250, 165);-evernote-highlight:true;" target="_blank">在线网络爬虫/大数据分析/机器学习开发平台-神箭手云</a><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">好了，今天的盒饭有着落了。当然我们这篇文章还是得给爬虫工程师来点干货的。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">我们今天就通过这个简单的例子来看看写爬虫时遇到复杂的JS到底怎么分析。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">1.格式化代码</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">JS分析最重要的是格式，因为大部分JS代码都是混淆且压缩的。基本是不具备任何可读性，先格式化成可读的形式最重要。格式化的工具很多，这里我最推荐Chrome浏览其中的Snippet。因为格式化完了之后还可以调试，简直是神器。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">我们把前面例子中HTML代码部分删除掉，留下JS部分，贴进Snippet，点击左下角的{}按钮格式化：</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;"><img src="/e_img/CloudFlare邮箱加密(cfemail)_files/20170826151909_89418.png" type="image/png" data-filename="20170826151909_89418.png" height="348" style="box-sizing:border-box;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="600"></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">2.分析代码</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">是不是看着舒服太多了，已经到了人眼能看的级别了。我们贴出来看看：</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-radius: 4px; word-break: break-all; background-color: rgb(245, 245, 245);"><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">!</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">function</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">r</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">n</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">c</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">p</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">try</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">document</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">currentScript</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">||</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">function</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">()</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">for</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">document</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">getElementsByTagName</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'script'</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">),</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">length</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">--</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">if</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">[</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">].</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">getAttribute</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'data-cfhash'</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">))</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">return</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">[</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">]</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">}();</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">if</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">&amp;&amp;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">c</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">previousSibling</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">))</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">p</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">parentNode</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">if</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">c</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">getAttribute</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'data-cfemail'</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">))</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">for</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">''</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">r</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'0x'</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">substr</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">0</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">|</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">0</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">n</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">length</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">-</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">n</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">n</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'%'</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'0'</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'0x'</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">substr</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">n</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">^</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">r</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">).</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">toString</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">16</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)).</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">slice</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">-</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">);</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">p</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">replaceChild</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">document</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">createTextNode</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">decodeURIComponent</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)),</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">c</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">}</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">p</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">removeChild</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">t</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">}</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">}</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">catch</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">u</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">{}</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">}()</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">我们先大概看下整个代码，首先外层就是一个函数的定义及直接调用。大部分的JS库都会采用这种方法，既可以保证代码模块之间变量不相互污染，又可以通过传入参数实现内外部变量的传输。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">再读代码第一段：获取变量t，这个过程我们结合前面的HTML代码可以看出，这个是在获取Email被加密后的Dom元素，为了后面获取data-cfemail做准备。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">最后看第二段：显然就是从Dom元素中获取data-cfemail并解密出真实的Email并替换到页面显示中去。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: 700; line-height: 1.42857;">3.整合进爬虫</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">一般来说，对于复杂的JS，我们还会有断点调试和其他分析的过程，这里的JS很简单，所以咱直接开始写代码。我们怎么在像神箭手这样的JS爬虫框架中处理呢，同样也非常简单：</span></div><div style="box-sizing: border-box;"><div style="white-space: pre-wrap; font-size: 13px; border: 1px solid rgb(204, 204, 204); margin: 0px 0px 10px; max-width: 100%; overflow: auto; padding: 9.5px; word-wrap: break-word; box-sizing: border-box; border-radius: 4px; word-break: break-all; background-color: rgb(245, 245, 245);"><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">cfemails</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">extractList</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">content</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">&quot;//*[@data-cfemail]/@data-cfemail&quot;</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">);</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">for</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">c</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">in</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">cfemails</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">){</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">cfemails</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">[</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">c</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">];</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">for</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">''</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">r</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'0x'</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">substr</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">0</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">|</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">0</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">n</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">length</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">-</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">n</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">;</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">n</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'%'</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'0'</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(221, 51, 34); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">'0x'</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">+</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">a</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">substr</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">n</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">,</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">^</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">r</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">).</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">toString</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">16</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">)).</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">slice</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">-</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 153, 153); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">2</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">);</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">var</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">emailDecoded</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-weight: bold; line-height: 1.42857;">=</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(0, 128, 128); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">decodeURIComponent</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">e</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">);</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">console</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">.</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">log</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">(</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">emailDecoded</span><span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">);</span> <span style="box-sizing: border-box; font-size: 13px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.42857;">}</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">可以看到，我们先通过xpath直接获取所有的data-cfemail的值，然后直接把CloudFlare这段解密JS复制过来就行了。运行后就可以直接获取该页面所有被CloudFlare混淆过的邮箱，简直比直接用正则提取邮箱还要简单还要准确。</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857;">————————————————最后再说两句——————————————————–</span></div><div style="box-sizing: border-box; margin: 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.42857; background-color: rgb(255, 250, 165);-evernote-highlight:true;">通过这篇文章中这个非常常见却又相对入门的例子，我们一起看了下Javascript在反爬与反反爬中扮演的角色，同时也看到了一个JS爬虫框架的重要性，如果是其他爬虫框架，要么需要自己整合JS引擎，要么就得读懂整段解密代码再翻译成那种语言，这个难度在我们后面会提到的一些JS加密中，将不敢想象。同时我们也可以看到类似CloudFlare这类通用邮箱混淆的脆弱性。</span></div></div><div style="box-sizing: border-box; border-top: 1px solid rgb(26, 26, 26); border-bottom: 1px solid rgb(26, 26, 26); clear: both; margin: 0px 7.6923% 3.5em; width: 100%;"><h2 style="width: 1px; clear: both; margin: 20px 0px 10px; text-rendering: optimizelegibility; box-sizing: border-box; font-size: 30px; overflow: hidden; clip: rect(1px 1px 1px 1px); word-wrap: normal; position: absolute;"><span style="font-size: 30px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, &quot;　 Montserrat&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-weight: 500; line-height: 1.1;">文章导航</span></h2></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫特殊反反爬 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 反反爬 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>破解诡异字体</title>
      <link href="/2017/05/22/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E7%89%B9%E6%AE%8A%E5%8F%8D%E5%8F%8D%E7%88%AC/%E7%A0%B4%E8%A7%A3%E8%AF%A1%E5%BC%82%E5%AD%97%E4%BD%93/"/>
      <url>/2017/05/22/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E7%89%B9%E6%AE%8A%E5%8F%8D%E5%8F%8D%E7%88%AC/%E7%A0%B4%E8%A7%A3%E8%AF%A1%E5%BC%82%E5%AD%97%E4%BD%93/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><br></div><div style="box-sizing: border-box; font-size: 10px; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><div style="box-sizing: inherit; background-color: rgb(255, 255, 255); font-size: 16px;"><div style="box-sizing: inherit; background-color: rgb(255, 255, 255);"><div style="box-sizing: inherit;"><div style="box-sizing: inherit; word-wrap: break-word;"><div style="box-sizing: inherit;"><div style="box-sizing: inherit;"><div style="box-sizing: inherit; margin-right: 7.6923%; margin-left: 7.6923%; width: 100%;"><h1 style="box-sizing: inherit; clear: both; margin: 0px 0px 0.2em; text-rendering: optimizelegibility; font-size: 1.75rem;"><span style="font-size: 16px;"><span style="box-sizing: inherit;"><span style="font-size: 1.75rem; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Montserrat, &quot;Helvetica Neue&quot;, sans-serif; font-weight: 700; line-height: 1.25;">爬虫与诡异的字体-反爬与反反爬的奇技淫巧</span></span></span></h1></div><div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="box-sizing: inherit; margin-right: 7.6923%; margin-left: 7.6923%; border-color: rgb(209, 209, 209); width: 100%;"><span style="font-size: 16px; color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75; background-color: rgb(255, 250, 165);-evernote-highlight:true;">从今天这篇文章开始，主要给大家过一些小众的反爬策略以及其中的利弊，所以一般来说都会有一个特定的示例，比如今天的反爬策略就来自反爬界大神之一的去哪儿（当然也是爬虫界的）手机版。</span></span></div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;">我们先来用chrome的手机模式开一下去哪儿的机票:</span></div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;"><img height="25" style="box-sizing:inherit;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="840"><img src="/e_img/破解诡异字体_files/20170826150342_21359.png" type="image/png" data-filename="20170826150342_21359.png" height="528" style="box-sizing:inherit;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="300"></span></div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;">看着叫一个干净整洁，完全没毛病。但是！当我们掀开被子看源码的时候 震惊了：</span></div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;"><img src="/e_img/破解诡异字体_files/20170826151158_22856.png" type="image/png" data-filename="20170826151158_22856.png" height="300" style="box-sizing:inherit;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="600"></span></div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="box-sizing: inherit; font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;">不知道大家能不能看清图，我码字注解一下，显示的价格是560，而源码中的价格则是540！</span></div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;">我们这篇文章就来看看去哪儿手机版是怎么做到的（当然偷偷剧透下，下篇文章咱们主角还是去哪儿）</span></div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;">其实同学们只要智商在线，看到标题就知道，这是用字体实现，我们看右侧的css面板也可以看到，这个dom元素的字体是单独设置的。也就是去哪儿通过修改字体，让4显示成了6。</span></div><h2><span style="font-size: 24px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;color:#333333;color:inherit;margin-bottom:1.21739em;margin-top:2.43478em;font-weight:900;background-color:#FFFFFF;} &quot;; line-height: 1.21739;">1.为什么字体可以反爬</span></h2><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;">感觉从这篇文章开始这个套路快进行不下去了。为什么字体可以反爬？ 首先这个迷惑性太大，很多马虎的工程师以为可以了，直接就爬下来，当然就是被老板骂的体无完肤了，对反反爬工程师的精神可以造成1万点伤害。同时呢，去哪儿这个字体是动态生成的字体，也就是说你也不知道下一次刷出来的4到底是几显示出来的。这个道行就比较高了。</span></div><h2><span style="font-size: 24px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;color:#333333;color:inherit;margin-bottom:1.21739em;margin-top:2.43478em;font-weight:900;background-color:#FFFFFF;} &quot;; line-height: 1.21739;">2.怎么做好字体反爬？</span></h2><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;">这种反爬策略用在数字上确实天衣无缝，非常优雅。唯一值得提的就是一点，如何动态生成字体和页面来做好对应关系。其实这是一个工程性的问题，大部分编程语言都含有生成字体的库，如果对网站整体性能比较自信的话，完全可以每次请求都动态生成，当然这样确实会比较慢，比较推荐是通过定时任务，去更新一个字体池。每次有请求过来，从字体池中随机拿一个字体，换一个随机的名字（可以通过url rewrite来实现），并和现在的数字做一次映射，调整页面显示后整体输出，就可以在尽量不影响性能的情况下搞死反反爬。</span></div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;">当然使用字体也是有局限的，其中最大的问题莫过于@font-face的兼容性问题，所以去哪儿只在移动端采用这个反爬策略，可能也有兼容性的考虑吧，相比之下，去哪儿的pc端的反爬写法则丑陋很多。</span></div><h2><span style="font-size: 24px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;color:#333333;color:inherit;margin-bottom:1.21739em;margin-top:2.43478em;font-weight:900;background-color:#FFFFFF;} &quot;; line-height: 1.21739;">3.遇到字体反爬怎么办？</span></h2><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: -apple-system, &quot;font-size:medium;color:#333333;background-color:#FFFFFF;} &quot;; line-height: 1.75;">好了，万一我就是要爬去哪儿机票了怎么办呢？其实字体反爬处理也并不复杂，就像前面说到的，大部分语言都有字体处理类库，而这种情况大概率来讲只有10个数字的字体，我们将字体解析后只要能找到对应关系，就简单了。这里如果是Java工程师的话，推荐用Apache.Fontbox，贴一段解析的代码，注意这段代码不保证现在可用，仅做参考：</span></div><div style="box-sizing: inherit;"><div style="white-space: pre-wrap; font-size: 1rem; border: 1px solid rgb(209, 209, 209); margin: 0px 0px 1.75em; max-width: 100%; overflow: auto; padding: 1.75em; word-wrap: break-word; box-sizing: inherit; border-radius: 4px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">int[] digits = null;</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">BASE64Decoder decoder = new BASE64Decoder();</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">TTFParser parser = new TTFParser();</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">try {</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">byte[] bytes = decoder.decodeBuffer(fontBase64);</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">InputStream inputStream = new ByteArrayInputStream(bytes);</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">TrueTypeFont ttf = parser.parse(inputStream);</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">if(ttf != null &amp;&amp; ttf.getCmap() != null &amp;&amp;</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">ttf.getCmap().getCmaps() != null &amp;&amp;</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">ttf.getCmap().getCmaps().length &gt; 0){</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">digits = new int[10];</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">CmapSubtable[] tables = ttf.getCmap().getCmaps();</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">CmapSubtable table = tables[0];// No matter what</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">for(int i =0;i&lt;10;i++){</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">digits[i] = table.getGlyphId(i+48)-1;</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">}</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">}</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">} catch (IOException e) {</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">digits = null;</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">}</span></div><div><span style="font-size: 1rem; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;, Inconsolata, monospace; line-height: 1.3125;">return digits;</span></div></div></div><div style="box-sizing: inherit; margin: 0px 0px 1.75em;"><br></div><div style="box-sizing: inherit;"><span style="font-size: 16px; background-color: rgb(255, 255, 255); color: rgb(26, 26, 26); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; line-height: 1.75;"><img height="25" style="box-sizing:inherit;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="840"><img height="25" style="box-sizing:inherit;border:0px;height:auto;max-width:100%;vertical-align:middle;display:block;" width="840"></span></div></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫特殊反反爬 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 反反爬 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ADSL代理服务器搭建&amp;代理池</title>
      <link href="/2017/05/10/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/ADSL%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA&amp;%E4%BB%A3%E7%90%86%E6%B1%A0/"/>
      <url>/2017/05/10/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/ADSL%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA&amp;%E4%BB%A3%E7%90%86%E6%B1%A0/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">ADSL的介绍和使用</span></span></div><ul><li><div><span style="font-size: 12pt; font-weight: bold;">什么是ADSL</span></div></li><ul><li><div><span style="font-size: 9pt;">ADSL全称叫做Asymmetric Digital Subscriber Line，非对称数字用户环路，因为它的上行和下行带宽不对称。</span></div></li><li><div><span style="font-size: 9pt;">它采用频分复用技术把普通的电话线分成了电话、上行和下行三个相对独立的信道，从而避免了相互之间的干扰。</span></div></li><li><div><span style="font-size: 9pt;">有种主机叫做动态拨号VPS主机，这种主机在连接上网的时候是需要拨号的，只有拨号成功后才可以上网；</span></div></li><li><div><span style="font-size: 9pt;">每拨一次号，主机就会获取一个新的IP，也就是它的IP并不是固定的，而且IP量特别大，几乎不会拨到相同的IP，如果我们用它来搭建代理，既能保证高度可用，又可以自由控制拨号切换。</span></div></li></ul><li><div><span style="font-size: 12pt; font-weight: bold;">连接ADSL服务器(推荐云代理)</span></div></li><ul><li><div><span style="font-size: 9pt;">ssh root@153.36.65.214 -p 20063</span></div></li></ul><li><div><span style="font-size: 12pt; font-weight: bold;">ADSL服务器的使用</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">拨号初始化</span></span></div></li><ul><li><div><span style="font-size: 9pt;">进入之后，可以发现有一个可用的脚本文件，叫做ppp.sh，这是拨号初始化的脚本，运行它会让我们输入拨号的用户名和密码，然后它就会开始各种拨号配置，一次配置成功；</span></div></li><li><div><span style="font-size: 9pt;">后面的拨号就不需要重复输入用户名和密码了；</span></div></li><li><div><span style="font-size: 9pt;">都提示成功之后就可以进行拨号了。</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">拨号命令</span></span></div></li><ul><li><div><span style="font-size: 9pt;">adsl-start</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">停止拨号</span></span></div></li><ul><li><div><span style="font-size: 9pt;">adsl-stop</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">断线重播</span></span></div></li><ul><li><div><span style="font-size: 9pt;">先执行adsl-stop再执行adsl-start</span></div></li></ul></ul><li><div><span style="font-size: 12pt; font-weight: bold;">将ADSL服务器设置为代理服务器</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用的工具</span></span></div></li><ul><li><div><span style="font-size: 9pt;">在Linux下搭建HTTP代理服务器，推荐TinyProxy和Squid，配置都非常简单，在这里我们以TinyProxy为例来讲解一下怎样搭建代理服务器。</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">配置步骤</span></span></div></li><ul><li><div><span style="font-size: 9pt;">安装TinyProxy</span></div></li><ul><li><div><span style="font-size: 9pt;">yum install -y epel-release</span></div></li><li><div><span style="font-size: 9pt;">yum update -y</span></div></li><li><div><span style="font-size: 9pt;">yum install -y tinyproxy</span></div></li></ul><li><div><span style="font-size: 9pt;">配置TinyProxy</span></div></li><ul><li><div><span style="font-size: 9pt;">vi /etc/tinyproxy/tinyproxy.conf</span></div></li><li><div><span style="font-size: 9pt;">修改如下行</span></div></li><li><div><span style="font-size: 9pt;">Port 8888      代理的端口</span></div></li><li><div><span style="font-size: 9pt;">Allow 127.0.0.1     允许连接的主机，默认只允许本机连接，可以注释掉，允许所有主机连接</span></div></li></ul><li><div><span style="font-size: 9pt;">重启tinyproxy</span></div></li><ul><li><div><span style="font-size: 9pt;">service tinyproxy start</span></div></li></ul><li><div><span style="font-size: 9pt;">测试(在其他主机上操作)</span></div></li><ul><li><div><span style="font-size: 9pt;">curl -x 112.84.118.216:8888</span> <a href="http://httpbin.org/get" style="font-size: 9pt;" target="_blank" rel="noopener">httpbin.org/get</a></div></li><ul><li><div><span style="font-size: 9pt;">查看请求结果是不是设置的代理ip</span></div></li></ul></ul></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">动态获取IP</span></span></div><ul><li><div><span style="font-size: 12pt; font-weight: bold;">怎么动态获取ip</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">DDNS动态域名解析</span></span></div></li><ul><li><div><span style="font-size: 9pt;">我们需要使用一个域名来解析，也就是虽然IP是变的，但域名解析的地址可以随着IP的变化而变化。</span></div></li><li><div><span style="font-size: 9pt;">它的原理其实是拨号主机向固定的服务器发出请求，服务器获取客户端的IP，然后再将域名解析到这个IP上就可以了。</span></div></li><li><div><span style="font-size: 9pt;">国内比较有名的服务就是花生壳了，也提供了免费版的动态域名解析，另外DNSPOD也提供了解析接口来动态修改域名解析设置，DNSPOD，但是这样的方式都有一个通病，那就是慢！</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">自己配置ADSL代理池</span></span></div></li><ul><li><div><span style="font-size: 9pt;">所以根据花生壳的原理，可以完全自己实现一下动态获取IP的方法。</span></div></li><li><div><span style="font-size: 9pt;">要实现这个需要两台主机，一台主机就是这台动态拨号VPS主机，另一台是具有固定公网IP的主机。</span></div></li><li><div><span style="font-size: 9pt;">动态VPS主机拨号成功之后就请求远程的固定主机，远程主机获取动态VPS主机的IP，就可以得到这个代理，将代理保存下来，这样拨号主机每拨号一次，远程主机就会及时得到拨号主机的IP，如果有多台拨号VPS，也统一发送到远程主机，这样我们只需要从远程主机取下代理就好了，保准是实时可用，稳定高效的。</span></div></li></ul></ul><li><div><span style="font-size: 12pt; font-weight: bold;">ADSL代理池远程主机和ADSL拨号服务器的功能划分</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">远程主机</span></span></div></li><ul><li><div><span style="font-size: 9pt;">监听主机请求，获取动态VPS主机IP</span></div></li><li><div><span style="font-size: 9pt;">将VPS主机IP记录下来存入数据库，支持多个客户端</span></div></li><li><div><span style="font-size: 9pt;">检测当前接收到的IP可用情况，如果不可用则删除</span></div></li><li><div><span style="font-size: 9pt;">提供API接口，通过API接口可获取当前可用代理IP</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">ADSL拨号服务器</span></span></div></li><ul><li><div><span style="font-size: 9pt;">定时执行拨号脚本换IP</span></div></li><li><div><span style="font-size: 9pt;">换IP后立即请求远程主机</span></div></li><li><div><span style="font-size: 9pt;">拨号后检测是否拨号成功，如果失败立即重新拨号</span></div></li></ul></ul><li><div><span style="font-size: 12pt; font-weight: bold;">远程主机实现</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">存储模块</span></div></li><ul><li><div><span style="font-size: 9pt;">功能设计</span></div></li><ul><li><div><span style="font-size: 9pt;">远程主机作为一台服务器，动态拨号VPS会定时请求远程主机，远程主机接收到请求后将IP记录下来存入数据库。</span></div></li><li><div><span style="font-size: 9pt;">因为IP是一直在变化的，IP更新了之后，原来的IP就不能用了，所以对于一个主机来说我们可能需要多次更新一条数据。</span></div></li><li><div><span style="font-size: 9pt;">另外我们不能仅限于维护一台拨号VPS主机，当然是需要支持多台维护的。在这里我们直接选用Key-Value形式的非关系型数据库存储更加方便，所以在此选用Redis数据库。</span></div></li><li><div><span style="font-size: 9pt;">使用redis的Hash类型存储方式，Key就是拨号主机的名称，可以自己指定，Value就是代理的值。</span></div></li></ul></ul><li><div><span style="font-size: 9pt; font-weight: bold;">接口模块</span></div></li><ul><li><div><span style="font-size: 9pt;">功能设计</span></div></li><ul><li><div><span style="font-size: 9pt;">使用Tornado来实现</span></div></li><li><div><span style="font-size: 9pt;">实现random随机获取一个可用的动态代理功能</span></div></li><li><div><span style="font-size: 9pt;">实现count获取代理池中的代理个数</span></div></li></ul></ul></ul><li><div><span style="font-size: 12pt; font-weight: bold;">ADSL拨号服务器实现</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">拨号模块</span></span></div></li><ul><li><div><span style="font-size: 9pt;">功能设计</span></div></li><ul><li><div><span style="font-size: 9pt;">定时拨号，每隔一段时间拨号一次，更新ip</span></div></li><li><div><span style="font-size: 9pt;">更新前先清除远程主机数据库中的当前ip</span></div></li><li><div><span style="font-size: 9pt;">更新后请求远程主机，将新的ip更新到redis散列里</span></div></li></ul></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">示例代码</span></span></div><ul><li><div><a href="/e_img/ADSL代理服务器搭建和代理池_files/AdslProxy.zip"><img src="/e_img/ADSL代理服务器搭建和代理池_files/e8ca02f11446649b41c2acb45e64c359.png" alt="AdslProxy.zip"></a></div></li></ul><div><br></div><div><br></div><div><br></div></div><div><br></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫常见反反爬 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 反反爬 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>代理池的搭建</title>
      <link href="/2017/05/08/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/%E4%BB%A3%E7%90%86%E6%B1%A0%E7%9A%84%E6%90%AD%E5%BB%BA/"/>
      <url>/2017/05/08/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/%E4%BB%A3%E7%90%86%E6%B1%A0%E7%9A%84%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="color: rgb(50, 135, 18); font-size: 14pt;"><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">代理池的介绍</b></font></div><ul><li><div><font style="font-size: 10pt;"><b>应用模块</b></font></div></li><ul><li><div><font style="font-size: 9pt;">aiohttp、requests、redis-py、pyquery、Flask</font></div></li></ul><li><div><font style="font-size: 10pt;"><b>代理池模块</b></font></div></li><ul><li><div><font style="font-size: 9pt;">存储模块、获取代理模块、检测模块、接口模块、调度模块</font></div></li></ul><li><div><font style="font-size: 10pt;"><b>各模块的功能</b></font></div></li><ul><li><div><font style="font-size: 9pt;">存储模块</font></div></li><ul><li><div><font style="font-size: 9pt;">负责存储抓取下来的代理，并对代理去重</font></div></li></ul><li><div><font style="font-size: 9pt;">获取模块</font></div></li><ul><li><div><font style="font-size: 9pt;">需要定时抓取代理，代理可以是免费抓取的代理，也可以是调用付费代理商购买的代理</font></div></li></ul><li><div><font style="font-size: 9pt;">检测模块</font></div></li><ul><li><div><font style="font-size: 9pt;">需要定时检测数据库中的代理，对效果不好的代理及时进行删除</font></div></li></ul><li><div><font style="font-size: 9pt;">接口模块</font></div></li><ul><li><div><font style="font-size: 9pt;">需要用API来提供对外的服务接口。外界通过访问接口的方式来获取代理</font></div></li></ul><li><div><font style="font-size: 9pt;">调度模块</font></div></li><ul><li><div><font style="font-size: 9pt;">调度前面的所有模块，使之协调工作</font></div></li></ul></ul></ul><div><font style="color: rgb(50, 135, 18); font-size: 14pt;"><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">各模块的设计</b></font></div><ul><li><div><font style="font-size: 10pt;"><b>存储模块</b></font></div></li><ul><li><div><font style="font-size: 9pt;">使用Redis有序集合，集合的每一个元素都是不重复的</font></div></li><li><div><font style="font-size: 9pt;">每个元素都有一个分数字段，分数是可以重复的，数值小的排在前面，数值大的排在后面</font></div></li><li><div><font style="font-size: 9pt;">每个代理100分为最高分，表示可用，0分为最低分，代表最不可用，自动进行移除</font></div></li><li><div><font style="font-size: 9pt;">获取随机代理的逻辑，先随机获取最高分代理，如果不存在最高分代理，按照排名获取</font></div></li></ul><li><div><font style="font-size: 10pt;"><b>获取模块</b></font></div></li><ul><li><div><font style="font-size: 9pt;">从各代理商处爬取或购买调用接口获得代理</font></div></li><li><div><font style="font-size: 9pt;">调用存储模块，向数据库中添加代理，初始的分数是10</font></div></li></ul><li><div><font style="font-size: 10pt;"><b>检测模块</b></font></div></li><ul><li><div><font style="font-size: 9pt;">不断的检测代理的可用性(检测的目标网站可以自定义)，进行代理的加分和减分或者移除</font></div></li><li><div><font style="font-size: 9pt;">检测到代理可用，分数立即置为100分，检测到代理请求失败，则减少一分</font></div></li></ul><li><div><font style="font-size: 10pt;"><b>接口模块</b></font></div></li><ul><li><div><font style="font-size: 9pt;">定义接口模块的随机获取代理，统计代理数量等方法</font></div></li></ul><li><div><font style="font-size: 10pt;"><b>调度模块</b></font></div></li><ul><li><div><font style="font-size: 9pt;">通过配置每个模块的开关来设置调度模块的启动功能</font></div></li><li><div><font style="font-size: 9pt;">通过多进程启动每一个模块</font></div></li></ul></ul><div><font style="font-size: 14pt; color: rgb(50, 135, 18);"><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">代码示例</b></font></div><ul><li><div><font style="font-size: 9pt;"><a href="/e_img/代理池的搭建_files/ProxyPool.zip"><img src="/e_img/代理池的搭建_files/0a665021e169ae5031cba9011bfeca1e.png" alt="ProxyPool.zip"></a></font></div></li></ul><div><font style="font-size: 9pt;"><br></font></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫常见反反爬 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 反反爬 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>滑动验证码识别</title>
      <link href="/2017/05/04/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/%E6%BB%91%E5%8A%A8%E9%AA%8C%E8%AF%81%E7%A0%81%E8%AF%86%E5%88%AB/"/>
      <url>/2017/05/04/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/%E6%BB%91%E5%8A%A8%E9%AA%8C%E8%AF%81%E7%A0%81%E8%AF%86%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">极验三代验证码破解</span></font></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">破解思路</span></font></div></li><ul><li><div><span style="font-size: 9pt;">1.使用selenium的模拟点击和滑动等来实现破解</span></div></li><li><div><span style="font-size: 9pt;">2.首先寻找快速识别按钮，如果找到进行点击验证</span></div></li><li><div><span style="font-size: 9pt;">3.获取验证码的位置(4角坐标)</span></div></li><li><div><span style="font-size: 9pt;">4.对验证码进行局域截图</span></div></li><li><div><span style="font-size: 9pt;">5.点击滑块获取第二张的验证码缺口图片</span></div></li><li><div><span style="font-size: 9pt;">6.遍历每一个像素点的位置，寻找缺口位置</span></div></li><li><div><span style="font-size: 9pt;">7.构造运动轨迹，要注意避免规则的运动轨迹被识别出是人工构造轨迹</span></div></li><li><div><span style="font-size: 9pt;">8.获取运动轨迹，并进行滑动</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">示例代码</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><a href="/e_img/滑动验证码识别_files/crack.py"><img src="/e_img/滑动验证码识别_files/4ee2594fb3d097359ca3b5c0ee0d4504.png" alt="crack.py"></a></span></div></li></ul></ul><div><font style="background-color: rgb(255, 250, 165); font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold;-evernote-highlight:true;">微博九宫格验证码识别</span></font></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">破解思路</span></font></div></li><ul><li><div><span style="font-size: 9pt;">1.使用selenium的模拟点击和滑动来实现破解</span></div></li><li><div><span style="font-size: 9pt;">2.首先获取页面的验证码图片</span></div></li><li><div><span style="font-size: 9pt;">3.获取图片根据所有可能的滑动轨迹模板库的图片进行对比，获取正确的滑动顺序</span></div></li><li><div><span style="font-size: 9pt;">4.根据得到的拖动顺序，对其进行拖动</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">示例代码</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><a href="滑动验证码识别_files/crack.py"><img src="/e_img/滑动验证码识别_files/b03b62326c1552af5aa0fd7ece52893c.png" alt="crack.py"></a></span></div></li></ul></ul><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫常见反反爬 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 反反爬 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JS压缩、混淆、加密及破解</title>
      <link href="/2017/05/03/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/Js%E5%8E%8B%E7%BC%A9%E3%80%81%E6%B7%B7%E6%B7%86%E3%80%81%E5%8A%A0%E5%AF%86%E5%8F%8A%E7%A0%B4%E8%A7%A3/"/>
      <url>/2017/05/03/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/Js%E5%8E%8B%E7%BC%A9%E3%80%81%E6%B7%B7%E6%B7%86%E3%80%81%E5%8A%A0%E5%AF%86%E5%8F%8A%E7%A0%B4%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">js压缩、混淆、加密介绍</span></font></span></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">三者的定义与区别</span></font></div></li><ul><li><div><span style="font-size: 9pt;">压缩：删除 Javascript 代码中所有注释、跳格符号、换行符号及无用的空格，从而压缩 JS 文件大小，优化页面加载速度。</span></div></li><li><div><span style="font-size: 9pt;">混淆：经过编码将变量和函数原命名改为毫无意义的命名（如function(a,b,c,e,g)等），以防止他人窥视和窃取 Javascript 源代码，也有一定压缩效果。</span></div></li><li><div><span style="font-size: 9pt;">加密：一般用eval方法加密，效果与混淆相似，也做到了压缩的效果。</span></div></li></ul><li><div><span style="font-size: 12pt; font-weight: bold;">三者的作用</span></div></li><ul><li><div><span style="font-size: 9pt;">压缩的主要目的是消除注释等无用字符，达到精简js代码，减小js文件大小的目的，这也是页面优化的一种方式；</span></div></li><li><div><span style="font-size: 9pt;">混淆和加密的目的比较接近，都是为了防止他人直接查看源码，对代码（如重要的api等）起保护作用，但这也只是增加了阅读代码的代价，也就是所谓的防君子不防小人。</span></div></li><li><div><span style="font-size: 9pt;">加密就是通过已经有的或者自己编写的加密方法，对js代码进行加密转换，但是当混淆和加密联合使用时，如先混淆在加密（或者先加密再混淆）时，破解时间就会增加。关于js的加密</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">浏览器是怎么解析混淆和加密后的js代码的</span></font></div></li><ul><li><div><span style="font-size: 9pt;">其实变量名只要是Unicode字符就行了，对于js引擎来说都是一样的，只是人类觉得他们不同而已。</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">是否可以破解压缩\混淆\加密后的代码</span></font></div></li><ul><li><div><span style="font-size: 9pt;">压缩和混淆后的js代码是不可以被还原的，但是我们可以将js加密的代码进行解密，后面的几篇是介绍如何进行js解密的。</span></div></li></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">常见的加密和解密方式介绍</span></span></span></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">加密方式的分类</span></font></div></li><ul><li><div><span style="font-size: 9pt; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">一：最简单的加密解密  </span></div></li><li><div><span style="font-size: 9pt; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">二：转义字符&quot;\&quot;的妙用  </span></div></li><li><div><span style="font-size: 9pt; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">三：使用Microsoft出品的脚本编码器Script Encoder来进行编码   （自创简单解码）  </span></div></li><li><div><span style="font-size: 9pt; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">四：任意添加NUL空字符（十六进制00H）    （自创）  </span></div></li><li><div><span style="font-size: 9pt; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">五：无用内容混乱以及换行空格TAB大法  </span></div></li><li><div><span style="font-size: 9pt; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">六：自写解密函数法  </span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="background-color: rgb(255, 255, 255);"><span style="font-size: 12pt; background-color: rgb(255, 255, 255); font-weight: bold;">一、escape()和unescape()</span></span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密方式的介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">大家对于JAVASCRIPT函数escape()和unescape()想必是比较了解啦（很多网页加密在用它们），分别是编码和解码字符串</span></div></li><li><div><span style="font-size: 9pt;">比如例子代码用escape()函数加密后变为如下格式：alert%28%22%u9ED1%u5BA2%u9632%u7EBF%22%29%3B</span></div></li><li><div><span style="font-size: 9pt;">如果愿意我们可以写点JAVASCRIPT代码重新把它加密如下%61%6C%65%72%74%28%22%u9ED1%u5BA2%u9632%u7EBF%22%29%3B</span></div></li><li><div><span style="font-size: 9pt;">这样加密后的代码是不能直接运行的，可以使用eval(codeString)，这个函数的作用就是检查JavaScript代码并执行，必选项 codeString 参数是包含有效 JavaScript 代码的字符串值，加上上面的解码unescape()</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">解密方式</span></font></div></li><ul><li><div><span style="font-size: 9pt;">直接将eval换成alert配合unescape便实现了解密</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密示例</span></font></div></li><ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold;">加密方法</span></span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 9pt;">            &lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;  </font></div><div><font style="font-size: 9pt;">            varcode=unescape(&quot;%61%6C%65%72%74%28%22%u9ED1%u5BA2%u9632%u7EBF%22%29%3B&quot;);  </font></div><div><font style="font-size: 9pt;">            eval(varcode)  </font></div><div><font style="font-size: 9pt;">             &lt;/SCRIPT&gt;</font></div></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">二、转义字符&quot;\&quot;加密</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密方式介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">JavaScript提供了一些特殊字符如：\n （换行）、 \r （回车）、\’ （单引号 ）等应该是有所了解</span></div></li><li><div><span style="font-size: 9pt;">其实&quot;\&quot;后面还可以跟八进制或十六进制的数字，如字符&quot;a&quot;则可以表示为：&quot;\141&quot;或&quot;\x61&quot;（注意是小写字符&quot;x&quot;），至于双字节字符如汉字&quot;黑&quot;则仅能用十六进制表示为&quot;\u9ED1&quot;（注意是小写字符&quot;u&quot;），其中字符&quot;u&quot;表示是双字节字符；</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">解密示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">直接将eval换成alert便实现了解密</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            # <span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">八进制转义字符串如下:  </span></span></span></div><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            &lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;  </span></span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            eval(&quot;\141\154\145\162\164\50\42\u9ED1\u5BA2\u9632\u7EBF\42\51\73&quot;)  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            &lt;/SCRIPT&gt;</span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                          # </span><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">十六进制转义字符串如下:  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">    </span><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">    </span><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">    </span><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">    </span><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">    </span><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">    </span><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">    </span><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">&lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            eval(&quot;\x61\x6C\x65\x72\x74\x28\x22\u9ED1\u5BA2\u9632\u7EBF\x22\x29\x3B&quot;)  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            &lt;/SCRIPT&gt;</span></div></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">三：使用Microsoft出品的脚本编码器Script Encoder来进行编码</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密方式的介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">直接使用Microsoft出品的JavaScript调用控件Scripting.Encoder完成的编码！</span></div></li><li><div><span style="font-size: 9pt;">如果你觉得这样编码得到的代码LANGUAGE属性是JScript.Encode，很容易让人识破，那么还有一个几乎不为人知的window对象的方法execScript()，其原形为：</span></div></li><li><div><span style="font-size: 9pt;">window.execScript( sExpression, sLanguage )  </span></div></li><ul><li><div><span style="font-size: 9pt;">sExpression: 必选项。字符串(String)。要被执行的代码。  </span></div></li><li><div><span style="font-size: 9pt;">sLanguage　: 必选项。字符串(String)。指定执行的代码的语言。默认值为 Microsoft JScript</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">解密方式</span></font></div></li><ul><li><div><span style="font-size: 9pt;">编码后的代码运行前IE会先对其进行解码，如果我们先把加密后的代码放入一个自定义函数如上面的decode()中，然后对自定义函数decode调用toString()方法，得到的将是解码后的代码！</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密示例</span></font></div></li><ul><li><div><span style="font-size: 12px;">加密方法</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                        # <span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">使用Scripting.Encoder</span></span></span></div><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         &lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;  </span></span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         var Senc=new ActiveXObject(&quot;Scripting.Encoder&quot;);  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         var code='&lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;\r\nalert(&quot;黑客防线&quot;);\r\n&lt;\/SCRIPT&gt;';  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         var Encode=Senc.EncodeScriptFile(&quot;.htm&quot;,code,0,&quot;&quot;);  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         alert(Encode);  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         &lt;/SCRIPT&gt;</span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         #  <span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">使用execScript()</span></span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         <span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">&lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;  </span></span></span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         execScript(&quot;#@~^FgAAAA==@#@&amp;ls DD`J黑客防线r#p@#@&amp;FgMAAA==^#~@&quot;,&quot;JScript.Encode&quot;)  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         &lt;/SCRIPT&gt;</span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                         # 加密结果</span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                          <span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">&lt;SCRIPT LANGUAGE=&quot;JScript.Encode&quot;&gt;#@~^FgAAAA==@#@&amp;ls DD`J黑客防线r#p@#@&amp;FgMAAA==^#~@&lt;/SCRIPT&gt;</span></span><span style="background-color: transparent;"> </span></div></div><ul><li><div><span style="font-size: 9pt; font-weight: bold;">解密示例</span></div></li><ul><li><div><span style="font-size: 12px;">解密方法</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                        &lt;SCRIPT LANGUAGE=&quot;JScript.Encode&quot;&gt;  </span></span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                        function decode(){};</span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                        alert(decode.toString());  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                        &lt;/SCRIPT&gt;</span></div></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">四：任意添加NUL空字符（十六进制00H）</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密方式介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">一次偶然的实验，使我发现在HTML网页中任意位置添加任意个数的&quot;空字符&quot;，IE照样会正常显示其中的内容，并正常执行其中的JavaScript 代码。</span></div></li><li><div><span style="font-size: 9pt;">而添加的&quot;空字符&quot;我们在用一般的编辑器查看时，会显示形如空格或黑块，使得原码很难看懂，如用记事本查看则&quot;空字符&quot;会变成&quot;空格&quot;，利用这个原理加密结果如下：（其中显示的&quot;空格&quot;代表&quot;空字符&quot;）</span></div></li><li><div><span style="font-size: 9pt;">如果不知道方法的人很难想到要去掉里面的&quot;空字符&quot;（00H）的</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">解密方式</span></font></div></li><ul><li><div><span style="font-size: 9pt;">去掉代码中的00H</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密示例</span></font></div></li><ul><li><div><span style="font-size: 12px;">加密方法</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 9pt;">            &lt;S    C    RI   P T L    ANG U   A        GE      </font></div><div><font style="font-size: 9pt;">            =&quot;    J   a    v a S    c r    i p t&quot;&gt;</font></div><div><font style="font-size: 9pt;">            a    l er    t   (&quot; 黑    客 防 线&quot;)   ;    </font></div><div><font style="font-size: 9pt;">   </font></div><div><font style="font-size: 9pt;">            &lt;    /    SC   R    I    P    T&gt;  </font></div></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">五：无用内容混乱以及换行空格TAB大法</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密方式介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在JAVASCRIPT代码中我们可以加入大量的无用字符串或数字，以及无用代码和注释内容等等</span></div></li><li><div><span style="font-size: 9pt;">这使真正的有用代码埋没在其中，并把有用的代码中能加入换行、空格、TAB的地方加入大量换行、空格、TAB，并可以把正常的字符串用&quot;&quot;来进行换行，这样就会使得代码难以看懂！如我加密后的形式如下：</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">解密方式</span></font></div></li><ul><li><div><span style="font-size: 9pt;">慢慢的分析吧</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密示例</span></font></div></li><ul><li><div><span style="font-size: 12px;">加密方法</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 9pt;">            &lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;  </font></div><div><font style="font-size: 9pt;">            &quot;xajgxsadffgds&quot;;1234567890  </font></div><div><font style="font-size: 9pt;">            625623216;var $=0;alert//@$%%&amp;*()(&amp;(^%^  </font></div><div><font style="font-size: 9pt;">            //cctv function//  </font></div><div><font style="font-size: 9pt;">            (//hhsaasajx xc  </font></div><div><font style="font-size: 9pt;">            /*  </font></div><div><font style="font-size: 9pt;">            asjgdsgu*/  </font></div><div><font style="font-size: 9pt;">            &quot;黑</font></div><div><font style="font-size: 9pt;">             客  </font></div><div><font style="font-size: 9pt;">            防线&quot;//ashjgfgf  </font></div><div><font style="font-size: 9pt;">            /*  </font></div><div><font style="font-size: 9pt;">            @#%$^&amp;%$96667r45fggbhytjty  </font></div><div><font style="font-size: 9pt;">            */  </font></div><div><font style="font-size: 9pt;">            //window  </font></div><div><font style="font-size: 9pt;">            )  </font></div><div><font style="font-size: 9pt;">            ;&quot;#@$#%@#432hu&quot;;212351436  </font></div><div><font style="font-size: 9pt;">            &lt;/SCRIPT&gt;</font></div></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">六：自写解密函数法</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密方式介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">这个方法和一、二差不多，只不过是自己写个函数对代码进行加密</span></div></li><li><div><span style="font-size: 9pt;">很多VBS病毒使用这种方法对自身进行加密，来防止特征码扫描！下面是我写的一个简单的加密解密函数，</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">加密示例  </span></font></div></li><ul><li><div><span style="font-size: 9pt;">加密方法</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            # 加密方法</span></span></div><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            &lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;  </span></span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            function compile(code)  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            {    </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                              var c=String.fromCharCode(code.charCodeAt(0)+code.length);  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                               for(var i=1;i&lt;code.length;i++){  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                              c+=String.fromCharCode(code.charCodeAt(i)+code.charCodeAt(i-1));  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                               }  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                               alert(escape(c));  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            }  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            compile(’alert(&quot;黑客防线&quot;);’)  </span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            &lt;/SCRIPT&gt;</span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            # 加密结果</span></div><div><span style="font-size: 9pt; font-family: Monaco; color: rgb(51, 51, 51);">                            <span style="font-family: Monaco; color: rgb(51, 51, 51); font-size: 9pt;">o%CD%D1%D7%E6%9CJ%u9EF3%uFA73%uF1D4%u14F1%u7EE1Kd</span></span><span style="background-color: transparent;">          </span></div></div><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">解密示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">解密方法</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 9pt;">                    &lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;  </font></div><div><font style="font-size: 9pt;">                    function uncompile(code)  </font></div><div><font style="font-size: 9pt;">                    {  </font></div><div><font style="font-size: 9pt;">                       code=unescape(code);  </font></div><div><font style="font-size: 9pt;">                       var c=String.fromCharCode(code.charCodeAt(0)-code.length);  </font></div><div><font style="font-size: 9pt;">                       for(var i=1;i&lt;code.length;i++){  </font></div><div><font style="font-size: 9pt;">                      c+=String.fromCharCode(code.charCodeAt(i)-c.charCodeAt(i-1));  </font></div><div><font style="font-size: 9pt;">                       }  </font></div><div><font style="font-size: 9pt;">                       return c;  </font></div><div><font style="font-size: 9pt;">                    }  </font></div><div><font style="font-size: 9pt;">                    eval(uncompile(&quot;o%CD%D1%D7%E6%9CJ%u9EF3%uFA73%uF1D4%u14F1%u7EE1Kd&quot;));  </font></div><div><font style="font-size: 9pt;">                    &lt;/SCRIPT&gt;</font></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫常见反反爬 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 反反爬 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>图片验证码-Tesseract破解</title>
      <link href="/2017/05/02/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81-Tesseract%E7%A0%B4%E8%A7%A3/"/>
      <url>/2017/05/02/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%8F%8D%E7%88%AC/%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81-Tesseract%E7%A0%B4%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<html><head>  <title>Evernote Export</title>  <basefont face="微软雅黑" size="2">  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">  <meta name="exporter-version" content="YXBJ Windows/307941 (zh-CN, DDL); Windows/10.0.0 (Win64);">  <style>    body, td {      font-family: 微软雅黑;      font-size: 10pt;    }  </style></head><body><a name="416"><div><span><div><div><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">图像的翻译-Tesseract</span></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">文字识别</span></font></div></li><ul><li><div><span style="font-size: 9pt;">文字识别-机器视觉的一个分支，将图像翻译成文字一般被称为 光学文字识别(Optical Character Recognition, OCR)。可以实现OCR的底层库并不多,目前很多库都是使用共同的几个底层 OCR 库,或者是在上面 进行定制</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">ORC库的概念</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在读取和处理图像、图像相关的机器学习以及创建图像等任务中，Python 一直都是非常出色的语言。虽然有很多库可以进行图像处理，但在这里我们只重点介绍： Tesseract</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">作用</span></div></li><ul><li><div><span style="font-size: 9pt;">Tesseract是一个将图像翻译成文字的OCR库(光学文字识别，Optical Character Recognition)，可以翻译图片中的文字内容，目前由 Google 赞助(Google 也是一家以 OCR 和机器学习技术闻名于世的公司)。Tesseract 是目前公认最优秀、最精确的开源 OCR 系统，除了极高的精确度，Tesseract 也具有很高的灵活性。它可以通过训练识别出任何字体，也可以识别出任何 Unicode 字符。</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">tesseract处理的文字规范</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">tesseract处理的文字大都是格式规范的，</span><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">格式规范的文字具有以下特点:</span></font></div></li><ul><li><div><span style="font-size: 9pt;">使用一个标准字体(不包含手写体、草书,或者十分“花哨的”字体)</span></div></li><li><div><span style="font-size: 9pt;">即使被复印或拍照，字体还是很清晰，没有多余的痕迹或污点</span></div></li><li><div><span style="font-size: 9pt;">排列整齐，没有歪歪斜斜的字</span></div></li><li><div><span style="font-size: 9pt;">没有超出图片范围，也没有残缺不全，或紧紧贴在图片的边缘</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">怎么将图片格式化</span></span></div></li><ul><li><div><span style="font-size: 9pt;">文字的一些格式问题在图片预处理时可以进行解决。例如,可以把图片转换成灰度图，调整亮度和对比度，还可以根据需要进行裁剪和旋转（详情需要了解图像与信号处理）等</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">使用步骤</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">安装</span><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">tesseract和tensor-ocr</span></font></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">windows下安装</span></div></li><ul><li><div><span style="font-size: 9pt;">先下载tesseract<span style="font-size: 9pt;">-ocr</span></span></div></li><ul><li><div><span style="font-size: 9pt;">下载地址:</span> <a href="https://digi.bib.uni-mannheim.de/tesseract" style="font-size: 9pt;" target="_blank" rel="noopener">https://digi.bib.uni-mannheim.de/tesseract</a></div></li></ul><li><div><span style="font-size: 9pt;">下载 pytenseract</span></div></li><ul><li><div><span style="font-size: 9pt;">pip install pytesseract pillow</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">ubuntu下安装</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo apt-get install -y tesseract-ocr libtesseract-dev libleptonica-dev</span></div></li><li><div><span style="font-size: 9pt;">pip install</span> <span style="font-size: 9pt;">pytesseract </span><span style="font-size: 9pt;">pillow</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">centos下安装</span></font></div></li><ul><li><div><span style="font-size: 9pt;">yum install -y tesseract</span></div></li><li><div><span style="font-size: 9pt;">pip install</span> <span style="font-size: 9pt;">pytesseract p</span><span style="font-size: 9pt;">illow </span></div></li></ul></ul></ul><li><div><span style="font-size: 9pt; font-weight: bold;">在终端中使用tesseract</span></div></li><ul><li><div><span style="font-size: 9pt;">tesseract  test.jpg  text      将翻译结果保存在text.txt中</span></div></li><li><div><span style="font-size: 9pt;">tesseract chi_sim  text.png  paixu    将翻译结果保存在paixu.txt中（可以翻译中文简体）</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">tesseract --list-langs    查看当前支持的语言</span></div></li><li><div><img src="/e_img/图片验证码-Tesseract破解_files/Image.png" type="image/png" data-filename="Image.png" width="546"></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">在Python中使用tesesract</span></div></li><ul><li><div><span style="font-size: 9pt;">import <span style="font-size: 9pt;">pytesseract</span></span></div></li><li><div><span style="font-size: 9pt;">from PIL import Image</span></div></li><li><div><span style="font-size: 9pt;">image = Image.open(jpg)       获取图片</span></div></li><li><div><span style="font-size: 9pt;">text =</span> <span style="font-size: 9pt;">pytesseract</span><span style="font-size: 9pt;">.image_to_string(image, lang=</span><span style="font-size: 9pt; line-height: 13.6px;">'chi_sim'</span><span style="font-size: 9pt;">)       对图片的内容进行翻译</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">import subprocess</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">subprocess.call(['tessetact', '-1', 'chi_sim', filePath, 'paixu'])     使用终端命令进行翻译</span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt;">pytesseract</span>.file_to_text('image.png')       直接对图片进行识别</span></div></li></ul><li><div><span style="font-size: 11pt; font-weight: bold;">使用tesseract识别代码(包含图片处理)</span></div></li><ul><li><div><span style="font-size: 9pt;">import <span style="font-size: 9pt;">pytesseract</span></span></div></li><li><div><span style="font-size: 9pt;">from PIL import Image</span></div></li><li><div><span style="font-size: 9pt;">image = Image.open('code2.jpg')</span></div></li><li><div><span style="font-size: 9pt;"># 图片灰度化处理</span></div></li><li><div><span style="font-size: 9pt;">image = image.convert('L') </span></div></li><li><div><span style="font-size: 9pt;"># 图片二值化处理</span></div></li><li><div><span style="font-size: 9pt;">threshold = 127        设置二值化阈值      </span></div></li><li><div><span style="font-size: 9pt;">filter_func = lambda x: 0 if x &lt; threshold else 1</span></div></li><li><div><span style="font-size: 9pt;">image = image.point(</span><span style="font-size: 9pt;">filter_func</span><span style="font-size: 9pt;">, '1')</span></div></li><li><div><span style="font-size: 9pt;">image.show()</span></div></li><li><div><span style="font-size: 9pt;">result =</span> <span style="font-size: 9pt;">pytesseract</span><span style="font-size: 9pt;">.image_to_text(image)     对处理后的图片进行识别</span></div></li><li><div><span style="font-size: 9pt;">print(result)</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">对tesseract进行训练</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">训练的目的</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">tesseract一般只能识别符合文字规范的字体，其他的稍微复杂的字很难识别，tesseract可以通过训练对一种格式字体的反复训练，来实现字体的高精度识别</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">训练tesseract的方法</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">要训练 Tesseract 识别一种文字，无论是晦涩难懂的字体还是验证码，你都需要向 Tesseract 提供每个字符不同形式的样本。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">首先要收集大量的验证码样本，样本的数量和复杂程度，会决定训练的效果。第二步是准确地告诉 Tesseract 一张图片中的每个字符是什么，以及每个字符的具体位置。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">这里需要创建一些矩形定位文件(box file)，一个验证码图片生成一个矩形定位文件，也可以通过jTessBoxEditor软件来修改矩形的定位。</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">一个图片的矩形定位文件如下所示:</span></div></li><ul><li><div><img src="/e_img/图片验证码-Tesseract破解_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-size: 9pt; line-height: 1.45;" width="139"></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">第一列符号是图片中的每个字符，后面的 4 个数字分别是包围这个字符的最小矩形的坐标 (图片左下角是原点 (0，0)，4 个数字分别对应每个字符的左下角 x 坐标、左下角 y 坐标、右上角 x 坐标和右上角 y 坐标)，最后一个数字“0”表示图片样本的编号。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">矩形定位文件必须保存在一个 .box 后缀的文本文件中，(例如 4MmC3.box)。</span></div></li></ul></ul><li><div><span style="font-size: 9pt; font-weight: bold;">tesseract训练教程</span></div></li><ul><li><div><a href="http://www.cnblogs.com/mjorcen/p/3800739.html?utm_source=tuicool&amp;utm_medium=referral" style="font-size: 9pt;" target="_blank" rel="noopener">http://www.cnblogs.com/mjorcen/p/3800739.html?utm_source=tuicool&amp;utm_medium=referral</a></div></li></ul></ul></ul><div><br></div><div><br></div><div><br></div><div><br></div></div><div><br></div></span></div></a></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫常见反反爬 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 反反爬 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapy对接BloomFilter</title>
      <link href="/2017/04/21/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy%E5%AF%B9%E6%8E%A5BloomFilter/"/>
      <url>/2017/04/21/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy%E5%AF%B9%E6%8E%A5BloomFilter/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><b><font style="color: rgb(50, 135, 18); font-size: 14pt;">Scrapy对接BloomFilter</font></b></span></div><ul><li><div><b><font style="font-size: 12pt;">通过修改源码的方式对接</font></b></div></li><ul><li><div><span style="font-size: 9pt;"><b>对接的原则</b></span></div></li><ul><li><div><span style="font-size: 9pt;">实现Bloom Filter时，首先要保证不能破坏Scrapy-Redis分布式爬取的运行架构。</span></div></li><li><div><span style="font-size: 9pt;">我们需要修改Scrapy-Redis的源码，将它的去重类替换掉。同时，Bloom Filter的实现需要借助于一个位数组，既然当前架构还是依赖于Redis，那么位数组的维护直接使用Redis就好了。</span></div></li><li><div><span style="font-size: 9pt;">首先实现一个基本的散列算法，将一个值经过散列运算后映射到一个m位数组的某一位上，代码如下：</span></div></li></ul><li><div><span style="font-size: 9pt;"><b>实现BloomFilter过滤器类</b></span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Scrapy对接BloomFilter_files/Image.png" type="image/png" data-filename="Image.png" width="653"></span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/Scrapy对接BloomFilter_files/Image [1].png" type="image/png" data-filename="Image.png" width="653"></span></div></li></ul></ul><li><div><span style="font-size: 9pt;"><b>接下来继续修改Scrapy-Redis的源码</b></span></div></li><ul><li><div><span style="font-size: 9pt;">修改源码的位置</span></div></li><ul><li><div><span style="font-size: 9pt;">将scrapy-redis的dupefilter逻辑替换为Bloom Filter的逻辑。</span></div></li><li><div><span style="font-size: 9pt;">主要是修改RFPDupeFilter类的request_seen()方法</span></div></li><li><div><span style="font-size: 9pt;">利用request_fingerprint()方法获取Request的指纹，调用Bloom Filter的exists()方法判定该指纹是否存在。如果存在，则说明该Request是重复的，返回True，否则调用Bloom Filter的insert()方法将该指纹添加并返回False。这样就成功利用Bloom Filter替换了Scrapy-Redis的集合去重。</span></div></li></ul><li><div><span style="font-size: 9pt;">修改request_seen方法，修改判断元素是否重复的方法</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Scrapy对接BloomFilter_files/Image [2].png" type="image/png" data-filename="Image.png" width="603"></span></div></li></ul><li><div><span style="font-size: 9pt;">修改__init__ 方法，将判断重复类修改为BloomFilter</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Scrapy对接BloomFilter_files/Image [3].png" type="image/png" data-filename="Image.png" width="605"></span></div></li></ul><li><div><span style="font-size: 9pt;">相关参数，通过from_setting方法获取</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Scrapy对接BloomFilter_files/Image [4].png" type="image/png" data-filename="Image.png" width="604"></span></div></li></ul><li><div><span style="font-size: 9pt;">修改setting文件</span></div></li><ul><li><div><span style="font-size: 9pt;">BLOOMFILTER_HASH_NUMBER = 6        配置布隆过滤器的哈希函数的数量</span></div></li><li><div><span style="font-size: 9pt;">BLOOMFILTER_BIT = 30           设置存储使用的位数</span></div></li></ul></ul><li><div><b><font style="font-size: 12pt;">直接使用scrapy-redis-bloomfilter框架</font></b></div></li><ul><li><div><span style="font-size: 9pt;"><b>下载scrapy-redis-bloomfilter</b></span></div></li><ul><li><div><span style="font-size: 9pt;">pip3 install scrapy-redis-bloomfilter</span></div></li></ul><li><div><span style="font-size: 9pt;"><b>修改setting.py文件</b></span></div></li><ul><li><div><span style="font-size: 9pt;">DUPEFILTER_CLASS = &quot;scrapy_redis_bloomfilter.dupefilter.RFPDupeFilter&quot;  # 去重类，要使用Bloom Filter请替换DUPEFILTER_CLASS</span></div></li><li><div><span style="font-size: 9pt;">BLOOMFILTER_HASH_NUMBER = 6   # 散列函数的个数，默认为6，可以自行修改</span></div></li><li><div><span style="font-size: 9pt;">BLOOMFILTER_BIT = 30     # Bloom Filter的bit位移参数(代表 1 &lt;&lt; 30 )，默认30，占用128MB空间，去重量级1亿</span></div></li></ul></ul></ul></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapy对接splash</title>
      <link href="/2017/04/18/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/scrapy%E5%AF%B9%E6%8E%A5splash/"/>
      <url>/2017/04/18/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/scrapy%E5%AF%B9%E6%8E%A5splash/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">Scrapy 对接 Splash</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">环境准备</span></font></div></li><ul><li><div><span style="font-size: 9pt;">首先在这之前请确保已经正确安装好了Splash并正常运行，同时安装好了ScrapySplash库</span></div></li></ul><li><div><b><font style="font-size: 12pt;">Scrapy-Splash文档</font></b></div></li><ul><li><div><span style="font-size: 9pt;">https://github.com/scrapy-plugins/scrapy-splash</span></div></li></ul></ul><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Scrapy-splash的配置</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">新建项目和spider</span></font></div></li><ul><li><div><span style="font-size: 9pt;">scrapy startproject scrapysplashtest     新建项目</span></div></li><li><div><span style="font-size: 9pt;">scrapy genspider taobao</span> <a href="http://www.taobao.com/" style="font-size: 9pt;" target="_blank" rel="noopener">www.taobao.com</a><span style="font-size: 9pt;">     新建spider</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">修改setting.py文件, 添加splash配置</span></font></div></li><ul><li><div><span style="font-size: 9pt;">SPLASH_URL = 'http://localhost:8050'         添加splash服务的地址</span></div></li><li><div><span style="font-size: 9pt;">DUPEFILTER_CLASS = 'scrapy_splash.SplashAwareDupeFilter'       配置去重类</span></div></li><li><div><span style="font-size: 9pt;">HTTPCACHE_STORAGE = 'scrapy_splash.SplashAwareFSCacheStorage'     还需要配置一个Cache存储HTTPCACHE_STORAGE</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">添加splash中间件</span></font></div></li><ul><li><div><span style="font-size: 9pt;">DOWNLOADER_MIDDLEWARES = {</span></div></li><ul><li><div><span style="font-size: 9pt;">'scrapy_splash.SplashCookiesMiddleware': 723,</span></div></li><li><div><span style="font-size: 9pt;">'scrapy_splash.SplashMiddleware': 725,</span></div></li><li><div><span style="font-size: 9pt;">'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware': 810,</span></div></li></ul><li><div><span style="font-size: 9pt;">}</span></div></li><li><div><span style="font-size: 9pt;">SPIDER_MIDDLEWARES = {</span></div></li><ul><li><div><span style="font-size: 9pt;">'scrapy_splash.SplashDeduplicateArgsMiddleware': 100,</span></div></li></ul><li><div><span style="font-size: 9pt;">}</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">SplashRequest请求的使用</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用splash请求的说明</span></font></div></li><ul><li><div><span style="font-size: 9pt;">配置完成之后我们就可以利用Splash来抓取页面了，例如我们可以直接生成一个SplashRequest对象并传递相应的参数，Scrapy会将此请求转发给Splash</span></div></li><li><div><span style="font-size: 9pt;">Splash对页面进行渲染加载，然后再将渲染结果传递回来，此时Response的内容就是渲染完成的页面结果了，最后交给Spider解析即可。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用请求的方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">第一种方法</span></div></li><ul><li><div><span style="font-size: 9pt;">通过SplashRequest发送请求</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy对接splash_files/Image.png" type="image/png" data-filename="Image.png" style="font-weight: bold;" width="471"></span></div></li></ul><li><div><span style="font-size: 9pt;">第二种方法</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy.Request对象发送请求给splash服务器，只需将配置属性给meta参数即可</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy对接splash_files/Image [1].png" type="image/png" data-filename="Image.png" width="520"></span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">通过lua源码控制splash服务的示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">我们把Lua脚本定义成长字符串，通过SplashRequest的args来传递参数，同时接口修改为execute，另外args参数里还有一个lua_source字段用于指定Lua脚本内容，这样我们就成功构造了一个SplashRequest，对接Splash的工作就完成了。</span></div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                from scrapy import Spider</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                from urllib.parse import quote</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                from scrapysplashtest.items import ProductItem</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                from scrapy_splash import SplashRequest</font></span></div><div><br style="font-family: Monaco; color: rgb(51, 51, 51);"></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                script = &quot;&quot;&quot;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                function main(splash, args)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                splash.images_enabled = false</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                assert(splash:go(args.url))</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                assert(splash:wait(args.wait))</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                js = string.format(&quot;document.querySelector('#mainsrp-pager div.form &gt; input').value=%d;document.querySelector('#mainsrp-pager div.form &gt; span.btn.J_Submit').click()&quot;, args.page)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                splash:evaljs(js)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                assert(splash:wait(args.wait))</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                return splash:html()</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                end</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                &quot;&quot;&quot;</font></span></div><div><br style="font-family: Monaco; color: rgb(51, 51, 51);"></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                class TaobaoSpider(Spider):</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                name = 'taobao'</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                allowed_domains = ['www.taobao.com']</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                base_url = 'https://s.taobao.com/search?q='</font></span></div><div><br style="font-family: Monaco; color: rgb(51, 51, 51);"></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                def start_requests(self):</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                for keyword in self.settings.get('KEYWORDS'):</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                for page in range(1, self.settings.get('MAX_PAGE') + 1):</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                url = self.base_url + quote(keyword)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                yield SplashRequest(</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                        url,</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                        callback=self.parse,</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                        endpoint='execute',</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                        args={'lua_source': script, 'page': page, 'wait': 7})</font></span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">使用scrapy-splash比使用selenium的优点</span></font></div></li><ul><li><div><span style="font-size: 9pt;">由于Splash和Scrapy都支持异步处理，我们可以看到同时会有多个抓取成功的结果，而Selenium的对接过程中每个页面渲染下载过程是在Downloader Middleware里面完成的，所以整个过程是堵塞式的，Scrapy会等待这个过程完成后再继续处理和调度其他请求，影响了爬取效率。</span></div></li><li><div><span style="font-size: 9pt;">使用Splash，是在中间件中将请求和渲染等工作交给了splash服务器, 各请求之间是异步的，因此使用Splash爬取效率上比Selenium高出很多。</span></div></li><li><div><span style="font-size: 9pt;">因此，在Scrapy中要处理JavaScript渲染的页面建议使用Splash，这样不会破坏Scrapy中的异步处理过程，会大大提高爬取效率，而且Splash的安装和配置比较简单，通过API调用的方式也实现了模块分离，大规模爬取时部署起来也更加方便。</span></div></li></ul></ul><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Gearapy的介绍和使用</title>
      <link href="/2017/04/12/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Gerapy%E7%9A%84%E4%BB%8B%E7%BB%8D/"/>
      <url>/2017/04/12/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Gerapy%E7%9A%84%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<html><head>  <title>Evernote Export</title>  <basefont face="微软雅黑" size="2">  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">  <meta name="exporter-version" content="YXBJ Windows/307941 (zh-CN, DDL); Windows/10.0.0 (Win64);">  <style>    body, td {      font-family: 微软雅黑;      font-size: 10pt;    }  </style></head><body><a name="1802"><div><span><div><div><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">Gerapy的介绍</span></font></div><ul><li><div><span style="font-size: 9pt;">分布式的爬虫部署和管理工具，基于scrapy、scrapyd、scrapyd-API、Django、Vue.js</span></div></li></ul><div><font style="background-color: rgb(255, 250, 165); font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold;-evernote-highlight:true;">Gerapy的使用</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Gerapy的安装</span></font></div></li><ul><li><div><span style="font-size: 9pt;">pip3 install gerapy</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Gerapy应用步骤</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">1.初始化Gerapy</span></font></div></li><ul><li><div><span style="font-size: 9pt;">gerapy init</span></div></li><ul><li><div><span style="font-size: 9pt;">执行完毕之后，本地便会生成一个名字为 gerapy 的文件夹，接着进入该文件夹，可以看到有一个 projects 文件夹，我们后面会用到。</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">2.初始化数据库</span></font></div></li><ul><li><div><span style="font-size: 9pt;">cd gerapy</span></div></li><li><div><span style="font-size: 9pt;">gerapy migrate</span></div></li><ul><li><div><span style="font-size: 9pt;">会在 gerapy 目录下生成一个 SQLite 数据库，同时建立数据库表。</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">3.启动Gerapy</span></font></div></li><ul><li><div><span style="font-size: 9pt;">gerapy runserver</span></div></li><ul><li><div><span style="font-size: 9pt;">这样我们就可以看到 Gerapy 已经在 8000 端口上运行了。接下来我们在浏览器中打开 http://localhost:8000/，就可以看到 Gerapy 的主界面了</span></div></li></ul></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">使用Gerapy管理项目</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">主机管理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">我们可以点击左侧 Clients 选项卡，即主机管理页面，添加我们的 Scrapyd 远程服务，点击右上角的创建按钮即可添加我们需要管理的 Scrapyd 服务。</span></div></li><li><div><span style="font-size: 9pt;">需要添加 IP、端口，以及名称，点击创建即可完成添加，点击返回即可看到当前添加的 Scrapyd 服务列表</span></div></li><li><div><span style="font-size: 9pt;">添加主机前后</span></div></li><li><div><span style="font-size: 9pt;">这样我们可以在状态一栏看到各个 Scrapyd 服务是否可用，同时可以一目了然当前所有 Scrapyd 服务列表，另外我们还可以自由地进行编辑和删除。</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image.png" type="image/png" data-filename="Image.png" width="603"></span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [1].png" type="image/png" data-filename="Image.png" width="605"></span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">项目管理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Gerapy 的核心功能当然是项目管理，在这里我们可以自由地配置、编辑、部署我们的 Scrapy 项目，点击左侧的 Projects ，即项目管理选项，我们可以看到如下空白的页面：</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [2].png" type="image/png" data-filename="Image.png" width="585"></span></div></li></ul><li><div><span style="font-size: 9pt;">将项目拖动到刚才 gerapy 运行目录的 projects 文件夹下，例如我这里写好了一个 Scrapy 项目，这时刷新页面，我们便可以看到 Gerapy 检测到了这个项目，同时它是不可配置、没有打包的</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [3].png" type="image/png" data-filename="Image.png" width="629"></span></div></li></ul><li><div><span style="font-size: 9pt;">这时我们可以点击部署按钮进行打包和部署，在右下角我们可以输入打包时的描述信息，类似于 Git 的 commit 信息，然后点击打包按钮，即可发现 Gerapy 会提示打包成功，同时在左侧显示打包的结果和打包名称</span></div></li><li><div><span style="font-size: 9pt;">打包成功之后，我们便可以进行部署了，我们可以选择需要部署的主机，点击后方的部署按钮进行部署，同时也可以批量选择主机进行部署，示例如下</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [4].png" type="image/png" data-filename="Image.png" width="527"></span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [5].png" type="image/png" data-filename="Image.png" width="566"></span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">监控任务</span></font></div></li><ul><li><div><span style="font-size: 9pt;">部署完毕之后就可以回到主机管理页面进行任务调度了，任选一台主机，点击调度按钮即可进入任务管理页面，此页面可以查看当前 Scrapyd 服务的所有项目、所有爬虫及运行状态</span></div></li><li><div><span style="font-size: 9pt;">我们可以通过点击新任务、停止等按钮来实现任务的启动和停止等操作，同时也可以通过展开任务条目查看日志详情</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [6].png" type="image/png" data-filename="Image.png" width="583"></span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">编辑项目</span></font></div></li><ul><li><div><span style="font-size: 9pt;">同时 Gerapy 还支持项目编辑功能，有了它我们不再需要 IDE 即可完成项目的编写，我们点击项目的编辑按钮即可进入到编辑页面，如图所示</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [7].png" type="image/png" data-filename="Image.png"></span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">CrawlSpider代码自动生成</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在 Scrapy 中，其实提供了一个可配置化的爬虫 CrawlSpider，它可以利用一些规则来完成爬取规则和解析规则的配置，这样可配置化程度就非常高，这样我们只需要维护爬取规则、提取逻辑就可以了。如果要新增一个爬虫，我们只需要写好对应的规则即可，这类爬虫就叫做可配置化爬虫。</span></div></li><li><div><span style="font-size: 9pt;">Gerapy 可以做到：我们写好爬虫规则，它帮我们自动生成 Scrapy 项目代码。</span></div></li><li><div><span style="font-size: 9pt;">我们可以点击项目页面的右上角的创建按钮，增加一个可配置化爬虫，接着我们便可以在此处添加提取实体、爬取规则、抽取规则了，例如这里的解析器，我们可以配置解析成为哪个实体，每个字段使用怎样的解析方式，如 XPath 或 CSS 解析器、直接获取属性、直接添加值等多重方式，另外还可以指定处理器进行数据清洗，或直接指定正则表达式进行解析等等，通过这些流程我们可以做到任何字段的解析。</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [8].png" type="image/png" data-filename="Image.png" width="689"></span></div></li></ul><li><div><span style="font-size: 9pt;">再比如爬取规则，我们可以指定从哪个链接开始爬取，允许爬取的域名是什么，该链接提取哪些跟进的链接，用什么解析方法来处理等等配置。通过这些配置，我们可以完成爬取规则的设置。</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [9].png" type="image/png" data-filename="Image.png" width="680"></span></div></li></ul><li><div><span style="font-size: 9pt;">最后点击生成按钮即可完成代码的生成。</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [10].png" type="image/png" data-filename="Image.png" width="630"></span></div></li></ul><li><div><span style="font-size: 9pt;">生成的代码示例结果如图所示，可见其结构和 Scrapy 代码是完全一致的。</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Gerapy的介绍_files/Image [11].png" type="image/png" data-filename="Image.png" width="557"></span></div></li></ul></ul></ul></ul><div><font style="font-size: 9pt;"><br></font></div></div><div><font style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18);-evernote-highlight:true;"><b>Gerapy新增功能和Docker部署</b></font></div><div>上面的介绍当然都是人家开发好的，下面介绍下我给gerapy增加的很高效的功能</div><ul><li><div>1.项目本地上传</div></li><ul><li><div><img src="/e_img/Gerapy的介绍_files/Image [12].png" type="image/png" data-filename="Image.png"></div></li><li><div>在project界面增加了选择项目select(需要提前打成zip包),和项目上传(upload)功能，可以直接将本地的项目上传的gerapy， 就不需要手动将代码去放到服务器上了</div></li></ul><li><div>2.批量启动和批量停止</div></li><ul><li><div><img src="/e_img/Gerapy的介绍_files/Image [13].png" type="image/png" data-filename="Image.png"></div></li><li><div>在schedule界面， 如果想要一次启动多个爬虫进程可以点击run some来一起启动多个，即快速又准确又方便，另外也可以点击爬虫名称后面的stop 批量停止爬虫进程</div></li></ul><li><div>3.docker快速部署</div></li><ul><li><div>这部分去我的dockerhub找我的dockerfile吧</div></li></ul></ul><div><br></div></div></span></div></a></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
            <tag> gerapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapyd部署总结</title>
      <link href="/2017/04/06/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/scrapyd%E9%83%A8%E7%BD%B2%E6%80%BB%E7%BB%93/"/>
      <url>/2017/04/06/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/scrapyd%E9%83%A8%E7%BD%B2%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><span style="font-size: 18px; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; font-weight: bold;">二、环境安装</span></div><div style="vertical-align: baseline; background-color: transparent;"><div style="vertical-align: baseline; background-image: url(&quot;http://static.blog.csdn.net/skin/skin-yellow/images/bg-yellow.png&quot;); background-repeat: repeat;"><div style="vertical-align: baseline;"><div style="vertical-align: baseline; text-align: left; min-width: 980px;"><div style="vertical-align: baseline; box-sizing: border-box;"><div style="vertical-align: baseline; overflow: hidden; background-color: rgb(255, 255, 255);"><div style="vertical-align: baseline; background-color: rgb(255, 255, 255);"><div style="margin: 35px 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">安装scprayd，网址：</span><a href="https://github.com/scrapy/scrapyd" style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(12, 137, 207); font-family: &quot;PT Serif&quot;; line-height: 35px; text-decoration: none;" target="_blank">https://github.com/scrapy/scrapyd</a></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">安装scrapyd-client，网址：</span><a href="https://github.com/scrapy/scrapyd-client" style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(12, 137, 207); font-family: &quot;PT Serif&quot;; line-height: 35px; text-decoration: none;" target="_blank">https://github.com/scrapy/scrapyd-client</a></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">建议从github上下载最新源码，然后用python setup.py install安装，因为pip安装源有可能不是最新版的。</span></span></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><br></div></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; font-size: 18px; vertical-align: baseline;"><span style="font-size: 18px; border: 0px; margin: 0px; padding: 0px; vertical-align: baseline; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; font-weight: bold; line-height: 35px;">三、验证安装成功</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">在命令框中输入scrapyd，输出如下说明安装成功</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><span style="background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;"><img src="/e_img/scrapyd部署总结_files/20161114205256046.png" type="image/png" data-filename="20161114205256046.png" height="229" style="margin: 0px; border: none; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; padding: 0px; line-height: inherit; font-family: inherit; vertical-align: baseline; max-height: 100%; max-width: 602px; height: auto;" width="602"></span></span></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><br></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">打开http://localhost:6800/ 可以看到</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><br></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><span style="background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;"><img src="/e_img/scrapyd部署总结_files/20161114205800994.png" type="image/png" data-filename="20161114205800994.png" height="353" style="margin: 0px; border: none; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; padding: 0px; line-height: inherit; font-family: inherit; vertical-align: baseline; max-height: 100%; max-width: 602px; height: auto;" width="602"></span></span></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><br></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">点击jobs可以查看爬虫运行情况。</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><br></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><span style="background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;"><img src="/e_img/scrapyd部署总结_files/20161114205913543.png" type="image/png" data-filename="20161114205913543.png" height="220" style="margin: 0px; border: none; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; padding: 0px; line-height: inherit; font-family: inherit; vertical-align: baseline; max-height: 100%; max-width: 602px; height: auto;" width="324"></span></span></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">接下来就是让人很头疼的scrapyd-deploy问题了，查看官方文档上说用</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">scrapyd-deploy -l</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">可以看到当前部署的爬虫项目，但是当我输入这段命令的时候显示这个命令不存在或者有错误、不合法之类的。</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="background-color: rgb(255, 255, 255); border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; font-weight: bold; line-height: 35px;">解决方案：</span></span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">在你的python目录下的Scripts文件夹中，我的路径是“D:\program files\python2.7.0\Scripts”，增加一个scrapyd-deploy.bat文件。</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">内容为：</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">@echo off</span></span></div><div><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">&quot;D:\program files\python2.7.0\python.exe&quot; &quot;D:\program files\python2.7.0\Scripts\scrapyd-deploy&quot; %*</span></span></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">然后重新打开命令框，再运行scrapyd-deploy -l 就可以了。</span></span></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><br></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; font-size: 18px; vertical-align: baseline;"><span style="font-size: 18px; background-color: rgb(255, 255, 255); border: 0px; margin: 0px; padding: 0px; vertical-align: baseline; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; font-weight: bold; line-height: 35px;">四、发布工程到scrapyd</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">scrapyd-deploy &lt;target&gt; -p &lt;project&gt;</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">target为你的服务器命令，project是你的工程名字。</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">首先对你要发布的爬虫工程的scrapy.cfg 文件进行修改，我这个文件的内容如下：</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">[deploy:scrapyd1]</span></span></div><div><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="font-size: 12pt; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">url = http://localhost:6800/</span></span></div><div><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">project = baidu</span></span></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><br></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="font-size: 12pt; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">因此我输入的命令是：</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">scrapyd-deploy scrapyd1 -p baidu</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><br></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">输出如下</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><span style="background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;"><img src="/e_img/scrapyd部署总结_files/20161115115154867.png" type="image/png" data-filename="20161115115154867.png" height="116" style="margin: 0px; border: none; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; padding: 0px; line-height: inherit; font-family: inherit; vertical-align: baseline; max-height: 100%; max-width: 602px; height: auto;" width="602"></span></span></div></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><br></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; font-size: 18px; vertical-align: baseline;"><span style="font-size: 18px; background-color: rgb(255, 255, 255); border: 0px; margin: 0px; padding: 0px; vertical-align: baseline; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; font-weight: bold; line-height: 35px;">五、启动爬虫</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">使用如下命令启动一个爬虫</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">curl http://localhost:6800/schedule.json -d project=PROJECT_NAME -d spider=SPIDER_NAME</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">PROJECT_NAME填入你爬虫工程的名字，SPIDER_NAME填入你爬虫的名字</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">我输入的代码如下：</span></span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">curl http://localhost:6800/schedule.json -d project=baidu -d spider=baidu</span></span></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><span style="background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;"><img src="/e_img/scrapyd部署总结_files/20161115115441699.png" type="image/png" data-filename="20161115115441699.png" height="77" style="margin: 0px; border: none; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; padding: 0px; line-height: inherit; font-family: inherit; vertical-align: baseline; max-height: 100%; max-width: 602px; height: auto;" width="602"></span></span></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><br></div></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">因为这个测试爬虫写的非常简单，一下子就运行完了。查看网站的jobs可以看到有一个爬虫已经运行完，处于Finished一列中</span></span></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><div><span style="font-size: 15px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;"><img src="/e_img/scrapyd部署总结_files/20161115115521424.png" type="image/png" data-filename="20161115115521424.png" height="271" style="font-size:inherit;margin:0px;border:none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;padding:0px;line-height:inherit;font-family:inherit;vertical-align:baseline;max-height:100%;max-width:602px;height:auto;" width="602"></span></div></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; font-size: 18px; vertical-align: baseline;"><span style="font-size: 18px; background-color: rgb(255, 255, 255); border: 0px; margin: 0px; padding: 0px; vertical-align: baseline; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; font-weight: bold; line-height: 35px;">六、停止一个爬虫</span></span></div><div style="font-size: 13px; vertical-align: baseline; margin: 0px 0px 20px; border: 0px; padding: 9.5px; word-break: break-all; background-color: rgb(253, 246, 227); white-space: pre-wrap; word-wrap: normal; overflow: auto;"><span style="font-size: 12px; background-color: transparent; border: none; margin: 0px; padding: 0px; vertical-align: baseline; color: rgb(101, 123, 131); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; line-height: 20px;">curl http://localhost:</span><span style="margin: 0px; border: 0px; padding: 0px; font-size: inherit; vertical-align: baseline; background-color: transparent; color: rgb(42, 161, 152); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; line-height: 20px;">6800</span><span style="font-size: 12px; background-color: transparent; border: none; margin: 0px; padding: 0px; vertical-align: baseline; color: rgb(101, 123, 131); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; line-height: 20px;">/cancel.json</span> <span style="margin: 0px; border: 0px; padding: 0px; font-size: inherit; vertical-align: baseline; background-color: transparent; color: rgb(101, 123, 131); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; line-height: 20px;">-d</span> <span style="font-size: 12px; background-color: transparent; border: none; margin: 0px; padding: 0px; vertical-align: baseline; color: rgb(101, 123, 131); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; line-height: 20px;">project=PROJECT_NAME</span> <span style="margin: 0px; border: 0px; padding: 0px; font-size: inherit; vertical-align: baseline; background-color: transparent; color: rgb(101, 123, 131); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; line-height: 20px;">-d</span> <span style="font-size: 12px; background-color: transparent; border: none; margin: 0px; padding: 0px; vertical-align: baseline; color: rgb(101, 123, 131); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; line-height: 20px;">job=JOB_ID</span></div><div style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; line-height: 35px;">更多API可以查看官网：</span><a href="http://scrapyd.readthedocs.io/en/latest/api.html" style="margin: 0px; border: 0px; padding: 0px; vertical-align: baseline; font-size: 12pt; color: rgb(12, 137, 207); font-family: &quot;PT Serif&quot;; line-height: 35px; text-decoration: none;" target="_blank">http://scrapyd.readthedocs.io/en/latest/api.html</a></span></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><br></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;"><span style="margin: 0px; border: 0px; padding: 0px; font-size: 18px; vertical-align: baseline;"><span style="font-size: 18px; border: 0px; margin: 0px; padding: 0px; vertical-align: baseline; color: rgb(85, 85, 85); font-family: &quot;PT Serif&quot;; font-weight: bold; line-height: 35px;">七、根据文档编写的调度脚本</span></span></div><div style="font-size: inherit; margin: 0px; border: 0px; padding: 0px; vertical-align: baseline;">前提: 已安装scrapyd-client</div><div style="font-size: 15px;"><br></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div># coding=utf-8</div><div>import requests</div><div>import time</div><div>import json</div><div>import os</div><div>import sys</div><div>reload(sys)</div><div>sys.setdefaultencoding('utf-8')</div><div>BASE_DIR = os.path.dirname(os.path.abspath(os.path.dirname(__file__)))</div><div>sys.path.insert(0, os.path.join(BASE_DIR, 'conf'))</div><div><br></div><div># 需要配置</div><div>SCRAPYD_NODE = &quot;&quot;</div><div>PROJECT_NAME = &quot;&quot;</div><div><br></div><div><br></div><div>class SpiderSwitch(object):</div><div><br></div><div>    def __init__(self, project_name=&quot;&quot;, node=&quot;&quot;):</div><div>        self.project_name = project_name</div><div>        self.ip_port = node</div><div><br></div><div>    def delete_project(self):</div><div>        &quot;&quot;&quot;</div><div>        删除项目</div><div>        &quot;&quot;&quot;</div><div>        delete_data = {&quot;project&quot;: self.project_name}</div><div>        delete_url = &quot;http://{}/delproject.json&quot;.format(self.ip_port)</div><div>        response = requests.post(delete_url, data=delete_data)</div><div>        print &quot;delete_project: [{}]&quot;.format(response.content.decode())</div><div><br></div><div>    def start_spider(self, spider_name):</div><div>        &quot;&quot;&quot;</div><div>        启动爬虫的方法</div><div>        :return: 返回启动的状态</div><div>        &quot;&quot;&quot;</div><div>        start_data = {'project': self.project_name, 'spider': spider_name}</div><div>        start_url = &quot;http://{}/schedule.json&quot;.format(self.ip_port)</div><div>        response = requests.post(url=start_url, data=start_data)</div><div>        print &quot;start_spider: [{}]&quot;.format(response.content.decode())</div><div><br></div><div>    def stop_spider(self, job_id):</div><div>        &quot;&quot;&quot;</div><div>        关闭爬虫的方法</div><div>        :return:返回关闭结果</div><div>        &quot;&quot;&quot;</div><div>        stop_data = {'project': self.project_name, 'job': job_id}</div><div>        stop_url = &quot;http://{}/cancel.json&quot;.format(self.ip_port)</div><div>        response = requests.post(stop_url, data=stop_data)</div><div>        print &quot;stop_spider: [{}]&quot;.format(response.content.decode())</div><div><br></div><div>    def show_spiders(self):</div><div>        &quot;&quot;&quot;</div><div>        获取scrapyd服务器上名为myproject的工程下的爬虫清单</div><div>        :return: 返回查询到的状态</div><div>        &quot;&quot;&quot;</div><div>        show_url = 'http://{}/listspiders.json?project={}'.format(self.ip_port, self.project_name)</div><div>        response = requests.get(show_url)</div><div>        print &quot;show_spiders : [{}]&quot;.format(json.loads(response.content.decode()))</div><div><br></div><div>    def show_project(self):</div><div>        &quot;&quot;&quot;</div><div>        查看所有项目</div><div>        :return:返回查询结果</div><div>        &quot;&quot;&quot;</div><div>        show_url = &quot;http://{}/listprojects.json&quot;.format(self.ip_port)</div><div>        response = requests.get(show_url)</div><div>        print &quot;show_projects: [{}]&quot;.format(response.content.decode())</div><div><br></div><div>    def show_jobs(self):</div><div>        &quot;&quot;&quot;</div><div>        查看正在运行的job</div><div>        :return: 返回查看结果</div><div>        &quot;&quot;&quot;</div><div>        job_url = &quot;http://{}/listjobs.json?project={}&quot;.format(self.ip_port, self.project_name)</div><div>        response = requests.get(job_url)</div><div>        print &quot;jobs: [{}]&quot;.format(response.content.decode())</div><div>        return response.content.decode()</div><div><br></div><div>    def start_some(self, name, n):</div><div>        &quot;&quot;&quot;</div><div>        一次启动多个任务</div><div>        :param:n: 启动的任务数量</div><div>        &quot;&quot;&quot;</div><div>        for i in xrange(n):</div><div>            time.sleep(0.2)</div><div>            self.start_spider(name)</div><div><br></div><div>    def stop_project(self):</div><div>        &quot;&quot;&quot;</div><div>        停止改项目下的所有爬虫</div><div>        &quot;&quot;&quot;</div><div>        job_list = json.loads(self.show_jobs()).get(u&quot;running&quot;)</div><div>        if job_list:</div><div>            for job in job_list:</div><div>                spider_job_id = job.get(u&quot;id&quot;)</div><div>                self.stop_spider(spider_job_id)</div><div>                time.sleep(0.2)</div><div>        print u&quot;the jobs for the project are all closed&quot;</div><div><br></div><div><br></div><div>if __name__ == '__main__':</div><div>    scrpayd_node = SCRAPYD_NODE</div><div>    spider_switch = SpiderSwitch(project_name=PROJECT_NAME, node=scrpayd_node)</div><div>    task = sys.argv[1]</div><div><br></div><div>    if task == &quot;start&quot;:</div><div>        spider_name = sys.argv[2]</div><div>        spider_switch.start_spider(spider_name)</div><div><br></div><div>    if task == &quot;stop&quot;:</div><div>        job_id = sys.argv[2]</div><div>        spider_switch.stop_spider(job_id)</div><div><br></div><div>    if task == &quot;show_jobs&quot;:</div><div>        spider_switch.show_jobs()</div><div><br></div><div>    if task == &quot;show_spiders&quot;:</div><div>        spider_switch.show_spiders()</div><div><br></div><div>    if task == &quot;delete_project&quot;:</div><div>        spider_switch.delete_project()</div><div><br></div><div>    if task == &quot;show_projects&quot;:</div><div>        spider_switch.show_project()</div><div><br></div><div>    if task == &quot;start_some&quot;:</div><div>        spider_name = sys.argv[2]</div><div>        job_num = int(sys.argv[3])</div><div>        spider_switch.start_some(spider_name, job_num)</div><div><br></div><div>    if task == &quot;stop_project&quot;:</div><div>        spider_switch.stop_project()</div></div><div style="font-size: 15px;"><br></div></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>数据格式化输出</title>
      <link href="/2017/03/26/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/"/>
      <url>/2017/03/26/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><span style="font-size: 18.399999618530273px;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 18.4px; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">自动格式化输出文件</span></span></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 21.6px;">scrapy支持的格式化输出文件格式</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;">json</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;">jsonlines</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;">csv</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;">xml</span></font></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 21.6px;">通过配置setting中属性，来定义存储方式</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;"><span style="font-size: 9pt; line-height: 21.6px; font-weight: bold;">FEED_URI</span>   存储路径，必须配置，如果不配置，需要在启动时候指定路径</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;">示例：file://tmp/export.csv</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;">备注：</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;">路径的名称可以格式化，例如：</span></font></div></li><ul><li><div><img src="/e_img/数据格式化输出_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="446"></div></li></ul></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;"><span style="font-size: 9pt; line-height: 21.6px; font-weight: bold;">FEED_FORMAT</span>   用于序列化输出的文件格式，就是上面的几种</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;"><span style="font-size: 9pt; line-height: 21.6px; font-weight: bold;">FEED_EXPORT_ENCODING</span>   文件编码格式，一般默认utf-8，json默认是安全编码格式</span></font></div></li><li><div><span style="font-size: 9pt; font-weight: bold;">FEED_EXPORT_FIELDS</span> <span style="font-size: 9pt;">   定义输出文件中包含的字段，为列表格式</span></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;"><span style="font-size: 9pt; line-height: 13.6px; font-weight: bold;">FEED_EXPORT_INDENT</span>    定义输出内容的缩进，默认为0,</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">0和负数表示内容会放在一行上</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">None会选择最紧凑的方式，将数据进行摆放</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">其他，将会按照指定的缩进，对对象的成员进行格式化显示</span></font></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">FEED_STORE_EMPTY</span> <span style="font-size: 9pt;">    如果没输出是否会导出文件，默认为False</span></div></li><li><div><span style="font-size: 9pt; font-weight: bold;">FEED_STORAGES_BASE</span> <span style="font-size: 9pt;">   字典类型，包含所有支持存储方式模板引擎</span><span style="font-size: 9pt; line-height: 1.45;">， 一般不需要手动配置</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">默认为</span></font></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/数据格式化输出_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="415"></span></div></li></ul></ul></ul></div><div><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">FEED_STORAGES</span> <span style="font-size: 9pt; line-height: 1.45;">    一个字典类型，可以手动添加存储方式的模板引擎</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">默认为 { }</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">如果想要禁用某一个模板文件类型的引擎，可以将上面对应字段值设置为None</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">FEED_EXPORTERS_BASE  </span> <span style="font-size: 9pt;"> 字典类型，包含了所有支持的格式文件处理引擎</span><span style="font-size: 9pt; line-height: 1.45;">， 一般不需要手动配置</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">默认为</span></font></div></li><li><div><img src="/e_img/数据格式化输出_files/Image [2].png" type="image/png" data-filename="Image.png" width="402"></div></li></ul></ul><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">FEED_EXPORTERS      </span><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">一个字典类型，可以手动添加文件处理引擎</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">默认为{ }</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">如果想要禁用某一个模板文件类型的引擎，可以将上面对应字段值设置为None</span></div></li></ul></ul></div><div><font style="background-color: rgb(255, 250, 165);font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">scrapy手动输出指定csv格式文件</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">目标：</span></font></div></li><ul><li><div><span style="font-size: 9pt;">获取如下格式的csv文件</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">配置的步骤</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">1. 在scrapy的spiders同层目录，新建my_project_csv_item_exporter.py文件内容如下（文件名可改，目录定死）</span></font></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            from scrapy.conf import settings</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            from scrapy.contrib.exporter import CsvItemExporter</span></div><div><br style="font-size: 9pt;"></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            class MyProjectCsvItemExporter(CsvItemExporter):</span></div><div><br style="font-size: 9pt;"></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            def __init__(self, *args, **kwargs):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                delimiter = settings.get('CSV_DELIMITER', ',')</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                kwargs['delimiter'] = delimiter</span></div><div><br style="font-size: 9pt;"></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                fields_to_export = settings.get('FIELDS_TO_EXPORT', [])</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                if fields_to_export :</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                    kwargs['fields_to_export'] = fields_to_export</span></div><div><br style="font-size: 9pt;"></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                super(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; line-height: 1.45;">MyProjectCsvItemExporter, self).__init__(*args, **kwargs)</span></div></div><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">2. 在同层目录，settings.py文件新增如下内容（指定item,field顺序）</span></span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            FEED_EXPORTERS = {</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                'csv': 'my_project.my_project_csv_item_exporter.MyProjectCsvItemExporter',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            } #这里假设你的project名字为my_project</span></div><div><br style="font-size: 9pt;"></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            FIELDS_TO_EXPORT = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                'id',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                'name',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                'email',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                'address'</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            </span></div></div><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">3. 在同层目录，settings.py文件指定分隔符</span></font></div></li><ul><li><div><span style="font-size: 9pt;">CSV_DELIMITER = &quot;\t&quot;</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">4.启动项目</span></font></div></li><ul><li><div><span style="font-size: 9pt;">全部设定完后，执行scrapy crawl spider -o spider.csv的时候，字段就按顺序来了。</span></div></li></ul></ul></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapy-redis框架</title>
      <link href="/2017/03/18/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/scrapy_redis%E6%A1%86%E6%9E%B6/"/>
      <url>/2017/03/18/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/scrapy_redis%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<html><head>  <title>Evernote Export</title>  <basefont face="微软雅黑" size="2">  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">  <meta name="exporter-version" content="YXBJ Windows/307941 (zh-CN, DDL); Windows/10.0.0 (Win64);">  <style>    body, td {      font-family: 微软雅黑;      font-size: 10pt;    }  </style></head><body><a name="632"><div><span><div><span style="font-size: 14pt;background-color: #fffaa5;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">scrapy_redis的介绍</span></span></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">scrapy_redis的官方介绍</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">基于redis的scrapy组件</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">使用scrapy_redis要安装scrapy_redis组件（pip install scrapy_redis）</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">scrapy_redis使用场景</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 15.2px;">增量式抓取、分布式抓取、持久化抓取</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">scrapy_redis实现的功能及与原生scrapy的区别</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">request去重</span></span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">scrapy：可以实现去重，但是scrapy去重不能实现持久化，即当下次如果再次运行程序，会再次存储之前存储过得内容</span></span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">scrapy_redis：会将请求过的指纹集合保存起来，用来判断重复我请求，即便重新运行程序，已经请求过的请求，也不会进入待请求对列中</span></span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">爬虫持久化</span></span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">scrapy：每次运行爬虫都是一次全新的开始</span></span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">scrapy_redis：会将待请求的序列化后的request对象保存起来，这样每次运行程序都会从待请求列队中读取request对象进行请求，即使终止程序，再次运行，依然会从待请求对列中获取请求对象</span></span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">分布式爬虫</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">scrapy：不能实现分布式</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">scrapy_redis：可以通过redis存储爬取的状态（已爬取，和待爬取），让多台机器上的爬虫程序，共用一个redis服务器，这样数据是共享的，实现了分布式的爬虫</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">分布式和集群的区别（备注）：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">分布式：一个业务拆分成多个子业务，部署在不同的服务器上</span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">集群，同一个业务，部署在多个服务器上</span></span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">scrapy_redis的爬虫工作流程</span></div></li><ul><li><div><img src="/e_img/scrapy_redis框架_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 9pt; line-height: 1.45;" width="371"></div></li></ul></ul></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Scrapy_redis和scrapy框架使用的区别</span></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">克隆scrapy_redis的示例代码</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">克隆 github上的scrapy-redis源码文件</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">git clone</span> <a href="https://github.com/rolando/scrapy-redis.git" shape="rect" style="font-size: 9pt; line-height: 1.45;" target="_blank" rel="noopener">https://github.com/rolando/scrapy-redis.git</a></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">打开example-project的scrapy_redis示例源代码</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">mv scrapy-redis/example-project    项目目录</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">example-project项目目录结构如下</span></div></li><ul><li><div><img src="/e_img/scrapy_redis框架_files/Image [1].png" type="image/png" data-filename="Image.png" width="423"></div></li></ul><li><div><span style="font-weight: bold;">redis_scrapy代码上和普通scrapy爬虫的区别</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">一、spider爬虫文件</span></span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">第一种Scrapy爬虫（如示例dmoz.py）</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">区别：</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">和普通的爬虫文件没有区别</span></span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">文件主要内容：</span></span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy_redis框架_files/Image [2].png" type="image/png" data-filename="Image.png" width="385"> </span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">第二种RedisSpider爬虫（如示例的myspider_redis.py）</span></span></span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">区别</span></span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">爬虫类继承自RedisSpider</span></span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">要指定爬虫类的redis_key类属性，指定reids中存储start_url的位置</span></div></li><li><div><span style="font-size: 12px;">新增了爬虫类的方法</span></div></li><li><div><span style="font-size: 9pt;">def make_request_from_data(self, data):   # data 为接收到额redis_key传递过来的url，我们可以自行拼接成想要的url进行请求</span></div></li><ul><li><div><span style="font-size: 9pt;">search_key = data</span></div></li><li><div><span style="font-size: 9pt;">url = self.URL_MAIN % (search_key, 1)</span></div></li><li><div><span style="font-size: 9pt;">result_item = SearchInfoResultItem()</span></div></li><li><div><span style="font-size: 9pt;">result_item[&quot;task_value&quot;] = search_key</span></div></li><li><div><span style="font-size: 9pt;">return Request(url, meta={&quot;result_item&quot;: result_item}, dont_filter=True)</span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">作用</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">防止分布式爬虫在不同的程序中，都会去请求该start_url，这样会造成请求的重复，响应也会重复的交给解析函数去处理，从redis中取出的start_url第一次被爬虫取出之后便会删除掉，不会造成重复的请求</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">在持久化和去重的功能上实现了RedisSpider爬虫才实现了分布式</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">代码示例：</span></div></li><ul><li><div><img src="/e_img/scrapy_redis框架_files/Image [3].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="484"></div></li></ul></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">第三种RedisCrawSpider爬虫（如示例的myspider_redis.py）</span></span></div></li><ul><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">区别</font></span></div></li><ul><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">爬虫类继承自RedisCrawlSpider</font></span></div></li><li><div><font style="font-size: 9pt;"><span style="line-height: 13.6px;">比</span><span style="line-height: 13.6px;">RedisSpider爬虫就多了一个rules过滤功能</span></font></div></li></ul><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">作用</font></span></div></li><ul><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">在持久化和去重的功能上实现了RedisSpider爬虫才实现了分布式</font></span></div></li><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">另外可以实现自动的对响应中的连接进行匹配，进行请求</font></span></div></li></ul><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">代码示例</font></span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy_redis框架_files/Image [4].png" type="image/png" data-filename="Image.png" width="356"></span></div></li></ul></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">二、setting文件</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">区别：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">设置了三个新的属性</span></div></li><ul><li><div><span style="font-size: 9pt;">DUPEFILTER_CLASS = &quot;scrapy_redis.dupefilter.RFPDupeFilter&quot;</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">指定爬虫给request对象去重的方法</span></div></li></ul><li><div><span style="font-size: 9pt;">SCHEDULER = &quot;scrapy_redis.scheduler.Scheduler&quot;</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">指定爬虫处理请求列队的方法</span></div></li></ul><li><div><span style="font-size: 9pt;">SCHEDULER_PERSIST = True</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">列队中的内容是否持久保存，为False的时候，在关闭程序的时候，清空redis</span></span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">添加了一个处理item的pipeline</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;"> 'scrapy_redis.pipelines.RedisPipeline': 400</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">用来将items自动保存到reids中，我们可以取消，不用reids来保存</span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">设置了redis的地址</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">REDIS_URL = 'redis://192.168.207.130: 6379'</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">不写使用哪个数据库的话，默认使用0数据库</span></span></div></li></ul></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">文件主要内容：</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy_redis框架_files/Image [5].png" type="image/png" data-filename="Image.png" width="471"></span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">三、运行爬虫后，reids数据库的中多出的键（运行程序后）</span></span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">redis数据库多个三个键</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">爬虫名：dupefilter   用来存储爬取过的request指纹集合，数据类型为set类型</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">爬虫名：requests  用来存储已经序列化的待请求对象，数据类型为zset类型</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">爬虫名：items    用来存储爬取出来的数据，数据类型为list类型</span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">每个键存储的内容：</span></span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy_redis框架_files/Image [6].png" type="image/png" data-filename="Image.png" width="466"></span></div></li></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Scrapy_redis功能实现的方法(</span><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Scrapy_redis的源码</span><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">)</span></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">scrapy_redis之redispipeline</span><span style="font-weight: bold; line-height: 13.6px;">（实现item数据自动存储redis数据库）</span></div></li><ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">文件位置</span></span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt;">/python3.5/site-packages/</span>scrapy_redis/pipelines/RedisPipeline</span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">源码主要功能</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">实现将item存储在redis中</span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">源码片段</span></span></div></li></ul></ul></div><ul><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy_redis框架_files/Image [7].png" type="image/png" data-filename="Image.png" width="461"></span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">scrapy_redis之RFPDupeFilter（主要实现去重）</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 15.2px;">文件位置</span></div></li><ul><li><div><span style="font-size: 9pt;">/python3.5/site-packages/</span><span style="font-size: 9pt;">scrapy_redis、dupefilter/RFPDpeFilter</span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">源码主要功能</span></span></div></li><ul><li><div><span style="line-height: 13.6px;">判断请求是否存在内存中，如果不存在</span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">对请求进行一系列操作后，将其转化为指纹</span></span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">将指纹存储在内存中</span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">主要实现去重功能</span></span></span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">源码片段</span></span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy_redis框架_files/Image [8].png" type="image/png" data-filename="Image.png" width="415"></span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">加密指纹生成过程</span></span></div></li><ul><li><div><span style="font-size: 9pt;">  import hashlib</span></div></li><li><div><span style="font-size: 9pt;">  fp = hashlib.sha1()</span></div></li><li><div><span style="font-size: 9pt;">  fp.update(url)</span></div></li><li><div><span style="font-size: 9pt;">  fp.update(request.method)</span></div></li><li><div><span style="font-size: 9pt;">  fp.update(request.body or b&quot;&quot;)</span></div></li><li><div><span style="font-size: 9pt;">  return fp.hexdiget()  #sha1结果的16进制的字符串</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">scrapy_redis之Scheduler（主要实现持久化）</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 15.2px;">文件位置</span></div></li><ul><li><div><span style="font-size: 9pt;">/python3.5/site-packages/</span><span style="font-size: 9pt;">scrapy_redis/scheduler/Scheduler</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">代码主要功能</span></span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">判断取消过滤是否为true</span></span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">判断url地址是否是第一次看到</span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">如果过滤，且是第一次看到的请求，那么将会进入待请求的列队</span></span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">主要实现持久化功能</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">源码片段</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy_redis框架_files/Image [9].png" type="image/png" data-filename="Image.png" width="446"></span></div></li></ul></ul><div><span style="font-size: 14pt;"><span style="background-color: #fffaa5;-evernote-highlight:true;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold; line-height: 15.2px;-evernote-highlight:true;">scrapy_redis的总结</span></span></span></div></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">scrapy_redis与scrapy的区别</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 15.2px;">本质区别</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;"><span style="font-size: 9pt; line-height: 1.45;">scrapy_redis_spider</span>相比于之前的scrapy_spider多了持久化和持久化去重的功能</span></span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">主要是因为scrapy_redis将指纹和请求进行了在redis中的存储,正是redis实现了持久化</span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">代码区别</span></span></div></li><ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; line-height: 13.6px;">仅仅是在setting中增加了五行代码</span></span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">拓展：</span></span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">scrapy_redis实现了请求的增量式爬虫，还可以实现内容增量式爬虫</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">可以将dont_filter设置不进行过滤</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">会将每条数据根据发帖人，发帖时间，帖子更新时间等使用md5算法生成指纹</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">在进行存储的时候 进行判断是否已经存在，以及是否更新</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果不存在那么便插入</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果存在但是更新时间已经更新，那么便更新</span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">工作场景常用的数据存储模式</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">优点</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">可以利用redis的读取快速的特点，进行数据的快速读取</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">可以实现读取和存储分离，防止锁表的产生</span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">存储数据用mysql或者mongodb</span></span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">先将爬取到的数据去重后存储到mysql或mongodb中</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">也可以先存储到数据库中，在对数据库进行数据的去重</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">redis应用其速度快的特点，用来展示数据</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">定期从mysql或者mongodb中将去重后的数据读取到redis中</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">读取数据从redis中读取，其速度远远优于mysql和mongodb</span></div></li></ul></ul></ul></div><div><br clear="none"></div></span></div></a></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapy-middleware</title>
      <link href="/2017/03/15/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy-middleware/"/>
      <url>/2017/03/15/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy-middleware/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 1.45;-evernote-highlight:true;">中间件使用方法</span></span></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">使用方法</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">在middlewares文件中编写一个Downloader Middlewares的类，定义中间件</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">在setting中开启Downloader Middlewares，数值越小权限越大</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">request会先经过权限大的中间件，response会先经过权限小的中间件</span></div></li></ul></ul></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                SPIDER_MIDDLEWARES = {</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                    <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑;"># 开启middleware，写清楚middleware所在的路径</span></span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                    'login.middlewares.LoginSpiderMiddleware': 543,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                     }</span></div></div><div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">常用自定义中间件</span></span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">Downloader Middlewares（下载中间件）的方法</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">process_request(self, request, spider)</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">作用</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">当每个请求通过下载中间件时，该方法被调用,必须返回如下值的其中一个</span></font></div></li></ul><li><div><span style="line-height: 13.6px;">返回内容</span></div></li><ul><li><div><span style="font-size: 9pt;">返回None</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">Scrapy将继续处理该请求，执行其他的中间件的相应方法，直到合适的下载器处理函数（下载处理程序）被调用，该请求被执行（其响应被下载）</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">返回Request对象</span></font></div></li><ul><li><div><span style="font-size: 9pt;">如果其返回 Request 对象，Scrapy则停止调用 process_request方法并重新调度返回的request。当新返回的request被执行后， 相应地中间件链将会根据下载的response被调用。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">返回Response对象</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Scrapy将不会调用任何其他的 process_request或 process_exception方法，或相应地下载函数； 将返回该response,已安装的中间件的 process_response() 方法则会在每个response返回时被调用。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">抛出异常（包括</span><span style="font-size: 9pt; line-height: 13.6px;">抛出一个IgnoreRequest</span><span style="font-size: 9pt; line-height: 13.6px;">异常</span><span style="font-size: 9pt; line-height: 13.6px;">）</span></font></div></li><ul><li><div><span style="font-size: 9pt;">停止调用 process_request，</span><span style="font-size: 9pt;">下载中间件的 process_exception方法会被调用。如果没有任何一个方法处理该异常， 则request的errback(Request.errback)方法会被调用。如果没有代码处理抛出的异常， 则该异常被忽略且不记录(不同于其他异常那样)。</span></div></li></ul></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">process_response（self, request, response, spider）  </span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">作用</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">当响应通过每个下载中间件的时候，调用方法，必须返回如下之一</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">返回内容</span></div></li><ul><li><div><span style="font-size: 9pt;">返回Response对象（可以与传入的响应相同，也可以是全新的对象）</span></div></li><ul><li><div><span style="font-size: 9pt;">该响应将被在链中的其他中间件的process_response方法处理。</span></div></li></ul><li><div><span style="font-size: 9pt;">返回Request对象</span></div></li><ul><li><div><span style="font-size: 9pt;">中间件链停止，返回的请求将被重新调度下载。处理类似于process_request()返回请求所做的那样。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">产生异常（包括抛出一个IgnoreRequest异常）</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">停止调用 process_response，</span><span style="font-size: 9pt; line-height: 1.45;">下载中间件链的 process_exception方法会被调用，如果没有任何一个方法处理该异常，则调用请求的errback（Request.errback）。如果没有代码处理抛出的异常，则该异常被忽略且不记录（不同于其他异常那样）。</span></div></li></ul></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">process_exception(self, request，exception, spider)</span><span style="font-size: 9pt; line-height: 1.45;">   </span></font></div></li><ul><li><div><span style="font-size: 9pt;">作用：</span></div></li><ul><li><div><span style="font-size: 9pt;">当下载处理器（下载处理程序）、下载中间件的方法抛出异常（包括IgnoreRequest异常）时，Scrapy调用process_exception,返回如下几个参数之一</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">返回内容：</span></div></li><ul><li><div><span style="font-size: 9pt;">返回None：Scrapy将会继续处理该异常，调用接着已安装的其他中间件的process_exception方法，直到所有中间件都被调用完毕，则调用默认的异常处理。</span></div></li><li><div><span style="font-size: 9pt;">返回Request对象，则返回的请求将被重新调用下载。这将停止中间件的process_exception方法执行，就如返回一个响应的那样。</span></div></li></ul></ul></ul></ul><div><span style="font-size: 18.399999618530273px;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 18.4px; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">常设置的中间件</span></span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">给请求添加请求头的内容</span></div></li></ul></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">     </span><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;"> from .settings import USER_AGENTS </span></font></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">       class RandomUserAgent(object):    </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># 配置下载中间件</span></font></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">           def process_request(self, request, spider):</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                ug_list = USER_AGENTS</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                user_agent = random.choice(ug_list)</span></span></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># 在requests请求前添加自定义的USER_AGENT</span></font></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                request.headers['User-Agent'] = user_agent</span></span></div></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">给请求添加代理ip</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">        class RandomProxy(object):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">               def process_request(self, request, spider):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                    proxy = random.choice(PROXIES)</span></div><div><br style="font-family: Monaco;"></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                    if proxy['user_passwd'] is None:</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                            </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;"># 没有代理账户验证的代理使用方式</span></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                            request.meta['proxy'] = &quot;http://&quot;</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"> + proxy['ip_port']</span></font></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                    else:</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                            </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;"># 对账户密码进行base64编码转换</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                            base64_userpasswd = base64.b64encode(proxy['user_passwd'])</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                           </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;"># 对应到代理服务器的信令格式里</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                           request.headers['Proxy-Authorization'] = 'Basic ' + base64_userpasswd</span></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                    request.meta['proxy'] = &quot;https://&quot;</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"> + proxy['ip_port']</span></font></div></div></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 21.6px;">将跳转（302）等状态码不是200的响应，重新发起请求（只适用于scrapy，不适用与scrapy-redis）</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    class Forbidden302Middleware(object):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        def process_response(self, request, response, spider):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            if response.status != 200:</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                print('捕获到一个相应状态码不是200的请求:', request.url, ': ', response.status_code)</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                return request</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            return response</span></div></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 21.6px;">给请求添加cookie的中间件</span></font></div></li></ul></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><font style="font-size: 11px;"><span style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    import random</span></span></font></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    class CookiesMiddleware(object):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        def process_request(self,request,spider):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            cookie = random.choice(</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-weight: bold;">cookie_pool</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">)  # cookie_poll是通过其他模块定期爬取获得的COOKIE集合</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            request.cookies = cooki</span></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 21.6px;">在下载中间件中通过selenium实现模拟登录</span></font></div></li><li><div><span style="font-size: 18.4px; color: rgb(50, 135, 18); font-weight: bold; line-height: 21.6px;"><img src="/e_img/Scrapy-middleware_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 14pt;" width="580"></span></div></li></ul></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">所有内置下载中间件</span></font></span></div><div><ul><li><div><span style="font-size: 9pt; line-height: 21.6px;">关闭内置中间件的方法</span></div></li><ul><li><div><span style="font-size: 9pt;">示例：'scrapy.downloadermiddlewares.retry.RetryMiddleware': None</span></div></li></ul></ul></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    DOWNLOADER_MIDDLEWARES = {</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        # Engine side</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware': 100,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware': 300,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware': 350,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware': 400,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware': 500,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.retry.RetryMiddleware': 550,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.ajaxcrawl.AjaxCrawlMiddleware': 560,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware': 580,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        # 对压缩(gzip, deflate)数据的支持</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware': 590,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.redirect.RedirectMiddleware': 600,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.cookies.CookiesMiddleware': 700,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware': 750,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.stats.DownloaderStats': 850,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'scrapy.downloadermiddlewares.httpcache.HttpCacheMiddleware': 900,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        </span></div></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 1.45;-evernote-highlight:true;">常用的伪造User-Agent</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">user_agent_list = [       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (X11; CrOS i686 2268.111.0) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1092.0 Safari/536.6&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1090.0 Safari/536.6&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/19.77.34.5 Safari/537.1&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.9 Safari/536.5&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.0) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.36 Safari/536.5&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_0) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1062.0 Safari/536.3&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1062.0 Safari/536.3&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.0 Safari/536.3&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.24 (KHTML, like Gecko) Chrome/19.0.1055.1 Safari/535.24&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/535.24 (KHTML, like Gecko) Chrome/19.0.1055.1 Safari/535.24&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/531.21.8 (KHTML, like Gecko) Version/4.0.4 Safari/531.21.10&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US) AppleWebKit/533.17.8 (KHTML, like Gecko) Version/5.0.1 Safari/533.17.8&quot;,      </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/533.19.4 (KHTML, like Gecko) Version/5.0.2 Safari/533.18.5&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.1.17) Gecko/20110123 (like Firefox/3.x) SeaMonkey/2.0.12&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Windows NT 5.2; rv:10.0.1) Gecko/20100101 Firefox/10.0.1 SeaMonkey/2.7.1&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_8; en-US) AppleWebKit/532.8 (KHTML, like Gecko) Chrome/4.0.302.2 Safari/532.8&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_4; en-US) AppleWebKit/534.3 (KHTML, like Gecko) Chrome/6.0.464.0 Safari/534.3&quot;,      </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_5; en-US) AppleWebKit/534.13 (KHTML, like Gecko) Chrome/9.0.597.15 Safari/534.13&quot;,      </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/14.0.835.186 Safari/535.1&quot;,      </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.54 Safari/535.2&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.36 Safari/535.7&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; U; Mac OS X Mach-O; en-US; rv:2.0a) Gecko/20040614 Firefox/3.0.0 &quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; U; PPC Mac OS X 10.5; en-US; rv:1.9.0.3) Gecko/2008092414 Firefox/3.0.3&quot;,      </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.1) Gecko/20090624 Firefox/3.5&quot;,       </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.14) Gecko/20110218 AlexaToolbar/alxf-2.0 Firefox/3.6.14&quot;,        </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; U; PPC Mac OS X 10.5; en-US; rv:1.9.2.15) Gecko/20110303 Firefox/3.6.15&quot;,     </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&quot;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    ]</span></div></div><div><br></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapy-setting &amp; log</title>
      <link href="/2017/03/12/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy-settinglog%E4%BF%A1%E6%81%AF/"/>
      <url>/2017/03/12/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy-settinglog%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 1.45;-evernote-highlight:true;">配置scrapy的setting文件</span></div><ul><li><span style="font-size: 10pt; font-weight: bold;">为什么需要配置文件</span></li><ul><li><span style="font-size: 9pt;">配置文件存放一些公共的变量（比如数据库的地址，账号密码等）方便自己和别人的使用和修改</span></li><li><span style="font-size: 9pt;">为了方便识别，一般配置文件中变量的命名都为大写，例如：SQL_HOST = '192.168.0.1'</span></li></ul><li><span style="font-size: 10pt; font-weight: bold;">在pider和pipeline中访问setting内容</span></li><ul><li><span style="font-size: 12px; font-weight: bold;">在spider中访问setting的内容</span></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">         class Myspider(scrapy.Spider):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            name = 'myspider'</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            start_urls = ['</span><a href="http://*****'/" style="background-color: rgb(251, 250, 248); font-size: 12px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;" target="_blank" rel="noopener">http://*****'</a><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">;]</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            def parse(self, response):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑;"># 可以直接通过访问实例属性的方法，访问setting文件中的内容</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑;">                                # self.settings 返回的是一个字典，里面按照键值对存储所有的配置参数</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                key = self.settings.attributes.get('KEY'，None)               </span></div></div><ul><li><span style="font-size: 12px; font-weight: bold;">在pipeline文件中访问setting的内容</span></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">         class Mypipeline(object):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">             def open_spider(self, spider):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                 </span><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: 微软雅黑;"> </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑;"># 可以通过传递过来的spider实例来访问setting中的内容</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                  BOT_NAME = spider.setting.get('KEY', None)   </span></div></div><ul><li><span style="font-size: 10pt; font-weight: bold;">配置文件的常用的配置</span></li></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">        BOT_NAM</span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">E = '***'   项目名称</font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        SPIDER_MOUDLES = ['ys.spiders']     # 爬虫创建的位置</font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        NEWSPIDER_MOUDLE = 'yg.spiders'    # 新建爬虫的位置</font></span></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        USER_AGENT ='***'      #</span> <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">设置主句名称，用来告诉服务器请求的身份，注意，scrapy不能将USER_AGENT配置在  </span> <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"> </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">HEADERS中</span></font></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">      <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"> </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">ITEM_PIPLINES   # 管道</span></font></span></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">DOWNLOAD</span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">_MIDDLEWARES    # 下载中间件</span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">   </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; line-height: 1.45;"> </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; line-height: 1.45;">  </span></font></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">       <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">OBEY_ROBOTFILES = False    # 是否遵守robots协议</span></font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">SPIDER_MIDDLEWARES    # 爬虫中间件</span></font></span></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        DEAFAULT_REQUEAT_HEADERS = { ***</span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">}   # 配置scrapy 默认的请求头，不能包含USER-AGRNT和cookies、refer</span></font></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">    <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;">    #  使用增量式，或分布式爬虫需要配置</span></font></span></div><div><span style="background-color: rgb(251, 250, 248); line-height: 1.45;"><font style="font-size: 9pt;">        DUPEFILTER_CLASS = &quot;scrapy_redis.dupefilter.RFPDupeFilter&quot;</font></span></div><div><span style="background-color: rgb(251, 250, 248); line-height: 1.45;"><font style="font-size: 9pt;">        SCHEDULER = &quot;scrapy_redis.scheduler.Scheduler&quot;</font></span></div><div><span style="background-color: rgb(251, 250, 248); line-height: 1.45;"><font style="font-size: 9pt;">        SCHEDULER_PERSIST = True</font></span></div><div><span style="background-color: rgb(251, 250, 248); line-height: 1.45;"><font style="font-size: 9pt;">        ITEM_PIPELINES = {</font></span></div><div><span style="background-color: rgb(251, 250, 248);"><font style="font-size: 9pt;">            <span style="background-color: rgb(251, 250, 248); line-height: 13.6px;">'scrapy_redis.pipelines.RedisPipeline': 400</span></font></span></div><div><span style="background-color: rgb(251, 250, 248);"><font style="font-size: 9pt;">            }</font></span></div><div><span style="background-color: rgb(251, 250, 248); line-height: 1.45;"><font style="font-size: 9pt;">        REDIS_URL = 'redis://127.0.0.1: 6379'</font></span></div><div><span style="background-color: rgb(251, 250, 248);">        </span></div><div><span style="background-color: rgb(251, 250, 248);">      <font style="font-size: 9pt;"> </font></span><span style="background-color: rgb(251, 250, 248);"><font style="font-size: 9pt;">RETRY_HTTP_CODES = []    # 设置会retry的状态码响应</font></span></div><div><span style="background-color: rgb(251, 250, 248);"><font style="font-size: 9pt;">        <span style="background-color: rgb(251, 250, 248);">HTTPERROR_ALLOWED_CODES = [302,]</span><span style="background-color: rgb(251, 250, 248);">    # <span style="background-color: rgb(251, 250, 248);">设置来指定spider能处理的response返回值</span></span></font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">LOG_LEVEL = &quot;WARNING&quot;     # 设置log提示的等级，</span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">log的从高到低的级别分别为：error、warning、info、debug</span></font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">RETRY_ENABLED = False     开启请求失败重新请求，默认是开启的</span></font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        RETRY_TIMES = 3        设置重新请求的次数</font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        DOWNLOAD_TIMEOUT = 6     设置请求最大等待时间</font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">COOKIES_ENABLE = True        #  是否启用cookie中间件，如果关闭是不会向服务器发送cookie的</span></font></span></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">COOKIES_DEBUG = True        # 可以看带cookie在函数中传递的过程</span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">  </span></font></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        <span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">DOWNLOAD_DELAY = 3   # 请求延时</span></font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        CONCURRENT_REQUESTS = 16   # 并发数量，默认值为16</font></span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 9pt;">        CONCURRENT_REQUESTS_PRE_DOMAIN = 16   # 每个域名最大并发</font></span></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        </span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">CONCURRENT_REQUESTS_PR_IP = 16    # 每个ip最大的并发</span></font></div><div><font style="font-size: 9pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif;">         AUTOTHROTTLE_ENABLED = True    </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51);"># 动态调整下载延时</span></font></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51);"><font style="font-size: 9pt;">        CONCURRENT_REQUESTS_PRE_DOMAIN = 1  # 设置允许对同一域名发起请求的并发数量限制</font></span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); color: rgb(51, 51, 51);"><font style="font-size: 9pt;">        JOBDIR = '路径'     # 配置记录爬虫状态目录的文件，使爬虫中途停止再启动的时候会接着上一次的状态继续爬取</font></span></div></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">log的配置与scrapy的debug信息</span></div><ul><li><span style="font-size: 10pt; font-weight: bold;">scrapy-log相关的配置</span></li><ul><li><span style="font-size: 9pt; font-weight: bold;">log的作用</span></li><ul><li><span style="font-size: 9pt;">为了让我们自己希望输出到终端的内容能容易看一些</span></li></ul><li><span style="font-size: 9pt; font-weight: bold;">配置log的显示等级</span></li><ul><li><span style="font-size: 9pt;">在setting中设置log显示的级别</span></li></ul></ul></ul><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            LOG_LEVEL = &quot;WARNING&quot;      </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);"> #  在setting文件中添加一行</span></div></div></blockquote><ul><ul><li><span style="font-size: 9pt;">log的从高到低的级别分别为：error、warning、info、debug</span></li></ul><li><span style="font-size: 10pt; font-weight: bold;">自定义log日志的方法</span></li><ul><li><span style="font-size: 9pt; font-weight: bold;">在想要显示log的位置添加log的输出</span></li><ul><li><span style="font-size: 9pt;">第一种打印方式：（不带log产生的位置）</span></li><ul><li><img src="/e_img/Scrapy-settinglog信息_files/Image.png" type="image/png" data-filename="Image.png" width="327"></li></ul><li><span style="font-size: 9pt;">第二种打印方式：（带log产生的具体文件）</span></li><ul><li><img src="/e_img/Scrapy-settinglog信息_files/Image [1].png" type="image/png" data-filename="Image.png" width="328"></li></ul><li><span style="font-size: 12px; color: rgb(65, 173, 28); font-weight: bold;">在普通的py文件中配置logger日志的方法</span></li><ul><li><span style="font-size: 9pt; font-weight: bold;">作用</span></li><ul><li><span style="font-size: 9pt;">我们配置完了logger的输出文件后，我们可以在任何其他的程序后，可以导入logger模块，帮助我们来可以看到错误产生的位置和时间等信息</span></li><li><span style="font-size: 9pt;">我们还可以将log存储的文件命名为每日的日期，这样方便我们分别存储我们每日的bug</span></li></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">示例：</span></font></li></ul></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                    import logging</span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">             </span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑;">             # 配置logger的输出格式，和输出内容</span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                    logging.basicConfig(</span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                                    level=logging.INFO,</span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                                    format='%(levelname)s : %(filename)s '</span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                                           '[%(lineno)d] : %(message)s'</span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                                           ' - %(asctime)s', datefmt='[%d-%b-%Y %H:%M:%S]'</span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                                            filename='./logdebug.log')</span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                   </span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                    if __name__ == '__main__':</span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;"><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                      </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;"> </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">logger = logging.getLogger(__name__)</span></span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                        log_message = 'error'</span></div><div style="font-size: 12px;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                        logger.warning(log_message）</span></div></div><ul><ul><li><span style="font-size: 9pt; font-weight: bold;">输出的格式</span></li><li><img src="/e_img/Scrapy-settinglog信息_files/Image [2].png" type="image/png" data-filename="Image.png" style="font-weight: bold; font-size: 9pt;" width="452"></li><li><span style="font-weight: bold; font-size: 9pt;">详细示例</span></li><ul><li><img src="/e_img/Scrapy-settinglog信息_files/Image [3].png" type="image/png" data-filename="Image.png" width="473"></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">常见的scrapy的debug信息</span></li><ul><li><img src="/e_img/Scrapy-settinglog信息_files/Image [4].png" type="image/png" data-filename="Image.png" style="font-weight: bold;" width="563"></li></ul></ul><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapy-pipeline</title>
      <link href="/2017/03/08/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy-pipeline/"/>
      <url>/2017/03/08/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy-pipeline/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">pipeline的配置</span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">pipeline类的作用</span></div></li><ul><li><div><span style="font-size: 9pt;">接收引擎传递过来的数据，对数据进行处理</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">配置pipeline类（在pipelines文件中）</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    class Myspiderpipline(object):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        def process_item(self, item, spider):   # </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);">实现数据处理的方法，方法名不能修改</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            with open('temp.txt', 'a') as f:</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                json.dump( item, f, ensure_ascii=False, indent=2)</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                        </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"># 将item打印，并</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">将item传递给后面的pipeline，</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">实现数据在管道pipeline之间的传递</span></div><div><span style="background-color: rgb(251, 250, 248);">              </span> <span style="background-color: rgb(251, 250, 248); font-family: &quot;Yu Gothic UI Semilight&quot;;">     return item      </span></div></div><ul><ul><li><div><span style="font-size: 9pt; font-weight: bold;">注意：</span></div></li><li><div><span style="font-size: 9pt;">process_item方法中的spider参数，表示传递参数过来的爬虫对象</span></div></li><li><div><span style="font-size: 9pt;">spider： 传递数据的爬虫对象，spider.name可以返回爬虫的名称</span></div></li><li><div><span style="font-size: 9pt;">item：传递过来的数据</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">setting文件中的设置开启pipeline</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    ITEM_PIPELINE = {</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        'myspider.pipelines.MyspiderPipeline': 300,</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    }</span></div></div><ul><ul><li><div><span style="font-size: 9pt; font-weight: bold;">注意：</span></div></li><li><div><span style="font-size: 9pt;">'muspider.pipelines.MyspiderPipeline'是pipeline文件的路径</span></div></li><li><div><span style="font-size: 9pt;">300  是pipeline的权重，pipeline的权重越小，其优先级越高，可以理解为距离引擎的远近</span></div></li><li><div><span style="font-size: 9pt;">如果权重相同的两个pipeline，scrapy会自动的将键值进行排序，根据排序结果定义访问顺序</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">pipeline的方法</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">      form pymongo import MongoClient   </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">      class Myspiderpipline(object):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">      </span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"> </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># open_spider在爬虫开启请求start_url前的时候只执行一次，一般用于导入数据库</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">             def open_spider(self,  spider):  </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                    # 实例化一个mongoclient</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                   con = MongoClient(spider.settings.get('HOST'), spider.settings.get('PORT'))</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                   db = con[spider.settings.get('DB')]</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                   self.collection = db[spider.settings.get('COLLECTON')]</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"> </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">          </span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"> </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># close_spider在爬虫关闭的时候只执行 一次，一般用于需要关闭的数据库关闭</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            def close_spider(self,  spider):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                    print('关闭pipeline')</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                  </span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"> return item      </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">       <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;"> </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;">    # from_crawler连接到setting.py的配置文件</span></span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            def from_crawler(cls, crawler):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                    return  cls(mongo_uri=crawler.settings.get('MGONGO_URI'))</span></div></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">备注：</span></div></li><ul><li><div><span style="font-size: 9pt;">一个项目会有多个spider，不同的pipeline处理不同的item的内容</span></div></li><li><div><span style="font-size: 9pt;">一个spider的内容可能要做不同的操作，比如存入不同的数据库中</span></div></li></ul></ul><div><span style="font-size: 18px; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">pipeline向mongoDB中插入数据</span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">在pipeline类的外部定义使用的mongodb集合</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">     from pymongo import MongoClient</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">     client = MongoClient(host='127.0.0.1', port=27017)    </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"># 实例化mongodb客户端</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">     collection = client['myspider']['yangguang']</span></div></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">在pipeline类open_spider中导入mongodb</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    form pymongo import MongoClient   </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    class Myspiderpipline(object):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">     </span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑;">  # open_spider在爬虫开启的时候只执行一次</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        def open_spider(self,  spider):  </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            # 实例化一个mongoclient</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            con = MongoClient(spider.settings.get('HOST'), spider.settings.get('PORT'))</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            db = con[spider.settings.get('DB')]</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            self.collection = db[spider.settings.get('COLLECTON')]</span></div></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">向集合中插入数据</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            def process_item(self, item, spider):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                item['collection_text'] = ****</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                collection.insert(dict(item))   # 向mongodb中插入数据</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                return item</span></div></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">向Mongodb中插入数据</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 15.2px;">要在setting中配置</span></div></li><ul><li><div><span style="font-size: 9pt;">MONGO_URI = '127.0.0.1'</span></div></li><li><div><span style="font-size: 9pt;">MONGO_DATABASE = '数据库名'</span></div></li></ul><li><div><img src="/e_img/Scrapy-pipeline_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="434"></div></li></ul></ul></div></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">pipeline向Mysql中存入数据</span></span></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">数据同步的方式写入Mysql</span></div></li><ul><li><div><img src="/e_img/Scrapy-pipeline_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="610"></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">数据异步的方式写入Mysql</span></div></li><ul><li><div><img src="/e_img/Scrapy-pipeline_files/Image [2].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="562"></div></li></ul></ul></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">数据自动导出json文件</span></span></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 21.6px;">自定义形式导出</span></font></div></li><ul><li><div><img src="/e_img/Scrapy-pipeline_files/Image [3].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="357"></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">使用scrapy自带exportor导出</span></font></div></li><ul><li><div><img src="/e_img/Scrapy-pipeline_files/Image [4].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="466"></div></li></ul></ul></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">将爬取去到的图片地址对应的图片进行存储</span></span></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">setting文件中设置图片存储位置</span></div></li><ul><li><div><img src="/e_img/Scrapy-pipeline_files/Image [5].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="574"></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">pipeline中对图片进行下载</span></div></li><ul><li><div><img src="/e_img/Scrapy-pipeline_files/Image [6].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="378"></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">ArticleImagePipeline类的方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">get_media_requests(self, item, info)</span></div></li><ul><li><div><span style="font-size: 9pt;">该方法实现将item字段中的url字段取出来，然后直接生成Request对象，请求对象会加入到对列中，等待执行下载</span></div></li></ul><li><div><span style="font-size: 9pt;">file_path(self, request, response=None, info=None)</span></div></li><ul><li><div><span style="font-size: 9pt;">这个方法用来返回保存的文件名</span></div></li></ul><li><div><span style="font-size: 9pt;">item_completed(self, results, item, info)</span></div></li><ul><li><div><span style="font-size: 9pt;">当单个item完成下载后的处理方法</span></div></li><li><div><span style="font-size: 9pt;">results参数就是该item对应的下载结果，它是一个列表形式，列表的每一个元素就是一个元组，其中包含了下载成功或者失败的信息</span></div></li></ul></ul></ul></ul></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapy-item&amp;spider</title>
      <link href="/2017/03/04/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy-itemsspider/"/>
      <url>/2017/03/04/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/Scrapy-itemsspider/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><br></div><div><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Items的配置</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">定义Item的作用</span></font></div></li><ul><li><div><span style="font-size: 9pt;">提前定义需要获取的数据，可以很清楚想要爬取的信息</span></div></li><li><div><span style="font-size: 9pt;">没有定义的item属性不能被spider使用，键命名错误会报错，可以防止使用错误的键来存储数据</span></div></li><li><div><span style="font-size: 9pt;">不同的爬虫使用不同的Item来存放不同的数据，在把数据交给pipeline的时候，可以通过isinstance(item, MyspiderItem) 来判断数据是属于哪个item，进行不同的数据(item)处理方式</span></div></li><li><div><span style="font-size: 9pt;">item实例对象可以通过和字典相同的数据处理方式，来处理item对象的属性，</span><span style="font-size: 9pt;">所以我们可以直接将Myspider理解为一个字典</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">定义Item的方法（在item文件中）</span></font></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    class MyspiderItem(scrapy.Item):</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"> # 创建一个item类</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        name = scrapy.Field()    </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"># scrapy.Field( )只是占了一个位，并没有值</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                title =</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">scrapy.Field</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">( )</span></div></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">在Spider中使用item的方法（在spider文件中）</span></font></div></li></ul></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    from Python import MyspiderItem</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    item = MyspiderItem()    </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);"># 创建一个自定义的item实例，item的操作和字典是一样的</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    item['title'] = ###    </span> # 向item对象中插入数据</span></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">实现item对象和字典类型数据的转化</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt;">dict(item)      将item对象转化为dict类型数据</span></font></div></li><ul><li><div><span style="line-height: 13.6px;">在将数据进行写入文件中的时候，一定要将其转化为json字符串，所以要先转化为字典</span></div></li></ul></ul></ul></div><div><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">spider爬虫文件Spider类</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">scrapy_spider类的作用</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt;">传递给引擎request对象，或者需要处理的数据，接收引擎传递过来的response对象</span></font></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">配置spider类及类属性（在spider文件中）</span></font></div></li></ul></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">  </span> <font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;"> class PythonSpider(scrapy.Spider)     # </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑;">自定义spider类，继承自scrapy.Spider类</span></font></span></div><div><span style="background-color: rgb(251, 250, 248);"><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        name = 'python'      </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑;"> # 创建爬虫时候的名字，不可以修改，和爬虫文件名称一致</span></font></span></div><div><span style="background-color: rgb(251, 250, 248);"><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">       </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);"> # <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);">创建爬虫时允许爬虫爬取范围，防止爬虫爬取到其他的网站，可以在一个列表中放置多个域名</span></span></font></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">             </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);">  #  从start_url后面</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);">爬取的url地址，必须要属于allow_domin域名下的地址</span></span></span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        allowed_domain = ['python.cn']   </span></span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"> # 定义开始爬取的网址，默认是可以被反复请求的</span></span></span></div><div><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        start_urls =  '</span><a href="http://www.itcast.cn/channel/teacher.shtml'" style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(0, 0, 0); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;" target="_blank" rel="noopener">http://www.itcast.cn/channel/teacher.shtml'</a><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">;</span></font></div></div><div><ul><li><div><span style="font-weight: bold; line-height: 15.2px;">配置__init__方法</span><span style="line-height: 15.2px;">（<font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 15.2px; font-weight: bold;">使用</span></font></span><font style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold; line-height: 15.2px;">Redis_spider框架爬虫类继承crawlredisSpider</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-weight: bold; line-height: 15.2px;">的时候要动态获取allow_domin</span></font><span style="font-size: 10pt; line-height: 15.2px;">）</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑;">        # 增加__init__()方法，根据从redis中获取的start_url动态设置allow_domin的方法</span></span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    def __init__(self, *args, **kwargs):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        domain = kwargs.pop('domain', '')</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        self.allowed_domains = filter(None, domain.split(','))</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑;">        # 要继承上方定义的爬虫类的原始的__init__方法</span></span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        super(<span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; line-height: 1.45;">youyuanSpider, self).__init__(*args, **kwargs)</span></span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">配置spider类的实例方法实现请求下一页</span></font></div></li></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;"> </span><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">   def parse(self,  response):  </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);"># 定义数据提取的方法，接收中间件传递过来的response对象（<span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-weight: bold;">方法名不能改</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">）</span></span></font></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248);"><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">       </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">tr_list = response.xpath(&quot;//table[@class='tablelist']/tr&quot;)[1:-1]</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">         </span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"># xpath分组提取</span></span></font></span></span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">              for tr in tr_list:</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                      item = {}</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                      item[&quot;title&quot;] = tr.xpath(&quot;./td[1]/a/text()&quot;).extract_first()</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                      item[&quot;position_categary&quot;] = tr.xpath(&quot;./td[2]/text()&quot;).extract_first()</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                      item[&quot;url&quot;] = response.url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                      yield item        </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"># 将item通过引擎传递给pipeline进行处理</span></div><div><br></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">              next_url_temp = response.xpath(&quot;//a[@id='next']/@href&quot;).extract_first()</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">              if next_url_temp is not None and next_url_temp != &quot;javascript:;&quot;:</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                      next_url = &quot;</span><a href="http://hr.tencent.com/%22" style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;" target="_blank" rel="noopener">http://hr.tencent.com/&quot;</a><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">; + next_url_temp</span></div><div><br></div><div><span style="background-color: rgb(251, 250, 248);"><font style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">           </span><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);"># scrapy.Request构造requests对象给引擎，callback表示response交给哪个函数处理</span></span></font></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">           yield scrapy.Request(next_page_url, callback=self.parse)  </span></span></span></div></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">多个解析函数中如何传递参数示例</span></font></div></li></ul></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    def parse(self, response):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        tr_list = response.xpath('//div[@class=&quot;greyframe&quot;]/table//table/tr')  </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);"> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"># xpath分组提取</span></span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        for i in tr_list:</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            item = </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">MyspiderItem（）  </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"># 实例化item对象</span></span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            ........</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            .......</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                       </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);">#   将item参数封装成request对象通过引擎传递给调度器，引擎传递回来的Response对象给</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);">get_content函数</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            yield scrapy.Request(item[&quot;href&quot;],  callback=self.get_content,  meta{&quot;item&quot;:item})   </span></div><div><br></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    def get_content(self, response):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        item = response.meta['item']    </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);"># 获取response.meta属性的item对象</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        item['text'] = response.xpath(&quot;//div[@class='content_text14_2']//text( )&quot;).extract( )</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        yield  item    </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51);"># 统一将数据传递给pipeline</span></div></div><div><ul><li><div><span style="font-weight: bold;">start_requests方法</span></div></li><ul><li><div><span style="font-weight: bold;">作用：</span></div></li><ul><li><div><span style="font-size: 9pt;">我们定义的start_urls都是默认交给start_requests处理的，所以如果我们想要在处理在请求之前处理request对象，那么我们可以重写start_requests方法，实现指定其响应的解析函数等功能</span></div></li></ul><li><div><span style="font-weight: bold;">示例：</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">         import scrapy</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            def start_requests(self):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">               for url in self.start_urls:</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                    yield scrapy.Request(</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                        url,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                        callback = self.parse</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                )</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            def parse(self, response)</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                self.settings.get('KEY', '')</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                pass</span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">spider中</span></font><span style="font-size: 10pt; font-weight: bold;">用到的方法/属性：</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">response对象的属性</span></div></li><ul><li><div><span style="font-size: 9pt;">response.url：当前响应的url地址</span></div></li><li><div><span style="font-size: 9pt;">response.request.url：当前响应对应的请求的url地址</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">response.status: 响应的状态码</span></div></li><li><div><span style="font-size: 9pt;">response.headers：获取响应头</span></div></li><li><div><span style="font-size: 9pt;">response.request.headers：当前响应的请求头</span></div></li><li><div><span style="font-size: 9pt;">response.body：响应体，也就是html代码，默认是bytes类型</span></div></li><li><div><span style="font-size: 9pt;">response.meta: 解析函数之间传递的数据，字典类型</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">response.request.headers.getlist('Cookie')    请求的cookie</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">response.headers.getlist('Set-Cookie')   响应的cookie</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">response.xpath( )   方法 </span></font></div></li><ul><li><div><span style="font-size: 9pt;">xpath( )  </span><span style="font-size: 9pt;">response.xpath( )  返回的是一个含有多个匹配结果的selector对象的列表</span><span style="font-size: 9pt;">，其具有如下方法</span></div></li><ul><li><div><span style="font-size: 9pt;">extract( )返回一个包含字符串数据的列表，将列表中所有select对象中的data属性的值提取出来</span></div></li><ul><li><div><font style="font-size: 12px;"><span style="font-size: 12px;">如果xpath（）提取的数据不存在，返回一个空列表</span></font></div></li></ul><li><div><span style="font-size: 9pt;">extract_first  返回列表中的第一个字符串，将列表第一个对象元素的data属性值提取出来</span></div></li><ul><li><div><span style="font-size: 12px;">如果xpath（）提取的数据不存在，返回一个None类型数据</span></div></li></ul></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">scrapy.Request(url, callback, method='GET', headers, body, cookies, meta, dont_filter=False )   get请求方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">url必须传递，为请求的url，将请求的结果作为响应传递给callback解析函数</span></div></li><li><div><span style="font-size: 9pt;">callback: 指定传入的参数交给那个解析函数去处理</span></div></li><li><div><span style="font-size: 9pt;">meta: 在不同的解析函数中传递数据， meta默认还会携带部分信息， 比如下载延迟，请求深度等</span></div></li><ul><li><div><font style="font-size: 12px;"><span style="font-size: 12px; line-height: 13.6px;">cookiejar ： 给对应的request一个cookiejar表示，任意的数字，在之后的request也携带该标示，那么将会自动把request对象携带对应的request的获取到的所有cookie内容</span></font></div></li></ul><li><div><span style="font-size: 9pt;">dont_filter: 默认url会经过allow_domain过滤，如果dont_filter设置为True，则已经爬过的地址不会被过滤</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy默认有url去重的功能,该功能对需要重复请求的url有重要用途</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果请求的页面是实时在变的，在有需要要抓实时的页面内容的时候，需要设置为true</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">start_urls的请求，</span><span style="font-size: 9pt; line-height: 13.6px;">dont_filter参数默认为true</span></div></li></ul><li><div><span style="font-size: 9pt;">method： 请求的方法，当使用POST的时候要传递body参数，在scrapy中body为字符串的形式</span></div></li><li><div><span style="font-size: 9pt;">cookies： 传递的cookie，注意，在scrapy中cookie不能放在header中进行传递</span></div></li><li><div><span style="font-size: 9pt;">headers： 使用自定义的header，优先级高于在setting中设置的默认headers</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">body：请求体，当使用post请求，发送数据的时候使用，并且当发送payload类型参数的时候，一定要使用</span></div></li><ul><li><div><font style="font-size: 12px;"><span style="font-size: 12px; line-height: 13.6px;">并且<span style="font-size: 12px; line-height: 13.6px;">还要加上请求头 ： </span><span style="font-size: 9pt; line-height: 13.6px;">'Content-Type': 'application/json'</span></span></font></div></li></ul><li><div><span style="font-size: 9pt;">注意：</span></div></li><ul><li><div><span style="font-size: 9pt;">当请求被重定向后，redict中间件会自动进行重定向请求，并返回重定向后的响应</span></div></li></ul></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">yield </span></span></div></li><ul><li><div><span style="font-size: 9pt;">将数据返回给引擎，并将方法挂起；</span></div></li><li><div><span style="font-size: 9pt;">原理上，让这个函数成为一个生成器，每次遍历的时候会将每个结果读取到内存中，不会导致没存的占用量瞬间变高</span></div></li><li><div><span style="font-size: 9pt;">yield只能返回[BaseItem， dict， None， Request ]类型的数据；</span></div></li><li><div><span style="font-size: 9pt;">yield 的不是Request对象，表示将变量的数据传递给pipeline，接<span style="font-size: 9pt;">scrapy.Request方法表示将request传递给调度器，进行请求返回给callback函数response</span></span></div></li></ul><li><div><span style="font-size: 9pt; font-family: 微软雅黑; font-weight: bold;">scrapy.FormRequest（）      post表单提交</span></div></li><ul><li><div><span style="font-size: 9pt; color: rgb(51, 51, 51);">formdata：携带的post请求的参数，字典类型，只能发送formdata类型的参数</span></div></li><li><div><span style="font-size: 9pt; color: rgb(51, 51, 51);">其他参数和scrapy.Request（）方法的参数使用基本一致</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;">scrapy.FormRequest.from_resopnse（）    对响应中的表单自动进行表单提交</span></span></div></li><ul><li><div><span style="font-size: 9pt; color: rgb(51, 51, 51); line-height: 13.6px;">response：   解析函数接收到的响应</span></div></li><li><div><span style="font-size: 9pt; color: rgb(51, 51, 51);">formdata：  需要填写的表单内容，</span><span style="font-size: 9pt; color: rgb(51, 51, 51);">，只能发送formdata类型的参数</span></div></li><li><div><span style="font-size: 9pt; color: rgb(51, 51, 51);">其他参数和scrapy.Request（）方法的参数使用基本一致</span></div></li></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Scrapy中的CrawlSpider类</span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">CrawlSpider的作用</span></div></li><ul><li><div><span style="font-size: 9pt;">是scrapy的一个子类，应用CrawlSpider，我们可以从start_url返回的response中自动提取url地址</span></div></li><li><div><span style="font-size: 9pt;">scrapy会自动的构造requests请求，发送给引擎，进行请求</span></div></li><li><div><span style="font-size: 9pt;">还可以指定response是否传递给解析函数，或者是否需要继续提取响应中的url进行请求</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">使用CrawlSpider的方法</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">CrawlSpider和普通爬虫的区别</span></div></li><ul><li><div><span style="font-size: 9pt;">CrawlSpider爬虫类继承自CrawlSpide</span></div></li><li><div><span style="font-size: 9pt;">在爬虫中定义一个rules对象，scrapy会自动根据rules定义的规则，过滤出符合规则的url，自动进行请求，将响应传递给解析函数，或者继续经过rules过滤符合规律的url进行请求获取响应</span></div></li><li><div><span style="font-size: 9pt;">不需要自定义parse方法，因为scrapy自动的使用parse方法去请求rules过滤出来的url地址</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">生成crawlspider的命令</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy genspider -t crawl &lt;爬虫名字&gt;  &lt;允许爬取的域名&gt;</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">配置CrawlSpider爬虫示例</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">         form scrapy.linkextractors import LinkExtractor</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">         from scrapy.spiders import CrawSpider, Rule</span></div><div><br></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">         class CsdnspiderSpider(CrawlSpider):      </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;">CrawlSpider要继承CrawlSpider</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                        name = 'csdnspider'</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                        allowed_domains = ['</span><a href="http://suning.com/" style="background-color: rgb(251, 250, 248); font-size: 9pt; font-family: Monaco;" target="_blank" rel="noopener">suning.com</a><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">']</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                        start_urls = ['</span><a href="http://snbook.suning.com/web/trd-fl/100301/46.htm'" style="background-color: rgb(251, 250, 248); font-size: 9pt; font-family: Monaco;" target="_blank" rel="noopener">http://snbook.suning.com/web/trd-fl/100301/46.htm'</a><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">]</span></div><div><br></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                       </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># 提取url，自动构造请求，把请求交给引擎获取响应</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                        rules = (</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                              Rule(linkExtractor(allow=r'/web/trd-fl/\d+.htm$'), callback='parse_next_url' follow=True),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                              </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Rule(linkExtractor(allow=r'/web/prd/\d+.htm$'), callback='parse_item' follow=True),</span></div></div><ul><ul><li><div><span style="font-size: 9pt; font-weight: bold;">spiders.Rule常见参数</span></div></li><ul><li><div><span style="font-size: 9pt;">linkextractor：是 一个Link Extractor对象，用于定义需要提取的链接，交给parse方法；</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">linkextractor可以接收正则、xpath、css等匹配连接方式，可以查看</span><span style="font-size: 9pt; line-height: 13.6px;">linkextractor</span><span style="font-size: 9pt; line-height: 13.6px;">的源码来查看其可以接收的匹配方式</span></font></div></li></ul><li><div><span style="font-size: 9pt;">callback：从link_extractor中每获取到连接的时候，参数所指定的值作为回调函数</span></div></li><li><div><span style="font-size: 9pt;">follow：是一个布尔值，指定了根据改规则从response提取的链接是否需要linkextractor继续跟进（如果callback为None，follow默认设置为True，否则默认为False）</span></div></li><li><div><span style="font-size: 9pt;">process_links：指定该spider中哪个函数将会被调用，从link_extractor中获取到连接列表时将会调用该函数，该方法主要用来过滤url</span></div></li><li><div><span style="font-size: 9pt;">process_request：指定该Spider中哪个函数将会被调用，当构造完request列表时都会调用该函数，用来过滤request，必须返回request\None</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">LinkExtracort常见的参数</span></div></li><ul><li><div><span style="font-size: 9pt;">allow：满足括号中正则匹配的url会被提取，如果为空，则全部匹配(也可以是xpath匹配)</span></div></li><ul><li><div><span style="line-height: 13.6px;">可以使用其他参数，</span><span style="font-size: 9pt; line-height: 13.6px;">可以是xpath、css等匹配方法</span></div></li><li><div><span style="font-size: 9pt;">restrict_xpaths：使用xpath表达式，和allow共同作用过滤链接，及xpath满足范围内的url地址会被提取</span></div></li></ul><li><div><span style="font-size: 9pt;">deny：满足括号中的正则表达式的url一定不提取（优先级高于allow）</span></div></li><li><div><span style="font-size: 9pt;">allow_domains：会被提取的连接的domain</span></div></li><li><div><span style="font-size: 9pt;">deny_domains: 一定不会被提取连接的domains</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">使用ScrawlSpider注意点</span></div></li><ul><li><div><span style="font-size: 9pt;">当LinkExtractor提取到一个满足匹配规则的URL地址，后面的规则讲不会匹配该url地址，所以，注意不要将前面url地址匹配规则写的太详细，会被前面的的规则提取完不会经过后面的规则提取；</span></div></li><li><div><span style="font-size: 9pt;">scrapy会自动的将LinkExtractor提取到的所有url地址给补全协议和域名、端口等，进行请求，不需要我们手动补全； </span></div></li></ul></ul><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">scrapy模拟登录</span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">scrapy模拟登录有两种方法</span></div></li><ul><li><div><span style="font-size: 9pt;">直接携带cookie</span></div></li><li><div><span style="font-size: 9pt;">找到发送post请求的url地址，带上信息，发送请求</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">使用scrapy框架自动登录</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">使用scrapy模拟登录注意点</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">当需要获取登录后才能获取到数据的时候</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">一个cookie一般对一个网站访问的时候，服务器可能设置阈值，这时候我们要限制访问的延时</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">注意有时候服务器会对我们的ip和cookie对应结果做判断，所以我们最好不要频繁的更换ip和cookie的搭配关系</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果想要持续的状态保持可以在setting中设置COOKIES_ENABLE = True</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果想要使用多cookie，多ip对数据进行爬取，可以使用分布式，一个ip搭配一个cookie对数据进行请</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">scrapy携带cookie模拟登录</span></div></li><ul><li><div><span style="font-weight: bold;">应用场景</span></div></li><ul><li><div><span style="font-size: 9pt;">1、cookie过期时间很长，常见于一些不规范的网站    </span></div></li><li><div><span style="font-size: 9pt;">2、能在cookie过期之前把搜有的数据拿到    </span></div></li><li><div><span style="font-size: 9pt;">3、配合其他程序使用，比如其使用selenium把登陆之后的cookie获取到保存到本地，scrapy发送请求之前先读取本地cookie</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">模拟登录的示例（使用start_request来使请求携带cookie）</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">import scrapy</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                import re</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                class RenrenSpider(scrapy.Spider):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                        name = 'renren'</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                        allowed_domains = ['</span><a href="http://renren.com/" style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;" target="_blank" rel="noopener">renren.com</a><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">']</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                        start_urls = ['</span><a href="http://www.renren.com/327550029/profile'" style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;" target="_blank" rel="noopener">http://www.renren.com/327550029/profile'</a><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">;]</span></div><div><br></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">   </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                    </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"> def start_requests(self):               </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># 0.在start_process中对start_urls进行请求</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                                cookies_str = &quot;*******</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">&quot;      </span><span style="background-color: rgb(251, 250, 248);">  </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"> # 1.获取到cookie,一般情况下我们也可以使用selenium进行获取</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                                cookies = {i.split(&quot;=&quot;)[0]:i.split(&quot;=&quot;)[-1] for i in cookies_str.split(&quot;; &quot;)}</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                                yield scrapy.Request(</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                                        self.start_urls[0],</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                                        callback=self.parse,</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                                        cookies=cookies            </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># 2.直接带上cookie进行页面的请求</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                                        )</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                        def parse(self, response):          #</span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑;">接下来的请求scrapy会直接将其带上cookie</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                            ret = re.findall(r&quot;你瞅啥&quot;,response.body.decode())</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                            print(ret)</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                            yield scrapy.Request(</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                                    &quot;</span><a href="http://www.renren.com/327550029/profile?v=info_timeline&quot;" style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;" target="_blank" rel="noopener">http://www.renren.com/327550029/profile?v=info_timeline&quot;</a><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">;,</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                                    callback=self.parse1</span></div></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">scrapy发送post请求模拟登录</span></div></li><ul><li><div><span style="font-weight: bold;">使用场景</span></div></li><ul><li><div><span style="font-size: 9pt;">模拟的POST请求可以获取到请求参数和实际请求的URL地址（可以在之前请求的响应找到，或者可以通过解析js等方式获取到post请求的所需参数）</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">发送post请求获取cookie的示例</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">    import scrapy</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        import re</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">        class GithubSpider(scrapy.Spider):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            name = 'github'</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            allowed_domains = ['</span><a href="http://github.com/" style="font-size: 9pt; background-color: rgb(251, 250, 248); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;" target="_blank" rel="noopener">github.com</a><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">']</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            start_urls = ['</span><a href="https://github.com/login'" style="font-size: 9pt; background-color: rgb(251, 250, 248); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;" target="_blank" rel="noopener">https://github.com/login'</a><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">;;]</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            def parse(self, response):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                form_data = {}</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">               </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># 1.获取并构建post请求需要的参数</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                form_data[&quot;authenticity_token&quot;] =    </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑;"> # 可以在之前的响应中获取，或js解析</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                   response.xpath(&quot;//input[@name='authenticity_token']/@value&quot;).extract_first()</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                form_data[&quot;commit&quot;] = &quot;Sign in&quot;</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                form_data[&quot;utf8&quot;] = &quot;✓&quot;</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                form_data[&quot;login&quot;] = &quot;noobpythoner&quot;</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                form_data[&quot;password&quot;] = &quot;zhoudawei123&quot;</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">             </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;">  # 2.使用scrapy.FormRequest携带参数对登录的url地址进行请求</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                yield scrapy.FormRequest(</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                   &quot;</span><a href="https://github.com/session%22" style="font-size: 9pt; background-color: rgb(251, 250, 248); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;" target="_blank" rel="noopener">https://github.com/session&quot;</a><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">,</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: 微软雅黑;">      #post请求的url地址</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                    formdata = form_data,</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                    callback = self.after_login</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                )</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            def after_login(self,response):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                ret = re.findall(r&quot;noobpythoner&quot;,response.body.decode())</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                print(ret)</span></div></div><ul><li><div><span style="font-weight: bold; line-height: 15.2px;">scrapy自动模拟登录</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 15.2px;">使用场景</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 15.2px;">在进行提交post请求的表单中，的form表单具有action属性</span></div></li><li><div><span style="font-size: 12px; line-height: 15.2px;">可以使用</span><span style="font-size: 9pt; line-height: 15.2px;">scrapy.FormRequest.from_resopnse方法，会自动帮我们获取form表单的提交地址</span></div></li><li><div><span style="font-size: 9pt; line-height: 15.2px;">我们提供表单中需要填写的内容，可表单提交请求的响应交给哪个函数处理</span></div></li></ul><li><div><span style="font-weight: bold; line-height: 15.2px;">scrapy自动模拟登录示例</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">          </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;"> import scrapy</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            import re</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            class RenrenSpider(scrapy.Spider):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                 name = 'renren'</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                 allowed_domains = ['</span><a href="http://renren.com/" style="font-size: 9pt; background-color: rgb(251, 250, 248); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;" target="_blank" rel="noopener">renren.com</a><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">']</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                 start_urls = ['</span><a href="http://www.renren.com/327550029/profile'" style="font-size: 9pt; background-color: rgb(251, 250, 248); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;" target="_blank" rel="noopener">http://www.renren.com/327550029/profile'</a><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">]</span></div><div><br></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                 </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">def parse(self, response):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">                               </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;"> </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># 使用</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;">FormRequest.from_resopnse对表单地址进行请求</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                 yield scrapy.FormRequest.from_resopnse(</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                     </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: 微软雅黑; font-weight: bold;"># 传入包含post请求表单的响应，表单内容，回调函数</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                      response,</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                      formdata={'email': 'user_name', 'password': 'password'},</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                      callback=self.parse_page</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                      )</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                 def parse_page(self, response):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                     print(response.url, '*', * 100, response.starus)</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                     print('*' * 100)</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">                     print(re.findall(r'user_name', response.body.decode()))</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; line-height: 1.45;">   </span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; line-height: 1.45;">                </span></div></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">设置cookie允许在函数中传递</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">在setting中配置cookie的传递</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            COOKIES_ENABLE = True       </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"># 设置允许cookie在不同的解析函数中传递，默认是允许的</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;">            COOKIES_DEBUG = True        </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"># 可以看带cookie在函数中传递的过程</span></div></div><div><br></div><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">终端效果如下</span></div></li><ul><li><div><img src="/e_img/Scrapy-itemsspider_files/Image.png" type="image/png" data-filename="Image.png" style="line-height: 1.45;" width="391"></div></li></ul></ul></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapy框架介绍</title>
      <link href="/2017/03/02/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/scrapy%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/"/>
      <url>/2017/03/02/4.python%E7%88%AC%E8%99%AB/scrapy%E6%A1%86%E6%9E%B6/scrapy%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="background-color: rgb(255, 250, 165);font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">scrapy框架的介绍</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">什么是scrapy框架</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Scrapy是一个为了爬取网站数据，提取结构性数据而编写的应用框架，我们只需要实现少量的代码，就能够快速的抓取</span></div></li><li><div><span style="font-size: 9pt;">Scrapy 使用了 Twisted['twɪstɪd]异步网络框架，可以加快我们的下载速度和数据在模块中间的转载速度。</span></div></li><li><div><a href="http://scrapy-chs.readthedocs.io/zh_CN/1.0/intro/overview.html" style="font-size: 9pt;" target="_blank" rel="noopener">http://scrapy-chs.readthedocs.io/zh_CN/1.0/intro/overview.html</a></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">异步和非阻塞的概念</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">非阻塞</span></font></div></li><ul><li><div><span style="font-size: 9pt;">关注的是程序在等待调用结果（消息，返回值）时的</span><span style="font-size: 9pt; font-weight: bold;">状态</span><span style="font-size: 9pt;">，指在不能立刻得到结果之前，该调用不会阻塞当前线程。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">异步</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果整个程序没有中介的等待过程，我们就说整个过程是一个异步的过程</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">多线程爬取数据的流程</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy框架介绍_files/Image.png" type="image/png" data-filename="Image.png" width="349"></span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">scrapy的爬虫流程</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy框架介绍_files/Image [1].png" type="image/png" data-filename="Image.png" width="449"></span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">scrapy框架各模块功能</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy框架介绍_files/Image [2].png" type="image/png" data-filename="Image.png" width="420"></span></div></li></ul></ul></div><div><span style="background-color: rgb(255, 250, 165); font-size: 12pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 1.45;-evernote-highlight:true;">创建爬虫项目（命令）</span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">创建项目</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">命令</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy startproject +&lt;项目名字&gt;</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">创建后项目目录结构</span></div></li><ul><li><div><img src="/e_img/scrapy框架介绍_files/Image [3].png" type="image/png" data-filename="Image.png" width="266"></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">创建爬虫</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">命令</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy genspider  +&lt;爬虫名字&gt; + &lt;允许爬取的域名&gt;          生成普通的spider爬虫</span></div></li><li><div><span style="font-size: 9pt;">scrapy genspider -t crawl &lt;爬虫名字&gt;  &lt;允许爬取的域名&gt;        生成crawl_Spider爬虫</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">示例：</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy genspider itcast “itcast.cn”</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">爬虫应用创建的位置</span></div></li><ul><li><div><img src="/e_img/scrapy框架介绍_files/Image [4].png" type="image/png" data-filename="Image.png" width="228"></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">启动爬虫应用</span></div></li><ul><li><div><span style="font-size: 12px; font-weight: bold;">命令</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy crawl 爬虫名   执行单个爬虫</span></div></li><ul><li><div><span style="font-size: 9pt;">-o: 将爬虫的item输出存储到文件中.</span></div></li><ul><li><div><span style="font-size: 9pt;">quotes.jl : 将每一个item输出为一行的jsonline</span></div></li><li><div><span style="font-size: 9pt;">quotes.csv: 将每一个item输出为每一行的csv格式文件</span></div></li><li><div><span style="font-size: 9pt;">quotes.pickle: 存储为二进制文件</span></div></li></ul></ul></ul></ul></ul><div><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Scrapy--scrapy shell</span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">什么是scrapy shell</span></div></li><ul><li><div><span style="font-size: 9pt;">Scrapy shell是一个交互终端，我们可以在未启动spider的情况下尝试及调试代码，也可以用来测试XPath表达式</span></div></li></ul><li><div><span style="font-weight: bold;">查看实例属性/方法</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">在scrapy shell中查看</span></div></li><ul><li><div><span style="font-size: 9pt;">进行请求</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy shell ‘url’   对url地址进行请求获取响应</span></div></li></ul><li><div><span style="font-size: 9pt;">查看请求的属性</span></div></li><ul><li><div><span style="font-weight: bold; font-size: 9pt;">可使用任意scrapy实例 + TAB查看实例有哪些属性或者方法</span></div></li><li><div><span style="font-size: 9pt;">response.url：当前响应的url地址</span></div></li><li><div><span style="font-size: 9pt;">response.request.url：当前响应对应的请求的url地址</span></div></li><li><div><span style="font-size: 9pt;">response.headers：响应头</span></div></li><li><div><span style="font-size: 9pt;">response.body：响应体，也就是html代码，默认是byte类型</span></div></li><li><div><span style="font-size: 9pt;">response.requests.headers：当前响应的请求头</span></div></li><li><div><span style="font-size: 9pt;">response.meta: 下载延迟，请求深度等信息</span></div></li><li><div><span style="font-size: 9pt;">response.xpath(***).extract()    验证xpath的正确性</span></div></li></ul></ul><li><div><span style="font-weight: bold; font-size: 9pt;">在程序中</span></div></li><ul><li><div><span style="font-size: 9pt;">print（dir（实例对象））  查看实例对象的所有属性和方法</span></div></li></ul></ul></ul><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> scrapy框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Charles抓包工具安装、配置</title>
      <link href="/2017/02/16/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/Charles%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/"/>
      <url>/2017/02/16/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/Charles%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="color: rgb(50, 135, 18); font-size: 14pt;"><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Charles介绍</b></font></div><ul><li><div><font style="font-size: 10pt;"><b>Charles的作用</b></font></div></li><ul><li><div><font style="font-size: 9pt;">Charles是一个网络抓包工具，相比Fiddler，其功能更为强大，而且跨平台支持得更好，</font></div></li><li><div><font style="font-size: 9pt;">可以选用它来作为主要的移动端抓包工具。</font></div></li></ul><li><div><font style="font-size: 10pt;"><b>相关链接</b></font></div></li><ul><li><div><font style="font-size: 9pt;">官方网站：https://www.charlesproxy.com</font></div></li><li><div><font style="font-size: 9pt;">下载链接：https://www.charlesproxy.com/download</font></div></li></ul></ul><div><font style="color: rgb(50, 135, 18); font-size: 14pt;"><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Charles的配置</b></font></div><ul><li><div><font style="font-size: 10pt;"><b>HTTPS证书的配置</b></font></div></li><ul><li><div><font style="font-size: 9pt;"><b>Windows系统的证书配置</b></font></div></li><ul><li><div><font style="font-size: 9pt;">1.首先打开Charles，点击Help→SSL Proxying→Install Charles Root Certificate，即可进入证书的安装页面。</font></div></li><li><div><font style="font-size: 9pt;">2.接下来，会弹出一个安装证书的页面，点击“安装证书”按钮，就会打开证书导入向导。</font></div></li><li><div><font style="font-size: 9pt;">3.直接点击“下一步”按钮，此时需要选择证书的存储区域，点击第二个选项“将所有的证书放入下列存储”，然后点击“浏览”按钮，从中选择证书存储位置为“受信任的根证书颁发机构”，再点击“确定”按钮，然后点击“下一步”按钮。</font></div></li><li><div><font style="font-size: 9pt;">4.再继续点击“下一步”按钮完成导入。</font></div></li></ul><li><div><font style="font-size: 9pt;"><b>Mac系统的证书配置</b></font></div></li><ul><li><div><font style="font-size: 9pt;">1.如果你的PC是Mac系统，可以按照下面的操作进行证书配置。</font></div></li><li><div><font style="font-size: 9pt;">2.同样是点击Help→SSL Proxying→Install Charles Root Certificate，即可进入证书的安装页面。</font></div></li><li><div><font style="font-size: 9pt;">3.接下来，找到Charles的证书并双击，将“信任”设置为“始终信任”即可，如图1-48所示。</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/https://qiniu.cuiqingcai.com/wp-content/uploads/2018/02/1-48.jpg"><img src="/e_img/Charles抓包工具安装、配置_files/Image.png" type="image/png" data-filename="Image.png" width="588"></font></div></li></ul></ul><li><div><font style="font-size: 10pt;"><b>代理配置</b></font></div></li><ul><li><div><font style="font-size: 9pt;">具体操作是点击Proxy→Proxy Settings，打开代理设置页面，确保当前的HTTP代理是开启的，如图1-49所示。这里的代理端口为8888，也可以自行修改。</font></div></li><li><div><font style="font-size: 9pt;"><img src="/e_img/Charles抓包工具安装、配置_files/Image [1].png" type="image/png" data-filename="Image.png" width="366"></font></div></li></ul><li><div><font style="font-size: 10pt;"><b>将手机连接到Charles并安装证书</b></font></div></li><ul><li><div><font style="font-size: 9pt;"><b>ios系统</b></font></div></li><ul><li><div><font style="font-size: 9pt;">1.将手机和电脑连在同一个局域网下，可以将PC设置为热点，手机连接其热点</font></div></li><li><div><font style="font-size: 9pt;">2.将PC的ip设置为手机的代理ip，Settings &gt; General &gt; Network &gt; Wi-Fi.</font></div></li><ul><li><div><font style="font-size: 9pt;"><img src="/e_img/Charles抓包工具安装、配置_files/Image [2].png" type="image/png" data-filename="Image.png" width="272"></font></div></li></ul><li><div><font style="font-size: 9pt;">3.设置完毕后，电脑上会出现一个提示窗口，询问是否信任此设备，此时点击Allow按钮即可。这样手机就和PC连在同一个局域网内了，而且设置了Charles的代理，即Charles可以抓取到流经App的数据包了。</font></div></li><li><div><font style="font-size: 9pt;">4.安装Charles的HTTPS证书，在电脑上打开Help→SSL Proxying→Install Charles Root Certificate on a Mobile Device or Remote Browser</font></div></li><ul><li><div><font style="font-size: 9pt;"><img src="/e_img/Charles抓包工具安装、配置_files/Image [3].png" type="image/png" data-filename="Image.png" width="348"></font></div></li></ul><li><div><font style="font-size: 9pt;">5.在手机浏览器中打开chls.pro/ssl下载证书，点击“设置”→“通用”→“关于本机”→“证书信任设置”中将证书的完全信任开关打开。</font></div></li></ul><li><div><font style="font-size: 9pt;"><b> Android系统</b></font></div></li><ul><li><div><font style="font-size: 9pt;">1.将手机和电脑连在同一个局域网下，可以将PC设置为热点，手机连接其热点</font></div></li><li><div><font style="font-size: 9pt;">2.将PC的ip设置为手机的代理ip，Settings &gt; Wi-Fi &gt; hold current Wi-Fi network &gt; Modify Network &gt; Show advanced options &gt; Proxy settings</font></div></li><li><div><font style="font-size: 9pt;">3.设置完毕后，电脑上就会出现一个提示窗口，询问是否信任此设备, 此时直接点击Allow按钮即可。</font></div></li><li><div><font style="font-size: 9pt;">4.安装Charles的HTTPS证书，在电脑上打开Help→SSL Proxying→Install Charles Root Certificate on a Mobile Device or Remote Browser</font></div></li></ul></ul></ul><ul><li><div><font style="font-size: 9pt;">5. 在手机浏览器上打开chls.pro/ssl，这时会出现一个提示框，为证书添加一个名称，然后点击“确定”按钮即可完成证书的安装。</font></div></li></ul><div><font style="font-size: 9pt;"><br></font></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫扩展功能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Appium手机爬虫</title>
      <link href="/2017/02/10/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/Appium%E6%89%8B%E6%9C%BA%E7%88%AC%E8%99%AB/"/>
      <url>/2017/02/10/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/Appium%E6%89%8B%E6%9C%BA%E7%88%AC%E8%99%AB/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-size: 14pt;-evernote-highlight:true;"><b>Appium的介绍和安装</b></font></div><ul><li><div><font style="font-size: 12pt;"><b>Appium的简介</b></font></div></li><ul><li><div><font style="font-size: 9pt;">Appium是移动端的自动化测试工具，类似于前面所说的Selenium，利用它可以驱动Android、iOS等设备完成自动化测试，比如模拟点击、滑动、输入等操作</font></div></li><li><div><font style="font-size: 9pt;">Appium负责驱动移动端来完成一系列操作，对于iOS设备来说，它使用苹果的UIAutomation来实现驱动；对于Android来说，它使用UIAutomator和Selendroid来实现驱动。</font></div></li><li><div><font style="font-size: 9pt;">同时Appium也相当于一个服务器，我们可以向它发送一些操作指令，它会根据不同的指令对移动设备进行驱动，以完成不同的动作。</font></div></li></ul><li><div><font style="font-size: 12pt;"><b>Appium相关链接</b></font></div></li><ul><li><div><font style="font-size: 9pt;">GitHub：https://github.com/appium/appium</font></div></li><li><div><font style="font-size: 9pt;">官方网站：http://appium.io</font></div></li><li><div><font style="font-size: 9pt;">官方文档：http://appium.io/introduction.html</font></div></li><li><div><font style="font-size: 9pt;">下载链接：https://github.com/appium/appium-desktop/releases</font></div></li><li><div><font style="font-size: 9pt;">Python Client：https://github.com/appium/python-client</font></div></li><li><div><font style="font-size: 9pt;">Appium Api：https://testerhome.comm/topics/3711</font></div></li></ul><li><div><font style="font-size: 12pt;"><b>Appium的安装</b></font></div></li><ul><li><div><font style="font-size: 9pt;"><b>通过Appium Desktop安装</b></font></div></li><ul><li><div><font style="font-size: 9pt;">Appium Desktop介绍</font></div></li><ul><li><div><font style="font-size: 9pt;">Appium Desktop支持全平台的安装，我们直接从GitHub的Releases里面安装即可</font></div></li><li><div><font style="font-size: 9pt;">链接为https://github.com/appium/appium-desktop/releases。目前的最新版本</font></div></li></ul><li><div><font style="font-size: 9pt;">各平台的安装方法</font></div></li></ul></ul></ul><ul><ul><ul><li><div><font style="font-size: 9pt;">下载exe安装包appium-desktop-Setup-1.1.0.exe</font></div></li><li><div><font style="font-size: 9pt;">Mac平台可以下载dmg安装包如appium-desktop-1.1.0.dmg</font></div></li><li><div><font style="font-size: 9pt;">Linux平台可以选择下载源码</font></div></li></ul><li><div><font style="font-size: 9pt;"><b>通过Node.js安装</b></font></div></li><ul><li><div><font style="font-size: 9pt;">1.首先安装node.js</font></div></li><li><div><font style="font-size: 9pt;">2.npm install -g appium</font></div></li></ul><li><div><font style="font-size: 9pt;"><b>python-api安装</b></font></div></li><ul><li><div><font style="font-size: 9pt;">pip install Appium-Python-Client</font></div></li></ul></ul><li><div><font style="font-size: 12pt;"><b>开发环境的配置</b></font></div></li><ul><li><div><font style="font-size: 9pt;"><b>Android开发环境配置</b></font></div></li><ul><li><div><font style="font-size: 9pt;">下载和配置Android Studio，下载地址为https://developer.android.com/studio/index.html?hl=zh-cn。下载后直接安装即可。</font></div></li><li><div><font style="font-size: 9pt;">打开Android Studio，直接打开首选项里面的Android SDK设置页面，勾选要安装的SDK版本，点击OK按钮即可下载和安装勾选的SDK版本。</font></div></li><li><div><font style="font-size: 9pt;">添加环境变量，添加ANDROID_HOME为Android SDK所在路径，然后再添加SDK文件夹下的tools和platform-tools文件夹到PATH中。</font></div></li><li><div><font style="font-size: 9pt;">更详细的配置可以参考Android Studio的官方文档：https://developer.android.com/studio/intro/index.html。</font></div></li></ul></ul></ul><div><font style="color: rgb(50, 135, 18); font-size: 14pt;"><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Appium的使用(有界面版示例)</b></font></div><ul><li><div><font style="font-size: 12pt;"><b>启动Appium服务</b></font></div></li><ul><li><div><font style="font-size: 9pt;">点击Appium</font></div></li><li><div><font style="font-size: 9pt;">输入主机和端口号，点击Start Server按钮即可启动Appium服务</font></div></li></ul><li><div><font style="font-size: 12pt;"><b>将手机连接到PC端</b></font></div></li><ul><li><div><font style="font-size: 9pt;">将手机通过数据线和PC相连</font></div></li><li><div><font style="font-size: 9pt;">打开USB调试功能，确保PC可以连接到手机</font></div></li><li><div><font style="font-size: 9pt;">可以在PC端测试是否连接成功</font></div></li><ul><li><div><font style="font-size: 9pt;">adb  devices  -l   查看连接的设备列表</font></div></li><ul><li><div><font style="font-size: 9pt;">如果找不到adb命令，请检查Android开发环境和环境变量是否配置成功</font></div></li><li><div><font style="font-size: 9pt;">如果adb命令不显示设备信息，检查手机和PC的连接情况</font></div></li></ul></ul></ul><li><div><font style="font-size: 12pt;"><b>启动App并操作</b></font></div></li><ul><li><div><font style="font-size: 10pt;"><b>通过Appium内置驱动来操作</b></font></div></li><ul><li><div><font style="font-size: 9pt;"><b>打开app</b></font></div></li></ul></ul></ul><ul><ul><ul><li><div><font style="font-size: 9pt;">点击Appium中的Start New Session</font></div></li><li><div><font style="font-size: 9pt;">配置启动App时的参数</font></div></li><ul><li><div><font style="font-size: 9pt;">platformName: 它是平台名称，需要区分Android或iOs，此处填Android</font></div></li><li><div><font style="font-size: 9pt;">deviceName: 它是设备名称， 此处是手机的具体类型</font></div></li><li><div><font style="font-size: 9pt;">appPackage： 它是App程序的包名</font></div></li><li><div><font style="font-size: 9pt;">AppActivity: 它是入口Activity名，这里通常需要.开头</font></div></li></ul><li><div><font style="font-size: 9pt;">点击保存按钮，可以将此配置进行保存</font></div></li><li><div><font style="font-size: 9pt;">点击Start Session，便会启动Android手机上的App，同时PC上会弹出一个调试窗口，里面包含了页面源码</font></div></li></ul><li><div><font style="font-size: 9pt;"><b>操作应用App</b></font></div></li><ul><li><div><font style="font-size: 9pt;">选择元素</font></div></li><ul><li><div><font style="font-size: 9pt;">和浏览器的调试一样，只要点击作业页面中的元素，对应的元素就会高亮，中间栏会显示对应的源码</font></div></li><li><div><font style="font-size: 9pt;">右侧是和元素包含的属性和事件等信息</font></div></li></ul><li><div><font style="font-size: 9pt;">操作元素</font></div></li><ul><li><div><font style="font-size: 9pt;">点击右侧元素的属性，便可以实现对元素的操作</font></div></li></ul><li><div><font style="font-size: 9pt;">操作的录制</font></div></li><ul><li><div><font style="font-size: 9pt;">点击中间栏的眼睛按钮，Appium会开始录制操作的动作，这时我们可以在窗口中操作APp的行为都会记录下来</font></div></li><li><div><font style="font-size: 9pt;">Recorder处可以自动生成对应的语言代码。</font></div></li></ul><li><div><font style="font-size: 9pt;"><img src="/e_img/Appium手机爬虫_files/Image.png" type="image/png" data-filename="Image.png" width="804"></font></div></li></ul></ul><li><div><font style="font-size: 10pt;"><b>通过Python代码来操作</b></font></div></li><ul><li><div><font style="font-size: 9pt;"><b>打开app(初始化应用)</b></font></div></li><ul><li><div><font style="font-size: 9pt;">打开方法</font></div></li><ul><li><div><font style="font-size: 9pt;">用字典来配置Desired Capabilities 参数，新建一个Session</font></div></li></ul><li><div><font style="font-size: 9pt;">示例代码</font></div></li><ul><li><div><font style="font-size: 9pt;">server = &quot;http://localhost:4723/wd/hub&quot;</font></div></li><li><div><font style="font-size: 9pt;">desired_caps = {</font></div></li><ul><li><div><font style="font-size: 9pt;">&quot;platformName&quot;: &quot;Android&quot;,</font></div></li><li><div><font style="font-size: 9pt;">&quot;deviceName&quot;: &quot;MI_NOTE_Pro&quot;,</font></div></li><li><div><font style="font-size: 9pt;">&quot;appPackage&quot;: &quot;com.tencent.mm&quot;,</font></div></li><li><div><font style="font-size: 9pt;">&quot;appActivity&quot;: &quot;.ui.LauncherUI&quot;</font></div></li></ul><li><div><font style="font-size: 9pt;">}</font></div></li><li><div><font style="font-size: 9pt;">from appium import Webdriver</font></div></li><li><div><font style="font-size: 9pt;">from selenium.webdriver.support.ui import WebDriverWait</font></div></li><li><div><font style="font-size: 9pt;">driver = wevdriver.Remote(server, desired_caps)    # 启动app</font></div></li></ul></ul><li><div><font style="font-size: 9pt;"><b>查找元素</b></font></div></li><ul><li><div><font style="font-size: 9pt;">element = driver.find_element_by_android_uiautomator('new UiSelector().description(&quot;Animation&quot;)')</font></div></li><li><div><font style="font-size: 9pt;">elements = driver.find_elements_by_android_uiautomator('new UiSelector().description(&quot;Animation&quot;)')</font></div></li></ul><li><div><font style="font-size: 9pt;"><b> 点击操作</b></font></div></li><ul><li><div><font style="font-size: 9pt;">多点点击方法</font></div></li><ul><li><div><font style="font-size: 9pt;">driver.tap(self, positions, duration=None)</font></div></li><ul><li><div><font style="font-size: 9pt;">positions: 它是点击的位置组成的列表</font></div></li><li><div><font style="font-size: 9pt;">duration: 它是点击持续的时间</font></div></li><li><div><font style="font-size: 9pt;">通过tap方法实现触摸点击</font></div></li><li><div><font style="font-size: 9pt;">该方法可以模拟手指点击，最多五个手指，也可以设置触摸的时间长短</font></div></li></ul></ul><li><div><font style="font-size: 9pt;">单点点击方法</font></div></li><ul><li><div><font style="font-size: 9pt;">element.click()    对元素进行点击</font></div></li></ul><li><div><font style="font-size: 9pt;">示例代码</font></div></li><ul><li><div><font style="font-size: 9pt;">driver.tap([(100, 20), (100, 60), (100, 100)], 500)</font></div></li></ul></ul><li><div><font style="font-size: 9pt;"><b>屏幕拖动</b></font></div></li><ul><li><div><font style="font-size: 9pt;">元素间拖动方法</font></div></li><ul><li><div><font style="font-size: 9pt;">driver.scroll(self, origin_el, destination_el)</font></div></li><ul><li><div><font style="font-size: 9pt;">original_el: 拖动的起始元素</font></div></li><li><div><font style="font-size: 9pt;">destination_el:拖动的终止元素</font></div></li></ul></ul><li><div><font style="font-size: 9pt;">两点间的拖动方法</font></div></li><ul><li><div><font style="font-size: 9pt;">driver.swipe(self, start_x, start_y, end_x, end_y, duration=None)</font></div></li><ul><li><div><font style="font-size: 9pt;">start_x: 它是开始位置的横坐标</font></div></li><li><div><font style="font-size: 9pt;">start_y: 它是开始位置的纵坐标</font></div></li><li><div><font style="font-size: 9pt;">end_x: 它是终止位置的横坐标</font></div></li><li><div><font style="font-size: 9pt;">end_y: 它是终止位置的纵坐标</font></div></li><li><div><font style="font-size: 9pt;">duration: 它是持续时间，单位是毫秒</font></div></li></ul></ul><li><div><font style="font-size: 9pt;">两点间的快速的滑动</font></div></li><ul><li><div><font style="font-size: 9pt;">driver.swipe()</font></div></li><ul><li><div><font style="font-size: 9pt;">start_x: 它是开始位置的横坐标</font></div></li><li><div><font style="font-size: 9pt;">start_y: 它是开始位置的纵坐标</font></div></li><li><div><font style="font-size: 9pt;">end_x: 它是终止位置的横坐标</font></div></li><li><div><font style="font-size: 9pt;">end_y: 它是终止位置的纵坐标</font></div></li></ul></ul></ul></ul></ul><ul><ul><li><div><font style="font-size: 9pt;">示例代码</font></div></li><ul><li><div><font style="font-size: 9pt;">driver.scroll(el1, el2)</font></div></li><li><div><font style="font-size: 9pt;">driver.swipe(100, 100, 100, 400, 5000)</font></div></li><li><div><font style="font-size: 9pt;">driver.flick(100, 100, 100, 400)</font></div></li></ul></ul><li><div><font style="font-size: 9pt;"><b>元素的拖拽</b></font></div></li><ul><li><div><font style="font-size: 9pt;">拖拽方法</font></div></li><ul><li><div><font style="font-size: 9pt;">driver.drag_and_drop(self, origin_el, destination_el)</font></div></li><ul><li><div><font style="font-size: 9pt;">origin_el: 被拖拽的元素</font></div></li><li><div><font style="font-size: 9pt;">destination_el：拖拽的目标元素</font></div></li></ul></ul><li><div><font style="font-size: 9pt;">示例代码</font></div></li><ul><li><div><font style="font-size: 9pt;">driver.drag_and_drop(el1, el2)</font></div></li></ul></ul><li><div><font style="font-size: 9pt;"><b>文本的输入</b></font></div></li><ul><li><div><font style="font-size: 9pt;">输入的方法</font></div></li><ul><li><div><font style="font-size: 9pt;">ele.set_text('Hello')</font></div></li></ul><li><div><font style="font-size: 9pt;">示例代码</font></div></li><ul><li><div><font style="font-size: 9pt;">element = driver.find_element_by_id('name')</font></div></li><li><div><font style="font-size: 9pt;">element.set_text(&quot;Hello&quot;)</font></div></li></ul></ul><li><div><font style="font-size: 9pt;"><b>动作链</b></font></div></li><ul><li><div><font style="font-size: 9pt;">使用动作链的方法</font></div></li><ul><li><div><font style="font-size: 9pt;">from appium import TouchAction()</font></div></li><li><div><font style="font-size: 9pt;">action = TouchAction()</font></div></li><li><div><font style="font-size: 9pt;">action.tap(element).perfoem()</font></div></li><li><div><font style="font-size: 9pt;">常用的动作链还有: tap、press、long_press、release、move_to、wait、cancel</font></div></li></ul><li><div><font style="font-size: 9pt;">示例代码</font></div></li><ul><li><div><font style="font-size: 9pt;">from appium import TouchAction()</font></div></li><li><div><font style="font-size: 9pt;">action = TouchAction()</font></div></li><li><div><font style="font-size: 9pt;">a_ele = self.driver.find_element_by_class_name(&quot;listView&quot;)</font></div></li><li><div><font style="font-size: 9pt;">action.press(a_ele).move_to(x=10, y=0), move_to(x=10, y=-600).release()</font></div></li><li><div><font style="font-size: 9pt;">action.perform</font></div></li></ul></ul></ul><div><br></div></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫扩展功能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mitmproxy&amp;mitmdump手机爬虫</title>
      <link href="/2017/02/06/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/mitmproxy&amp;mitmdump%E6%89%8B%E6%9C%BA%E7%88%AC%E8%99%AB/"/>
      <url>/2017/02/06/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/mitmproxy&amp;mitmdump%E6%89%8B%E6%9C%BA%E7%88%AC%E8%99%AB/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="background-color: rgb(255, 250, 165); font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold;-evernote-highlight:true;">mitmproxy的介绍和安装配置</span></font></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">mitmproxy的作用</span></font></div></li><ul><li><div><span style="font-size: 9pt;">mitmproxy是一个支持HTTP和HTTPS的抓包程序，类似Fiddler、Charles的功能，只不过它通过控制台的形式操作。</span></div></li><li><div><span style="font-size: 9pt;">mitmproxy还有两个关联组件，一个是mitmdump，它是mitmproxy的命令行接口，利用它可以对接Python脚本，实现监听后的处理；另一个是mitmweb，它是一个Web程序，通过它以清楚地观察到mitmproxy捕获的请求。</span></div></li><li><div><span style="font-size: 9pt;">可以保存Http会话并进行分析</span></div></li><li><div><span style="font-size: 9pt;">模拟客户端发起请求，模拟服务器端返回的响应</span></div></li><li><div><span style="font-size: 9pt;">利用反向代理将流量发给指定的服务器</span></div></li><li><div><span style="font-size: 9pt;">支持Mac和Linux上的透明代理</span></div></li><li><div><span style="font-size: 9pt;">利用Python对Http请求和响应进行实时的处理</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">mitmproxy和mitmdump的区别</span></font></div></li><ul><li><div><span style="font-size: 9pt;">mitmproxy起到了代理服务的功能，手机和PC在同一个局域网内，可以将mitmproxy设置为手机的代理，这样数据都是通过mitmproxy妆发出去的，起到了中间人的作用</span></div></li><li><div><span style="font-size: 9pt;">mtmdump可以实现将抓取到的请求和响应直接交给某个Python程序进行处理，比如提取和入库操作</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">mitmproxy相关链接</span></font></div></li><ul><li><div><span style="font-size: 9pt;">GitHub：https://github.com/mitmproxy/mitmproxy</span></div></li><li><div><span style="font-size: 9pt;">官方网站：https://mitmproxy.org</span></div></li><li><div><span style="font-size: 9pt;">PyPI：https://pypi.python.org/pypi/mitmproxy</span></div></li><li><div><span style="font-size: 9pt;">官方文档：http://docs.mitmproxy.org</span></div></li><li><div><span style="font-size: 9pt;">mitmdump脚本：http://docs.mitmproxy.org/en/stable/scripting/overview.html</span></div></li><li><div><span style="font-size: 9pt;">下载地址：https://github.com/mitmproxy/mitmproxy/releases</span></div></li><li><div><span style="font-size: 9pt;">DockerHub：https://hub.docker.com/r/mitmproxy/mitmproxy</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">mitmproxy的安装</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">linux下使用pip安装</span></font></div></li><ul><li><div><span style="font-size: 9pt;">pip3 install mitmproxy</span></div></li><ul><li><div><span style="font-size: 9pt;">这是最简单和通用的安装方式，执行完毕之后即可完成mitmproxy的安装，另外还附带安装了mitmdump和mitmweb这两个组件。</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">windows下安装</span></font></div></li><ul><li><div><span style="font-size: 9pt;">获取安装包，下载地址: </span><a href="https://github.com/mitmproxy/mitmproxy/releases/" style="font-size: 9pt;" target="_blank" rel="noopener">https://github.com/mitmproxy/mitmproxy/releases/</a></div></li><ul><li><div><span style="font-size: 9pt;">在Windows上不支持mitmproxy的控制台接口，但是可以使用mitmdump和mitmweb。</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">Linux下源码安装</span></font></div></li><ul><li><div><span style="font-size: 9pt;">下载源码包，下载地址: </span><a href="https://github.com/mitmproxy/mitmproxy/releases/" style="font-size: 9pt;" target="_blank" rel="noopener">https://github.com/mitmproxy/mitmproxy/releases/</a></div></li><ul><li><div><span style="font-size: 9pt;">它包含了最新版本的mitmproxy和内置的Python 3环境，以及最新的OpenSSL环境</span></div></li></ul><li><div><span style="font-size: 9pt;">tar -zxvf mitmproxy-2.0.2-linux.tar.gz</span></div></li><li><div><span style="font-size: 9pt;">sudo mv mitmproxy mitmdump mitmweb /usr/bin</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">证书配置</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">证书配置的说明</span></font></div></li><ul><li><div><span style="font-size: 9pt;">对于mitmproxy来说，如果想要截获HTTPS请求，就需要设置证书。</span></div></li><li><div><span style="font-size: 9pt;">mitmproxy在安装后会提供一套CA证书，只要客户端信任了mitmproxy提供的证书，就可以通过mitmproxy获取HTTPS请求的具体内容，否则mitmproxy是无法解析HTTPS请求的。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">证书配置步骤</span></font></div></li><ul><li><div><span style="font-size: 9pt;">启动mitmdump</span></div></li><ul><li><div><span style="font-size: 9pt;">mitmdump</span></div></li></ul><li><div><span style="font-size: 9pt;">找到家目录.mitmproxy目录里面的CA证书</span></div></li><ul><li><div><span style="font-size: 9pt;">mitmproxy-ca.pem        PEM格式的证书私钥</span></div></li><li><div><span style="font-size: 9pt;">mitmproxy-ca-cert.pem       PEM格式证书，适用于大多数非Windows平台</span></div></li><li><div><span style="font-size: 9pt;">mitmproxy-ca-cert.p12        PKCS12格式的证书，适用于Windows平台</span></div></li><li><div><span style="font-size: 9pt;">mitmproxy-ca-cert.cer           与mitmproxy-ca-cert.pem相同，只是改变了后缀，适用于部分Android平台</span></div></li><li><div><span style="font-size: 9pt;">mitmproxy-dhparam.pem     PEM格式的秘钥文件，用于增强SSL安全性</span></div></li></ul></ul></ul><li><div><span style="font-size: 9pt;">在各平台上配置证书的过程</span></div></li><ul><li><div><span style="font-size: 9pt;">Windows平台</span></div></li><ul><li><div><span style="font-size: 9pt;">1.双击mitmproxy-ca.p12，会出现导入证书的页面向导</span></div></li><li><div><span style="font-size: 9pt;">2.直接点击下一步，会出现密码设置的提示，这里不需要设置密码，直接点击下一步按钮即可</span></div></li><li><div><span style="font-size: 9pt;">3.接下来选择证书的存储区域。这里点击第二选项，将所有的证书都放入下列存储，然后点击浏览按钮，选择证书的存储位置为收信人的根证书颁发急购，接着点击确定按钮，点击下一步</span></div></li><li><div><span style="font-size: 9pt;">4.过程中出现安全警告直接点击是</span></div></li></ul><li><div><span style="font-size: 9pt;">Android</span></div></li><ul><li><div><span style="font-size: 9pt;">1.在Android手机上，需要将证书mitmproxy-ca-cert.pem文件发送到手机上，例如直接复制文件。</span></div></li><li><div><span style="font-size: 9pt;">2.接下来，点击证书，便会出现一个提示窗口，这时输入证书的名称，然后点击“确定”按钮即可完成安装。</span></div></li></ul><li><div><span style="font-size: 9pt;">iOS</span></div></li><ul><li><div><span style="font-size: 9pt;">1.将mitmproxy-ca-cert.pem文件发送到iPhone上，推荐使用邮件方式发送，然后在iPhone上可以直接点击附件并识别安装。</span></div></li><li><div><span style="font-size: 9pt;">2.点击“安装”按钮之后，会跳到安装描述文件的页面，点击“安装”按钮，此时会有警告提示，继续点击右上角的“安装”按钮，安装成功之后会有已安装的提示。</span></div></li><li><div><span style="font-size: 9pt;">3.如果你的iOS版本是10.3及以上版本，还需要在“设置”→“通用”→“关于本机”→“证书信任设置”将mitmproxy的完全信任开关打开。</span></div></li></ul></ul></ul><div><font style="background-color: rgb(255, 250, 165); font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold;-evernote-highlight:true;">mitmproxy的使用</span></font></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">启动mitmproxy服务</span></font></div></li><ul><li><div><span style="font-size: 9pt;">mitmproxy    这样就会在8080端口上运行一个代理服务</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">将mitmproxy设置为手机端的代理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">将PC的ip设置为手机的代理ip，Settings &gt; Wi-Fi &gt; hold current Wi-Fi network &gt; Modify Network &gt; Show advanced options &gt; Proxy settings</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">发送请求</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在手机端进行网络请求，便可以在mitmproxy的界面上看到对应的请求</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">查看/处理请求和响应</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">查看请求的详情</span></font></div></li><ul><li><div><span style="font-size: 9pt;">光标移动到对应的请求位置，点击ENTER</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">在请求中查看Request/Response/Detail</span></font></div></li><ul><li><div><span style="font-size: 9pt;">将光标移动到对应的分栏上，点击Tab</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">重新编辑请求</span></font></div></li><ul><li><div><span style="font-size: 9pt;">1.在请求中，点击e键进行编辑</span></div></li><li><div><span style="font-size: 9pt;">2.按照高亮的部分，选择想要编辑的内容(比如: q：修改请求方参数，m：修改请求方式)</span></div></li><ul><li><div><span style="font-size: 9pt;">进入修改页面后,可以直接对内容进行修改</span></div></li><li><div><span style="font-size: 9pt;">点击a可以增加一行参数</span></div></li><li><div><span style="font-size: 9pt;">修改完成后点击Esc退出修改，q返回上一级页面</span></div></li></ul><li><div><span style="font-size: 9pt;">3.敲击a进行修改的保存</span></div></li><li><div><span style="font-size: 9pt;">4.对修改后的请求重新发起请求</span></div></li></ul></ul></ul><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">mitdump的使用</span></font></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">编写请求和响应的处理脚本</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">日志输出</span></font></div></li><ul><li><div><span style="font-size: 9pt;">介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">ctx模块提供了不同等级的log将会打印不一样的颜色</span></div></li></ul><li><div><span style="font-size: 9pt;">使用示例</span></div></li><ul><li><div><span style="font-size: 9pt;">from mitmproxy import ctx </span></div></li></ul></ul><li><div><span style="font-size: 9pt;">def request(flow):</span></div></li><ul><li><div><span style="font-size: 9pt;">flow.request.headers['User-Agent'] = 'MitmProxy'</span></div></li><li><div><span style="font-size: 9pt;">ctx.log.info(&quot;info&quot;)</span></div></li><li><div><span style="font-size: 9pt;">ctx.log.warn(&quot;warn&quot;)</span></div></li><li><div><span style="font-size: 9pt;">ctx.log.error(&quot;error&quot;)</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">Request对象处理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">我们可以通过request() 方法实现对请求进行修改</span></div></li><li><div><span style="font-size: 9pt;">request对象包含的属性: url、headers、cookies、host、method、scheme、port</span></div></li></ul><li><div><span style="font-size: 9pt;">使用示例</span></div></li><ul><li><div><span style="font-size: 9pt;">def request(flow):</span></div></li><ul><li><div><span style="font-size: 9pt;">request = flow.request</span></div></li><li><div><span style="font-size: 9pt;">print(request.url)</span></div></li></ul></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">Response对象处理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">可以通过response() 方法实现对响应的操作，比如入库等操作</span></div></li><li><div><span style="font-size: 9pt;">response对象包含的属性: status_code、deaders、cookies、text</span></div></li></ul><li><div><span style="font-size: 9pt;">使用示例</span></div></li><ul><li><div><span style="font-size: 9pt;">def response(flow):</span></div></li><ul><li><div><span style="font-size: 9pt;">response = flow.response</span></div></li><li><div><span style="font-size: 9pt;">print(response.text)</span></div></li></ul></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">启动mitmproxy服务</span></font></div></li><ul><li><div><span style="font-size: 9pt;">mitmdump  [OPTIONS]</span></div></li><ul><li><div><span style="font-size: 9pt;">-w: 可以指定将接货的数据都保存到此文件中</span></div></li><li><div><span style="font-size: 9pt;">-s: 可以指定scripts.py 脚本文件，用来处理请求和响应，它需要放在当前命令的执行目录下</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">将mitmdump设置为手机端的代理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">将PC的ip设置为手机的代理ip，Settings &gt; Wi-Fi &gt; hold current Wi-Fi network &gt; Modify Network &gt; Show advanced options &gt; Proxy settings</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">发送请求</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在手机端进行网络请求，便可以在mitmdump的日志中便可以看见对应的请求</span></div></li></ul></ul><div><font style="font-size: 9pt;"><br></font></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫扩展功能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>数据快速写入Csv文件</title>
      <link href="/2017/02/05/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/%E6%95%B0%E6%8D%AE%E5%BF%AB%E9%80%9F%E5%86%99%E5%85%A5Csv%E6%96%87%E4%BB%B6/"/>
      <url>/2017/02/05/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/%E6%95%B0%E6%8D%AE%E5%BF%AB%E9%80%9F%E5%86%99%E5%85%A5Csv%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><div><font style="color: rgb(50, 135, 18); font-size: 14pt;"><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">csv文件的写入</b></font></div><ul><li><div><font style="font-size: 10pt;"><b>以列表的方式写入</b></font></div></li><ul><li><div><font style="font-size: 9pt;">import  csv      导入csv模块</font></div></li><li><div><font style="font-size: 9pt;">with open('data.csv', 'w', encoding='utf-8') as csvfile:</font></div></li><ul><li><div><font style="font-size: 9pt;">writer = csv.writer(csvfile, delimiter=',')    创建阅读器</font></div></li><li><div><font style="font-size: 9pt;">writer.writerow(['id', 'name', 'age'])    向csv文件中写入一行数据</font></div></li><li><div><font style="font-size: 9pt;">writer.writerows([ ['1', '2', '3'], ['2', '3', '4'] ])     向csv文件中写入多行数据</font></div></li></ul></ul><li><div><font style="font-size: 10pt;"><b>以字典的方式写入</b></font></div></li><ul><li><div><font style="font-size: 9pt;">import  csv      导入csv模块</font></div></li><li><div><font style="font-size: 9pt;">with open('data.csv', 'w', encoding='utf-8') as csvfile:</font></div></li><li><div><font style="font-size: 9pt;">fieldnames = ['id', 'name', 'age']</font></div></li><ul><li><div><font style="font-size: 9pt;">writer = csv.DictWriter(csvfile, fieldnames=fieldnames)    创建阅读器， 并指定列索引</font></div></li><li><div><font style="font-size: 9pt;">writer.writeheader()      向文件中写入列的索引</font></div></li><li><div><font style="font-size: 9pt;">writer.writerow({'id': 1, 'name': 2, 'age': 3})    向csv文件中写入一行数据</font></div></li></ul></ul></ul><div><font style="font-size: 14pt; color: rgb(50, 135, 18);"><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">csv文件的读取</b></font></div><ul><li><div><b><font style="font-size: 10pt;">csv文件按行读取</font></b></div></li><ul><li><div><font style="font-size: 9pt;">import csv</font></div></li><li><div><font style="font-size: 9pt;">with open('data.csv', 'r', encoding='utf-8') as csvfile:</font></div></li><ul><li><div><font style="font-size: 9pt;">reader = csv.reader(csvfile)      创建阅读器</font></div></li><li><div><font style="font-size: 9pt;">for row in reader:</font></div></li><ul><li><div><font style="font-size: 9pt;">print(row)</font></div></li></ul></ul><li><div><font style="font-size: 9pt;">&gt;&gt; ['id', 'name', 'age']</font></div></li></ul></ul><div><font style="background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-size: 14pt;-evernote-highlight:true;"><b>使用pandas进行csv文件的写入和读取</b></font></div></div><ul><li><div><span style="font-weight: bold; line-height: 13.6px;"><font style="font-size: 10pt;">读取csv文件数据的方法</font></span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="line-height: 13.6px;">df_obj = pd.read_csv('filename', [</span><span style="line-height: 13.6px;">usecols=['col1', 'col2'], skiprows=n1, skipfooter=n2, index_col=n3, engine='python'</span><span style="line-height: 13.6px;">])     返回的是DataFrame对象</span></font></div></li><ul><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">filename：表示读取的文件名</font></span></div></li><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">usecols：表示读取文件的哪些列</font></span></div></li><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">skiprows:  表示跳过文件的前几行</font></span></div></li><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">skipfooter： 表示跳过文件的后几行</font></span></div></li><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">index_col：表示使用那一列作为索引列</font></span></div></li><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">engine： 使用的解释器引擎， 当读取中文文件的时候需要指定</font></span></div></li></ul></ul><li><div><span style="font-weight: bold; line-height: 13.6px;"><font style="font-size: 10pt;">写入csv数据的方法</font></span></div></li><ul><li><div><font style="font-size: 9pt;">df_obj.to_csv(&quot;filename&quot;)</font></div></li><ul><li><div><span style="line-height: 13.6px;"><font style="font-size: 9pt;">filename：表示读取的文件名,要加上.csv后缀；</font></span></div></li></ul></ul></ul><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫扩展功能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Fiddler ios配置</title>
      <link href="/2017/02/03/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/fiddler%E9%85%8D%E7%BD%AEios%E6%89%8B%E6%9C%BA/"/>
      <url>/2017/02/03/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/fiddler%E9%85%8D%E7%BD%AEios%E6%89%8B%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div style="-evernote-webclip:true"><br><div style="font-size: 16px; display: inline-block;"><div style="box-sizing:border-box;list-style:none;overflow:hidden;-webkit-font-smoothing:antialiased;font-size:62.5%;"><div style="font-weight:400;list-style:none;background-color:rgb(255, 255, 255);color:rgb(44, 61, 79);font-style:normal;font-variant:normal;overflow:hidden;font-stretch:normal;font-size:1.3rem;line-height:22px;font-family:open_sansregular, sans-serif;box-sizing:border-box;text-rendering:optimizeLegibility;"><div style="box-sizing:border-box;text-rendering:optimizeLegibility;overflow:hidden;"><div style="text-rendering:optimizeLegibility;background-color:rgb(255, 255, 255);line-height:1.5;overflow:auto;box-sizing:border-box;"><div style="box-sizing:border-box;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;">            <h1 style="font-weight:500;margin-bottom:16px;text-decoration:none;box-sizing:border-box;margin:20px 0px 12px;padding:0px;font-size:2.4rem;color:rgb(0, 0, 0);text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:1.2em;border-bottom:1px solid rgb(220, 228, 229);padding-bottom:10px;margin-top:30px;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForiOS#capture-traffic-from-ios-device" style="box-sizing:border-box;outline:none;cursor:pointer;transition:color 0.2s ease, opacity 0.2s ease;text-decoration:none;padding-left:25px;margin-left:-25px;color:rgb(45, 62, 80);" target="_blank" rel="noopener">Capture Traffic from iOS Device</a></h1><h2 style="box-sizing:border-box;color:rgb(0, 0, 0);text-decoration:none;margin:20px 0px 12px;padding:0px;font-size:1.8rem;font-weight:500;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForiOS#configure-fiddler" style="box-sizing:border-box;outline:none;cursor:pointer;transition:color 0.2s ease, opacity 0.2s ease;text-decoration:none;padding-left:25px;margin-left:-25px;color:rgb(45, 62, 80);" target="_blank" rel="noopener">Configure Fiddler</a></h2><ol style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;list-style-type:decimal;"><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Click <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Tools &gt; Fiddler Options &gt; Connections</strong>.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Click the checkbox by <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Allow remote computers to connect</strong>.</p><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);"><img src="/e_img/fiddler配置ios手机_files/Image.png" type="image/png" data-filename="Image.png" alt="Allow remote computers to connect" height="374" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="561"></p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Restart Fiddler.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Ensure your firewall allows incoming connections to the Fiddler process.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Hover over the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Online indicator</strong> at the far right of the Fiddler toolbar to display the IP addresses assigned to Fiddler's machine.</p><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);"><img src="/e_img/fiddler配置ios手机_files/Image [1].png" type="image/png" data-filename="Image.png" alt="Online Tooltip" height="206" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="372"></p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Verify client iOS device can reach Fiddler by navigating in the browser to <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">http://FiddlerMachineIP:8888</strong>. This address should return the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Fiddler Echo Service</strong> page.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">For iPhone: Disable the 3g/4g connection.</p></li></ol><h2 style="box-sizing:border-box;color:rgb(0, 0, 0);text-decoration:none;margin:20px 0px 12px;padding:0px;font-size:1.8rem;font-weight:500;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForiOS#set-the-ios-device-proxy" style="box-sizing:border-box;outline:none;cursor:pointer;transition:color 0.2s ease, opacity 0.2s ease;text-decoration:none;padding-left:25px;margin-left:-25px;color:rgb(45, 62, 80);" target="_blank" rel="noopener">Set the iOS Device Proxy</a></h2><ol style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;list-style-type:decimal;"><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Tap <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Settings &gt; General &gt; Network &gt; Wi-Fi</strong>.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Tap the settings for the Wi-Fi network.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Tap the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Manual</strong> option in the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">HTTP Proxy</strong> section. </p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">In the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Server</strong> box, type the IP address or hostname of your Fiddler instance. </p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">In the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Port</strong> box, type the port Fiddler is listening on (usually 8888). </p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Ensure the Authentication slider is set to <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Off</strong>.</p><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);"><img src="/e_img/fiddler配置ios手机_files/Image [2].png" type="image/png" data-filename="Image.png" alt="iOS Proxy Settings" height="136" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="363"></p></li></ol><h2 style="box-sizing:border-box;color:rgb(0, 0, 0);text-decoration:none;margin:20px 0px 12px;padding:0px;font-size:1.8rem;font-weight:500;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForiOS#decrypt-https-traffic-from-ios-devices" style="box-sizing:border-box;outline:none;cursor:pointer;transition:color 0.2s ease, opacity 0.2s ease;text-decoration:none;padding-left:25px;margin-left:-25px;color:rgb(45, 62, 80);" target="_blank" rel="noopener">Decrypt HTTPS Traffic from iOS Devices</a></h2><ol style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;list-style-type:decimal;"><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Download the <a href="http://fiddler2.com/add-ons" style="box-sizing:border-box;color:rgb(40, 161, 226);outline:none;text-decoration:none;cursor:pointer;transition:color 0.2s ease, opacity 0.2s ease;" target="_blank" rel="noopener">Certificate Maker plugin</a> for Fiddler.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Install the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Certificate Maker</strong> plugin.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Restart Fiddler.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Configure the device where Fiddler is installed to <a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/TrustFiddlerRootCert" style="box-sizing:border-box;color:rgb(40, 161, 226);outline:none;text-decoration:none;cursor:pointer;transition:color 0.2s ease, opacity 0.2s ease;" target="_blank" rel="noopener">trust Fiddler root certificate</a>.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">On the iOS device, go to <a href="http://ipv4.fiddler:8888/" style="box-sizing:border-box;color:rgb(40, 161, 226);outline:none;text-decoration:none;cursor:pointer;transition:color 0.2s ease, opacity 0.2s ease;" target="_blank" rel="noopener">http://ipv4.fiddler:8888/</a> in a browser.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">From the bottom of the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Fiddler Echo Service</strong> webpage, download the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">FiddlerRoot certificate.</strong></p><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);"><img src="/e_img/fiddler配置ios手机_files/Image [3].png" type="image/png" data-filename="Image.png" alt="Download FiddlerRoot Certificate" height="61" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="620"></p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Open the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">FiddlerRoot.cer</strong> file.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Tap the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Install</strong> button.</p><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);"><img src="/e_img/fiddler配置ios手机_files/Image [4].png" type="image/png" data-filename="Image.png" alt="Install Profile" height="152" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="283"></p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Tap the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Install</strong> button again.</p><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);"><img src="/e_img/fiddler配置ios手机_files/Image [5].png" type="image/png" data-filename="Image.png" alt="Warning" height="169" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="308"></p></li></ol><h2 style="box-sizing:border-box;color:rgb(0, 0, 0);text-decoration:none;margin:20px 0px 12px;padding:0px;font-size:1.8rem;font-weight:500;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForiOS#uninstall-fiddlerroot-certificate" style="box-sizing:border-box;outline:none;cursor:pointer;transition:color 0.2s ease, opacity 0.2s ease;text-decoration:none;padding-left:25px;margin-left:-25px;color:rgb(45, 62, 80);" target="_blank" rel="noopener">Uninstall FiddlerRoot Certificate</a></h2><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">If you decide to uninstall the root certificate:</p><ol style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;list-style-type:decimal;"><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Tap the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Settings</strong> app.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Tap <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">General</strong>.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Scroll to <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Profiles</strong>.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Tap the <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">DO_NOT_TRUST_FiddlerRoot*</strong> profile.</p></li><li style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;color:rgb(102, 102, 102);"><p style="box-sizing:border-box;margin:0px;padding:0px;text-rendering:optimizeLegibility;font-family:open_sansregular, sans-serif;line-height:22px;font-size:1.3rem;margin-bottom:12px;margin-top:12px;color:rgb(102, 102, 102);">Tap <strong style="box-sizing:border-box;text-rendering:optimizeLegibility;font-weight:bold;">Remove</strong>.</p></li></ol>        </div></div></div></div></div></div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫扩展功能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>数据去重方法</title>
      <link href="/2017/02/02/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/%E6%95%B0%E6%8D%AE%E5%8E%BB%E9%87%8D%E6%96%B9%E6%B3%95-HashBloom/"/>
      <url>/2017/02/02/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/%E6%95%B0%E6%8D%AE%E5%8E%BB%E9%87%8D%E6%96%B9%E6%B3%95-HashBloom/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 16.8px;-evernote-highlight:true;">hash序列化过滤</span></span></div><div><ul><li><div><span style="font-size: 11pt; font-weight: bold; line-height: 1.45;">使用hash哈希方法去重的场景</span></div></li><ul><li><div><span style="font-size: 9pt;">当数据量不大的时候，并且数据所占内存不多的时候</span></div></li><li><div><span style="font-size: 9pt;">当只有几万条url去重的时候，可以直接使用hash+redis的set类型进行数据的去重</span></div></li></ul><li><div><span style="font-size: 11pt; font-weight: bold; line-height: 1.45;">使用sha1-redis去重的实例</span></div></li></ul></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: &quot;Adobe Garamond Pro&quot;;">    </span> <span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">   import hashlib</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">        import redis</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">        from redis import *</span></div><div><br></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">        class Filter_hash(object):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">            # 创建redis客户端对象</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">            sr = StrictRedis(host='localhost', port=6379, db=0)</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">            # 定义存储hash后数据的key_name</span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern; line-height: 1.45;"> </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern; line-height: 1.45;">    </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">            key = 'hash_list'        </span></div><div><br></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">            def add_hash_num(self, key_name，url):</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">                    # 创建一个哈希对象</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">                    fp = hashlib.sha1()</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">                    # 对url进行哈希序列化</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">                    fp.update(url)</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">                    fp_num = </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">fp.hexdiget()</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">                    # 将十六进制后的序列化的hash数值进行存储</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">                    </span><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">added = self.server.sadd(self.key, fp_num)</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">                    return   added   # 如果插入成功， 返回1，表示数据不重复插入成功，否则返回0</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">    </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">                    filter_cur = Filter_hash()</span></div><div><br></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">        if __name__ == '__main__':</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(51, 51, 51); font-family: Modern;">              filter_cur.add_hash_num('url'， 'https://www.baidu.com')</span></div></div><div><br></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">bloom-布隆过滤</span></div><div><ul><li><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; line-height: 21.6px;">什么是布隆过滤器</span></font></div></li><ul><li><div><span style="font-size: 9pt;">是一种space efficient的概率模型数据结构，用于判断一个元素是否在集合中。</span></div></li><li><div><span style="font-size: 9pt;">一个空的布隆过滤器是一个m bit的bitmap，每一位都初始化为0。布隆过滤器定义有k个hash函数，对输入的数据生成k个hash值，定义一个map函数将k个hash值映射到bitmap的k个位。</span></div></li></ul><li><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; line-height: 13.6px;">bitmap数据类型</span></font></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">bitmap介绍</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">Bitmap不是一个确切的数据类型，而是基于String类型定义的一系列面向位操作的方法。因为String是二进制安全的并且它们的最大长度是512MB， </span><span style="font-size: 9pt; line-height: 1.45;">所以String类型很合适去作为一个2^32长度的位数组。</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">位操作方法可以被分为两组：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">一、对单一位的操作，比如设置某一位为1或0，或者得到这一位的值；</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">二、对一组位的操作，比方说计算一定范围内的1的个数（比如计数） </span></div></li></ul><li><div><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">bitmap的应用场景</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">bitmap一个最大的优势是它通常能在存储信息的时候节省大量空间。比方说一个用增量ID来辨别用户的系统，可以用仅仅512MB的空间来标识40亿个用户是否想要接受通知。</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用SETBIT和GETBIT命令来对位进行置数和检索（redis中实现的bitmap类型数据的操作）</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">&gt; setbit</span> <span style="font-size: 9pt; line-height: 1.45;">key</span> <span style="font-size: 9pt; line-height: 1.45;">10</span> <span style="font-size: 9pt; line-height: 1.45;">1</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">(</span><span style="font-size: 9pt; line-height: 1.45;">integer</span><span style="font-size: 9pt; line-height: 1.45;">)</span> <span style="font-size: 9pt; line-height: 1.45;">1</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">&gt; getbit</span> <span style="font-size: 9pt; line-height: 1.45;">key</span> <span style="font-size: 9pt; line-height: 1.45;">10</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">(</span><span style="font-size: 9pt; line-height: 1.45;">integer</span><span style="font-size: 9pt; line-height: 1.45;">)</span> <span style="font-size: 9pt; line-height: 1.45;">1</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">&gt; getbit</span> <span style="font-size: 9pt; line-height: 1.45;">key</span> <span style="font-size: 9pt; line-height: 1.45;">11</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">(</span><span style="font-size: 9pt; line-height: 1.45;">integer</span><span style="font-size: 9pt; line-height: 1.45;">)</span> <span style="font-size: 9pt; line-height: 1.45;">0</span></div></li><li><div><span style="line-height: 13.6px;">返回的是该位上之前的数值</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">SETBIT 如上所示，意思是将第10位置位为1，第二个参数可为0或1。如果设置的位超出了当前String的长度，那么会自动增长。（最长2^32，下同） </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">GETBIT 如上所示，返回第10位和第11位的数据，分别是1和0。如果查找的位超出了当前String的长度，那么会返回0。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">接下来是三个对一组位进行操作的命令: </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">BITOP 执行不同字符串之间的逐位操作。所提供的操作有AND，OR，XOR和NOT。BITCOUNT </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">BITCOUNT 计数,返回bitmap里值为1的位的个数. </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">BITPOS 返回第一个0或1的位置 </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">BITPOS和BITCOUNT不仅可以作用于整个bitmap，还可以作用于一定的范围,下面是一个BITCOUNT的例子</span></div></li></ul></ul><li><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; line-height: 21.6px;">布隆过滤的原理</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 21.6px;">布隆过滤器需要的是一个位数组(和位图类似)和K个映射函数(和Hash表类似)，在初始状态时，对于长度为m的位数组array，它的所有位被置0</span></font><span style="font-size: 9pt;">　</span></div></li><ul><li><div><img src="/e_img/数据去重方法-HashBloom_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" style="font-size: 9pt;" width="263"></div></li></ul><li><div><span style="font-size: 9pt;">对于有n个元素的集合S={S1,S2...Sn},通过k个映射函数{f1,f2,......fk}，将集合S中的每个元素Sj(1&lt;=j&lt;=n)映射为K个值{g1,g2...gk}，然后再将位数组array中相对应的array[g1],array[g2]......array[gk]置为1：</span><span style="font-size: 9pt; line-height: 1.45;">　</span></div></li><ul><li><div><img src="/e_img/数据去重方法-HashBloom_files/18094441-5734e63fc71d455f9b84fb4dfd2c5375.jpg" type="image/jpeg" data-filename="18094441-5734e63fc71d455f9b84fb4dfd2c5375.jpg" style="font-size: 9pt;" width="231"></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">如果要查找某个元素item是否在S中，则通过映射函数{f1,f2,...fk}得到k个值{g1,g2...gk}，然后再判断array[g1],array[g2]...array[gk]是否都为1，若全为1，则item在S中，否则item不在S中。这个就是布隆过滤器的实现原理。</span></div></li></ul><li><div><span style="font-size: 11pt; font-weight: bold;">布隆过滤优点</span></div></li><ul><li><div><span style="font-size: 9pt;">相比于其它的数据结构，布隆过滤器在空间和时间方面都有巨大的优势。布隆过滤器存储空间和插入/查询时间都是常数。</span></div></li><li><div><span style="font-size: 9pt;">布隆过滤器不需要存储元素本身，在某些对保密要求非常严格的场合有优势。</span></div></li><li><div><span style="font-size: 9pt;">布隆过滤器可以表示全集，其它任何数据结构都不能；</span></div></li><li><div><span style="font-size: 9pt;">k 和 m 相同，使用同一组 Hash 函数的两个布隆过滤器的交并差运算可以使用位操作进行。</span></div></li></ul><li><div><span style="font-size: 11pt; font-weight: bold;">缺点</span></div></li><ul><li><div><span style="font-size: 9pt;">误算率（False Positive），随着存入的元素数量增加，</span><span style="font-size: 9pt;">错判</span><span style="font-size: 9pt;">“</span><span style="font-size: 9pt;">在集合内</span><span style="font-size: 9pt;">”</span><span style="font-size: 9pt;">的概率就越大了，</span><span style="font-size: 9pt;">误算率随之增加。</span></div></li><li><div><span style="font-size: 9pt;">一般情况下不能从布隆过滤器中删除元素. 我们很容易想到把位列阵变成整数数组，每插入一个元素相应的计数器加1, 这样删除元素时将计数器减掉就可以了。然而要保证安全的删除元素并非如此简单。首先我们必须保证删除的元素的确在布隆过滤器里面. 这一点单凭这个过滤器是无法保证的。另外计数器回绕也会造成问题。</span></div></li></ul><li><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; line-height: 13.6px;">布隆过滤器的应用场景</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在对大量的数据进行去重的时候， 可以使用布隆过滤器判断元素是否已经在集合中，通过判断的结果，来对数据进行相应的操作</span></div></li></ul><li><div><span style="font-size: 14.399999618530273px;"><span style="font-size: 14.4px; font-weight: bold; line-height: 16.8px;">布隆过滤实现（包在下方）</span></span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">构造HashMap类</span></font></div></li><ul><li><div><span style="font-size: 9pt;">这里新建了一个HashMap类。构造函数传入两个值，一个是m位数组的位数，另一个是种子值seed。不同的散列函数需要有不同的seed，这样可以保证不同的散列函数的结果不会碰撞。</span></div></li><li><div><span style="font-size: 9pt;">在hash()方法的实现中，value是要被处理的内容。这里遍历了value的每一位，并利用ord()方法取到每一位的ASCII码值，然后混淆seed进行迭代求和运算，最终得到一个数值。这个数值的结果就由value和seed唯一确定。</span></div></li><li><div><span style="font-size: 9pt;">我们再将这个数值和m进行按位与运算，即可获取到m位数组的映射结果，这样就实现了一个由字符串和seed来确定的散列函数。</span></div></li><li><div><span style="font-size: 9pt;">当m固定时，只要seed值相同，散列函数就是相同的，相同的value必然会映射到相同的位置。</span></div></li><li><div><span style="font-size: 9pt;">所以如果想要构造几个不同的散列函数，只需要改变其seed就好了。以上内容便是一个简易的散列函数的实现。</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/数据去重方法-HashBloom_files/Image.png" type="image/png" data-filename="Image.png" width="477"></span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">构造BloomFilter</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Bloom Filter里面需要用到k个散列函数，这里要对这几个散列函数指定相同的m值和不同的seed值</span></div></li><li><div><span style="font-size: 9pt;">由于我们需要亿级别的数据的去重，即前文介绍的算法中的n为1亿以上，散列函数的个数k大约取10左右的量级</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/数据去重方法-HashBloom_files/Image [1].png" type="image/png" data-filename="Image.png" width="798"></span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">实现判断元素是否重复和添加元素到集合的方法</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">insert方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Bloom Filter算法会逐个调用散列函数对放入集合中的元素进行运算，得到在m位位数组中的映射位置，然后将位数组对应的位置置1。</span></div></li><li><div><span style="font-size: 9pt;">这里代码中我们遍历了初始化好的散列函数，然后调用其hash()方法算出映射位置offset，再利用Redis的setbit()方法将该位置1。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">exit方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">我们要实现判定是否重复的逻辑，方法参数value为待判断的元素。我们首先定义一个变量exist，遍历所有散列函数对value进行散列运算，得到映射位置，用getbit()方法取得该映射位置的结果，循环进行与运算。</span></div></li><li><div><span style="font-size: 9pt;">这样只有每次getbit()得到的结果都为1时，最后的exist才为True，即代表value属于这个集合。如果其中只要有一次getbit()得到的结果为0，即m位数组中有对应的0位，那么最终的结果exist就为False，即代表value不属于这个集合。</span></div></li><li><div><span style="font-size: 9pt;"><img src="/e_img/数据去重方法-HashBloom_files/Image [2].png" type="image/png" data-filename="Image.png" width="422"></span></div></li></ul></ul></ul></ul><div><font style="font-size: 12pt;"></font></div><div><span style="font-size: 9pt; font-weight: bold; line-height: 16.8px;">            </span></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫扩展功能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Fiddler 抓包工具安装、配置</title>
      <link href="/2017/01/29/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/Fiddler%20%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/"/>
      <url>/2017/01/29/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/Fiddler%20%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><font style="font-size: 12pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 12pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">使用前配置</span></font></div><div><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">安装证书(配置HTTPS网站的抓取证书)</span></font></div></li><ul><li><div><span style="font-size: 9pt;">点击工具栏tools</span></div></li><li><div><span style="font-size: 9pt;">点击Telerlk FiddlerOptions</span></div></li><li><div><span style="font-size: 9pt;">点击HTTPS选项</span></div></li><li><div><span style="font-size: 9pt;">点击右上角的Actions--&gt;Trust Root Certificate  </span></div></li></ul></ul></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">软件界面</span></font></div><div><ul><li><div><img src="/e_img/Fiddler 抓包工具安装、配置_files/Image.png" type="image/png" data-filename="Image.png"></div></li></ul><div><font style="font-size: 12pt;"><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">手机app抓包方法</span></font></div></div><div><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">将</span><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">Fiddler设置为代理</span></font></div></li><ul><li><div><span style="font-size: 9pt;">点击工具栏tools----&gt;Connections</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">勾选 Allow remote computers to connect</span></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">端口号设置为8888（可以设置其他）</span></font></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">配置手机端的证书</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">配置方法见其他两篇介绍</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">配置移动端的官方文档：</span><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForiOS" style="font-size: 9pt; line-height: 13.6px;" target="_blank" rel="noopener">http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForiOS</a></div></li></ul><li><div><span style="font-weight: bold; font-size: 9pt;">使用手机访问网页</span></div></li></ul><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫扩展功能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Fiddler Android配置</title>
      <link href="/2017/01/28/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/fiddler%E9%85%8D%E7%BD%AEAndroid%E6%89%8B%E6%9C%BA/"/>
      <url>/2017/01/28/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/fiddler%E9%85%8D%E7%BD%AEAndroid%E6%89%8B%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForAndroid#configure-fiddler-for-android--google-nexus-7" style="background-color: rgb(245, 247, 248); font-size: 2.4rem; outline: none; cursor: pointer; transition: color 0.2s ease, opacity 0.2s ease; -webkit-transition: color 0.2s ease, opacity 0.2s ease; padding-left: 25px; margin-left: -25px; color: rgb(45, 62, 80); font-family: open_sansregular, sans-serif; line-height: 1.2em; text-decoration: none;" target="_blank" rel="noopener">Fiddler for Android / Google Nexus 7</a></div><div style="font-size: 16px; display: inline-block;"><div style="box-sizing: border-box; list-style: none; overflow: hidden; -webkit-font-smoothing: antialiased; font-size: 62.5%;"><div style="list-style: none; background-color: rgb(255, 255, 255); overflow: hidden; font-size: 1.3rem; box-sizing: border-box; text-rendering: optimizelegibility;"><div style="box-sizing: border-box; text-rendering: optimizelegibility; overflow: hidden;"><div style="text-rendering: optimizelegibility; background-color: rgb(255, 255, 255); overflow: auto; box-sizing: border-box;"><div style="box-sizing: border-box; text-rendering: optimizelegibility; font-size: 1.3rem; max-width: 930px;"><h2 style="box-sizing: border-box; margin: 20px 0px 12px; padding: 0px; font-size: 1.8rem; text-rendering: optimizelegibility;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForAndroid#configure-fiddler" style="box-sizing: border-box; outline: none; cursor: pointer; transition: color 0.2s ease, opacity 0.2s ease; -webkit-transition: color 0.2s ease, opacity 0.2s ease; padding-left: 25px; margin-left: -25px; font-size: 1.8rem; background-color: rgb(255, 255, 255); color: rgb(45, 62, 80); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 500; line-height: 22px; text-decoration: none;" target="_blank" rel="noopener">Configure Fiddler</a></h2><ol style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem; list-style-type: decimal;"><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Click</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Tools &gt; Fiddler Options &gt; Connections</span><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">.</span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Ensure that the checkbox by</span> <span style="font-size: 1.3rem; box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Allow remote computers to connect</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">is checked.</span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">If you check the box, restart Fiddler.</span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Hover over the</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Online indicator</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">at the far right of the Fiddler toolbar to display the IP address of the Fiddler server.</span><br><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;"><img src="/e_img/fiddler配置Android手机_files/Image.png" type="image/png" data-filename="Image.png" alt="Online Tooltip" height="206" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="372"></span></li></ol><h2 style="box-sizing: border-box; margin: 20px 0px 12px; padding: 0px; font-size: 1.8rem; text-rendering: optimizelegibility;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForAndroid#configure-nexus-device" style="box-sizing: border-box; outline: none; cursor: pointer; -webkit-transition: color 0.2s ease, opacity 0.2s ease; transition: color 0.2s ease, opacity 0.2s ease; padding-left: 25px; margin-left: -25px; font-size: 1.8rem; background-color: rgb(255, 255, 255); color: rgb(45, 62, 80); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 500; line-height: 22px; text-decoration: none;" target="_blank" rel="noopener">Configure Nexus Device</a></h2><ol style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem; list-style-type: decimal;"><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Swipe down from the top of the screen and tap the</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Settings</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">icon.</span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Tap</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Wi-Fi</span><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">.</span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Tap and hold your current Wi-Fi network. Select</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Modify Network</span><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">.</span><br><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;"><img src="/e_img/fiddler配置Android手机_files/Image [1].png" type="image/png" data-filename="Image.png" alt="Modify Network" height="281" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="400"></span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Tap the</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Show advanced options</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">box.</span><br><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;"><img src="/e_img/fiddler配置Android手机_files/Image [2].png" type="image/png" data-filename="Image.png" alt="Show advanced options" height="366" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="400"></span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Tap the</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Proxy settings</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">dropdown and select</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Manual</span><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">.</span><br><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;"><img src="/e_img/fiddler配置Android手机_files/Image [3].png" type="image/png" data-filename="Image.png" alt="Proxy settings" height="407" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="403"></span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Type the IP address and port (usually 8888) of the Fiddler server.</span><br><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;"><img src="/e_img/fiddler配置Android手机_files/Image [4].png" type="image/png" data-filename="Image.png" alt="IP Address" height="407" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="403"></span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Tap</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Save</span><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">.</span></li></ol><div style="box-sizing: border-box; margin: 12px 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">To verify this configuration, go to</span> <strong style="box-sizing: border-box; text-rendering: optimizelegibility;"><a href="http://ipv4.fiddler:8888/" style="box-sizing: border-box; outline: none; cursor: pointer; -webkit-transition: color 0.2s ease, opacity 0.2s ease; transition: color 0.2s ease, opacity 0.2s ease; font-size: 1.3rem; background-color: rgb(255, 255, 255); font-weight: bold; color: rgb(40, 161, 226); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; line-height: 22px; text-decoration: none;" target="_blank" rel="noopener">http://ipv4.fiddler:8888/</a></strong><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">. Chrome should display the</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Fiddler Echo Service</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">webpage, and the traffic should appear in Fiddler.</span></div><h2 style="box-sizing: border-box; margin: 20px 0px 12px; padding: 0px; font-size: 1.8rem; text-rendering: optimizelegibility;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForAndroid#disable-the-proxy" style="box-sizing: border-box; outline: none; cursor: pointer; transition: color 0.2s ease, opacity 0.2s ease; -webkit-transition: color 0.2s ease, opacity 0.2s ease; padding-left: 25px; margin-left: -25px; font-size: 1.8rem; background-color: rgb(255, 255, 255); color: rgb(45, 62, 80); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 500; line-height: 22px; text-decoration: none;" target="_blank" rel="noopener">Disable the proxy</a></h2><div style="box-sizing: border-box; margin: 12px 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">After using Fiddler, return to the</span> <span style="font-size: 1.3rem; box-sizing: border-box; text-rendering: optimizelegibility; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Proxy Settings</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">screen above and remove the proxy.</span></div><h2 style="box-sizing: border-box; margin: 20px 0px 12px; padding: 0px; font-size: 1.8rem; text-rendering: optimizelegibility;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForAndroid#decrypt-https" style="box-sizing: border-box; outline: none; cursor: pointer; -webkit-transition: color 0.2s ease, opacity 0.2s ease; transition: color 0.2s ease, opacity 0.2s ease; padding-left: 25px; margin-left: -25px; font-size: 1.8rem; background-color: rgb(255, 255, 255); color: rgb(45, 62, 80); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 500; line-height: 22px; text-decoration: none;" target="_blank" rel="noopener">Decrypt HTTPS</a></h2><ol style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem; list-style-type: decimal;"><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">On the</span> <span style="font-size: 1.3rem; box-sizing: border-box; text-rendering: optimizelegibility; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Fiddler Echo Service Webpage</span><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">, click the</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">FiddlerRoot Certificate</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">link.</span><br><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;"><img src="/e_img/fiddler配置Android手机_files/Image [5].png" type="image/png" data-filename="Image.png" alt="Download FiddlerRoot Certificate" height="331" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="512"></span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">If the download doesn't open automatically, swipe down from the top and tap the</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Settings</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">icon.</span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Tap</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Personal &gt; Security.</span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Under</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Credential Storage</span><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">, tap</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Install from storage</span><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">.</span><br><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;"><img src="/e_img/fiddler配置Android手机_files/Image [6].png" type="image/png" data-filename="Image.png" alt="Install from storage" height="362" style="box-sizing:border-box;border:0px;text-rendering:optimizeLegibility;max-width:100%;height:auto;" width="620"></span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">Tap the</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">FiddlerRoot.cer</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">file.</span></li><li style="box-sizing: border-box; margin: 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">(Optional) Type a name for the certificate.</span></li></ol><div style="box-sizing: border-box; margin: 12px 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">To verify this configuration, tap</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Trusted credentials &gt; User</span><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">. This should display the Fiddler certificate.</span></div><h2 style="box-sizing: border-box; margin: 20px 0px 12px; padding: 0px; font-size: 1.8rem; text-rendering: optimizelegibility;"><a href="http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigureForAndroid#disable-https-decryption" style="box-sizing: border-box; outline: none; cursor: pointer; -webkit-transition: color 0.2s ease, opacity 0.2s ease; transition: color 0.2s ease, opacity 0.2s ease; padding-left: 25px; margin-left: -25px; font-size: 1.8rem; background-color: rgb(255, 255, 255); color: rgb(45, 62, 80); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 500; line-height: 22px; text-decoration: none;" target="_blank" rel="noopener">Disable HTTPS Decryption</a></h2><div style="box-sizing: border-box; margin: 12px 0px; padding: 0px; text-rendering: optimizelegibility; font-size: 1.3rem;"><span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">To delete the FiddlerRoot certificate, tap</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); box-sizing: border-box; text-rendering: optimizelegibility; color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: bold; line-height: 22px;">Trusted credentials &gt; User</span> <span style="font-size: 1.3rem; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: open_sansregular, sans-serif; font-style: normal; font-variant: normal; font-weight: 400; line-height: 22px;">and delete the certificate.</span></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫扩展功能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Splash爬取动态HTML</title>
      <link href="/2017/01/26/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Splash%E7%88%AC%E5%8F%96%E5%8A%A8%E6%80%81HTML/"/>
      <url>/2017/01/26/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Splash%E7%88%AC%E5%8F%96%E5%8A%A8%E6%80%81HTML/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="background-color: rgb(255, 250, 165);font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Splash的功能介绍和运行</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Splash的简介</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Splash是一个JavaScript渲染服务，是一个带有HTTP API的轻量级浏览器，同时它对接了Python中的Twisted和QT库。利用它，我们同样可以实现动态渲染页面的抓取。</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Splash文档</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Splash官方文档</span></font></div></li><ul><li><div><a href="https://splash.readthedocs.io/en/stable/scripting-ref.html" style="font-size: 9pt;" target="_blank" rel="noopener">https://splash.readthedocs.io/en/stable/scripting-ref.html</a></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Splash-api官方文档</span></font></div></li><ul><li><div><a href="https://splash.readthedocs.io/en/stable/api.html" style="font-size: 9pt; text-decoration: underline;" target="_blank" rel="noopener">https://splash.readthedocs.io/en/stable/api.html</a></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Splash的功能</span></font></div></li><ul><li><div><span style="font-size: 9pt;">异步方式处理多个网页渲染过程；</span></div></li><li><div><span style="font-size: 9pt;">获取渲染后的页面的源代码或截图；</span></div></li><li><div><span style="font-size: 9pt;">通过关闭图片渲染或者使用Adblock规则来加快页面渲染速度；</span></div></li><li><div><span style="font-size: 9pt;">可执行特定的JavaScript脚本；</span></div></li><li><div><span style="font-size: 9pt;">可通过Lua脚本来控制页面渲染过程；</span></div></li><li><div><span style="font-size: 9pt;">获取渲染的详细过程并通过HAR（HTTP Archive）格式呈现。</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Splash服务的运行</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker run -d -p 8050:8050 scrapinghub/splash</span></div></li><ul><li><div><span style="font-size: 9pt;">打开http://localhost:8050/即可看到其Web页面</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Splash-Lua脚本介绍</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Splash的运行机制</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Splash加载和操作渲染过程，可以理解是由一段Lua代码来操控</span></div></li><li><div><span style="font-size: 9pt;">Splash留出来了一个main() 函数的接口，我们可以通过编写该段函数，操作其传入的splash对象，Splash会调用其指令并执行对应的操作</span></div></li><li><div><span style="font-size: 9pt;">可以在浏览器界面编写并点击render me来启动，也可以通过调用splash-api的方式来调用</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Splash Lua脚本示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">function main(splash, args)</span></div></li><ul><li><div><span style="font-size: 9pt;">assert(splash:go(args.url))         请求url</span></div></li><li><div><span style="font-size: 9pt;">assert(splash:wait(0.5))       等待0.5s</span></div></li><li><div><span style="font-size: 9pt;">return {       返回结果</span></div></li><ul><li><div><span style="font-size: 9pt;">html = splash:html(),            获取页面源码</span></div></li><li><div><span style="font-size: 9pt;">png = splash:png(),        获取页面截图</span></div></li><li><div><span style="font-size: 9pt;">har = splash:har(),        获取请求的详细har信息</span></div></li></ul><li><div><span style="font-size: 9pt;">}</span></div></li></ul><li><div><span style="font-size: 9pt;">end</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Splash异步处理</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Splash异步的介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在脚本内调用的wait()方法类似于Python中的sleep()，其参数为等待的秒数。当Splash执行到此方法时，它会转而去处理其他任务，然后在指定的时间过后再回来继续处理。</span></div></li><li><div><span style="font-size: 9pt;">另外，这里做了加载时的异常检测。go()方法会返回加载页面的结果状态，如果页面出现4xx或5xx状态码，ok变量就为空</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Splash异步脚本示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">function main(splash, args)</span></div></li><ul><li><div><span style="font-size: 9pt;">local example_urls = {&quot;www.baidu.com&quot;, &quot;www.taobao.com&quot;, &quot;www.zhihu.com&quot;}</span></div></li><li><div><span style="font-size: 9pt;">local urls = args.urls or example_urls</span></div></li><li><div><span style="font-size: 9pt;">local results = {}</span></div></li><li><div><span style="font-size: 9pt;">for index, url in ipairs(urls) do</span></div></li><ul><li><div><span style="font-size: 9pt;">local ok, reason = splash:go(&quot;http://&quot; .. url)</span></div></li><li><div><span style="font-size: 9pt;">if ok then</span></div></li><ul><li><div><span style="font-size: 9pt;">splash:wait(2)</span></div></li><li><div><span style="font-size: 9pt;">results[url] = splash:png()</span></div></li></ul><li><div><span style="font-size: 9pt;">end</span></div></li></ul><li><div><span style="font-size: 9pt;">end</span></div></li><li><div><span style="font-size: 9pt;">return results</span></div></li></ul><li><div><span style="font-size: 9pt;">end</span></div></li></ul></ul></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Splash负载均衡的配置</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">搭建多个splash服务节点</span></font></div></li><ul><li><div><span style="font-size: 9pt;">docker run -d -p 8050:8050 scrapinghub/splash</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">配置负载均衡服务(使用nginx)</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">nginx配置节点</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 9pt;">            http {</font></div><div><font style="font-size: 9pt;">                upstream splash {</font></div><div><font style="font-size: 9pt;">                    least_conn;             </font></div><div><font style="font-size: 9pt;">                    server 41.159.27.223:8050 weight=4;</font></div><div>                    server 41.159.27.221:8050 weight=2;</div><div>                    server 41.159.27.9:8050 weight=2;</div><div>                    server 41.159.117.119:8050 weight=1;</div><div><font style="font-size: 9pt;">                }</font></div><div><font style="font-size: 9pt;">                server {</font></div><div><font style="font-size: 9pt;">                    listen 8050;</font></div><div><font style="font-size: 9pt;">                    location / {</font></div><div><font style="font-size: 9pt;">                        proxy_pass http://splash;</font></div><div><font style="font-size: 9pt;">                    }</font></div><div><font style="font-size: 9pt;">                }</font></div><div><font style="font-size: 9pt;">            }</font></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">nginx配置认证</span></font></div></li><ul><li><div><span style="font-size: 9pt;">现在Splash是可以公开访问的，如果不想让其公开访问，还可以配置认证，这仍然借助于Nginx。可以在server的location字段中添加auth_basic和auth_basic_user_file字段，具体配置如下：</span></div></li><li><div><span style="font-size: 9pt;">这里使用的用户名和密码配置放置在/etc/nginx/conf.d目录下，我们需要使用htpasswd命令创建。例如，创建一个用户名为admin的文件，相关命令如下</span></div></li><li><div><span style="font-size: 9pt;">htpasswd -c .htpasswd admin</span></div></li><li><div><span style="font-size: 9pt;">接下来就会提示我们输入密码，输入两次之后，就会生成密码文件，其内容如下：</span></div></li><li><div><span style="font-size: 9pt;">配置完成后，重启一下Nginx服务： sudo nginx -s reload</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 9pt;">                server {</font></div><div><font style="font-size: 9pt;">                    listen 8050;</font></div><div><font style="font-size: 9pt;">                    location / {</font></div><div><font style="font-size: 9pt;">                        proxy_pass <a href="http://splash/" target="_blank" rel="noopener">http://splash</a>;</font></div><div><font style="font-size: 9pt;">                        auth_basic &quot;Restricted&quot;;</font></div><div><font style="font-size: 9pt;">                        auth_basic_user_file /etc/nginx/conf.d/.htpasswd;</font></div><div><font style="font-size: 9pt;">                    }</font></div><div><font style="font-size: 9pt;">                }</font></div></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Splash对象的常用属性</span></font></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">加载参数</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">获取方法一</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">            function main(splash, args)</span></div><div><span style="font-size: 9pt;">                local url = args.url</span></div><div><span style="font-size: 9pt;">            end</span></div></div><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">获取方法二</span></font></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">            function main(splash)</span></div><div><span style="font-size: 9pt;">                local url = splash.args.url</span></div><div><span style="font-size: 9pt;">            end</span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">开启关闭javascript</span></font></div></li><ul><li><div><span style="font-size: 9pt;">splash.js_enabled = false/true</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">设置加载的超时时间</span></font></div></li><ul><li><div><span style="font-size: 9pt;">splash.resource_timeout = 2</span></div></li><ul><li><div><span style="font-size: 9pt;">单位是秒。如果设置为0或nil（类似Python中的None），代表不检测超时。</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">禁止加载图片</span></font></div></li><ul><li><div><span style="font-size: 9pt;">splash.images_enabled = true/false</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">禁止开启插件(flash等)</span></font></div></li><ul><li><div><span style="font-size: 9pt;">splash.plugins_enabled = true/false</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">滚动条</span></font></div></li><ul><li><div><span style="font-size: 9pt;">splash.scroll_position = {x=100, y=400}</span></div></li><ul><li><div><span style="font-size: 9pt;">滚动条向右滚动100像素，向下滚动400像素</span></div></li></ul></ul></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Splash对象常用方法</span></font></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">请求某链接</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">splash:go{url, baseurl=nil, headers=nil, http_method=&quot;GET&quot;, body=nil, formdata=nil}</span></div></li><ul><li><div><span style="font-size: 9pt;">url：请求的URL。</span></div></li><li><div><span style="font-size: 9pt;">baseurl：可选参数，默认为空，表示资源加载相对路径。</span></div></li><li><div><span style="font-size: 9pt;">headers：可选参数，默认为空，表示请求头。</span></div></li><li><div><span style="font-size: 9pt;">http_method：可选参数，默认为GET，同时支持POST。</span></div></li><li><div><span style="font-size: 9pt;">body：可选参数，默认为空，发POST请求时的表单数据，使用的Content-type为application/json。</span></div></li><li><div><span style="font-size: 9pt;">formdata：可选参数，默认为空，POST的时候的表单数据，使用的Content-type为application/x-www-form-urlencoded。</span></div></li><li><div><span style="font-size: 9pt;">return: 结果ok和原因reason的组合，如果ok为空，代表网页加载出现了错误，此时reason变量中包含了错误的原因</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">            function main(splash, args)</span></div><div><span style="font-size: 9pt;">                local ok, reason = splash:go{&quot;</span><a href="http://httpbin.org/post" style="font-size: 9pt;" target="_blank" rel="noopener">http://httpbin.org/post</a><span style="font-size: 9pt;">&quot;, http_method=&quot;POST&quot;, body=&quot;name=Germey&quot;}</span></div><div><span style="font-size: 9pt;">                if ok then</span></div><div><span style="font-size: 9pt;">                    return splash:html()</span></div><div><span style="font-size: 9pt;">                end</span></div><div><span style="font-size: 9pt;">            end</span></div></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">设置定时任务</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">使用示例(0.2s后获取网页截图)</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    function main(splash, args)</span></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                             local snapshots = {}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                             local timer = splash:call_later(function()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                                 snapshots[&quot;a&quot;] = splash:png()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                                 splash:wait(1.0)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                                 snapshots[&quot;b&quot;] = splash:png()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                                 end, 0.2)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                             splash:go(&quot;</span><a href="https://www.taobao.com/" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);" target="_blank" rel="noopener">https://www.taobao.com</a><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&quot;)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                             splash:wait(3.0)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                             return snapshots</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    end</span></div></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">模拟发送get请求</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></span></div></li><ul><li><div><span style="font-size: 9pt;">response = splash:http_get{url, headers=nil, follow_redirects=true}</span></div></li><ul><li><div><span style="font-size: 9pt;">url：请求URL。</span></div></li><li><div><span style="font-size: 9pt;">headers：可选参数，默认为空，请求头。</span></div></li><li><div><span style="font-size: 9pt;">follow_redirects：可选参数，表示是否启动自动重定向，默认为true</span></div></li></ul></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">            function main(splash, args)</span></div><div><span style="font-size: 9pt;">                local treat = require(&quot;treat&quot;)</span></div><div><span style="font-size: 9pt;">                local response = splash:http_get(&quot;<a href="http://httpbin.org/get" target="_blank" rel="noopener">http://httpbin.org/get</a>&quot;)</span></div><div><span style="font-size: 9pt;">                    return {</span></div><div><span style="font-size: 9pt;">                        html=treat.as_string(response.body),</span></div><div><span style="font-size: 9pt;">                        url=response.url,</span></div><div><span style="font-size: 9pt;">                        status=response.status</span></div><div><span style="font-size: 9pt;">                    }</span></div><div><span style="font-size: 9pt;">            end</span></div></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">模拟发送post请求</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></span></div></li><ul><li><div><span style="font-size: 9pt;">response = splash:http_post{url, headers=nil, follow_redirects=true, body=nil}</span></div></li><ul><li><div><span style="font-size: 9pt;">url：请求URL。</span></div></li><li><div><span style="font-size: 9pt;">headers：可选参数，默认为空，请求头。</span></div></li><li><div><span style="font-size: 9pt;">follow_redirects：可选参数，表示是否启动自动重定向，默认为true。</span></div></li><li><div><span style="font-size: 9pt;">body：可选参数，即表单数据，默认为空。</span></div></li></ul></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">            function main(splash, args)</span></div><div><span style="font-size: 9pt;">                local treat = require(&quot;treat&quot;)</span></div><div><span style="font-size: 9pt;">                local json = require(&quot;json&quot;)</span></div><div><span style="font-size: 9pt;">                local response = splash:http_post{&quot;<a href="http://httpbin.org/post" target="_blank" rel="noopener">http://httpbin.org/post</a>&quot;,    </span></div><div><span style="font-size: 9pt;">                    body=json.encode({name=&quot;Germey&quot;}),</span></div><div><span style="font-size: 9pt;">                    headers={[&quot;content-type&quot;]=&quot;application/json&quot;}</span></div><div><span style="font-size: 9pt;">                }</span></div><div><span style="font-size: 9pt;">                return {</span></div><div><span style="font-size: 9pt;">                    html=treat.as_string(response.body),</span></div><div><span style="font-size: 9pt;">                    url=response.url,</span></div><div><span style="font-size: 9pt;">                    status=response.status</span></div><div><span style="font-size: 9pt;">                }</span></div><div><span style="font-size: 9pt;">            end</span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">获取页面加载过程描述等信息</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">splash:har()        获取加载过程详细信息</span></div></li><li><div><span style="font-size: 9pt;">splash:url()        获取正在访问的url</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">页面cookie相关操作</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt;">splash:get_cookies()       获取当前页面的cookie </span></span></div></li><li><div><span style="font-size: 9pt;">cookies = splash:add_cookie{name, value, path=nil, domain=nil, expires=nil, httpOnly=nil, secure=nil}    给页面添加cookie</span></div></li><li><div><span style="font-size: 9pt;">splash:clear_cookies()    清空当前页面所有cookie</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">设置页面大小</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">splash:get_viewport_size()    获取页面宽高</span></div></li><li><div><span style="font-size: 9pt;">splash:set_viewport_size(width, height)    设置页面宽高</span></div></li><li><div><span style="font-size: 9pt;">splash:set_viewport_full()    设置页面铺满</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">设置User-Agent</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco;"><font style="font-size: 9pt;">                    function main(splash)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                            splash:set_user_agent('Splash')</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                            splash:go(&quot;http://httpbin.org/get&quot;)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                            return splash:html()</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                    end</font></span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">设置请求头</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco;"><font style="font-size: 9pt;">                    function main(splash)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        splash:set_custom_headers({</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                [&quot;User-Agent&quot;] = &quot;Splash&quot;,</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                [&quot;Site&quot;] = &quot;Splash&quot;,</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        })</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        splash:go(&quot;http://httpbin.org/get&quot;)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        return splash:html()</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                    end</font></span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">节点操作</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">element = splash:select(&quot;#kw&quot;)    通过css选择器选择元素, 返回选中的第一个元素</span></div></li><li><div><span style="font-size: 9pt;">element = splash:select_all(&quot;#kw&quot;)    通过css选择器选择元素, 返回选中所有元素</span></div></li><li><div><span style="font-size: 9pt;">element.send_text('test')     向节点输入文本</span></div></li><li><div><span style="font-size: 9pt;">element.mouse_click()    点击节点</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">等待wait</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">ok, reason = splash:wait{time, cancel_on_redirect=false, cancel_on_error=true}</span></div></li><ul><li><div><span style="font-size: 9pt;">time：等待的秒数。</span></div></li><li><div><span style="font-size: 9pt;">cancel_on_redirect：可选参数，默认为false，表示如果发生了重定向就停止等待，并返回重定向结果。</span></div></li><li><div><span style="font-size: 9pt;">cancel_on_error：可选参数，默认为false，表示如果发生了加载错误，就停止等待。</span></div></li><li><div><span style="font-size: 9pt;">return: 结果ok和原因reason的组合。</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;">            function main(splash)</span></div><div><span style="font-size: 9pt;">                splash:go(&quot;</span><a href="https://www.taobao.com/" style="font-size: 9pt;" target="_blank" rel="noopener">https://www.taobao.com</a><span style="font-size: 9pt;">&quot;)</span></div><div><span style="font-size: 9pt;">                splash:wait(2)</span></div><div><span style="font-size: 9pt;">                return {html=splash:html()}</span></div><div><span style="font-size: 9pt;">            end</span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">调用JavaScript定义的方法</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                    function main(splash, args)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                            local get_div_count = splash:jsfunc([[</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                    function () {</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                    var body = document.body;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                    var divs = body.getElementsByTagName('div');</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                    return divs.length;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                    }</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                    ]])</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                            splash:go(&quot;https://www.baidu.com&quot;)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                            return (&quot;There are %s DIVs&quot;):format(get_div_count())</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                    end</font></span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">执行JavaScript代码(表达式类)</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">local title = splash:evaljs(&quot;document.title&quot;)  执行JavaScript代码并返回最后一条JavaScript语句的返回结果</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">执行JavaScript代码(声明类)</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco;"><font style="font-size: 9pt;">                    function main(splash, args)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                         splash:go(&quot;https://www.baidu.com&quot;)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                          splash:runjs(&quot;foo = function() { return 'bar' }&quot;)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                          local result = splash:evaljs(&quot;foo()&quot;)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                          return result</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                    end</font></span></div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">加载js代码</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">此方法只负责加载JavaScript代码或库，不执行任何操作。如果要执行操作，可以调用evaljs()或runjs()</span></div></li><li><div><span style="font-size: 9pt;">ok, reason = splash:autoload{source_or_url, source=nil, url=nil}</span></div></li><ul><li><div><span style="font-size: 9pt;">source_or_url：JavaScript代码或者JavaScript库链接。</span></div></li><li><div><span style="font-size: 9pt;">source：JavaScript代码。</span></div></li><li><div><span style="font-size: 9pt;">url：JavaScript库链接</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                    function main(splash, args)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                          splash:autoload([[</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                  function get_document_title(){</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                         return document.title;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                            }</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                          ]])</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                          splash:go(&quot;https://www.baidu.com&quot;)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                          return splash:evaljs(&quot;get_document_title()&quot;)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                    end</font></span></div></div><ul><li><div><span style="font-size: 13.3333px;"><span style="font-size: 13.3333px; font-weight: bold;">页面内容的操作方法</span></span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">splash:set_content(&quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;hello&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;)     添加页面内容</span></div></li><li><div><span style="font-size: 9pt;">splash:html()    获取当前页面源码</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">获取png/jpeg格式的页面截图</span></font></div></li><ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold;">使用方法</span></span></div></li><ul><li><div><span style="font-size: 9pt;">splash:png()</span></div></li><li><div><span style="font-size: 9pt;">splash:jpeg()</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">设置代理</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                    function main(splash, args)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                           request = splash:on_request(function(request)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                    <span style="font-family: Monaco; color: rgb(51, 51, 51);">request:set_proxy{host, port, username=nil, password=nil, type='HTTP/SOCKS5')</span></font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                    end)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                    end</font></span></div></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Splash-API的使用</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Splash API的介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Splash Lua脚本的用法，但这些脚本是在Splash页面中测试运行的</span></div></li><li><div><span style="font-size: 9pt;">Splash API就是我们可以通过python程序使用Splash服务的方法</span></div></li><li><div><span style="font-size: 9pt;">Splash给我们提供了一些HTTP API接口，我们只需要请求这些接口并传递相应的参数即可</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">常用Splash API</span></font></div></li><li><div><span style="font-size: 10pt; font-weight: bold;">render.png</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">接口介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">通过width和height来控制宽高，它返回的是PNG格式的图片二进制数据。示例如下</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">常用参数</span></div></li><ul><li><div><span style="font-size: 9pt;">width、height、render_all</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">使用示例</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        import requests</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        url = 'http://localhost:8050/render.png?url=https://www.jd.com&amp;wait=5&amp;width=1000&amp;height=700'</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        response = requests.get(url)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        with open('taobao.png', 'wb') as f:</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                               f.write(response.content)</font></span></div></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">render.html</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">接口介绍</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">此接口用于获取JavaScript渲染的页面的HTML代码，接口地址就是Splash的运行地址加此接口名称</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">常用参数</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">url 、baseurl、timeout、resource_timeout、wait、proxy、js、js_source、filter、allowed_domin</span></div></li><li><div><span style="font-size: 9pt; font-weight: bold;">allowed_content_types、viewport、images、headers、body、heep_method、save_args、load_args</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">使用示例</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>            import requests</div><div>            url = 'http://localhost:8050/render.html?url=https://www.baidu.com'</div><div>            response = requests.get(url)</div><div>            print(response.text)</div></div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">render.har</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">接口介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">此接口用于获取页面加载的HAR数据</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">curl</span> <a href="http://localhost:8050/render.har?url=https://www.jd.com&amp;wait=5" style="font-size: 9pt;" target="_blank" rel="noopener">http://localhost:8050/render.har?url=https://www.jd.com&amp;wait=5</a></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">render.json</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">接口介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">此接口包含了前面接口的所有功能，返回结果是JSON格式</span></div></li><li><div><span style="font-size: 9pt;">以JSON形式返回了相应的请求数据</span></div></li><li><div><span style="font-size: 9pt;">可以通过传入不同参数控制其返回结果。比如，传入html=1，返回结果即会增加源代码数据；传入png=1，返回结果即会增加页面PNG截图数据；传入har=1，则会获得页面HAR数据</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;">curl</span> <a href="http://localhost:8050/render.json?url=https://httpbin.org" style="font-size: 9pt;" target="_blank" rel="noopener">http://localhost:8050/render.json?url=https://httpbin.org</a></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">execute</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">接口介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">用此接口便可实现与Lua脚本的对接</span></div></li><li><div><span style="font-size: 9pt;">可以用该接口，通过原生的Lua脚本来调用splash</span></div></li><li><div><span style="font-size: 9pt;">可以通过lua_source参数传递Lua脚本给splash服务器进行请求和渲染服务</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">常用参数</span></div></li><ul><li><div><span style="font-size: 9pt;">timeout、allowed_domains、proxy、filters、save_args、load_args</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">使用示例</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco;"><font style="font-size: 9pt;">                        import requests</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        from urllib.parse import quote</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        lua = '''</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                            function main(splash)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                                return 'hello'</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                            end</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                         '''</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        url = 'http://localhost:8050/execute?lua_source=' + quote(lua)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        response = requests.get(url)</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 9pt;">                        print(response.text)</font></span></div></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Puppeteer</title>
      <link href="/2017/01/25/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Puppeteer%E7%88%AC%E5%8F%96%E5%8A%A8%E6%80%81HTML/"/>
      <url>/2017/01/25/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Puppeteer%E7%88%AC%E5%8F%96%E5%8A%A8%E6%80%81HTML/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="font-size: 14pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Puppeteer简介</span></font></div><div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Puppeteer介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Puppeteer 是一个node库，他提供了一组用来操纵Chrome的API, 通俗来说就是一个 headless chrome浏览器 (当然你也可以配置成有UI的，默认是没有的)。既然是浏览器，那么我们手工可以在浏览器上做的事情 Puppeteer 都能胜任, 另外，Puppeteer 翻译成中文是”木偶”意思，所以听名字就知道，操纵起来很方便，你可以很方便的操纵她去实现：</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">运行环境</span></font></div></li><ul><li><div><span style="font-size: 9pt;">1. Nodejs 的版本不能低于 v7.6.0, 需要支持 async, await.</span></div></li><li><div><span style="font-size: 9pt;">2. 需要最新的 chrome driver, 这个你在通过 npm 安装 Puppeteer 的时候系统会自动下载的</span></div></li><ul><li><div><span style="font-size: 9pt;">npm install puppeteer</span></div></li></ul><li><div><span style="font-size: 9pt;">3.安装pyppeteer</span></div></li><ul><li><div><span style="font-size: 9pt;">pip install pyppeteer</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Puppeteer的官方文档</span></font></div></li><ul><li><div><a href="https://github.com/miyakogi/pyppeteer" style="font-size: 9pt;" target="_blank" rel="noopener">https://github.com/miyakogi/pyppeteer</a></div></li></ul></ul></div><div><ul><li><div><font style="font-size: 12pt;"><span style="white-space: nowrap;"><span style="font-size: 12pt; font-weight: bold;">知识前提</span></span></font></div></li><ul><li><div><span style="font-size: 9pt; color: rgb(64, 64, 64);">Puppeteer 几乎所有的操作都是 异步的, 为了使用大量的 then 使得代码的可读性降低，本文所有 demo 代码都是用 async, await 方式实现</span></div></li><li><div><font color="#404040" style="font-size: 9pt;"><span style="white-space: nowrap; font-size: 9pt; color: rgb(64, 64, 64);">由于文档上大量使用async和await关键字,  需要提前了解Async/Await 异步编程</span></font></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="white-space: nowrap;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Puppeteer的基本用法</span></span></font></div><div><ul><li><div><font style="font-size: 12pt;"><span style="white-space: nowrap;"><span style="font-size: 12pt; font-weight: bold;">python示例</span></span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Puppeteer爬取动态HTML_files/Image.png" type="image/png" data-filename="Image.png" style="color: rgb(64, 64, 64);" width="402"></span></div></li><li><div><span style="font-size: 9pt;">1. 先通过launch() 创建一个浏览器实例 Browser 对象</span></div></li><li><div><span style="font-size: 9pt;">2. 然后通过 Browser 对象创建页面 Page 对象</span></div></li><li><div><span style="font-size: 9pt;">3. 然后 page.goto() 跳转到指定的页面</span></div></li><li><div><span style="font-size: 9pt;">4. 调用 page.screenshot() 对页面进行截图</span></div></li><li><div><span style="font-size: 9pt;">5. 关闭浏览器</span></div></li></ul></ul><div><span style="white-space: nowrap;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Puppeteer的常用属性/方法/对象</span></font></span></div></div><div><ul><li><div><font style="font-size: 12pt;"><span style="white-space: nowrap;"><span style="font-size: 12pt; color: rgb(64, 64, 64); font-weight: bold;">launch(options)方法</span></span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="white-space: nowrap;"><span style="font-size: 10pt; color: rgb(64, 64, 64); font-weight: bold;">介绍</span></span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="white-space: nowrap; font-size: 9pt; color: rgb(64, 64, 64);">使用launch 方法会返回一个browser对象, 创建browser对象的时候可以选择性的配置如下选项</span></font></div></li></ul><li><div><font style="font-size: 10pt;"><span style="white-space: nowrap;"><span style="font-size: 10pt; color: rgb(64, 64, 64); font-weight: bold;">常用参数</span></span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Puppeteer爬取动态HTML_files/Image [1].png" type="image/png" data-filename="Image.png" style="color: rgb(64, 64, 64);" width="735"></span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Browser对象</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Browser对象相当于selenium的driver对象, 常用的有如下方法</span></div></li><li><div><span style="font-size: 9pt;">当返回值是promise的时候, 在python中返回的是异步函数, 需要这样的函数需要使用await关键字调用</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">常用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Puppeteer爬取动态HTML_files/Image [2].png" type="image/png" data-filename="Image.png" width="630"></span></div></li><li><div><span style="font-size: 12px;">browser.userAgent()    设置browser的请求头</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Page对象</span></font></div></li><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Page对象相当于selenium的每一个标签页</span></div></li><li><div><span style="font-size: 9pt;">我们对页面的元素进行操作就是操作page对象</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">常用方法</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">常用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">page.content()     获取页面的源码</span></div></li><li><div><span style="font-size: 9pt;">page.cookies(...urls)      获取当前的cookies</span></div></li><li><div><span style="font-size: 9pt;">page.goto()     请求某个页面</span></div></li><li><div><span style="font-size: 9pt;">page.click(selector[, options])     点击元素</span></div></li><li><div><span style="font-size: 9pt;">page.focus(selector)    聚焦某元素</span></div></li><li><div><span style="font-size: 9pt;">page.close(options)     关闭当前标签页</span></div></li><li><div><span style="font-size: 9pt;">page.url()   当前页面的url</span></div></li><li><div><span style="font-size: 9pt;">page.reload(options)     重新加载页面</span></div></li><li><div><span style="font-size: 9pt;">page.type(selector, text[, options])    向聚焦的元素框中输入内容</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">获取元素</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Page.quirySelector()      选择一个元素</span></div></li><li><div><span style="font-size: 9pt;">Page.querySelectorAll()     选择一组元素</span></div></li><li><div><span style="font-size: 9pt;">Page.xpath()     通过xpath选择元素</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-family: &quot;Open Sans&quot;; font-weight: bold;">evaluate()方法(运行js脚本/获取元素的属性)</span></font></div></li><ul><li><div><span style="font-size: 9pt; font-family: &quot;Open Sans&quot;;">evaluate接收字符串为参数， 字符串的内容可以使javascript的原生函数， 或者是表达式， 当字符串的内容是表达式的时候我们通常可以用来获取元素的属性， 当字符串的内容是js函数的时候通常可以用来在当前页面执行js代码</span></div></li><li><div><span style="font-size: 9pt; font-family: &quot;Open Sans&quot;;">当字符串的内容是表达式的时候可以用force_expr属性来强调, 不然可能会识别失败报错</span></div></li><li><div><span style="font-size: 9pt; font-family: &quot;Open Sans&quot;;">示例：</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Puppeteer爬取动态HTML_files/Image [3].png" type="image/png" data-filename="Image.png" style="font-family: Open Sans;" width="422"></span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">修改driver的配置</span></font></div></li><ul><li><div><span style="font-size: 9pt;">1. Page.setViewport() 修改浏览器视窗大小</span></div></li><li><div><span style="font-size: 9pt;">2. Page.setUserAgent() 设置浏览器的 UserAgent 信息</span></div></li><li><div><span style="font-size: 9pt;">3. Page.emulateMedia() 更改页面的CSS媒体类型，用于进行模拟媒体仿真。 可选值为 “screen”, “print”, “null”, 如果设置为 null 则表示禁用媒体仿真。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">键盘keyboard</span></font></div></li><ul><li><div><span style="font-size: 9pt;">keyboard.down(key[, options]) 触发 keydown 事件</span></div></li><li><div><span style="font-size: 9pt;">keyboard.press(key[, options]) 按下某个键，key 表示键的名称，比如 ‘ArrowLeft’ 向左键，详细的键名映射请戳这里</span></div></li><li><div><span style="font-size: 9pt;">keyboard.sendCharacter(char) 输入一个字符</span></div></li><li><div><span style="font-size: 9pt;">keyboard.type(text, options) 输入一个字符串</span></div></li><li><div><span style="font-size: 9pt;">keyboard.up(key) 触发 keyup 事件</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">鼠标mouse</span></font></div></li><ul><li><div><span style="font-size: 9pt;">mouse.click(x, y, [options]) 移动鼠标指针到指定的位置，然后按下鼠标，这个其实 mouse.move 和 mouse.down 或 mouse.up 的快捷操作</span></div></li><li><div><span style="font-size: 9pt;">mouse.down([options]) 触发 mousedown 事件，options 可配置:</span></div></li><ul><li><div><span style="font-size: 9pt;">options.button 按下了哪个键，可选值为[left, right, middle], 默认是 left, 表示鼠标左键</span></div></li><li><div><span style="font-size: 9pt;">options.clickCount 按下的次数，单击，双击或者其他次数</span></div></li><li><div><span style="font-size: 9pt;">delay 按键延时时间</span></div></li></ul><li><div><span style="font-size: 9pt;">mouse.move(x, y, [options]) 移动鼠标到指定位置， options.steps 表示移动的步长</span></div></li><li><div><span style="font-size: 9pt;">mouse.up([options]) 触发 mouseup 事件</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">waitFor()等待方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">page.waitFor(selectorOrFunctionOrTimeout[, options[, …args]]) 下面三个的综合 API</span></div></li><li><div><span style="font-size: 9pt;">page.waitForFunction(pageFunction[, options[, …args]]) 等待 pageFunction 执行完成之后</span></div></li><li><div><span style="font-size: 9pt;">page.waitForNavigation(options) 等待页面基本元素加载完之后，比如同步的 HTML, CSS, JS 等代码</span></div></li><li><div><span style="font-size: 9pt;">page.waitForSelector(selector[, options]) 等待某个选择器的元素加载之后，这个元素可以是异步加载的，这个 API 非常有用，你懂的。</span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold;">事件的监听</span></span></div></li><ul><li><div><span style="font-size: 12px;">使用方法</span></div></li><ul><li><div><span style="font-size: 12px;">Page.on(&quot;event&quot;, callback)</span></div></li><ul><li><div><span style="font-size: 12px;">event: 事件名称</span></div></li><li><div><span style="font-size: 12px;">callback: 监听到事件后执行的回调函数</span></div></li></ul></ul><li><div><span style="font-size: 12px;">所有可以监听的事件</span></div></li><ul><li><div><img src="/e_img/Puppeteer爬取动态HTML_files/Image [4].png" type="image/png" data-filename="Image.png" width="240"></div></li></ul></ul></ul></ul></ul><div><br></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">官方文档介绍的Python使用Puppeteer的区别</span></font></div></div></div><div><ul><h3 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">Keyword arguments for options</span></span></h3><li style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">Puppeteer uses object (dictionary in python) for passing options to functions/methods. Pyppeteer accepts both dictionary and keyword arguments for options.</span></span></div></li><li style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">Dictionary style option (similar to puppeteer):</span></span></div></li><li style="box-sizing: border-box; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">browser</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">=</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">await</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">launch({</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">'</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">headless</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">'</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">:</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(0, 92, 197); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">True</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">})</span></div></li><li style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">Keyword argument style option (more pythonic, isn't it?):</span></span></div></li><li style="box-sizing: border-box; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">browser</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">=</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">await</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">launch(</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(227, 98, 9); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">headless</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">=</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(0, 92, 197); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">True</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span></div></li><h3 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">Element selector method name (</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 12pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">$</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">-&gt;</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 12pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">querySelector</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">)</span></font></h3><li style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 9pt;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">In python,</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">$</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">is not usable for method name. So pyppeteer uses</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Page.querySelector()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">/</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Page.querySelectorAll()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">/</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Page.xpath()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">instead of</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Page.$()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">/</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Page.$$()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">/</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Page.$x()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">. Pyppeteer also has shorthands for these methods,</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Page.J()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Page.JJ()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">, and</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Page.Jx()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">.</span></font></div></li><h3 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">Arguments of</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 12pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">Page.evaluate()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">and</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 12pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.25;">Page.querySelectorEval()</span></font></h3><li style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 9pt;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">Puppeteer's version of</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">evaluate()</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">takes JavaScript raw function or string of JavaScript expression, but pyppeteer takes string of JavaScript. JavaScript strings can be function or expression. Pyppeteer tries to automatically detect the string is function or expression, but sometimes it fails. If expression string is treated as function and error is raised, add</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(27, 31, 35, 0.047); border-radius: 3px; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">force_expr=True</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">option, which force pyppeteer to treat the string as expression.</span></font></div></li><li style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">Example to get page content:</span></span></div></li><li style="box-sizing: border-box; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">content</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">=</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">await</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">page.evaluate(</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">'</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">document.body.textContent</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">'</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">,</span> <span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(227, 98, 9); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">force_expr</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">=</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(0, 92, 197); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">True</span><span style="box-sizing: border-box; word-wrap: normal; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; font-size: 9pt; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span></div></li><li style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">Example to get element's inner text:</span></span></div></li><li><div style="box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><div><span style="font-size: 9pt; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">element</span> <span style="box-sizing: border-box; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">=</span> <span style="box-sizing: border-box; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">await</span> <span style="font-size: 9pt; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">page.querySelector(</span><span style="box-sizing: border-box; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">'</span><span style="box-sizing: border-box; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">h1</span><span style="box-sizing: border-box; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">'</span><span style="font-size: 9pt; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">)</span></div><div><span style="font-size: 9pt; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">title</span> <span style="box-sizing: border-box; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">=</span> <span style="box-sizing: border-box; font-size: 9pt; color: rgb(215, 58, 73); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">await</span> <span style="font-size: 9pt; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">page.evaluate(</span><span style="box-sizing: border-box; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">'</span><span style="box-sizing: border-box; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">(element) =&gt; element.textContent</span><span style="box-sizing: border-box; font-size: 9pt; color: rgb(3, 47, 98); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">'</span><span style="font-size: 9pt; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; line-height: 1.45;">, element)</span></div></div></li></ul></div><div><span style="font-size: 12pt; font-weight: bold;">python实现puppeteer同步使用库</span></div><ul><li><div>github  ：  <a href="https://github.com/issacLiuUp/puppeteer" target="_blank" rel="noopener">https://github.com/issacLiuUp/puppeteer</a></div></li></ul><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Crontab定时执行爬虫</title>
      <link href="/2017/01/25/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/Crontab%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8C%E7%88%AC%E8%99%AB/"/>
      <url>/2017/01/25/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD/Crontab%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8C%E7%88%AC%E8%99%AB/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><div><font style="font-size: 12pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 12pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Crontab的使用方法(ubuntu为例)</span></font></div><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">安装cron软件</span></font></div></li><ul><li><div><span style="font-size: 9pt;">apt-get  install  cron</span></div></li></ul></ul><div><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">编辑crontab定时执行命令</span></font></div></li><ul><li><div><span style="font-size: 9pt;">进入crontab编辑界面</span></div></li><ul><li><div><span style="font-size: 9pt;">crontab  -e    进入编辑界面</span></div></li><li><div><span style="font-size: 9pt;">crontab  -l     查看当前的定时任务</span></div></li><li><div><span style="font-size: 12px;">crontab -r    删除任务</span></div></li></ul><li><div><span style="font-size: 9pt;">编辑需要被定时执行的命令</span></div></li><ul><li><div><span style="font-size: 9pt;">编辑的格式</span></div></li><ul><li><div><span style="font-size: 9pt;">分(0-59)   小时(0-23)  日(1-31)   月(1-12)  星期(0-6)  命令(command)</span></div></li></ul><li><div><span style="font-size: 9pt;">示例</span></div></li><ul><li><div><span style="font-size: 9pt;">30  7  8  *  *  ls    指定每月的8日的7:30执行ls命令</span></div></li><li><div><span style="font-size: 9pt;">*/15  *  *  *  *  ls      每15分钟执行一次ls命令</span></div></li><li><div><span style="font-size: 9pt;">0  */2  *  *  *  ls     每隔两个小时执行一次ls</span></div></li></ul><li><div><span style="font-size: 9pt;">注意点</span></div></li><ul><li><div><span style="font-size: 9pt;">* /num 代表每隔多长时间的意思</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">当一个位置使用每隔符号的时候，其前边的时间位置，不能为*</span></div></li><li><div><span style="font-size: 9pt;">星期中0表示周日</span></div></li></ul></ul></ul></ul></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">使用Crontab定时爬虫</span></font></div><div><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">编辑爬虫脚本</span></font></div></li><ul><li><div><span style="font-size: 12px;">先定义好爬虫的启动脚本， 以start.sh为例</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">给.sh文件添加可执行权限</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">chmod  +  start.sh</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">在crontab中编辑脚本文件执行时间</span></font></div></li><ul><li><div><span style="font-size: 9pt;">0  6   *  *  *  ${SPIDER_DIR}/start.sh &gt;&gt; /dev/null 2&gt;&amp;1</span></div></li></ul></ul></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫扩展功能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python 爬虫工具列表</title>
      <link href="/2017/01/23/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Python%20%E7%88%AC%E8%99%AB%E7%9A%84%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8/"/>
      <url>/2017/01/23/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Python%20%E7%88%AC%E8%99%AB%E7%9A%84%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><br></div><div style="font-size: 16px; display: inline-block;"><div style="box-sizing: border-box;"><div style="box-sizing: inherit; overflow-x: hidden; text-rendering: optimizelegibility;"><div style="box-sizing: inherit; -webkit-box-orient: vertical; -webkit-box-direction: normal; -webkit-box-align: stretch;"><div style="box-sizing: inherit; -webkit-box-orient: vertical; -webkit-box-direction: normal; -webkit-box-align: stretch;"><div style="box-sizing: inherit; -webkit-box-orient: vertical; -webkit-box-direction: normal; -webkit-box-align: stretch; background-color: rgb(255, 255, 255); background-position: initial initial; background-repeat: initial initial;"><div style="box-sizing: inherit; -webkit-box-orient: vertical; -webkit-box-direction: normal; -webkit-box-align: stretch;"><div style="box-sizing: inherit; -webkit-box-orient: vertical; -webkit-box-direction: normal; -webkit-box-align: stretch; position: relative;"><div style="box-sizing: inherit; -webkit-box-orient: vertical; -webkit-box-direction: normal; -webkit-box-align: stretch; display: block; margin-bottom: 22px;"><span style="color: rgb(51, 51, 51); font-size: 32px; font-weight: 600; line-height: 1.3;">Python 爬虫的工具列表</span></div></div><div style="box-sizing: inherit; -webkit-box-orient: vertical; -webkit-box-direction: normal; -webkit-box-align: stretch; display: block; word-break: break-word; white-space: normal; margin: 30px 0px;"><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; font-weight: 600; box-sizing: inherit;">爬虫网络库</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">通用</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//docs.python.org/3.4/library/urllib.html%3Fhighlight%3Durllib%23module-urllib" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">urllib</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7;">-网络库(stdlib)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/kennethreitz/requests" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; color: rgb(34, 85, 153); text-decoration: none;" target="_blank">requests</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">-网络库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/lorien/grab" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">grab</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7;">– 网络库(基于pycurl)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/pycurl/pycurl" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pycur</a><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7;">l – 网络库(绑定libcurl)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/shazow/urllib3" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">urllib3</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Python HTTP库，安全连接池、支持文件post、可用性高。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/jcgregorio/httplib2" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">httplib2</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 网络库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/jmcarp/robobrowser" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">RoboBrowser</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个简单的、极具Python风格的Python库，无需独立的浏览器即可浏览网页。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/hickford/MechanicalSoup" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">MechanicalSoup</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个与网站自动交互Python库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/jjlee/mechanize" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">mechanize</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">-有状态、可编程的Web浏览库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//docs.python.org/3/library/socket.html" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">socket</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 底层网络接口(stdlib)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/Mashape/unirest-python" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Unirest for Python</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Unirest是一套可用于多种语言的轻量级的HTTP库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/Lukasa/hyper" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">hyper</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Python的HTTP/2客户端。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/Anorov/PySocks" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">PySocks</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– SocksiPy更新并积极维护的版本，包括错误修复和一些其他的特征。作为socket模块的直接替换。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">异步</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/twisted/treq" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">treq</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 类似于requests的API(基于twisted)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/KeepSafe/aiohttp" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">aiohttp</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7;">– asyncio的HTTP客户端/服务器(PEP-3156)。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">网络爬虫框架</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">功能齐全的爬虫</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//docs.grablib.org/en/latest/%23grab-spider-user-manual" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">grab</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 网络爬虫框架(基于pycurl/multicur)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//scrapy.org/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">scrapy</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 网络爬虫框架(基于twisted)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/binux/pyspider" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pyspider</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个强大的爬虫系统。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/chineking/cola" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">cola</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个分布式爬虫框架。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">其他</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/scrapinghub/portia" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">portia</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 基于Scrapy的可视化爬虫。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/benoitc/restkit" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">restkit</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Python的HTTP资源工具包。它可以让你轻松地访问HTTP资源，并围绕它建立的对象。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/matiasb/demiurge" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">demiurge</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 基于PyQuery的爬虫微框架。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">HTML/XML解析器</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">通用</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//lxml.de/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">lxml</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– C语言编写高效HTML/ XML处理库。支持XPath。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//pythonhosted.org/cssselect/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">cssselect</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 解析DOM树和CSS选择器。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//pythonhosted.org/pyquery/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pyquery</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 解析DOM树和jQuery选择器。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">BeautifulSoup</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 低效HTML/ XML处理库，纯Python实现。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//html5lib.readthedocs.io/en/latest/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">html5lib</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 根据WHATWG规范生成HTML/ XML文档的DOM。该规范被用在现在所有的浏览器上。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//pythonhosted.org/feedparser/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">feedparser</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 解析RSS/ATOM feeds。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/pallets/markupsafe" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">MarkupSafe</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 为XML/HTML/XHTML提供了安全转义的字符串。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/martinblech/xmltodict" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">xmltodict</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个可以让你在处理XML时感觉像在处理JSON一样的Python模块。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/xhtml2pdf/xhtml2pdf" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">xhtml2pdf</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 将HTML/CSS转换为PDF。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/stchris/untangle" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">untangle</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 轻松实现将XML文件转换为Python对象。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">清理</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//bleach.readthedocs.io/en/latest/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Bleach</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 清理HTML(需要html5lib)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/Alir3z4/python-sanitize" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">sanitize</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 为混乱的数据世界带来清明。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: normal;">文本处理</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">用于解析和操作简单文本的库。</span></div><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">通用</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//docs.python.org/2/library/difflib.html" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">difflib</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– (Python标准库)帮助进行差异化比较。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/ztane/python-Levenshtein/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Levenshtein</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 快速计算Levenshtein距离和字符串相似度。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/seatgeek/fuzzywuzzy" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">fuzzywuzzy</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 模糊字符串匹配。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//code.google.com/p/esmre/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">esmre</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 正则表达式加速器。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/LuminosoInsight/python-ftfy" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">ftfy</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 自动整理Unicode文本，减少碎片化。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">转换</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//pypi.python.org/pypi/Unidecode" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">unidecode</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 将Unicode文本转为ASCII。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">字符编码</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/moskytw/uniout" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">uniout</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 打印可读字符，而不是被转义的字符串。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/chardet/chardet" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">chardet</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 兼容 Python的2/3的字符编码器。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/lxneng/xpinyin" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">xpinyin</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个将中国汉字转为拼音的库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/vinta/pangu.py" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pangu.py</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 格式化文本中CJK和字母数字的间距。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">Slug化</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/dimka665/awesome-slugify" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">awesome-slugify</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个可以保留unicode的Python slugify库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/un33k/python-slugify" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">python-slugify</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个可以将Unicode转为ASCII的Python slugify库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/mozilla/unicode-slugify" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">unicode-slugify</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个可以将生成Unicode slugs的工具。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/j2a/pytils" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pytils</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 处理俄语字符串的简单工具(包括pytils.translit.slugify)。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">通用解析器</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//www.dabeaz.com/ply/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">PLY</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– lex和yacc解析工具的Python实现。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//pyparsing.wikispaces.com/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pyparsing</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个通用框架的生成语法分析器。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">人的名字</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/derek73/python-nameparser" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">python-nameparser</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">-解析人的名字的组件。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">电话号码</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/daviddrysdale/python-phonenumbers" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">phonenumbers</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">-解析，格式化，存储和验证国际电话号码。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">用户代理字符串</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/selwin/python-user-agents" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">python-user-agents</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 浏览器用户代理的解析器。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/shon/httpagentparser" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">HTTP Agent Parser</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Python的HTTP代理分析器。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">特定格式文件处理</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">解析和处理特定文本格式的库。</span></div><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">通用</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/kennethreitz/tablib" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">tablib</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个把数据导出为XLS、CSV、JSON、YAML等格式的模块。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/deanmalmgren/textract" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">textract</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 从各种文件中提取文本，比如 Word、PowerPoint、PDF等。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/okfn/messytables" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">messytables</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 解析混乱的表格数据的工具。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/turicas/rows" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">rows</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个常用数据接口，支持的格式很多(目前支持CSV，HTML，XLS，TXT – 将来还会提供更多!)。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">Office</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/python-openxml/python-docx" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">python-docx</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 读取，查询和修改的Microsoft Word2007/2008的docx文件。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/python-excel/xlwt" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">xlwt / xlrd</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 从Excel文件读取写入数据和格式信息。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//xlsxwriter.readthedocs.io/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">XlsxWriter</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个创建Excel.xlsx文件的Python模块。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//www.xlwings.org/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">xlwings</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个BSD许可的库，可以很容易地在Excel中调用Python，反之亦然。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//openpyxl.readthedocs.io/en/latest/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">openpyxl</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个用于读取和写入的Excel2010 XLSX/ XLSM/ xltx/ XLTM文件的库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/brianray/mm" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Marmir</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 提取Python数据结构并将其转换为电子表格。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">PDF</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/euske/pdfminer" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">PDFMiner</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个从PDF文档中提取信息的工具。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/mstamy2/PyPDF2" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">PyPDF2</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个能够分割、合并和转换PDF页面的库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//www.reportlab.com/opensource/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">ReportLab</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 允许快速创建丰富的PDF文档。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//pypi.python.org/pypi/pdftables" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pdftables</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 直接从PDF文件中提取表格。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">Markdown</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/waylan/Python-Markdown" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Python-Markdown</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个用Python实现的John Gruber的Markdown。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/lepture/mistune" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Mistune</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 速度最快，功能全面的Markdown纯Python解析器。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//pypi.python.org/pypi/markdown2" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">markdown2</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个完全用Python实现的快速的Markdown。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">YAML</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//pyyaml.org/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">PyYAML</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个Python的YAML解析器。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">CSS</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//pypi.python.org/pypi/cssutils/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">cssutils</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个Python的CSS库。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">ATOM/RSS</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//pythonhosted.org/feedparser/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">feedparser</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 通用的feed解析器。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">SQL</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//sqlparse.readthedocs.io/en/latest/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">sqlparse</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个非验证的SQL语句分析器。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">HTTP</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/benoitc/http-parser" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">http-parser</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– C语言实现的HTTP请求/响应消息解析器。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">微格式</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/erikriver/opengraph" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">opengraph</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个用来解析Open Graph协议标签的Python模块。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">可移植的执行体</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/erocarrera/pefile" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pefile</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个多平台的用于解析和处理可移植执行体(即PE)文件的模块。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">PSD</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/psd-tools/psd-tools" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">psd-tools</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 将Adobe Photoshop PSD(即PE)文件读取到Python数据结构。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">自然语言处理</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">处理人类语言问题的库。</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//www.nltk.org/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">NLTK</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">-编写Python程序来处理人类语言数据的最好平台。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//www.clips.ua.ac.be/pattern" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Pattern</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Python的网络挖掘模块。他有自然语言处理工具，机器学习以及其它。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//textblob.readthedocs.io/en/dev/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">TextBlob</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 为深入自然语言处理任务提供了一致的API。是基于NLTK以及Pattern的巨人之肩上发展的。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/fxsjy/jieba" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">jieba</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 中文分词工具。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/isnowfy/snownlp" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">SnowNLP</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 中文文本处理库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/victorlin/loso" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">loso</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 另一个中文分词库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/duanhongyi/genius" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">genius</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 基于条件随机域的中文分词。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/saffsd/langid.py" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">langid.py</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 独立的语言识别系统。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//korean.readthedocs.io/en/latest/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Korean</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个韩文形态库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/kmike/pymorphy2" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pymorphy2</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 俄语形态分析器(词性标注+词形变化引擎)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/NAMD/pypln.backend" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">PyPLN</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 用Python编写的分布式自然语言处理通道。这个项目的目标是创建一种简单的方法使用NLTK通过网络接口处理大语言库。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">浏览器自动化与仿真</span></h3><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//selenium.googlecode.com/git/docs/api/py/api.html" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">selenium</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 自动化真正的浏览器(Chrome浏览器，火狐浏览器，Opera浏览器，IE浏览器)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//carrerasrodrigo.com.ar/Ghost.py/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Ghost.py</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 对PyQt的webkit的封装(需要PyQT)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/makinacorpus/spynner" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Spynner</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 对PyQt的webkit的封装(需要PyQT)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/cobrateam/splinter" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Splinter</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 通用API浏览器模拟器(selenium web驱动，Django客户端，Zope)。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">多重处理</span></h3><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//docs.python.org/2.7/library/threading.html" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">threading</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Python标准库的线程运行。对于I/O密集型任务很有效。对于CPU绑定的任务没用，因为python GIL。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//docs.python.org/2.7/library/multiprocessing.html" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">multiprocessing</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 标准的Python库运行多进程。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//www.celeryproject.org/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">celery</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 基于分布式消息传递的异步任务队列/作业队列。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//docs.python.org/3/library/concurrent.futures.html" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">concurrent-futures</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– concurrent-futures 模块为调用异步执行提供了一个高层次的接口。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">异步</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">异步网络编程库</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//docs.python.org/3/library/asyncio.html" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">asyncio</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– (在Python 3.4 +版本以上的 Python标准库)异步I/O，时间循环，协同程序和任务。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//twistedmatrix.com/trac/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Twisted</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 基于事件驱动的网络引擎框架。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//www.tornadoweb.org/en/stable/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Tornado</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个网络框架和异步网络库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/quantmind/pulsar" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pulsar</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Python事件驱动的并发框架。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/dieseldev/diesel" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">diesel</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Python的基于绿色事件的I/O框架。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//www.gevent.org/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">gevent</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个使用greenlet 的基于协程的Python网络库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//eventlet.net/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">eventlet</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 有WSGI支持的异步框架。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/madisonmay/Tomorrow" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Tomorrow</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 异步代码的奇妙的修饰语法。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">队列</span></h3><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//www.celeryproject.org/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">celery</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 基于分布式消息传递的异步任务队列/作业队列。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/coleifer/huey" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">huey</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 小型多线程任务队列。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/pricingassistant/mrq" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">mrq</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Mr. Queue – 使用redis &amp; Gevent 的Python分布式工作任务队列。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//python-rq.org/docs/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">RQ</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 基于Redis的轻量级任务队列管理器。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/rdegges/simpleq" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">simpleq</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个简单的，可无限扩展，基于Amazon SQS的队列。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/YelpArchive/python-gearman" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">python-gearman</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Gearman的Python API。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">云计算</span></h3><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//docs.picloud.com/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">picloud</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 云端执行Python代码。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//www.dominodatalab.com/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">dominoup.com</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 云端执行R，Python和matlab代码。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">电子邮件</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">电子邮件解析库</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/mailgun/flanker" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">flanker</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 电子邮件地址和Mime解析库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/mailgun/talon" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Talon</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Mailgun库用于提取消息的报价和签名。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; font-weight: 600; box-sizing: inherit;">网址和网络地址操作</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">解析/修改网址和网络地址库。</span></div><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">URL</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/gruns/furl" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">furl</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个小的Python库，使得操纵URL简单化。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/codeinthehole/purl" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">purl</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个简单的不可改变的URL以及一个干净的用于调试和操作的API。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//docs.python.org/3/library/urllib.parse.html" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">urllib.parse</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 用于打破统一资源定位器(URL)的字符串在组件(寻址方案，网络位置，路径等)之间的隔断，为了结合组件到一个URL字符串，并将“相对URL”转化为一个绝对URL，称之为“基本URL”。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/john-kurkowski/tldextract" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">tldextract</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 从URL的注册域和子域中准确分离TLD，使用公共后缀列表。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">网络地址</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/drkjam/netaddr" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">netaddr</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 用于显示和操纵网络地址的Python库。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">网页内容提取</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">提取网页内容的库。</span></div><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">HTML页面的文本和元数据</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/codelucas/newspaper" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">newspaper</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 用Python进行新闻提取、文章提取和内容策展。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/Alir3z4/html2text" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">html2text</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 将HTML转为Markdown格式文本。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/grangier/python-goose" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">python-goose</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– HTML内容/文章提取器。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/michaelhelmick/lassie" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">lassie</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 人性化的网页内容检索工具</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/coleifer/micawber" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">micawber</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个从网址中提取丰富内容的小库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/miso-belica/sumy" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">sumy</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">-一个自动汇总文本文件和HTML网页的模块</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/vinta/Haul" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Haul</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个可扩展的图像爬虫。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/buriy/python-readability" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">python-readability</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– arc90 readability工具的快速Python接口。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/scrapy/scrapely" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">scrapely</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 从HTML网页中提取结构化数据的库。给出了一些Web页面和数据提取的示例，scrapely为所有类似的网页构建一个分析器。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">视频</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=http%3A//rg3.github.io/youtube-dl/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">youtube-dl</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个从YouTube下载视频的小命令行程序。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">y</span><a href="http://link.zhihu.com/?target=https%3A//you-get.org/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">ou-get</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– Python3的YouTube、优酷/ Niconico视频下载器。</span></li></ul><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">维基</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/WikiTeam/wikiteam" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">WikiTeam</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 下载和保存wikis的工具。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">WebSocket</span></h3><div style="box-sizing: inherit; margin: 20px 0px;"><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">用于WebSocket的库。</span></div><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/crossbario/crossbar/" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">Crossbar</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 开源的应用消息传递路由器(Python实现的用于Autobahn的WebSocket和WAMP)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/crossbario/autobahn-python" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">AutobahnPython</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 提供了WebSocket协议和WAMP协议的Python实现并且开源。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/Lawouach/WebSocket-for-Python" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">WebSocket</a><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">-for-Python – Python 2和3以及PyPy的WebSocket客户端和服务器库。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">DNS解析</span></h3><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/YoSmudge/dnsyo" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">dnsyo</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 在全球超过1500个的DNS服务器上检查你的DNS。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/saghul/pycares" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pycares</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– c-ares的接口。c-ares是进行DNS请求和异步名称决议的C语言库。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255); font-weight: 600; box-sizing: inherit;">计算机视觉</span></h3><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/opencv/opencv" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">OpenCV</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 开源计算机视觉库。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/sightmachine/SimpleCV" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">SimpleCV</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 用于照相机、图像处理、特征提取、格式转换的简介，可读性强的接口(基于OpenCV)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/luispedro/mahotas" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">mahotas</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 快速计算机图像处理算法(完全使用 C++ 实现)，完全基于 numpy 的数组作为它的数据类型。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; font-weight: 600; box-sizing: inherit;">代理服务器</span></h3><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/shadowsocks/shadowsocks" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; color: rgb(34, 85, 153); text-decoration: none;" target="_blank">shadowsocks</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– 一个快速隧道代理，可帮你穿透防火墙(支持TCP和UDP，TFO，多用户和平滑重启，目的IP黑名单)。</span></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/benoitc/tproxy" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">tproxy</a> <span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 1.7; background-color: rgb(255, 255, 255);">– tproxy是一个简单的TCP路由代理(第7层)，基于Gevent，用Python进行配置。</span></li></ul><h3 style="box-sizing: inherit; margin: 20px 0px; font-size: 24px;"><span style="font-size: 24px; color: rgb(51, 51, 51); line-height: 1.7; font-weight: 600; box-sizing: inherit;">其他Python工具列表</span></h3><ul style="box-sizing: inherit; padding: 0px 0px 0px 40px; margin: 20px 0px;"><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/vinta/awesome-python" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">awesome-python</a></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/kirang89/pycrumbs/blob/master/pycrumbs.md" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; background-color: rgb(255, 255, 255); color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pycrumbs</a></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/checkcheckzz/python-github-projects" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; color: rgb(34, 85, 153); text-decoration: none;" target="_blank">python-github-projects</a></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/rasbt/python_reference" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; color: rgb(34, 85, 153); text-decoration: none;" target="_blank">python_reference</a></li><li style="box-sizing: inherit; margin-top: 10px; list-style-type: initial; list-style-position: outside;"><a href="http://link.zhihu.com/?target=https%3A//github.com/svaksha/pythonidae" rel="nofollow noreferrer" style="box-sizing: inherit; word-break: break-all; cursor: pointer; border-bottom-width: 0px; font-size: 16px; line-height: 1.7; color: rgb(34, 85, 153); text-decoration: none;" target="_blank">pythonidae</a></li></ul></div></div></div></div></div></div></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>数据提取-json/Xpath</title>
      <link href="/2017/01/13/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96%20jsonXpath/"/>
      <url>/2017/01/13/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96%20jsonXpath/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">数据提取介绍</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">什么是数据提取</span></font></div></li><ul><li><div><span style="font-size: 9pt;">简单的来说，数据提取就是从响应中获取我们想要的数据的过程</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">响应数据的分类</span></font></div></li><ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">非结构化数据：html中的数据</span></div></li><ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">没有结构没有规律的数据，避难提取，需要使用正则、XPATH等方法将数据提取出来</span></div></li></ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">结构化数据：json、xml等</span></div></li><ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">数据的格式比较有规律，转化和提取很方便</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">数据的处理方法</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">非结构化数据的提取</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">正则表达式、xpath</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">结构化数据</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">将响应内容转化为python的字段数据类型，再进行数据的筛选</span></div></li></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">数据提取的方法</span></font></span></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">结构化的数据提取JSON</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">JSON数据的介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式，它使得人们很容易的进行阅读和编写。同时也方便了机器进行解析和生成。Json在数据交换中起到了一个载体的作用，承载着相互传递的数据，比如网站前台与后台之间的数据交互。</span></div></li><li><div><span style="line-height: 13.6px; font-size: 9pt;">由于把json数据转化为python的字典格式的数据类型比较简单，所以在爬虫的时候，如果能找到返回json数据的url，尽量使用这用url的响应数据；</span></div></li><li><div><img src="/e_img/数据提取 jsonXpath_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="171"></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">json数据类型和python中一些数据类型的对应关系</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/数据提取 jsonXpath_files/Image [1].png" type="image/png" data-filename="Image.png" width="192"></span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">怎么找到响应json数据的响应</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">请求手机版的网页，在响应中普遍会使用json数据的响应形式</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">抓包手机app软件</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">json字符串——python字典类型转化方法</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">将python数据格式化打印</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">pprint(json_str)</span></font></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">将json字符串转化为python风格的字典</span></div></li><ul><li><div><span style="font-size: 9pt;">json.loads(</span><span style="font-size: 9pt; line-height: 13.6px;">json_str</span><span style="font-size: 9pt;">)         </span><span style="font-size: 9pt; line-height: 1.45;">返回json字符串转化后的字典</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">json字符串转化为python的字典类型数据</span></font></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">将python字典数据转化为json字符串</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">json.dumps(python_dict, ensure_ascii=False, indent=4)       返回字典转化后的json字符串</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">把python字典对象转化为json字符串</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">ensure_ascii=Fale  json数据的编码格式默认为ascii，该参数将json的编码格式变为utf-8</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">indent   将json数据格式化，在打印和写入文件的时候，会格式化数据，并且按照规定缩进</span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">将json类文件对象转化为python字典类对象</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">with open('douban.txt') as f:</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">json.load(f)             </span><span style="font-size: 9pt; line-height: 13.6px;">  返回转化后文件内容</span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">将python字典对象转化为json类文件对象：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">with open('douban.txt') as f:</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">json.dump(f, f, ensure_ascii=False, indent=2)       返回转化后文件内容</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">ensure_ascii=False  json数据的编码格式默认为ascii，该参数将json的编码格式变为utf-8</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">indent   将json数据格式化，在打印和写入文件的时候，会格式化数据，并且按照规定缩进</span></div></li></ul></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">备注：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">当我们读写数据到文件中的时候，具有read()和write()方法的对象就是类文件对象；</span></div></li></ul></ul><li><div><span style="font-size: 9pt; font-weight: bold;">处理json数据常见错误</span></div></li><ul><li><div><span style="font-size: 9pt;">loads的不是纯json字符串</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">处理方法：去数据中对应的位置去寻找错误</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">类似字典的，键值对使用单引号的数据（误以为json数据）</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">处理方法：将对应的单引号都替换成双引号，就变成了json字符串</span></font></div></li></ul></ul></ul><li><div><span style="font-weight: bold; line-height: 13.6px;">非结构化数据提取HTML</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">怎么找到html的响应</span></div></li><ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">先确定我们想要查找的内容</span></div></li><li><div><span style="line-height: 13.6px; font-size: 9pt;">在带有html的的响应中进行查找需要寻找的内容，如果存在，我们就需要通过这个响应来提取数据</span></div></li><li><div><span style="line-height: 13.6px; font-size: 9pt;">在急速版经常存在html响应</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">通过什么方式提取HTML内容中的数据</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">通过正则表达式了获取HTML页面中的目标数据（这种方法将不进行详细记录，查看正则表达式的笔记）</span></font></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">通过XPATH来获取目标数据</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">XPATH/LXML/XML的介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">XML和HTML的区别</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">XML的介绍</span></div></li><ul><li style="orphans: 2; widows: 2;"><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">Extensible Markup Language（可扩展标记语言），</span><span style="font-size: 9pt; line-height: 13.6px;">是一种标记语言，很类似 HTML</span><span style="font-size: 9pt; line-height: 13.6px;">，被设计为传输和存储数据用的一种语言，焦点是数据的内容</span><span style="font-size: 9pt; color: rgb(189, 202, 219); font-family: Georgia, serif; line-height: 13.6px;">；</span></font></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">XML数据的节点结构示例：</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/数据提取 jsonXpath_files/Image [2].png" type="image/png" data-filename="Image.png" width="411"></span></div></li><li><div><span style="font-size: 9pt;">每个XML标签我们都称之为节点，所有节点之间都有他们之间的关系如上</span></div></li></ul></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">HTML的介绍</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">HyperText Markup Language（超文本标记语言） ，显示数据以及如何更好的显示数据</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">HTML DOM 介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">Document Object Model for HTML (文档对象模型)，通过 HTML DOM，可以访问所有的 HTML 元素，连同它们所包含的文本和属性。可以对其中的内容进行修改和删除，同时也可以创建新的元素。</span></div></li></ul><li><div><span style="font-size: 9pt;">什么是XPATH</span></div></li><ul><li><div><span style="font-size: 9pt;">XPath (XML Path Language) 是一门在 XML/HTMl 文档中查找信息的语言，可用来在 XML/HTML 文档中对元素和属性进行遍历，进行数据的查找。</span></div></li><li><div><span style="font-size: 9pt;">W3School官方文档：</span><a href="http://www.w3school.com.cn/xpath/index.asp" style="font-size: 9pt;" target="_blank" rel="noopener">http://www.w3school.com.cn/xpath/index.asp</a></div></li></ul><li><div><span style="font-size: 9pt;">什么是LXML</span></div></li><ul><li><div><span style="font-size: 9pt;">lxml是一款高性能的 Python HTML/XML 解析器，我们可以利用XPath，来快速的定位特定元素以及获取节点信息，我们在爬虫中会大量使用LXML来进行数据的提取等</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">XPATH的节点选择</span></font></div></li><ul><li><div><span style="font-size: 9pt; color: rgb(167, 69, 0);">常用节点选择工具：</span></div></li><ul><li><div><span style="font-size: 9pt;">Chrome插件 XPath Helper</span></div></li><li><div><span style="font-size: 9pt;">开源的XPath表达式编辑工具:XMLQuire(XML格式文件可用)</span></div></li><li><div><span style="font-size: 9pt;">Firefox插件 XPath Checker</span></div></li></ul><li><div><span style="font-size: 9pt; color: rgb(167, 69, 0); line-height: 13.6px;">常用节点选择语法</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">XPath 使用路径表达式来选取 XML 文档中的节点或者节点集。这些路径表达式和我们在常规的电脑文件系统中看到的表达式非常相似。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">通过路径选择节点</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">/        在路径最开始表示根节点，后面的/代表层级关系，可以选择当前层级的下一层元素</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">//       在最开始表示根节点，后面//代表层级关系，可以选择当前层级的所有后代元素</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">/.       选取当前节点</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">/..      选取当前节点的父节点</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">/@attribute_name    获取节点的属性</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">//@</span><span style="font-size: 9pt; line-height: 13.6px;">attribute_name      选取节点包含节点后代元素的所有属性</span></div></li></ul><li><div><span style="font-size: 9pt;">/text()     获取文本中的内容（不包含文本中的标签）</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">//text( )    获取节点包含节点后代元素的所有文本内容</span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">选择未知节点</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">/*                匹配当前节点下的所有节点元素</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">/@*            匹配当前节点的所有属性</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">/node()      匹配任意节点，用于过度，不明确目标节点和当前节点之间关系时候使用</span></div></li></ul><li><div><font style="font-size: 9pt;">节点轴的选择</font></div></li><ul><li><div><font style="font-size: 9pt;">/preceding-sibling::*    匹配节点之前的同级节点</font></div></li><li><div><font style="font-size: 9pt;">/following-sibling::*     匹配节点之后的同级节点</font></div></li><li><div><font style="font-size: 9pt;">/ancestor::*                   匹配该节点的祖先节点</font></div></li><li><div><font style="font-size: 9pt;">/descendant::*              匹配节点的子孙节点</font></div></li></ul></ul></ul></ul></ul><ul><ul><ul><li><div><font style="font-size: 9pt;">/child::*                         匹配节点的子节点</font></div></li><li><div><font style="font-size: 9pt;">/following::*                  匹配节点之后的所有节点</font></div></li><li><div><font style="font-size: 9pt;">/preceding::*                 匹配节点之前的所有节点</font></div></li><li><div><font style="font-size: 9pt;">/attribute::*                   匹配节点的所有属性</font></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">条件选择节点（条件放在括号中）----谓语</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">/book[1]                选取结果集的第一个元素</span></font></div></li><ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">XPATH选取元素的开始索引为1，和列表的起始值不一样</span></div></li></ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">/book[last()]         选取结果集的最后一个元素</span></div></li><li><div><span style="line-height: 13.6px; font-size: 9pt;">/book[last() - 1]    选取结果集的倒数第二个元素</span></div></li><li><div><span style="line-height: 13.6px; font-size: 9pt;">/book[position() &lt; 3]      选取结果集的前两个元素</span></div></li><li><div><span style="line-height: 13.6px; font-size: 9pt;">//titie[@lang]      选取结果集中带lang元素的属性的元素</span></div></li><li><div><span style="line-height: 13.6px; font-size: 9pt;">//title[@lang='eng']       选取结果集带lang属性， 且为eng的元素</span></div></li><ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">还可以加文本限制, 例如：//title[text()='下一页']</span></div></li></ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">//a[contains(text(), '下一页')]     选取结果集的文本内容包含'下一页'的元素</span></div></li><ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">还可以加属性的限制，例如：//a[contains(@class, '下一页')]</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">//a[not (</span><span style="font-size: 9pt; line-height: 13.6px;">@class='1'</span><span style="font-size: 9pt; line-height: 13.6px;">)]      表示不包含该属性的标签元素</span></font></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">选取多路径节点</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">节点表达式1 | 节点表达式2   选取节点表达式1和节点表达式2所选取的所有节点；</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">备注</span></div></li><ul><li><div><span style="font-size: 9pt;">使用chrome插件选择标签时候，选中时，选中的标签会添加属性class=&quot;xh-highlight&quot;</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">在python中XPATH的使用（lxml库）</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(167, 69, 0); line-height: 13.6px;">通过lxml使用XPATH的方法</span><span style="font-size: 9pt; color: rgb(167, 69, 0); line-height: 1.45;">  </span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">pip install lxml</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果安装lxml失败，可以尝试安装anaconda软件，基本上可以解决所有环境问题</span></div></li></ul><li><div><span style="font-size: 9pt;">from lxml import etree       到如lxml库中的etree模块</span></div></li><li><div><span style="font-size: 9pt;">html = etree.HTML(text)            将html字符串转化为Element对象</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">返回的html是Element对象</span></div></li><li><div><span style="font-size: 9pt;">Element对象可以使用xpath的方法，对html字符串进行查询和修改；</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">text可以是str类型也可以是bytes类型（当标签中存在encoding属性的时候，text一定要是bytes类型）</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">list = html.xpath(' xpath语句 ')     使用xpath语句，返回查询结果组成的列表</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">返回的是由Element节点对象组成的列表，每一个对象都可以使用Xpath方法；</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果没有内容，返回的是一个空列表</span></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">text()  获取文本内容的时候，注意，当一段文字被标签</span><span style="font-size: 9pt; line-height: 13.6px;">拆</span><span style="font-size: 9pt; line-height: 13.6px;">分成多段的时候，每遇到一个标签便会被拆分成一个列表元素</span></font></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">etree.tostring(html).decode()       将Element对象转化为字符串</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">etree.tostring(html)    返回值为</span><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">bytes</span><span style="font-size: 9pt; line-height: 1.45;">类型数据，如果需要str需要手动解码</span></font></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">备注：</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">lxml 会自动修正 html 代码，lxml会自动将html代码中的异常部分进行修改，但是有的时候，会有将代码修改错误的情况，所以这种情况我们需要查看lxml修改后的代码，再根据修改后的</span><span style="font-size: 9pt; line-height: 1.45;">代码进行操作</span></font></div></li></ul></ul></ul><div><br></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Selenium爬取动态HTML</title>
      <link href="/2017/01/13/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Selenium%E7%88%AC%E5%8F%96%E5%8A%A8%E6%80%81HTML/"/>
      <url>/2017/01/13/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Selenium%E7%88%AC%E5%8F%96%E5%8A%A8%E6%80%81HTML/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">动态HTML相关技术</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;"> JavaScript</span></font></div></li><ul><li><div><span style="font-size: 9pt;">JavaScript 是网络上最常用也是支持者最多的客户端脚本语言。它可以收集 用户的跟踪数据,不需要重载页面直接提交表单，在页面嵌入多媒体文件，甚至运行网页游戏。</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">jQuery</span></div></li><ul><li><div><span style="font-size: 9pt;">jQuery 是一个十分常见的库,70% 最流行的网站(约 200 万)和约 30% 的其他网站(约 2 亿)都在使用。一个网站使用 jQuery 的特征,就是源代码里包含了 jQuery 入口。如果你在一个网站上看到了 jQuery，那么采集这个网站数据的时候要格外小心。jQuery 可 以动态地创建 HTML 内容,只有在 JavaScript 代码执行之后才会显示。如果你用传统的方 法采集页面内容,就只能获得 JavaScript 代码执行之前页面上的内容。</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">Ajax  / DHTML</span></div></li><ul><li><div><span style="font-size: 9pt;">我们与网站服务器通信的唯一方式，就是发出 HTTP 请求获取新页面。如果提交表单之后，或从服务器获取信息之后，网站的页面不需要重新刷新，那么你访问的网站就在用Ajax 技术。</span></div></li><li><div><span style="font-size: 9pt;">Ajax 其实并不是一门语言,而是用来完成网络任务(可以认为 它与网络数据采集差不多)的一系列技术。Ajax 全称是 Asynchronous JavaScript and XML(异步 JavaScript 和 XML)，网站不需要使用单独的页面请求就可以和网络服务器进行交互 (收发信息)。</span></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">动态HTML技术的影响</span></span></font></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">动态技术的效果对爬虫的影响（</span><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">如下情况我们最好使用selenium来解决</span><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">）</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">动态生成HTML内容，在获取内容的时候，只能获取到js处理之前的内容（可能是js再次发起异步请求，或者是对内容传输过程加密，js解密显示）</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">动态的生成url地址，在请求的时候，不知道其js的处理逻辑，不能解析js处理后的url地址</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">动态的生成请求参数，在请求的时候 ，</span><span style="font-size: 9pt; line-height: 13.6px;">不知道其js的处理逻辑，</span><span style="font-size: 9pt; line-height: 13.6px;">不知道js处理后的请求参数</span></font></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">服务器端动态生成的验证码（请求同一验证码url地址，返回图片不同），这样无法通过请求url下载图片来获取当前请求的验证码</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">怎么解决</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">直接从 JavaScript 代码里采集内容（费时费力）</span></span></div></li><ul><li><div><span style="font-size: 9pt;">分析js代码的功能逻辑</span></div></li><li><div><span style="font-size: 9pt;">用python来重新实现其功能，完成参数或者内容的解析</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">用 Python 的 第三方库运行 JavaScript，直接模拟浏览器操作，并获取element中的js渲染后的代码内容。</span></span></div></li><ul><li><div><span style="font-size: 9pt;">通过使用selenium库来实现直接在浏览器上运行的效果，可以获取浏览器中elements中的源码（js解析后的内容）</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">通过模拟浏览器进行请求，不需要我们构建请求的url地址和请求参数等内容</span></div></li><li><div><span style="font-size: 9pt;">获取模拟登录后的cookie等，保持登录状态</span></div></li></ul></ul></ul><div><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">Selenium的使用</span></span></font></div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">所需工具介绍</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">selenium的介绍</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">Selenium是一个Web的自动化测试工具，最初是为网站自动化测试而开发的，Selenium 可以直接运行在浏览器上，它支持所有主流的浏览器（包括PhantomJS这些无界面的浏览器），可以接收指令，让浏览器自动加载页面，获取需要的数据，甚至页面截屏</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">使用selenium的场景</span></div></li><ul><li><div><span style="font-size: 12px; line-height: 13.6px;">在模拟登录的时候，可以模拟获取到动态的url、请求参数、等进行登录，还可以获取到cookie</span></div></li><li><div><span style="font-size: 12px; line-height: 13.6px;">获取动态HTML页面内容，即请求页面中的内容是经过js修改过动态计算生成的内容</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">各种driver的下载</span></div></li><ul><li><div><span style="font-size: 9pt;">chromedriver官网网站</span></div></li><ul><li><div><a href="https://sites.google.com/a/chromium.org/chromedriver" style="font-size: 9pt;" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver</a></div></li></ul><li><div><span style="font-size: 9pt;">chromedriver下载地址</span></div></li><ul><li><div><a href="https://chromedriver.storage.googleapis.com/index.html" style="font-size: 9pt;" target="_blank" rel="noopener">https://chromedriver.storage.googleapis.com/index.html</a></div></li></ul><li><div><span style="font-size: 9pt;">geckodriver官方网址</span></div></li><ul><li><div><a href="https://github.com/mozilla/geckodriver" style="font-size: 9pt;" target="_blank" rel="noopener">https://github.com/mozilla/geckodriver</a></div></li></ul><li><div><span style="font-size: 9pt;">geckodriver下载地址</span></div></li><ul><li><div><a href="https://github.com/mozilla/geckodriver/releases" style="font-size: 9pt;" target="_blank" rel="noopener">https://github.com/mozilla/geckodriver/releases</a></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">selenium官方文档</span></font></div></li><ul><li><div>http://selenium-python.readthedocs.io/api.html</div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">创建driver对象、并设置窗口大小</span></div></li></ul></div><div><ul><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">f</span><span style="font-size: 9pt; line-height: 1.45;">rom selenium import webdriver </span></div></li><li><div><span style="font-size: 9pt;">from selenium.webdriver import ActionChains</span></div></li><li><div><span style="font-size: 9pt;">from</span> <a href="http://selenium.webdriver.common.by/" style="font-size: 9pt;" target="_blank" rel="noopener">selenium.webdriver.common.by</a><span style="font-size: 9pt;"> import By</span></div></li><li><div><span style="font-size: 9pt;">from selenium.webdriver.support.ui import WevDriverWait</span></div></li><li><div><span style="font-size: 9pt;">from selenium.webdriver.support import export expected_conditions as EC</span></div></li><li><div><span style="font-size: 9pt;">from</span> <a href="http://selenium.webdriver.remote.command/" style="font-size: 9pt;" target="_blank" rel="noopener">selenium.webdriver.remote.command</a> <span style="font-size: 9pt;">import Command</span></div></li><li><div><span style="font-size: 9pt;">driver = webdriver.PhantomJS( )</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">driver.set_window_size(width, height)      设置浏览器的窗口大小，截图可以根据窗口大小来截取</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">driver.max_windiw( )       让窗口显示最大</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">加载网页</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">driver = webdriver.PhantomJS( )      加载浏览器driver</span></div></li><li><div><span style="font-size: 9pt;">driver.get(&quot;</span><a href="http://www.baidu.com/%22)driver.save_screenshot(%22长城.png%22" style="font-size: 9pt;" target="_blank" rel="noopener">http://www.baidu.com/&quot;)</a><span style="font-size: 9pt;">    请求url地址</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">寻找元素</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.find_element_by_id()                                  通过id找到元素</span></div></li><li><div><span style="font-size: 9pt;">driver.find_element_by_name()                           通过name属性寻找元素</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;"><span style="font-size: 9pt; line-height: 1.45;">driver.</span>find_element_by_xpath()                            通过xpath来寻找元素</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;"><span style="font-size: 9pt; line-height: 1.45;">driver.</span>find_element_by_link_text()                       通过文本内容寻找a标签</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;"><span style="font-size: 9pt; line-height: 1.45;">driver.</span>find_element_by_partial_link_text()            通过文本内容包含内容寻找a标签       </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;"><span style="font-size: 9pt; line-height: 1.45;">driver.</span>find_element_by_tag_name()                     通过标签名获取元素</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.</span><span style="font-size: 9pt; line-height: 1.45;">find_element_by_class_name()                  通过类型获取元素</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.</span><span style="font-size: 9pt; line-height: 1.45;">find_element_by_css_selector()                  通过css选择器选择元素</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">备注：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">find_element 和find_elements的区别：find_elements用来寻找多个元素, 返回一个和返回一个列表</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">by_css_selector的用法示例： #food span.dairy.aged</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">元素的交互</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">element.send_keys(“长城”)            在input元素value中输入内容</span></div></li><li><div><span style="font-size: 9pt;">element.clear()                                  清空input标签中输入的内容</span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">element.click( )                                  触发元素的事件</span></span></div></li></ul><li><div><span style="font-weight: bold;">动作链的使用</span></div></li><ul><li><div><span style="font-size: 9pt;">source_ele = driver.find_element_by_css_selector('#draggable')</span></div></li><li><div><span style="font-size: 9pt;">target_ele = driver.find_element_by_css_selector('#droppable')</span></div></li><li><div><span style="font-size: 9pt;">actions = ActionChains(driver)         创建动作链</span></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt;">actions.drag_and_drop(source_ele, target_ele)         调用动作链的方法</span></font></div></li><li><div><span style="font-size: 9pt;">actions.persorm()     执行动作链</span></div></li></ul><li><div><span style="font-weight: bold;">指定原生Js代码</span></div></li><ul><li><div><span style="font-size: 9pt;">js_code = &quot;window.scrollTo(0, document.body.scrollHeight)&quot;    定义js代码</span></div></li><li><div><span style="font-size: 9pt;">driver.execute_script(js_code)          指定js代码</span></div></li></ul><li><div><span style="font-weight: bold;">获取节点元素的属性和文本值等</span></div></li><ul><li><div><span style="font-size: 9pt;">element.</span><span style="font-size: 9pt; line-height: 13.6px;">get_attribute('属性名')     可以获取元素的属性</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">element.text                                    可以获取文本内容</span></div></li><li><div><span style="font-size: 9pt;">element.id                                        获取元素的id属性</span></div></li><li><div><span style="font-size: 9pt;">element</span><span style="font-size: 9pt; line-height: 13.6px;">.size                                     获取元素的长宽</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">element.size['width']                    获取元素的宽</span></div></li><li><div><span style="font-size: 9pt;">element.size['height']                  获取元素的高</span></div></li><li><div><span style="font-size: 9pt;">element.tag_name                       获取元素的标签名称</span></div></li><li><div><span style="font-size: 9pt;">element.location                           获取元素的坐标</span></div></li></ul><li><div><span style="font-weight: bold;">切换Frame</span></div></li><ul><li><div><span style="font-size: 9pt;">driver.switch_to.frame('frame_id' )            </span><span style="font-size: 9pt; line-height: 1.45;">切换到iframe标签页面中</span></div></li><li><div><span style="font-size: 9pt;">driver.switch_to.parent_frame()                      切换到父frame中</span></div></li><li><div><span style="font-size: 9pt;">driver.switch_to.default_content()             切换到默认的frame中</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">等待</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">隐式等待</span></div></li><ul><li><div><span style="font-size: 9pt;">等待规则</span></div></li><ul><li><div><span style="font-size: 9pt;">如果selenium没有在DOM中找到节点元素，将等待一段时间</span></div></li><li><div><span style="font-size: 9pt;">时间到达设定的时候后, 再次查找元素，若找不到元素则抛出找不到节点的异常，默认时间是0</span></div></li></ul><li><div><span style="font-size: 9pt;">等待设置方法</span></div></li><ul><li><div><span style="font-size: 9pt;">driver = webdriver.Chrome()</span></div></li><li><div><span style="font-size: 9pt;">driver.implicity_wait(10)     给driver设置了10秒的隐式等待时间</span></div></li><li><div><span style="font-size: 9pt;">driver.get('https://www.baidu.com')</span></div></li><li><div><span style="font-size: 9pt;">ele = driver.find_element_by_class_name('kw')      寻找元素, 找不到元素的话会等待10秒钟, 若还找不到元素则抛出异常</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">显示等待</span></font></div></li><ul><li><div><span style="font-size: 9pt;">等待规则</span></div></li><ul><li><div><span style="font-size: 9pt;">规定了一个最长的等待时间，如果在规定的时间内加载出来了这个节点, 就返回找到节点</span></div></li><li><div><span style="font-size: 9pt;">如果没有找点节点则抛出超时异常</span></div></li></ul><li><div><span style="font-size: 9pt;">等待设置方法</span></div></li><ul><li><div><span style="font-size: 9pt;">driver = webdriver.Chrome()</span></div></li><li><div><span style="font-size: 9pt;">driver.get('</span><a href="https://www.baidu.com/" style="font-size: 9pt;" target="_blank" rel="noopener">https://www.baidu.com</a><span style="font-size: 9pt;">')</span></div></li><li><div><span style="font-size: 9pt;">wait = WebDriverWait(driver, 10)        设置了10秒的最大显示等待时间</span></div></li><li><div><span style="font-size: 9pt;">ele = wait.until(EC.presence_of_element_located((By.ID, 'kw')))        设置等待条件，并等待寻找到节点</span></div></li><li><div><span style="font-size: 9pt;">ele_1 = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, '#bt')))    设置等待条件，并等待寻找到节点</span></div></li></ul><li><div><span style="font-size: 9pt;">常用的等待条件</span></div></li><ul><li><div><span style="font-size: 9pt;">title_is             标题是某内容</span></div></li><li><div><span style="font-size: 9pt;">title_contains             标题包含某内容</span></div></li><li><div><span style="font-size: 9pt;">presence_of_element_located               节点加载出来</span></div></li><li><div><span style="font-size: 9pt;">visibility_of_element_located                 节点课件, 传入定位元组</span></div></li><li><div><span style="font-size: 9pt;">visibility_of                    节点可见，传入节点对象</span></div></li><li><div><span style="font-size: 9pt;">presence_of_all_elements_located          所有节点加载出来</span></div></li><li><div><span style="font-size: 9pt;">text_to_be_present_in_element             某个节点中包含某文字</span></div></li><li><div><span style="font-size: 9pt;">text_to_be_present_in_element_value          某个节点值包含某文字</span></div></li><li><div><span style="font-size: 9pt;">frame_to_be_available_and_switch_to_it      加载并切换</span></div></li><li><div><span style="font-size: 9pt;">invisibility_of_element_located             节点不可见</span></div></li><li><div><span style="font-size: 9pt;">element_to_be_clickable     节点可点击</span></div></li><li><div><span style="font-size: 9pt;">element_to_be_seleted    节点可选择，传入节点对象</span></div></li><li><div><span style="font-size: 9pt;">element_located_to_be_selected     节点可选择，传入定位元组</span></div></li><li><div><span style="font-size: 9pt;">element_selection_state_to_be          传入节点对象以及状态，相等返回True, 否则返回false</span></div></li><li><div><span style="font-size: 9pt;">element_located_selection_state_to_be    传入定位元组以及状态，相等返回True，否则返回False</span></div></li><li><div><span style="font-size: 9pt;">alert_is_present    是否出现警告</span></div></li></ul></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold;">其他的等待</span></span></div></li><ul><li><div><span style="font-size: 12px;">driver.set_page_load_timeout(10)         设置页面加载的超时时间</span></div></li><li><div><span style="font-size: 9pt;">driver.set_script_timeout(10)          设置执行script脚本的超时时间</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">鼠标的移动和点击</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">鼠标的移动</span></div></li><ul><li><div><span style="font-size: 9pt;">actions = ActionChains(driver)</span></div></li><li><div><span style="font-size: 9pt;">actions.move_to_element(element).move_by_offset( lx ,</span><span style="font-size: 9pt; line-height: 1.45;"> ly )</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">actions.perform()</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">element   移动到哪个元素里面</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">lx  相对元素左边界的距离</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">ly 相对元素上边界的距离</span></div></li></ul></ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">鼠标的点击</span></div></li><ul><li><div><span style="font-size: 9pt;">from</span> <a href="http://selenium.webdriver.remote.command/" style="font-size: 9pt;" target="_blank" rel="noopener">selenium.webdriver.remote.command</a> <span style="font-size: 9pt;">import Command</span></div></li><li><div><span style="font-size: 9pt;">driver.execute(Command.MOUSE_DOWN, pamas)</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">第一个参数为时间类型</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">第二个参数为命令的附加命令，为字典类型</span></div></li></ul></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">操作driver</span></div></li><ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold;">页面请求参数相关</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.page_source                获取浏览器中element中的内容（即页面的源码）</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.current_url()                获取当前页面url地址</span></div></li><li><div><span style="font-size: 9pt;">driver.back()                          退回上一个页面</span></div></li><li><div><span style="font-size: 9pt;">driver.forward()                     返回到前面一个页面</span></div></li><li><div><span style="font-size: 9pt;">driver.flush()                          刷新当前页面</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.get_cookies()               获取所有的cookie，返回的是列表嵌套字典（存储的每个cookie信息）</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.delete_cookie(&quot;key&quot;)    删除一条cookie</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.delete_all_cookies()      删除所有的cookie内容</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">{</span><span style="font-size: 9pt; line-height: 13.6px;">cookie['name']: cookie['value'] for cookie in driver.get_cookies( )</span><span style="font-size: 9pt; line-height: 13.6px;">}   将cookie构造请requests请求参数</span></div></li><li><div><span style="font-size: 9pt;">driver.execute_script('window.open()')     开启一个浏览器的选项卡</span></div></li><li><div><span style="font-size: 9pt;">driver.switch_to_window(driver.window_handles[1])         切换到第二个选项卡窗口</span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold;">窗口截图相关</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">from PIL import Image</span></div></li><li><div><span style="font-size: 9pt;">driver.save_screenshot(&quot;长城.png&quot;)     截图浏览器，没有图形界面可以通过截图来观察界面</span></div></li><li><div><span style="font-size: 9pt;">img = Image.open(io.BytesIO(driver.get_screenshot_as_png()))            获取截图并直接读取到内存</span></div></li><li><div><span style="font-size: 9pt;">img_small = img.crop((x0, y0, x1, y1)).convert('L')     对图片进行截图，四个参数代表(左、上、右、下)坐标，并将彩图转化为灰度图</span></div></li><li><div><span style="font-size: 9pt;">img_small.save('--path--')    将图片进行保存</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">width  =  img.size[0]    获取图片的宽</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">height  =  img.size[1]    获取图片的高</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">img1.load( )[ i, j ]       获取图片该像素点的rgb值</span></div></li></ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold;">浏览器开关相关</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.close()    关闭</span><span style="font-size: 9pt; line-height: 1.45;">当前页面，当页面全部都关闭后，退出浏览器driver</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">driver.quit()      退出浏览器driver</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">selenium 的driver配置</span></div></li><ul><li><div><span style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold;">代理的设置</span></span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">phantomjs设置代理ip</span></div></li><ul><li><div><span style="font-size: 9pt;">browser=webdriver.PhantomJS(PATH_PHANTOMJS)</span></div></li><li><div><span style="font-size: 9pt;">proxy=webdriver.Proxy()</span></div></li><li><div><span style="font-size: 9pt;">proxy.proxy_type=ProxyType.MANUAL</span></div></li><li><div><span style="font-size: 9pt;">proxy.http_proxy='1.9.171.51:800'</span></div></li><li><div><span style="font-size: 9pt;">proxy.add_to_capabilities(webdriver.DesiredCapabilities.PHANTOMJS)</span></div></li><li><div><span style="font-size: 9pt;">browser.start_session(webdriver.DesiredCapabilities.PHANTOMJS)</span></div></li><li><div><span style="font-size: 9pt;">browser.get('http://1212.ip138.com/ic.asp';)</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">Chrome设置代理ip</span></div></li><ul><li><div><img src="/e_img/Selenium爬取动态HTML_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="417"></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">firefox设置代理ip</span></div></li><ul><li><div><span style="font-size: 9pt;">方法一</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Selenium爬取动态HTML_files/Image [1].png" type="image/png" data-filename="Image.png" width="337"></span></div></li></ul><li><div><span style="font-size: 9pt;">方法二</span></div></li><ul><li><div><img src="/e_img/Selenium爬取动态HTML_files/Image [2].png" type="image/png" data-filename="Image.png" width="351"></div></li></ul></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">禁用插件和无头浏览器的设置</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">chrome配置方法</span></font></div></li><ul><li><div><span style="font-size: 9pt;">设置无头浏览器</span></div></li><ul><li><div><img src="/e_img/Selenium爬取动态HTML_files/Image [3].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="414"></div></li></ul><li><div><span style="font-size: 9pt;">设置禁用图片和javascript</span></div></li><ul><li><div><img src="/e_img/Selenium爬取动态HTML_files/Image [4].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="308"></div></li></ul></ul><li><div><span style="font-size: 9pt; font-weight: bold;">firefox配置方法</span></div></li><ul><li><div><span style="font-size: 9pt;">firefox_options = webdriver.FirefoxOptions()</span></div></li><li><div><span style="font-size: 9pt;">firefox_options.set_preference(u&quot;permissions.default.stylesheet&quot;, 2)   # 禁用css</span></div></li><li><div><span style="font-size: 9pt;">firefox_options.set_preference(u&quot;permissions.default.image&quot;, 2)       # 禁用图片</span></div></li><li><div><span style="font-size: 9pt;">firefox_options.set_preference(u&quot;dom.ipc.plugins.enabled.libflashplayer.so&quot;, &quot;false&quot;)       # 禁用flash插件</span></div></li><li><div><span style="font-size: 9pt;">firefox_options.set_headless()     # 设置为无头浏览器</span></div></li><li><div><span style="font-size: 9pt;">driver = webdriver.Firefox(firefox_options=firefox_options)</span></div></li></ul></ul><li><div><span style="font-size: 9pt; font-weight: bold;">设置请求头的方法</span></div></li><ul><li><div><img src="/e_img/Selenium爬取动态HTML_files/Image [5].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="419"></div></li></ul></ul></ul></div><div><br></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python多线程爬虫</title>
      <link href="/2017/01/13/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%88%AC%E8%99%AB/"/>
      <url>/2017/01/13/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%88%AC%E8%99%AB/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">多线程爬虫所需应用</span></font></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Queue（对列对象）</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">介绍Queue</span></font></li><ul><li><span style="font-size: 9pt;">Queue是python中的标准库，可以直接import Queue引用;队列是线程间最常用的交换数据的形式。</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">Queue的作用</span></font></li><ul><li><span style="font-size: 9pt;">python下多线程</span><span style="font-size: 9pt; line-height: 1.45;">对于资源的处理，加锁是个重要的环节，因为python原生的list,dict等，都是not thread safe的，所以使用Queue，</span><span style="font-size: 9pt; line-height: 1.45;">可以不用手动添加资源锁就能解决资源竞争的问题</span><span style="font-size: 9pt; line-height: 1.45;">。</span></li><li><span style="font-size: 9pt; line-height: 1.45;">在使用Queue进行参数传递的时候，只有Queue列队中有数据，线程就可以获得并执行任务，不需要等待其他线程对数据的处理并传递，更方便数据的传递和处理；</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">使用方法</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">创建队列对象</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">from queue import Queue</span></li><li><span style="font-size: 9pt;">queue = Queue(maxsize = n)        创建一个最大容量为n的queue列队</span></li></ul><li><span style="font-size: 9pt;">将一个数值放在队列中</span></li><ul><li><span style="font-size: 9pt;">queue.put( )      向列队中添加任务，列队满后会阻塞等待</span></li><li><span style="font-size: 9pt;">myqueue.put_nowait( )    想列队中添加任务，列队满后会报错</span></li></ul><li><span style="font-size: 9pt;">将一个数值从队列中取出</span></li><ul><li><span style="font-size: 9pt;">queue.get( )     从列队中取出任务</span></li><li><span style="font-size: 9pt;">queue.get([block[, timeout]])        从列队中取出任务，超时后会报错</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">备注：从列队取出任务后，列队计数并不会减一，需要标记任务task_done</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">任务完成，列队技术减一</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">queue.task_done( )      列队计数减一</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">列队任务计数不为0时，阻塞线程</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">Queue.join( )                 列队如果不为空，阻塞主线程</span></li></ul><li><span style="font-size: 9pt;">其他查询列队状态的方法</span></li><ul><li><span style="font-size: 9pt;">Queue.qsize()              返回队列当前计数大小</span></li><li><span style="font-size: 9pt;">Queue.empty()           如果队列为空，返回True,反之False</span></li><li><span style="font-size: 9pt;">Queue.full()                  如果队列满了，返回True,反之False</span></li><li><span style="font-size: 9pt;">Queue.full                    与 maxsize 大小对应</span></li></ul></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">线程的使用（复习）</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">创建子线程</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">import threading</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">t1 = threading.Thread(target=function, args=(, ))</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">将子线程设置为守护进程</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">t1.setDeamon(True)   </span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">启动子线程</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">t1.start( )</span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">线程的使用策略</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">使用策略</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">创建不同功能任务需求的列队</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在处理时间较长的功能函数处，使用比较多的线程</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在处理时间比较快的函数处，使用比较少的线程</span></li><li><span style="font-size: 9pt; line-height: 1.45;">少创建一些线程，线程之间会进行资源的竞争，导致请求失败率增加</span></li><li><span style="font-size: 9pt; line-height: 1.45;">多设置一些最大请求次数，增加请求成功的几率</span></li><li><span style="font-size: 9pt; line-height: 1.45;">将失败的请求，任务，防止到一个列表/对列中，单独再对失败的进程进行统一执行</span></li></ul></ul></ul></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">断点续爬的思想</span></font></span></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">场景</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在我们爬取数据的时候，想要先停止爬取，将爬取的状态和数据保存，并想要下次爬取的时候再接着当前的状态继续爬取</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">实现方法</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">可以保存当前的所有的queue列队，在程序结束之前将queue对象存储到redis中</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">当下次启动程序的时候，从redis数据库中读取上次停止之前的queue对象</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">程序判断queue对象的状态，是否全部为空，如果不为空，那么便不需要再重新获取参数想queue列队中添加，直接接着之前的queue的装填进行爬取</span></li></ul></ul></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">多线程爬虫代码实例</span></font></span></div><div><ul><li><img src="/e_img/python多线程爬虫_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="879"></li><li><img src="/e_img/python多线程爬虫_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="880"></li><li><img src="/e_img/python多线程爬虫_files/Image [2].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="881"></li></ul></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Requests模块-获取页面响应</title>
      <link href="/2017/01/11/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Request%E6%A8%A1%E5%9D%97-%E8%AF%B7%E6%B1%82%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94/"/>
      <url>/2017/01/11/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/Request%E6%A8%A1%E5%9D%97-%E8%AF%B7%E6%B1%82%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">Request模块的介绍</span></span></div><div><ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">request 库的特点</span></li><ul><li><span style="font-size: 9pt;">requests的底层实现就是urllib</span></li><li><span style="font-size: 9pt;">requests在python2 和python3中通用，方法完全一样</span></li><li><span style="font-size: 9pt;">requests简单易用</span></li><li><span style="font-size: 9pt;">requests能够自动帮助我们解压(gzip压缩的等)网页内容</span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">requests的作用</span></li><ul><li><span style="font-size: 9pt;">发送网络请求，返回响应数据</span></li><li><span style="font-size: 9pt;">中文文档 API：</span><span style="text-indent: 0mm; min-height: 12pt;"><a href="http://docs.python-requests.org/zh_CN/latest/user/quickstart.html" style="font-size: 9pt;" target="_blank" rel="noopener">http://docs.python-requests.org/zh_CN/latest/user/quickstart.html</a></span></li></ul></ul><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">request/response的常用方法和属性</span></div><ul><li><span style="font-size: 10pt; font-weight: bold;">requests.get()    get请求</span></li><ul><li><span style="font-size: 9pt; font-weight: bold;">使用方法：</span></li><ul><li><span style="font-size: 9pt;">response = requests.get(url, headers=headers， params=params)    返回响应对象</span></li></ul><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">get方法的参数</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">url：为请求的url地址</span></li><li><span style="font-size: 9pt;">headers：字典形式的命名参数，传递请求头。模拟浏览器获取想获取的数据，防止反扒检测；</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：<span style="font-size: 9pt; line-height: 13.600000381469727px;">headers = {&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36&quot;}</span></span></font></li></ul><li><span style="font-size: 9pt;">params：字典形式命名参数，传递请求参数，获取想要获取的数据</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：params<span style="font-size: 9pt; line-height: 13.600000381469727px;"> = {'wd':'长城'}</span></span></font></li></ul></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">request.post()     post请求</span></li><ul><li><span style="font-size: 9pt; font-weight: bold;">使用方法：</span></li><ul><li><span style="font-size: 9pt;">response = requests.post(url, headers=headers, data= data)</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">post方法的参数</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">url：为请求的url地址（不包含锚点）</span></li><li><span style="font-size: 9pt;">headers：字典形式的命名参数，传递请求头。模拟浏览器获取想获取的数据，防止反扒检测；</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：</span><span style="font-size: 9pt; line-height: 13.600000381469727px;">headers = {&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36&quot;}</span></font></li></ul><li><span style="font-size: 9pt;">data：</span></li><ul><li><span style="font-size: 9pt;">当时普通的post请求的时候，传递的参数是字典形式命名参数</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">Formdata参数示例：data</span><span style="font-size: 9pt; line-height: 13.600000381469727px;"> = {'wd':'长城'}</span></font></li></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; line-height: 13.600000381469727px;">当时ajax异步post请求的时候，传递的的字符串形式的参数</span></font></li><ul><li><font style="font-size: 12px;"><span style="font-size: 12px; line-height: 13.600000381469727px;">Payload参数示例：data = json.dumps(</span><span style="font-size: 12px; line-height: 13.600000381469727px;">{'wd': '长城'}</span><span style="font-size: 12px; line-height: 13.600000381469727px;">)</span></font></li><li><font style="font-size: 12px;"><span style="font-size: 12px; line-height: 13.600000381469727px;">还要加上请求头 ： <span style="font-size: 9pt; line-height: 13.600000381469727px;">'Content-Type': 'application/json'</span></span></font></li></ul></ul></ul></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.600000381469727px;">requests.utils   工具</span></font></li><ul><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">requests.utils.qoute(url)     将url编码</span></li><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">requests.utils.unqoute(url)     将url进行解码</span></font></li><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">parsed = requests.utils.urlparse(url)     将url进行  协议、ip+端口、文件路径、参数等的拆分</span></font></li><ul><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">parsed.scheme       获取协议名</span></li><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">parsed.netloc    获取</span><span style="line-height: 13.600000381469727px; font-size: 9pt;">ip+端口（或者是域名+端口）</span></li><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">parsed.path    获取路径</span></li><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">parsed.params     获取问号后面的参数</span></font></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">response 响应的常用属性和方法</span></li><ul><li><span style="font-size: 9pt; font-weight: bold;">response.text  </span> <span style="font-size: 9pt;">            </span><span style="font-size: 9pt; line-height: 1.45;">获取响应内容html字符串</span></li><ul><li><span style="line-height: 1.45; font-size: 9pt;">获取html字符串，结果是`str`类型</span></li><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">其编码方式，</span><span style="font-size: 9pt; line-height: 1.45;">是requests根据响应头做出的有根据的推测，尝试使用这个编码方式来解码</span></font></li></ul><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">response.encoding</span> <span style="font-size: 9pt; line-height: 13.600000381469727px;">              规定解码的格式</span></li><ul><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">可以在使用text属性获取响应字符串之前先规定编码格式，按照设定的编码格式进行解码</span></li></ul><li><span style="font-size: 9pt; font-weight: bold;">respones.content</span> <span style="font-size: 9pt;">        获取响应内容的二进制(bytes)数据</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">通常我们在获取到内容的时候尝试对二进制数据进行解码，</span><span style="font-size: 9pt; line-height: 13.600000381469727px;">下面三种方法能够解决后续我们100%的编解码的需求</span></font></li><ul><li><span style="font-size: 9pt;">response.content.deocde()           获取二进制响应内容并解码成为utf-8编码格式的字符串</span></li><li><span style="font-size: 9pt;">response.content.deocde(&quot;gbk&quot;)         获取二进制响应内容并解码成为gbk编码格式的字符串</span></li><li><span style="font-size: 9pt;">response.text      在使用content解码失败的时候，可以尝试让request去根据推测进行解码</span></li></ul></ul><li><span style="font-size: 9pt; font-weight: bold;">response.status_code      </span> <span style="font-size: 9pt;">查看响应状态码</span></li><li><span style="font-size: 9pt; font-weight: bold;">response.request.headers</span> <span style="font-size: 9pt;">    查看请求头</span></li><li><span style="font-size: 9pt; font-weight: bold;">response.headers</span> <span style="font-size: 9pt;">     查看响应头</span></li><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">response.request.url</span> <span style="font-size: 9pt; line-height: 13.600000381469727px;">    查看响应url</span></li><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">response.url</span> <span style="font-size: 9pt; line-height: 13.600000381469727px;">      查看请求url</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">响应的url可能与请求url不同，比如304重定向，响应的url为重定向的url</span></li></ul></ul></ul><div><br></div><div><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">***找到想要请求url和请求参数的方法***</span></div><ul><li><span style="font-weight: bold; line-height: 13.600000381469727px;">寻找想要的url</span></li><ul><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">第一种情况：表单提交请求，并且表单有action属性</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">通过form表单的action属性/a标签的href属性来找到对应的请求url</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">form表单提交时获取表单中所有的name、value键值对</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">构造成字典，通过requests函数的data参数进行请求</span></li></ul><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">第二种情况：通过ajax异步发出的请求（非action表单提交请求）</span></li><ul><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">查看抓包结果，存在我们想要最多的数据会是我们想要的响应，其url为主要的请求url</span></li><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">当有一些数据不存在该主要的请求中，那说明有js进行了其他异步请求获取了数据</span></li><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">我们可以先找到其他请求的响应，找到其url地址，其url地址一般有两种构建途径</span></li><ul><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">1.一般的情况下和url相关的信息会存在主请求的响应中，我们可以通过在主响应中获取其他请求的请求url关键字，进行url的构建</span></li><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">2.有的时候url地址或参数是通过js动态生成的，这时候，我们需要去寻找对应的js文件来观察js是怎样生成的动态url和参数等（参考下面）</span></li></ul></ul></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">寻找想要的js文件（当不是通过form表单的action/a标签href</span><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">属性</span><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">提交请求的时候）</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">找到进行url请求的js文件</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">第一种方法</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">使用开发者选择工具，点击会触发请求js的元素</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">点击右边的event Listener，会获取到对应的点击事件</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">点击事件所在的js文件</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">第二种方法</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">先了解js文件中会出现的关键字，一般可以查找url中动态参数名称；</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">通过点击右上角的菜单search all file</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">查找关键字，找到后点击进入对应的js文件</span></li></ul></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">会跳转到source界面，点击{}展开代码，显示文件全部的代码</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">找到想要找的事件函数，并在想要查看实现方法的函数前边加上断点</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">通过点击右边的调试工具，可以查看函数的具体执行步骤和实现方法</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">了解了实现的方法后，可以在爬虫请求的时候，实现同样的方法，然后生成参数和url地址，进行请求</span></li></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">使用代理获取响应</span></font></span></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">什么叫代理</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在对网站爬取的时候，通过访问代理服务器，让代理服务器帮我们对目标服务器进行请求，然后通过代理服务器将响应返回给我们；</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">代理的作用</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在需要大量的进行数据的爬取的时候</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">防止在同一时间，使用同一个ip地址对同一个服务器进行大量的访问，被反扒出来</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在爬取网站的时候，通过代理服务器可以隐藏我们的真实ip地址，隐藏我们的身份，但是有的代理服务器不能隐匿我们的mac地址，如果想要隐匿我们的mac地址需要使用高匿代理服务器</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">代理服务器的原理</span></font></li><ul><li><span style="font-size: 9pt;"><img src="/e_img/Request模块-请求获取响应_files/Image.png" type="image/png" data-filename="Image.png" width="387"></span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">正向代理/反向代理</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">正向代理</span></font></li><ul><li><span style="font-size: 9pt;">在我们请求代理服务器的时候，我们知道我们的最终目标ip地址，比如我们使用代理服务器爬取百度服务器的内容</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">反向代理</span></font></li><ul><li><span style="font-size: 9pt;">我们在请求服务器的时候，不知道最终目标ip地址，比如我们在访问nginx反向代理的服务器的时候，我们只是在访问nginx服务器，我们并不知道nginx去访问哪一个ip地址</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">requests使用代理</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用方法：</span></font></li><ul><li><span style="font-size: 9pt;">requests.get(url, proxies = proxies)</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">需要参数</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">proxies：字典类型命名参数，指定代理服务器支持的协议，和代理服务器的请求地址</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：proxies = {&quot;协议&quot;:&quot;协议://ip:port&quot;}，传递代理服务器支持协议类型（http/https），和代理服务器的ip和端口</span></font></li><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">备注：<span style="font-size: 9pt; line-height: 13.600000381469727px;">proxies字典参数最多只能接受两个键值对，一个键是http，一个键是https，定义在进行http/https请求的时候分别使用的代理服务器</span></span></font></li></ul></ul></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">代理服务器注意点：</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">http的url地址要使用http的代理，https的要使用https的代理</span></li><li><span style="font-size: 9pt; line-height: 1.45;">透明度低的代理能够被对方服务器找到我们的真实的ip，可能会导致代理的效果不明显</span></li></ul></ul><div><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">cookie与session的请求</span></span></font></div></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">cookie和session的区别</span></font></li><ul><li><span style="font-size: 9pt;">cookie存在浏览器本地，session在服务端</span></li><li><span style="font-size: 9pt;">cookie不安全，session不会将数据暴露在客户端，比较安全</span></li><li><span style="font-size: 9pt;">session占用性能，会加长请求的时间</span></li><li><span style="font-size: 9pt;">cookie存储是有上限的，session没有</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">请求带上cookies的好处</span></font></li><ul><li><span style="font-size: 9pt;">能够请求登陆后的页面</span></li><li><span style="font-size: 9pt;">带上cookie反反扒，用登录成功的cookie来进行伪造</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">伪造请求带上cookie的不好的地方</span></font></li><ul><li><span style="font-size: 9pt;">使用同一个cookie，不间断的访问同一个服务器的时候，可以被对方识别为爬虫</span></li><li><span style="font-size: 9pt;">解决方法：使用多个用户名密码，多账号，随机选用账号进行服务器的访问，模拟多人访问</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">模拟登录cookie/session请求的方法</span></font></li><ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.600000381469727px;">第一种</span></font></li><ul><li><span style="font-size: 9pt;">session请求登录接口</span></li><ul><li><span style="font-size: 9pt;">实例化一个session对象</span></li><ul><li><span style="font-size: 9pt;">session = requests.session()</span></li></ul><li><span style="font-size: 9pt;">使用session请求登录接口，session对象会将响应中的cookie进行保存</span></li><ul><li><span style="font-size: 9pt;">session.post(url, data=data, headers=headers)</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">也可以使用get请求</span></li></ul></ul><li><span style="font-size: 9pt;">再使用session对象请求其他需要登录的url地址，会自动带上cookie进行访问</span></li><ul><li><span style="font-size: 9pt;">response =session.get(url, params=params, headers=headers)</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">session对象的作用</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">对响应的cookie进行保存，后面的访问会自动携带cookie</span></li></ul></ul></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">第二种</span></font></li><ul><li><span style="font-size: 12px; line-height: 13.600000381469727px;">要获取了登录后的cookie请求字符串</span></li><li><span style="font-size: 9pt;">headers中放cookie请求头字符串</span></li></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.600000381469727px;">第三种</span></font></li><ul><li><span style="font-size: 9pt;">把cookie的每一个name和value组成一个字典</span></li><li><span style="font-size: 9pt;">将字典传给requests请求中的cookies参数接收</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">获取response中的cookie的方法</span></font></li><ul><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">获取response中的cookie对象</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">response.cookies      获取respone的cookie对象</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">response.cookies只能获取服务器主动设置的cookie，不能获取我们手动创建的cookie</span></li><li><font style="font-size: 12px;"><span style="font-size: 12px; line-height: 13.600000381469727px;">返回的数据类型是列表嵌套字典，每一个字典包含一个cookie的所有信息</span></font></li></ul></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.600000381469727px;">将cookie对象转化为字典类型的方法</span></font></li><ul><li><font style="font-size: 12px;"><span style="font-size: 12px; line-height: 13.600000381469727px;">requests.utils.dict_from_cookiejar(response.cookies)</span></font></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">将python字典类型转化为cookie对象类型</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">requests.utils.cookiejar_from_dict( {'key': value } )</span></li></ul></ul></ul><div><span style="font-size: 18.399999618530273px; background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 18.399999618530273px; color: rgb(50, 135, 18); font-weight: bold; line-height: 21.600000381469727px;-evernote-highlight:true;">requests请求常见问题</span></span></div><div><ul><li><span style="font-size: 10pt; line-height: 1.45;"> </span><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">SSl证书验证问题</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">问题产生原因</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">请求协议为https的网站需要向机构申请证书，这样用户才能直接通过https访问，但是有的网站（比如12306）的整数是自己研发的，这样浏览器不会在进行请求的时候，会产生一个证书异常，我们需要点击浏览器上的继续访问，来请求服务器，当我们使用爬虫来进行访问的时候，会直接报出异常</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">解决办法：</span></font></li><ul><li><span style="font-size: 9pt;">response = requests.get(&quot;</span><a href="https://www.12306.cn/mormhweb/" style="font-size: 9pt;" target="_blank" rel="noopener">https://www.12306.cn/mormhweb/</a> <span style="font-size: 9pt;">&quot;, verify=False)</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在请求非机构证书的网站的时候，我们需要在请求方法中加上verify=False 的参数，就不会报异常</span></li></ul></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">请求超时问题</span></font></li><ul><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">问题产生原因</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">当我们进行请求的时候，我们可能因为在请求摸一个url的时候产生一些异常，导致长时间没有请求成功，由于请求一直在进行，导致后面的程序无法正常执行，验证影响程序的效率或者导致程序终止</span></li></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">解决办法</span></span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">应用到的方法</span></font></li><ul><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">from retrying import retry   </span></li><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">@retry(stop_max_attempt_number=n)      装饰函数，表示函数如果报错将会再次执行，直到第n次如果依然报错，那将抛出异常</span></font></li><li><span style="font-size: 9pt;"> response = requests.get(url,timeout=10)     </span><span style="font-size: 9pt; line-height: 13.600000381469727px;">设置请求的超时时间，如果限定时间内没有请求成功，将会抛出异常</span></li><li><span style="line-height: 1.45; font-size: 9pt;">assert response.status_code == m      assert为断言关键字，如果后面的条件表达式为false将会排出异常</span></li></ul><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">示例：</span></li><ul><li><img src="/e_img/Request模块-请求获取响应_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="312"></li></ul></ul></ul></ul></div></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">数据处理的技巧</span></span></div><div><ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">字符串的格式化</span></li><ul><li><span style="line-height: 1.45; font-size: 9pt;">&quot;abc{}abc&quot;.format()</span></li><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">不同于%号的格式化，{ }方式的格式化，可以接收任意类型的格式化</span></li><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">format  接收的参数与格式化{ }的数量相等</span></li><li><span style="line-height: 13.600000381469727px; font-size: 9pt;">在通过字符串格式化构建url进行requests请求时候，尽量使用{ }来格式化，因为在浏览器会将url格式化，%有时候会按照特殊字符</span><span style="font-size: 9pt; line-height: 13.600000381469727px;">处理；</span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;"> json数据与字符串之间的转化</span></li><ul><li><span style="line-height: 15.199999809265137px;">import json</span></li><li><span style="font-size: 9pt; line-height: 1.45;">json.dumps( dict)    把python类型字典数据转化为json字符串</span></li><li><span style="font-size: 9pt; line-height: 1.45;">json.loads('json' )    把json数据转化为python的字典类型</span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">扁平化赋值表达式</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">name = &quot;a&quot; if lang==b else &quot;c&quot;  </span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">if后面的条件如果成立，那么就把if前的值赋给str</span></li><li><span style="font-size: 9pt; line-height: 1.45;">否则if否面的条件不成立，就把else后的值赋给str</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">name = a and 'b' or 'c' </span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">如果a为true，name等于b</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">如果a为false，name等于c</span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">列表推导式和字典推导式</span></li><ul><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">列表推倒式</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">[i for i in range(10) if i%2==0]</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">字典推导式</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">{i+1:i for i in range(10) if i%3==0}</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">注意：</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">在列表推导式中可以使用if判断，但是不能够使用else</span></li></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">tips</span></span></div><ul><li><span style="font-size: 14px; font-weight: bold; line-height: 13.600000381469727px;">linux命令重命名</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">作用</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">可以将一段的linux命令，重名为其他比较短而且容易记忆的命令，方便我们的调用</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">设置方法</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">修改家目录下的.bashrc文件</span></li><li><span style="font-size: 9pt; line-height: 1.45;">添加  alias  新的命令='原命令 -选项/参数'</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">保存退出   source .bashrc</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">已经可以使用新的命令了 </span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">将数据写入文件</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">文件存储内容的方法</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">with open('文件路径', encoding='utf-8') as f:</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">f.write(content)</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">encoding 如果文件不存在，相当于我们创建一个文件进行写入，我们可以通过encoding来指定写入内容的编码格式，如果不指定，可能会报错</span></li></ul></ul></ul></ul></ul><div><br></div><div><span style="font-size: 18.399999618530273px; background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 18.399999618530273px; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">常见的反扒思路</span></span></div><ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">尽量减少请求的次数</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">能抓列表页不抓详细页</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">保存html页面，有利于重复使用</span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">多分析一个网站的不同类型页面</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">手机极速版页面</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">wap手机版页面</span></li><li><span style="font-size: 12px; line-height: 13.600000381469727px;">web网页</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">app抓包软件</span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">进行请求伪装</span></li><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">多带一些请求头，有的时候请求头带的不同，服务器返回的结果不同</font></span></li><li><font style="font-size: 9pt;">代理ip，设置代理ip池，定期更新代理ip池</font></li><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">在浏览器会根据cookie内容判断爬虫的时候，携带cookie（但是注意不要一直携带同一个cookie）</font></span></li><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">需要获取登录之后的数据的时候，要进行模拟登录，获取cookie后，在进行数据的获取</font></span></li></ul><li><span style="font-size: 10pt; font-weight: bold;">利用多线程/分布式（尽可能的快速抓取）</span></li><ul><li><span style="font-size: 9pt;">在可能的情况下尽可能的使用多线程和分布式爬虫</span></li></ul></ul></div><div><br></div></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>爬虫基础介绍</title>
      <link href="/2017/01/06/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80%E7%9B%B8%E5%85%B3-%E4%BB%8B%E7%BB%8D/"/>
      <url>/2017/01/06/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80%E7%9B%B8%E5%85%B3-%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<html><body><div><span><div><font style="font-size: 14pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">爬虫的介绍</span></font></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">爬虫的定义</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">  模拟浏览器其发送请求，获取到和浏览器一模一样的数据</span></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">  浏览器能够看到的，我们爬虫才能够获取到，否则是没有办法获取到的，</span><span style="font-size: 9pt; line-height: 13.6px;">所以，只要浏览器能做的事情，原则上，爬虫都能做</span></font></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">爬虫获取的数据的用途</span></div></li></ul></div><div><ul><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">呈现数据，呈现在app或者在网站上</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">伪造网站请求，进行自动的访问网站</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">进行数据分析，获得结论</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">爬虫的分类</span></div></li></ul></div><div><ul><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">通用爬虫：</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">搜索引擎的爬虫，通常指搜索引擎的爬虫</span><span style="font-size: 9pt; line-height: 1.45;">，<span style="font-size: 9pt; line-height: 1.45;">通用网络爬虫利用<span style="font-size: 9pt; line-height: 1.45; font-weight: bold;">种子url</span></span><span style="font-size: 9pt; line-height: 1.45;">从互联网中搜集网页，采集信息，这些网页信息用于为搜索引擎建立索引从而提供支持，它决定着整个引擎系统的内容是否丰富，信息是否即时，因此其性能的优劣直接影响着搜索引擎的效果。</span></span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">聚焦爬虫：</span></span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">针对特定网站的爬虫，指定url进行爬取，有明确的爬取目标</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">通用爬虫工作原理</span></font></div></li><ul><li><div><font style="font-size: 12px;"><span style="font-size: 12px; line-height: 13.6px;">第一步：数据抓取</span></font></div></li><ul><li><div><span style="font-size: 9pt;">首先选取一部分的种子URL，将这些URL放入待抓取URL队列；</span></div></li><li><div><span style="font-size: 9pt;">取出待抓取URL，解析DNS得到主机的IP，并将URL对应的网页下载下来，存储进已下载网页库中，并且将这些URL放进已抓取URL队列。</span></div></li><li><div><span style="font-size: 9pt;">分析已抓取URL队列中的URL，分析其中的其他URL，并且将URL放入待抓取URL队列，从而进入下一个循环....</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">第二步：数据存储</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">搜索引擎通过爬虫爬取到的网页，将数据存入原始页面数据库。其中的页面数据与用户浏览器得到的HTML是完全一样的。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">搜索引擎蜘蛛在抓取页面时，也做一定的重复内容检测，一旦遇到访问权重很低的网站上有大量抄袭、采集或者复制的内容，很可能就不再爬行。</span></div></li></ul><li><div><span style="font-size: 9pt;">第三步：预处理</span></div></li><ul><li><div><span style="font-size: 9pt;">搜索引擎将爬虫抓取回来的页面，进行各种步骤的预处理。</span></div></li><li><div><span style="font-size: 9pt;">提取文字</span></div></li><li><div><span style="font-size: 9pt;">中文分词</span></div></li><li><div><span style="font-size: 9pt;">消除噪音（比如版权声明文字、导航条、广告等……）</span></div></li><li><div><span style="font-size: 9pt;">索引处理</span></div></li><li><div><span style="font-size: 9pt;">链接关系计算</span></div></li><li><div><span style="font-size: 9pt;">特殊文件处理</span></div></li></ul><li><div><span style="font-size: 9pt;">第四步：提供检索服务，网站排名</span></div></li><ul><li><div><span style="font-size: 9pt;">搜索引擎在对信息进行组织和处理后，为用户提供关键字检索服务，将用户检索相关的信息展示给用户。</span></div></li><li><div><span style="font-size: 9pt;">同时会根据页面的PageRank值（链接的访问量排名）来进行网站排名，这样Rank值高的网站在搜索结果中会排名较前，当然也可以直接使用 Money 购买搜索引擎网站排名，简单粗暴。</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">通用爬虫的局限性</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">通用搜索引擎所返回的网页里90%的内容无用。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">图片、音频、视频多媒体的内容通用搜索引擎无能为力</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">不同用户搜索的目的不全相同，但是返回内容相同</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">聚焦爬虫的工作流程</span></div></li></ul></div><div><ul><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/爬虫基础相关-介绍_files/Image.png" type="image/png" data-filename="Image.png" width="223"></span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">爬虫爬取哪些数据</span></div></li><ul><li><div><span style="font-size: 9pt;">教育机构：其他教育机构的开班，招生，就业，口碑</span></div></li><li><div><span style="font-size: 9pt;">资讯公司：特定领域的新闻数据的爬虫</span></div></li><li><div><span style="font-size: 9pt;">金融公司：关于各个公司的动态的信息，</span></div></li><li><div><span style="font-size: 9pt;">酒店/旅游：携程，去哪儿的酒店价格信息/机票，景点价格，其他旅游公司价格信息</span></div></li><li><div><span style="font-size: 9pt;">房地产、高铁：10大房地产楼盘门户网站，政府动态等</span></div></li><li><div><span style="font-size: 9pt;">强生保健医药：医疗数据，价格，目前的市场的行情</span></div></li></ul></ul></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">Robots协议：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">网站通过Robots协议告诉搜索引擎哪些页面可以抓取，哪些页面不能抓取。</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">这个协议之是道德层面的协议，这个协议并不能从技术上阻止去对其网站进行爬取。</span></div></li><li><div><span style="font-size: 9pt;">例如：</span><a href="https://www.taobao.com/robots.txt" style="font-size: 9pt;" target="_blank" rel="noopener">https://www.taobao.com/robots.txt</a></div></li></ul></ul><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">HTTP/HTTPS协议</span></div></div><div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">url的形式</span></div></li><ul><li><div><span style="font-size: 9pt;">url表现形式：scheme://host[:port#]/path/…/[?query-string][#anchor]</span></div></li><ul><li><div><span style="font-size: 9pt;">scheme：协议(例如：http, https, ftp)</span></div></li><li><div><span style="font-size: 9pt;">host：服务器的IP地址或者域名</span></div></li><li><div><span style="font-size: 9pt;">port：服务器的端口（如果是走协议默认端口，80  or    443）</span></div></li><li><div><span style="font-size: 9pt;">path：访问资源的路径</span></div></li><li><div><span style="font-size: 9pt;">query-string：参数，发送给http服务器的数据</span></div></li><li><div><span style="font-size: 9pt;">anchor：锚（跳转到网页的指定锚点位置）</span></div></li><li><div><span style="font-size: 9pt;">示例：</span><a href="http://localhost:4000/file/part01/1.2.htmlhttp://item.jd.com/11936238.html#product-detail" style="font-size: 9pt;" target="_blank" rel="noopener">http://localhost:4000/file/part01/1.2.htmlhttp://item.jd.com/11936238.html#product-detail</a></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">HTTP/HTTPS的区别</span></div></li><ul><li><div><span style="font-size: 9pt;">HTTP</span></div></li><ul><li><div><span style="font-size: 9pt;">超文本传输协议 </span></div></li><li><div><span style="font-size: 9pt;">默认端口号:80</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">HTTPS</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">HTTP + SSL(安全套接字层)</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">默认端口号：443</span></div></li></ul><li><div><span style="font-size: 9pt;">HTTP和HTTPS区别</span></div></li><ul><li><div><span style="font-size: 9pt;">浏览器默认请求服务器是以HTTP协议进行请求，如果服务器支持HTTPS协议，会返回给浏览器端一个协议相关的响应，浏览器会重新发起HTTPS协议的请求；</span></div></li><li><div><span style="line-height: 13.6px;"> </span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">HTTP请求报文的形式</span></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/爬虫基础相关-介绍_files/Image [1].png" type="image/png" data-filename="Image.png" width="357"></span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">http的请求过程</span></div></li><ul><li><div><span style="font-size: 9pt;">域名---&gt;dns（拿ip）---&gt;浏览器请求ip---&gt;服务器---&gt;返回资源</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold;">HTTP常见的请求头</span></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">1. Host (主机和端口号)</span></span></div></li><ul><li><div><span style="font-size: 9pt;">对应网址URL中的Web名称和端口号，用于指定被请求资源的Internet主机和端口号，通常属于URL的Host部分</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">2. Connection (链接类型)</span></span></div></li><ul><li><div><span style="font-size: 9pt;">keep-alive  客户端携带表示支持长连接</span></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">keep-alive  服务器端如果回复<span style="font-size: 9pt; line-height: 13.6px;">keep-alive， 代表允许双方建立长连接</span></span></font></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">close： 服务器端回复close，代表不允许建立长连接，浏览器接收到响应后会主动断开连接</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">3. Upgrade-Insecure-Requests (浏览器支持升级为HTTPS请求)</span></span></div></li><ul><li><div><span style="font-size: 9pt;">升级不安全的请求，意思是会在加载 http 资源时自动替换成 https 请求，让浏览器不再显示https页面中的http请求警报。</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">4. User-Agent (浏览器名称)</span></span></div></li><ul><li><div><span style="font-size: 9pt;">对方的服务器通过User-Agent判断出来我们是一个手机版的浏览器还是电脑版的，同时能够判断出来浏览器的平台，型号，版本，内核版本</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">5. Accept (传输文件类型)</span></span></div></li><ul><li><div><span style="font-size: 9pt;">Accept: */*</span><span style="font-size: 9pt;">：表示什么都可以接收。</span></div></li><li><div><span style="font-size: 9pt;">Accept：image/gif</span><span style="font-size: 9pt;">：表明客户端希望接受GIF图像格式的资源；</span></div></li><li><div><span style="font-size: 9pt;">Accept：text/html</span><span style="font-size: 9pt;">：表明客户端希望接受html文本。</span></div></li><li><div><span style="font-size: 9pt;">Accept: text/html, application/xhtml+xml;q=0.9, image/*;q=0.8</span><span style="font-size: 9pt;">：表示浏览器支持的 MIME 类型分别是 html文本、xhtml和xml文档、所有的图像格式资源。</span></div></li><ul><li><div><span style="font-size: 9pt;">q是权重系数，范围 0 =&lt; q &lt;= 1，q 值越大，请求越倾向于获得其“;”之前的类型表示的内容。若没有指定q值，则默认为1，按从左到右排序顺序；若被赋值为0，则用于表示浏览器不接受此内容类型。</span></div></li><li><div><span style="font-size: 9pt;">text：用于标准化地表示的文本信息，文本消息可以是多种字符集和或者多种格式的；</span></div></li><li><div><span style="font-size: 9pt;">application用于传输应用程序数据或者二进制数据。</span></div></li></ul></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">6. Referer (页面跳转处)</span></span></div></li><ul><li><div><span style="font-size: 9pt;">表明产生请求的网页来自于哪个URL，用户是从该 Referer页面访问到当前请求的页面。这个属性可以用来跟踪Web请求来自哪个页面，是从什么网站来的等。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">防盗链：有时候遇到下载某网站图片，需要对应的referer，否则无法下载图片，那是因为人家做了防盗链，原理就是根据referer去判断是否是本网站的地址，如果不是，则拒绝，如果是，就可以下载。</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">7. Accept-Encoding（文件编解码格式）</span></span></div></li><ul><li><div><span style="font-size: 9pt;">指出浏览器可以接受的编码方式。编码方式不同于文件格式，它是为了压缩文件并加速文件传递速度。浏览器在接收到Web响应之后先解码，然后再检查文件格式，许多情形下这可以减少大量的下载时间。</span></div></li><li><div><span style="font-size: 9pt;">举例：Accept-Encoding:gzip;q=1.0, identity; q=0.5, *;q=0</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">8. Cookie （Cookie）</span></span></div></li><ul><li><div><span style="font-size: 9pt;">cookies 能够记录用户信息，会在请求的时候一起传递给对方的服务器，对方的服务器能够根据cookie判断出来是否登陆过（用户的状态）</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">9. x-requested-with :XMLHttpRequest  (是Ajax 异步请求)</span></span></div></li><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">10.</span><span style="font-size: 9pt; font-weight: bold;">Accept-Language   (接受语言)</span></span></div></li><ul><li><div><span style="font-size: 9pt;">指出浏览器可以接受的语言种类，如en或en-us指英语，zh或者zh-cn指中文，当服务器能够提供一种以上的语言版本时要用到。</span></div></li></ul><li><div><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">11.</span><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">Accept-Charset（字符编码）</span></font></div></li><ul><li><div><span style="font-size: 9pt;">指出浏览器可以接受的字符编码。</span></div></li><li><div><span style="font-size: 9pt;">举例：Accept-Charset:iso-8859-1,gb2312,utf-8</span></div></li></ul><li><div><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">12.</span><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">Content-Type (POST数据类型)</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Content-Type：POST请求里用来表示的内容类型。</span></div></li><li><div><span style="font-size: 9pt;">举例：Content-Type = Text/XML; charset=gb2312：</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">0.请求体</span></span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">常见的请求方法</span></div></li><ul><li><div><span style="font-size: 9pt;">GET</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">特点：请求所带参数包含在url中，显示在地址栏，请求数据可以被缓存，请求参数有长度限制，请求速度快</span></font></div></li></ul><li><div><span style="font-size: 9pt;">P</span><span style="font-size: 9pt; line-height: 1.45;">OST</span></div></li><ul><li><div><span style="font-size: 9pt;">特点：请求所带参数在请求体中，请求数据不可以被缓存，请求数据没有长度限制，请求速度慢</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">常用的响应报头</span></div></li><ul><li><div><span style="font-size: 9pt;">1. Cache-Control：must-revalidate, no-cache, private。</span></div></li><ul><li><div><span style="font-size: 9pt;">告诉客户端，对资源的缓存建议；</span></div></li></ul><li><div><span style="font-size: 9pt;">2. Connection：keep-alive</span></div></li><ul><li><div><span style="font-size: 9pt;">作为回应客户端的Connection：keep-alive，告诉客户端是否同意建立长连接；</span></div></li></ul><li><div><span style="font-size: 9pt;">3. Content-Encoding:gzip</span></div></li><ul><li><div><span style="font-size: 9pt;">告诉客户端，服务端发送的资源是采用gzip编码的；</span></div></li></ul><li><div><span style="font-size: 9pt;">4. Content-Type：text/html;charset=UTF-8</span></div></li><ul><li><div><span style="font-size: 9pt;">告诉客户端，资源文件的类型，还有字符编码；</span></div></li></ul><li><div><span style="font-size: 9pt;">5. Date：Sun, 21 Sep 2016 06:18:21 GMT</span></div></li><ul><li><div><span style="font-size: 9pt;">这个是服务端发送资源时的服务器时间，GMT是格林尼治所在地的标准时间。</span></div></li></ul><li><div><span style="font-size: 9pt;">6. Expires:Sun, 1 Jan 2000 01:00:00 GMT</span></div></li><ul><li><div><span style="font-size: 9pt;">告诉客户端在这个时间前，缓存的到期时间</span></div></li></ul><li><div><span style="font-size: 9pt;">7. Pragma:no-cache</span></div></li><ul><li><div><span style="font-size: 9pt;">这个含义与Cache-Control等同。</span></div></li></ul><li><div><span style="font-size: 9pt;">8.Server：Tengine/1.4.6</span></div></li><ul><li><div><span style="font-size: 9pt;">这个是服务器和相对应的版本，只是告诉客户端服务器的信息。</span></div></li></ul><li><div><span style="font-size: 9pt;">9. Transfer-Encoding：chunked</span></div></li><ul><li><div><span style="font-size: 9pt;">这个响应头告诉客户端，服务器发送的资源的方式是分块发送的</span><span style="font-size: 9pt; line-height: 1.45;">。</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">HTTP常见响应状态码</span></div></li><ul><li><div><span style="font-size: 9pt;">100~199：表示服务器成功接收部分请求，要求客户端继续提交其余请求才能完成整个处理过程</span><span style="font-weight: bold;">。</span></div></li><li><div><span style="font-size: 9pt;">200：<span style="font-size: 9pt;">表示服务器成功接收请求并已完成整个处理过程</span></span></div></li><ul><li><div><span style="font-size: 9pt;">200~299：表示服务器成功接收请求并已完成整个处理过程。常用200（OK 请求成功）。</span></div></li></ul><li><div><span style="font-size: 9pt;">302：临时转移至新的url</span></div></li><ul><li><div><span style="font-size: 9pt;">300~399表示请求转</span></div></li></ul><li><div><span style="font-size: 9pt;">307：临时转移至新的url</span></div></li><li><div><span style="font-size: 9pt;">404：not found</span></div></li><ul><li><div><span style="font-size: 9pt;">400~499：客户端的请求有错误，常用404（服务器无法找到被请求的页面）、403（服务器拒绝访问，权限不够）。</span></div></li></ul><li><div><span style="font-size: 9pt;">500：服务器内部错误</span></div></li></ul><li><div><span style="font-weight: bold;">为什么浏览器渲染出来的页面和爬虫请求的页面不一样</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">爬虫请求结果</span></div></li><ul><li><div><span style="font-size: 9pt;">爬虫只会请求当前url地址，不会主动请求js，所以往往当前URL对应的响应和element的内容不一样</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">浏览器</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">浏览器请求服务器渲染出来的界面，以及最终的在终端element显示的内容，和爬虫爬取到的不一样，因为浏览器会对页面中的静态文件的url进行请求，将请求结果渲染到浏览器中，导致最终的网页代码和显示的结果，已经是被js文件进行修改过；</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">在哪里查看当前url地址对应的响应（不包括对静态文件请求的响应）：</span></div></li><ul><li><div><span style="font-size: 9pt;">抓包（network），network下的第一个url地址，当前url地址的response</span></div></li><li><div><span style="font-size: 9pt;">右键显示网页源码</span></div></li></ul></ul><div><br></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">字符串和字节（str/ bytes）</span></span></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">python3 字符串应用的字符集</span></font></div></li><ul><li><div><span style="font-size: 9pt;">str ：unicode的呈现形式（python3应用的unicode的子集utf-8的形式对字符串进行呈现）</span></div></li><li><div><span style="font-size: 9pt;">bytes：二进制互联网上数据的都是以二进制的方式传输的，bytes是二进制格式的字符串</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">对服务器的请求，要将请求数据先转化为bytes格式；</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">获取到服务器的响应要将获取到的bytes类型的数据，进行字符串的转化</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">Unicode/UTF8/ASCII字符集的介绍</span></div></li><ul><li><div><span style="font-size: 9pt;">字符(Character)</span></div></li><ul><li><div><span style="font-size: 9pt;">各种文字和符号的总称，包括各国家文字、标点符号、图形符号、数字等</span></div></li></ul><li><div><span style="font-size: 9pt;">字符集(Character set)</span></div></li><ul><li><div><span style="font-size: 9pt;">多个字符的集合字符集包括：</span></div></li><ul><li><div><span style="font-size: 9pt;">ASCII字符集、GB2312字符集、GB18030字符集、Unicode字符集</span></div></li><li><div><span style="font-size: 9pt;">ASCII编码是1个字节，而Unicode编码通常是2个字节，UTF-8是Unicode的实现方式之一，它是一种变长的编码方式，可以是1，2，3个字节（一句字符的内容而定）</span></div></li></ul></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">str到bytes之间的转化（</span><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">str、bytes</span><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">）</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">python3中字节和字符之间转化的方法</span></div></li><ul><li><div><span style="font-size: 9pt;">从str---&gt; bytes：str使用encode方法转化为 bytes</span></div></li><li><div><span style="font-size: 9pt;">从bytes---&gt; str：bytes通过decode转化为str</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">注意：</span></div></li><ul><li><div><span style="font-size: 9pt;">编码方式解码方式必须一样，否则就会出现乱码</span></div></li></ul></ul></ul></ul></div><div><br></div></span></div></body></html>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>正则表达式</title>
      <link href="/2016/12/12/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2016/12/12/4.python%E7%88%AC%E8%99%AB/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="正则表达式介绍"><a href="#正则表达式介绍" class="headerlink" title="正则表达式介绍"></a>正则表达式介绍</h3><p><strong>什么是正则表达式</strong></p><p>Regular Expression, 又称规则表达式。<br>正则表达式就是用事先定义好的一些特定字符（组合），组成一个“规则字符串”，这个“规则字符串”用来描述一种字符串的匹配模式（pattern）；</p><p><strong>正则的作用</strong></p><p>可以用来检查一个字串是否包含某种子串、将匹配的子串替换或者取出</p><p><strong>正则的特点</strong></p><p>灵活性、逻辑性和功能性非常强大</p><a id="more"></a><h3 id="正则表达式的使用方法"><a href="#正则表达式的使用方法" class="headerlink" title="正则表达式的使用方法"></a>正则表达式的使用方法</h3><h4 id="re模块常用函数和方法"><a href="#re模块常用函数和方法" class="headerlink" title="re模块常用函数和方法"></a>re模块常用函数和方法</h4><ul><li>import  re</li><li>result_obj = re.search(正则表达式， 数据，flag=0）     —-查找数据中第一个符合匹配规则的字符串<ul><li>search()函数从数据中只能查找到第一个符合正则数据放到result_obj中，  如果没有匹配到想要匹配的结果会返回None</li></ul></li><li>result_obj.group()      —-查看正则匹配的结果内容<ul><li>result_obj.group(1， 2/ 组名) 返回需要组的匹配的结果，返回一个包含多个组匹配结果的元组；    result_obj.group() == result_obj.group(0) == 正个正则表达式所有匹配的字符</li></ul></li></ul><h4 id="re模块其他常用方法"><a href="#re模块其他常用方法" class="headerlink" title="re模块其他常用方法"></a>re模块其他常用方法</h4><p><img src="/img/1541300873462.png" alt="1541300873462"></p><h4 id="compile-编译"><a href="#compile-编译" class="headerlink" title="compile 编译"></a>compile 编译</h4><ul><li><p>作用</p><ul><li>对正则表达式匹配规则进行预编译，在大量使用到正则的时候，可以提高匹配的速度</li></ul></li><li><p>使用方法</p><ul><li>p = re.compile(‘匹配规则’,  re.DATALL)</li><li>p.search(‘字符串’)       按照编译的规则对字符串进行匹配正则表达式中的特殊字符<ul><li>匹配单个字符</li></ul></li></ul></li></ul><h3 id="正则表达式常用匹配方式"><a href="#正则表达式常用匹配方式" class="headerlink" title="正则表达式常用匹配方式"></a>正则表达式常用匹配方式</h3><h4 id="匹配单个字符"><a href="#匹配单个字符" class="headerlink" title="匹配单个字符"></a>匹配单个字符</h4><p><img src="/img/1541301141193.png" alt="1541301141193"></p><ul><li>空白字符\s == [ \f\n\r\t\v]   非空白字符 \S == [^\f\t\v\n\r]   </li><li>在正则表达式中若只是想要匹配一个像特殊字符的普通字符需要在特殊字符前面加转义字符“\” 例如“.”</li><li>特殊字符在[ ]中例如：[.    |   * + ？等 ]没有特殊功能只代表普通字符</li><li>在[ ]中若是想使用“-”普通字符要加上转义字符\</li></ul><h4 id="匹配多个字符"><a href="#匹配多个字符" class="headerlink" title="匹配多个字符"></a>匹配多个字符</h4><p><img src="/img/1541301215631.png" alt="1541301215631"></p><h4 id="常用定位符"><a href="#常用定位符" class="headerlink" title="常用定位符"></a>常用定位符</h4><p><img src="/img/1541301242792.png" alt="1541301242792"></p><h4 id="正则表达式的分组"><a href="#正则表达式的分组" class="headerlink" title="正则表达式的分组"></a>正则表达式的分组</h4><p><img src="/img/1541301315452.png" alt="1541301315452"></p><ul><li>注意: <ul><li>在使用（|）的时候尽量使特殊的或者通用的变量放在前边</li><li>在引用分组的时候注意：\num表示八进制数num所表示的普通ASCII码字符，所以在引用的时候会默认表示ascii码字符，所以要注意转义或者使用原生字符串</li></ul></li></ul><h4 id="匹配所有的汉字的方法"><a href="#匹配所有的汉字的方法" class="headerlink" title="匹配所有的汉字的方法"></a>匹配所有的汉字的方法</h4><ul><li>re.compole(r’[\u4e00-\u9fa5]’)<br>  备注：匹配所有unicode编码的中文</li></ul><h3 id="正则表达式的贪婪与懒惰"><a href="#正则表达式的贪婪与懒惰" class="headerlink" title="正则表达式的贪婪与懒惰"></a>正则表达式的贪婪与懒惰</h3><h4 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h4><ul><li>贪婪-尽可能多的匹配</li><li>懒惰-尽可能少的匹配<h4 id="默认为贪婪模式的匹配模式"><a href="#默认为贪婪模式的匹配模式" class="headerlink" title="默认为贪婪模式的匹配模式"></a>默认为贪婪模式的匹配模式</h4></li><li>在python中 +/*/{m,n}默认情况下总是贪婪的<h4 id="如何让贪婪模式变为懒惰模式"><a href="#如何让贪婪模式变为懒惰模式" class="headerlink" title="如何让贪婪模式变为懒惰模式"></a>如何让贪婪模式变为懒惰模式</h4></li><li>在量词后加上一个?</li><li>例子：<br><img src="/img/1541301444152.png" alt="1541301444152"></li></ul><h3 id="原生字符串的应用"><a href="#原生字符串的应用" class="headerlink" title="原生字符串的应用"></a>原生字符串的应用</h3><h4 id="特殊字符的转义"><a href="#特殊字符的转义" class="headerlink" title="特殊字符的转义"></a>特殊字符的转义</h4><p>在表达式中如果包含“\”表示转义\后面的字符为八进制数字代表的ascii对应的特殊字符，在python中会对ascii包含的数字或者字符进行转义，这种情况会导致会将匹配规则的字符进行转义，结果不能匹配到想要匹配的字符串内容</p><h4 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h4><ul><li>取消转义<br>  在每一个’\’字符前加上’\’，对”\’进行转义，这样会取消\的转义功能，将\只代表一个\字符，不会对后边的字符进行转义<br>  ascii不包括的字符，如果前边有转义字符\，不需要加以转义，python会自动转义</li><li><p>原生字符串<br>  如果在表达式或字符串前边加上r“”对字符串中的\字符自动转义<br>  在使用的时候，匹配规则可以和想要匹配的内容写法相同，r会自动帮我们转义<br>  示例： re.search(r’abc\nabc’, ‘abc\nabc’)</p><h3 id="正则表达式的常见问题"><a href="#正则表达式的常见问题" class="headerlink" title="正则表达式的常见问题"></a>正则表达式的常见问题</h3><blockquote><p>如何让 . 特殊符号可以匹配所有内容（包括\n）</p></blockquote></li><li><p>解决办法：<br>  使用re.DOTALL 参数</p></li><li>示例：<br>  re.findall(r’abc.’,  ‘abc\n\nsfgs’, re.DOTALL)<br>  备注：也可以使用re.S 代替re.DOTALL 效果上是一样的<h3 id="Ascii码对应关系"><a href="#Ascii码对应关系" class="headerlink" title="Ascii码对应关系"></a>Ascii码对应关系</h3></li><li><p>在字符串，或者正则表达式中，\n\t等控制字符 或者 \数字（表示八进制的num所表示的普通ascii码）等显示字符，在应用的时候会默认为在调用ascii码的控制字符或者是显示字符，所以如果只是想表达单纯的字符 需要用\n或者r””这种形式进行转意，可以使用chr（八进制数）来查询对应的ascii字符</p></li><li><p><strong>ascii码表</strong></p><p><img src="/img/1541301800714.png" alt="1541301800714"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> python爬虫 </category>
          
          <category> 爬虫基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> 正则表达式 </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
